/*

 jPlayer Plugin for jQuery JavaScript Library
 http://www.jplayer.org

 Copyright (c) 2009 - 2014 Happyworm Ltd
 Licensed under the MIT license.
 http://opensource.org/licenses/MIT

 Author: Mark J Panaghiston
 Version: 2.9.2
 Date: 14th December 2014

 Auto-growing textareas; technique ripped from Facebook
 https://github.com/jaz303/jquery-grab-bag/blob/f1a3cc1e86cbb248bcb41391d6eff115b1be6d89/javascripts/jquery.autogrow-textarea.js

 jQuery Hotkeys Plugin
 Copyright 2010, John Resig
 Dual licensed under the MIT or GPL Version 2 licenses.

 Based upon the plugin by Tzury Bar Yochay:
 http://github.com/tzuryby/hotkeys

 Original idea by:
 Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/
*/
(function(b){"function"===typeof define&&define.amd?define(["jquery","jquery.ui.widget"],b):b(window.jQuery)})(function(b){b.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader);b.support.xhrFormDataFileUpload=!!window.FormData;b.propHooks.elements={get:function(d){return b.nodeName(d,"form")?b.grep(d.elements,function(d){return!b.nodeName(d,"input")||"file"!==d.type}):null}};b.widget("blueimp.fileupload",{options:{dropZone:b(document),pasteZone:b(document),fileInput:void 0,replaceFileInput:!0,
paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,formData:function(b){return b.serializeArray()},add:function(b,f){f.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart",
"forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+new Date;this.bitrate=this.loaded=0;this.getBitrate=function(b,f,c){var a=b-this.timestamp;if(!this.bitrate||!c||a>c)this.bitrate=1E3/a*(f-this.loaded)*8,this.loaded=f,this.timestamp=b;return this.bitrate}},_isXHRUpload:function(d){return!d.forceIframeTransport&&(!d.multipart&&b.support.xhrFileUpload||b.support.xhrFormDataFileUpload)},_getFormData:function(d){var f;return"function"===typeof d.formData?d.formData(d.form):b.isArray(d.formData)?
d.formData:d.formData?(f=[],b.each(d.formData,function(c,a){f.push({name:c,value:a})}),f):[]},_getTotal:function(d){var f=0;b.each(d,function(c,a){f+=a.size||1});return f},_onProgress:function(b,f){if(b.lengthComputable){var c=+new Date,a,e;f._time&&f.progressInterval&&c-f._time<f.progressInterval&&b.loaded!==b.total||(f._time=c,a=f.total||this._getTotal(f.files),e=parseInt(b.loaded/b.total*(f.chunkSize||a),10)+(f.uploadedBytes||0),this._loaded+=e-(f.loaded||f.uploadedBytes||0),f.lengthComputable=
!0,f.loaded=e,f.total=a,f.bitrate=f._bitrateTimer.getBitrate(c,e,f.bitrateInterval),this._trigger("progress",b,f),this._trigger("progressall",b,{lengthComputable:!0,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(c,this._loaded,f.bitrateInterval)}))}},_initProgressListener:function(d){var f=this,c=d.xhr?d.xhr():b.ajaxSettings.xhr();c.upload&&(b(c.upload).bind("progress",function(a){var c=a.originalEvent;a.lengthComputable=c.lengthComputable;a.loaded=c.loaded;a.total=c.total;
f._onProgress(a,d)}),d.xhr=function(){return c})},_initXHRData:function(d){var f,c=d.files[0],a=d.multipart||!b.support.xhrFileUpload,e=d.paramName[0];d.headers=d.headers||{};d.contentRange&&(d.headers["Content-Range"]=d.contentRange);a?b.support.xhrFormDataFileUpload&&(d.postMessage?(f=this._getFormData(d),d.blob?f.push({name:e,value:d.blob}):b.each(d.files,function(a,c){f.push({name:d.paramName[a]||e,value:c})})):(d.formData instanceof FormData?f=d.formData:(f=new FormData,b.each(this._getFormData(d),
function(a,c){f.append(c.name,c.value)})),d.blob?(d.headers["Content-Disposition"]='attachment; filename="'+encodeURI(c.name)+'"',f.append(e,d.blob,c.name)):b.each(d.files,function(a,c){(window.Blob&&c instanceof Blob||window.File&&c instanceof File)&&f.append(d.paramName[a]||e,c,c.name)})),d.data=f):(d.headers["Content-Disposition"]='attachment; filename="'+encodeURI(c.name)+'"',d.contentType=c.type,d.data=d.blob||c);d.blob=null},_initIframeSettings:function(d){d.dataType="iframe "+(d.dataType||
"");d.formData=this._getFormData(d);d.redirect&&b("<a></a>").prop("href",d.url).prop("host")!==location.host&&d.formData.push({name:d.redirectParamName||"redirect",value:d.redirect})},_initDataSettings:function(b){this._isXHRUpload(b)?(this._chunkedUpload(b,!0)||(b.data||this._initXHRData(b),this._initProgressListener(b)),b.postMessage&&(b.dataType="postmessage "+(b.dataType||""))):this._initIframeSettings(b,"iframe")},_getParamName:function(d){var f=b(d.fileInput),c=d.paramName;c?b.isArray(c)||(c=
[c]):(c=[],f.each(function(){for(var a=b(this),e=a.prop("name")||"files[]",a=(a.prop("files")||[1]).length;a;)c.push(e),--a}),c.length||(c=[f.prop("name")||"files[]"]));return c},_initFormSettings:function(d){d.form&&d.form.length||(d.form=b(d.fileInput.prop("form")),d.form.length||(d.form=b(this.options.fileInput.prop("form"))));d.paramName=this._getParamName(d);d.url||(d.url=d.form.prop("action")||location.href);d.type=(d.type||d.form.prop("method")||"").toUpperCase();"POST"!==d.type&&"PUT"!==d.type&&
"PATCH"!==d.type&&(d.type="POST");d.formAcceptCharset||(d.formAcceptCharset=d.form.attr("accept-charset"))},_getAJAXSettings:function(d){d=b.extend({},this.options,d);this._initFormSettings(d);this._initDataSettings(d);return d},_enhancePromise:function(b){b.success=b.done;b.error=b.fail;b.complete=b.always;return b},_getXHRPromise:function(d,f,c){var a=b.Deferred(),e=a.promise();f=f||this.options.context||e;!0===d?a.resolveWith(f,c):!1===d&&a.rejectWith(f,c);e.abort=a.promise;return this._enhancePromise(e)},
_getUploadedBytes:function(b){return(b=(b=(b=b.getResponseHeader("Range"))&&b.split("-"))&&1<b.length&&parseInt(b[1],10))&&b+1},_chunkedUpload:function(d,f){var c=this,a=d.files[0],e=a.size,g=d.uploadedBytes=d.uploadedBytes||0,h=d.maxChunkSize||e,k=a.slice||a.webkitSlice||a.mozSlice,l=b.Deferred(),m=l.promise(),n,p;if(!(this._isXHRUpload(d)&&k&&(g||h<e))||d.data)return!1;if(f)return!0;if(g>=e)return a.error="Uploaded bytes exceed file size",this._getXHRPromise(!1,d.context,[null,"error",a.error]);
p=function(){var f=b.extend({},d);f.blob=k.call(a,g,g+h,a.type);f.chunkSize=f.blob.size;f.contentRange="bytes "+g+"-"+(g+f.chunkSize-1)+"/"+e;c._initXHRData(f);c._initProgressListener(f);n=(!1!==c._trigger("chunksend",null,f)&&b.ajax(f)||c._getXHRPromise(!1,f.context)).done(function(a,h,k){g=c._getUploadedBytes(k)||g+f.chunkSize;(!f.loaded||f.loaded<f.total)&&c._onProgress(b.Event("progress",{lengthComputable:!0,loaded:g-f.uploadedBytes,total:g-f.uploadedBytes}),f);d.uploadedBytes=f.uploadedBytes=
g;f.result=a;f.textStatus=h;f.jqXHR=k;c._trigger("chunkdone",null,f);c._trigger("chunkalways",null,f);g<e?p():l.resolveWith(f.context,[a,h,k])}).fail(function(a,g,e){f.jqXHR=a;f.textStatus=g;f.errorThrown=e;c._trigger("chunkfail",null,f);c._trigger("chunkalways",null,f);l.rejectWith(f.context,[a,g,e])})};this._enhancePromise(m);m.abort=function(){return n.abort()};p();return m},_beforeSend:function(b,f){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer);this._active+=
1;this._loaded+=f.uploadedBytes||0;this._total+=this._getTotal(f.files)},_onDone:function(d,f,c,a){if(!this._isXHRUpload(a)||!a.loaded||a.loaded<a.total){var e=this._getTotal(a.files)||1;this._onProgress(b.Event("progress",{lengthComputable:!0,loaded:e,total:e}),a)}a.result=d;a.textStatus=f;a.jqXHR=c;this._trigger("done",null,a)},_onFail:function(b,f,c,a){a.jqXHR=b;a.textStatus=f;a.errorThrown=c;this._trigger("fail",null,a);a.recalculateProgress&&(this._loaded-=a.loaded||a.uploadedBytes||0,this._total-=
a.total||this._getTotal(a.files))},_onAlways:function(b,f,c,a){--this._active;this._trigger("always",null,a);0===this._active&&(this._trigger("stop"),this._loaded=this._total=0,this._bitrateTimer=null)},_onSend:function(d,f){var c=this,a,e,g,h,k=c._getAJAXSettings(f),l=function(){c._sending+=1;k._bitrateTimer=new c._BitrateTimer;return a=a||((e||!1===c._trigger("send",d,k))&&c._getXHRPromise(!1,k.context,e)||c._chunkedUpload(k)||b.ajax(k)).done(function(a,g,e){c._isXHRUpload(k)||"undefined"!==typeof a?
c._onDone(a,g,e,k):c._onFail(e,"error","Unknown",k)}).fail(function(a,g,e){c._onFail(a,g,e,k)}).always(function(a,g,e){--c._sending;c._onAlways(a,g,e,k);if(k.limitConcurrentUploads&&k.limitConcurrentUploads>c._sending)for(a=c._slots.shift();a;){if(g=a.state?"pending"===a.state():!a.isRejected()){a.resolve();break}a=c._slots.shift()}})};this._beforeSend(d,k);return this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(1<this.options.limitConcurrentUploads?
(g=b.Deferred(),this._slots.push(g),h=g.pipe(l)):h=this._sequence=this._sequence.pipe(l,l),h.abort=function(){e=[void 0,"abort","abort"];return a?a.abort():(g&&g.rejectWith(k.context,e),l())},this._enhancePromise(h)):l()},_onAdd:function(d,f){var c=this,a=!0,e=b.extend({},this.options,f),g=e.limitMultiFileUploads,h=this._getParamName(e),k,l,m;if((e.singleFileUploads||g)&&this._isXHRUpload(e))if(!e.singleFileUploads&&g)for(l=[],k=[],m=0;m<f.files.length;m+=g)l.push(f.files.slice(m,m+g)),e=h.slice(m,
m+g),e.length||(e=h),k.push(e);else k=h;else l=[f.files],k=[h];f.originalFiles=f.files;b.each(l||f.files,function(g,e){var h=b.extend({},f);h.files=l?e:[e];h.paramName=k[g];h.submit=function(){return h.jqXHR=this.jqXHR=!1!==c._trigger("submit",d,this)&&c._onSend(d,this)};return a=c._trigger("add",d,h)});return a},_replaceFileInput:function(d){var f=d.clone(!0);b("<form></form>").append(f)[0].reset();d.after(f).detach();b.cleanData(d.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(c,
a){return a===d[0]?f[0]:a});d[0]===this.element[0]&&(this.element=f)},_handleFileTreeEntry:function(d,f){var c=this,a=b.Deferred(),e=function(g){g&&!g.entry&&(g.entry=d);a.resolve([g])},g;f=f||"";d.isFile?d._file?(d._file.relativePath=f,a.resolve(d._file)):d.file(function(g){g.relativePath=f;a.resolve(g)},e):d.isDirectory?(g=d.createReader(),g.readEntries(function(g){c._handleFileTreeEntries(g,f+d.name+"/").done(function(g){a.resolve(g)}).fail(e)},e)):a.resolve([]);return a.promise()},_handleFileTreeEntries:function(d,
f){var c=this;return b.when.apply(b,b.map(d,function(a){return c._handleFileTreeEntry(a,f)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(d){d=d||{};var f=d.items;return f&&f.length&&(f[0].webkitGetAsEntry||f[0].getAsEntry)?this._handleFileTreeEntries(b.map(f,function(c){var a;if(c.webkitGetAsEntry){if(a=c.webkitGetAsEntry())a._file=c.getAsFile();return a}return c.getAsEntry()})):b.Deferred().resolve(b.makeArray(d.files)).promise()},_getSingleFileInputFiles:function(d){d=
b(d);var f=d.prop("webkitEntries")||d.prop("entries");if(f&&f.length)return this._handleFileTreeEntries(f);f=b.makeArray(d.prop("files"));if(f.length)void 0===f[0].name&&f[0].fileName&&b.each(f,function(c,a){a.name=a.fileName;a.size=a.fileSize});else{d=d.prop("value");if(!d)return b.Deferred().resolve([]).promise();f=[{name:d.replace(/^.*\\/,"")}]}return b.Deferred().resolve(f).promise()},_getFileInputFiles:function(d){return d instanceof b&&1!==d.length?b.when.apply(b,b.map(d,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],
arguments)}):this._getSingleFileInputFiles(d)},_onChange:function(d){var f=this,c={fileInput:b(d.target),form:b(d.target.form)};this._getFileInputFiles(c.fileInput).always(function(a){c.files=a;f.options.replaceFileInput&&f._replaceFileInput(c.fileInput);!1!==f._trigger("change",d,c)&&f._onAdd(d,c)})},_onPaste:function(d){var f=d.originalEvent.clipboardData,c={files:[]};b.each(f&&f.items||[],function(a,e){var g=e.getAsFile&&e.getAsFile();g&&c.files.push(g)});if(!1===this._trigger("paste",d,c)||!1===
this._onAdd(d,c))return!1},_onDrop:function(b){var f=this,c=b.dataTransfer=b.originalEvent.dataTransfer,a={};c&&c.files&&c.files.length&&b.preventDefault();this._getDroppedFiles(c).always(function(c){a.files=c;!1!==f._trigger("drop",b,a)&&f._onAdd(b,a)})},_onDragOver:function(d){var f=d.dataTransfer=d.originalEvent.dataTransfer;if(!1===this._trigger("dragover",d))return!1;f&&-1!==b.inArray("Files",f.types)&&(f.dropEffect="copy",d.preventDefault())},_initEventHandlers:function(){this._isXHRUpload(this.options)&&
(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste}));this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(d,f){var c=-1!==b.inArray(d,this._refreshOptionsList);c&&this._destroyEventHandlers();this._super(d,f);c&&(this._initSpecialOptions(),
this._initEventHandlers())},_initSpecialOptions:function(){var d=this.options;void 0===d.fileInput?d.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):d.fileInput instanceof b||(d.fileInput=b(d.fileInput));d.dropZone instanceof b||(d.dropZone=b(d.dropZone));d.pasteZone instanceof b||(d.pasteZone=b(d.pasteZone))},_create:function(){var d=this.options;b.extend(d,b(this.element[0].cloneNode(!1)).data());d.blueimpFileupload=null;d.fileupload=null;this._initSpecialOptions();
this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=this._loaded=this._total=0;this._initEventHandlers()},_destroy:function(){this._destroyEventHandlers()},add:function(d){var f=this;d&&!this.options.disabled&&(d.fileInput&&!d.files?this._getFileInputFiles(d.fileInput).always(function(c){d.files=c;f._onAdd(null,d)}):(d.files=b.makeArray(d.files),this._onAdd(null,d)))},send:function(d){if(d&&!this.options.disabled){if(d.fileInput&&!d.files){var f=this,c=b.Deferred(),a=
c.promise(),e,g;a.abort=function(){g=!0;if(e)return e.abort();c.reject(null,"abort","abort");return a};this._getFileInputFiles(d.fileInput).always(function(a){g||(d.files=a,e=f._onSend(null,d).then(function(a,g,e){c.resolve(a,g,e)},function(a,g,e){c.reject(a,g,e)}))});return this._enhancePromise(a)}d.files=b.makeArray(d.files);if(d.files.length)return this._onSend(null,d)}return this._getXHRPromise(!1,d&&d.context)}})});
(function(b){var d=b.HTMLCanvasElement&&b.HTMLCanvasElement.prototype,f;if(f=b.Blob)try{f=Boolean(new Blob)}catch(c){f=!1}var a=f;if(f=a&&b.Uint8Array)try{f=100===(new Blob([new Uint8Array(100)])).size}catch(e){f=!1}var g=f,h=b.BlobBuilder||b.WebKitBlobBuilder||b.MozBlobBuilder||b.MSBlobBuilder,k=(a||h)&&b.atob&&b.ArrayBuffer&&b.Uint8Array&&function(c){var e,b,d,f,k,q;0<=c.split(",")[0].indexOf("base64")?e=atob(c.split(",")[1]):e=decodeURIComponent(c.split(",")[1]);b=new ArrayBuffer(e.length);d=new Uint8Array(b);
for(f=0;f<e.length;f+=1)d[f]=e.charCodeAt(f);return k=c.split(",")[0].split(":")[1].split(";")[0],a?new Blob([g?d:b],{type:k}):(q=new h,q.append(b),q.getBlob(k))};b.HTMLCanvasElement&&!d.toBlob&&(d.mozGetAsFile?d.toBlob=function(a,g,c){c&&d.toDataURL&&k?a(k(this.toDataURL(g,c))):a(this.mozGetAsFile("blob",g))}:d.toDataURL&&k&&(d.toBlob=function(a,g,c){a(k(this.toDataURL(g,c)))}));"function"==typeof define&&define.amd?define(function(){return k}):b.dataURLtoBlob=k})(this);
(function(b){"function"===typeof define&&define.amd?define(["jquery","load-image","canvas-to-blob","./jquery.fileupload"],b):b(window.jQuery,window.loadImage)})(function(b,d){b.widget("blueimp.fileupload",b.blueimp.fileupload,{options:{process:[],add:function(d,c){b(this).fileupload("process",c).done(function(){c.submit()})}},processActions:{load:function(f,c){var a=this,e=f.files[f.index],g=b.Deferred();window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype.toBlob&&("number"!==b.type(c.maxFileSize)||
e.size<c.maxFileSize)&&(!c.fileTypes||c.fileTypes.test(e.type))?d(e,function(c){if(!c.src)return g.rejectWith(a,[f]);f.img=c;g.resolveWith(a,[f])}):g.rejectWith(a,[f]);return g.promise()},resize:function(f,c){var a=f.img,e;c=b.extend({canvas:!0},c);a&&(e=d.scale(a,c),e.width!==a.width||e.height!==a.height)&&(f.canvas=e);return f},save:function(d,c){if(!d.canvas)return d;var a=this,e=d.files[d.index],g=e.name,h=b.Deferred(),k=function(g){g.name||(e.type===g.type?g.name=e.name:e.name&&(g.name=e.name.replace(/\..+$/,
"."+g.type.substr(6))));d.files[d.index]=g;h.resolveWith(a,[d])};d.canvas.mozGetAsFile?k(d.canvas.mozGetAsFile(/^image\/(jpeg|png)$/.test(e.type)&&g||(g&&g.replace(/\..+$/,"")||"blob")+".png",e.type)):d.canvas.toBlob(k,e.type);return h.promise()}},_processFile:function(d,c,a){var e=this,g=b.Deferred().resolveWith(e,[{files:d,index:c}]).promise();e._processing+=1;b.each(a.process,function(a,c){g=g.pipe(function(a){return e.processActions[c.action].call(this,a,c)})});g.always(function(){--e._processing;
0===e._processing&&e.element.removeClass("fileupload-processing")});1===e._processing&&e.element.addClass("fileupload-processing");return g},process:function(d){var c=this,a=b.extend({},this.options,d);a.process&&a.process.length&&this._isXHRUpload(a)&&b.each(d.files,function(e,g){c._processingQueue=c._processingQueue.pipe(function(){var g=b.Deferred();c._processFile(d.files,e,a).always(function(){g.resolveWith(c)});return g.promise()})});return this._processingQueue},_create:function(){this._super();
this._processing=0;this._processingQueue=b.Deferred().resolveWith(this).promise()}})});
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b(window.jQuery)})(function(b){var d=0;b.ajaxTransport("iframe",function(f){if(f.async){var c=f.initialIframeSrc||"javascript:false;",a,e,g;return{send:function(h,k){a=b('<form style="display:none;"></form>');a.attr("accept-charset",f.formAcceptCharset);g=/\?/.test(f.url)?"&":"?";"DELETE"===f.type?(f.url=f.url+g+"_method=DELETE",f.type="POST"):"PUT"===f.type?(f.url=f.url+g+"_method=PUT",f.type="POST"):"PATCH"===f.type&&(f.url=
f.url+g+"_method=PATCH",f.type="POST");d+=1;e=b('<iframe src="'+c+'" name="iframe-transport-'+d+'"></iframe>').bind("load",function(){var g,d=b.isArray(f.paramName)?f.paramName:[f.paramName];e.unbind("load").bind("load",function(){var g;try{if(g=e.contents(),!g.length||!g[0].firstChild)throw Error();}catch(d){g=void 0}k(200,"success",{iframe:g});b('<iframe src="'+c+'"></iframe>').appendTo(a);window.setTimeout(function(){a.remove()},0)});a.prop("target",e.prop("name")).prop("action",f.url).prop("method",
f.type);f.formData&&b.each(f.formData,function(g,c){b('<input type="hidden"/>').prop("name",c.name).val(c.value).appendTo(a)});f.fileInput&&f.fileInput.length&&"POST"===f.type&&(g=f.fileInput.clone(),f.fileInput.after(function(a){return g[a]}),f.paramName&&f.fileInput.each(function(a){b(this).prop("name",d[a]||f.paramName)}),a.append(f.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),f.fileInput.removeAttr("form"));a.submit();g&&g.length&&f.fileInput.each(function(a,
c){var e=b(g[a]);b(c).prop("name",e.prop("name")).attr("form",e.attr("form"));e.replaceWith(c)})});a.append(e).appendTo(document.body)},abort:function(){e&&e.unbind("load").prop("src",c);a&&a.remove()}}}});b.ajaxSetup({converters:{"iframe text":function(d){return d&&b(d[0].body).text()},"iframe json":function(d){return d&&b.parseJSON(b(d[0].body).text())},"iframe html":function(d){return d&&b(d[0].body).html()},"iframe xml":function(d){return(d=d&&d[0])&&b.isXMLDoc(d)?d:b.parseXML(d.XMLDocument&&
d.XMLDocument.xml||b(d.body).html())},"iframe script":function(d){return d&&b.globalEval(b(d[0].body).text())}}})});
(function(b){var d=function(c,a,e){var g=document.createElement("img"),b,f;return g.onerror=a,g.onload=function(){!f||e&&e.noRevoke||d.revokeObjectURL(f);a(d.scale(g,e))},window.Blob&&c instanceof Blob||window.File&&c instanceof File?(b=f=d.createObjectURL(c),g._type=c.type):b=c,b?(g.src=b,g):d.readFile(c,function(c){var e=c.target;e&&e.result?g.src=e.result:a(c)})},f=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;d.detectSubsampling=function(c){var a=
c.width,e,g;return 1048576<a*c.height?(e=document.createElement("canvas"),e.width=e.height=1,g=e.getContext("2d"),g.drawImage(c,-a+1,0),0===g.getImageData(0,0,1,1).data[3]):!1};d.detectVerticalSquash=function(c,a){var e=document.createElement("canvas"),g=e.getContext("2d"),b,d,f;e.width=1;e.height=a;g.drawImage(c,0,0);e=g.getImageData(0,0,1,a).data;g=0;for(d=b=a;d>g;)f=e[4*(d-1)+3],0===f?b=d:g=d,d=b+g>>1;return d/a};d.renderImageToCanvas=function(c,a,e,g){var b=c.width,f=c.height;a=a.getContext("2d");
var l,m=document.createElement("canvas"),n,p,s,r,q;a.save();d.detectSubsampling(c)&&(b/=2,f/=2);l=d.detectVerticalSquash(c,f);m.width=m.height=1024;n=m.getContext("2d");for(p=0;p<f;){s=p+1024>f?f-p:1024;for(r=0;r<b;)q=r+1024>b?b-r:1024,n.clearRect(0,0,1024,1024),n.drawImage(c,-r,-p),a.drawImage(m,0,0,q,s,Math.floor(r*e/b),Math.floor(p*g/f/l),Math.ceil(q*e/b),Math.ceil(s*g/f/l)),r+=1024;p+=1024}a.restore()};d.scale=function(c,a){a=a||{};var e=document.createElement("canvas"),g=c.width,b=c.height,f=
Math.max((a.minWidth||g)/g,(a.minHeight||b)/b);return 1<f&&(g=parseInt(g*f,10),b=parseInt(b*f,10)),f=Math.min((a.maxWidth||g)/g,(a.maxHeight||b)/b),1>f&&(g=parseInt(g*f,10),b=parseInt(b*f,10)),c.getContext||a.canvas&&e.getContext?(e.width=g,e.height=b,"image/jpeg"===c._type?d.renderImageToCanvas(c,e,g,b):e.getContext("2d").drawImage(c,0,0,g,b),e):(c.width=g,c.height=b,c)};d.createObjectURL=function(c){return f?f.createObjectURL(c):!1};d.revokeObjectURL=function(c){return f?f.revokeObjectURL(c):!1};
d.readFile=function(c,a){if(window.FileReader&&FileReader.prototype.readAsDataURL){var e=new FileReader;return e.onload=e.onerror=a,e.readAsDataURL(c),e}return!1};"function"==typeof define&&define.amd?define(function(){return d}):b.loadImage=d})(this);
(function(b){var d=function(b,c){var a=/[^\w\-\.:]/.test(b)?new Function(d.arg+",tmpl","var _e=tmpl.encode"+d.helper+",_s='"+b.replace(d.regexp,d.func)+"';return _s;"):d.cache[b]=d.cache[b]||d(d.load(b));return c?a(c,d):function(c){return a(c,d)}};d.cache={};d.load=function(b){return document.getElementById(b).innerHTML};d.regexp=/([\s'\\])(?![^%]*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g;d.func=function(b,c,a,e,g,d){if(c)return{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[b]||"\\"+b;if(a)return"="===
a?"'+_e("+e+")+'":"'+("+e+"||'')+'";if(g)return"';";if(d)return"_s+='"};d.encReg=/[<>&"'\x00]/g;d.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"};d.encode=function(b){return String(b||"").replace(d.encReg,function(c){return d.encMap[c]||""})};d.arg="o";d.helper=",print=function(s,e){_s+=e&&(s||'')||_e(s);},include=function(s,d){_s+=tmpl(s,d);}";"function"===typeof define&&define.amd?define(function(){return d}):b.tmpl=d})(this);
(function(b,d){"function"===typeof define&&define.amd?define(["jquery"],d):"object"===typeof exports?d(require("jquery")):b.jQuery?d(b.jQuery):d(b.Zepto)})(this,function(b,d){b.fn.jPlayer=function(a){var c="string"===typeof a,e=Array.prototype.slice.call(arguments,1),f=this;a=!c&&e.length?b.extend.apply(null,[!0,a].concat(e)):a;if(c&&"_"===a.charAt(0))return f;c?this.each(function(){var c=b(this).data("jPlayer"),h=c&&b.isFunction(c[a])?c[a].apply(c,e):c;if(h!==c&&h!==d)return f=h,!1}):this.each(function(){var c=
b(this).data("jPlayer");c?c.option(a||{}):b(this).data("jPlayer",new b.jPlayer(a,this))});return f};b.jPlayer=function(a,c){if(arguments.length){this.element=b(c);this.options=b.extend(!0,{},this.options,a);var e=this;this.element.bind("remove.jPlayer",function(){e.destroy()});this._init()}};"function"!==typeof b.fn.stop&&(b.fn.stop=function(){});b.jPlayer.emulateMethods="load play pause";b.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate";b.jPlayer.emulateOptions=
"muted volume";b.jPlayer.reservedEvent="ready flashreset resize repeat error warning";b.jPlayer.event={};b.each("ready setmedia flashreset resize repeat click error warning loadstart progress suspend abort emptied stalled play pause loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange".split(" "),function(){b.jPlayer.event[this]="jPlayer_"+this});b.jPlayer.htmlEvent="loadstart abort emptied stalled loadedmetadata canplay canplaythrough".split(" ");
b.jPlayer.pause=function(){b.jPlayer.prototype.destroyRemoved();b.each(b.jPlayer.prototype.instances,function(a,c){c.data("jPlayer").status.srcSet&&c.jPlayer("pause")})};b.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var f=function(){this.init()};f.prototype={init:function(){this.options={timeFormat:b.jPlayer.timeFormat}},time:function(a){var c=new Date(1E3*(a&&"number"===typeof a?a:0)),e=c.getUTCHours();a=this.options.timeFormat.showHour?
c.getUTCMinutes():c.getUTCMinutes()+60*e;c=this.options.timeFormat.showMin?c.getUTCSeconds():c.getUTCSeconds()+60*a;e=this.options.timeFormat.padHour&&10>e?"0"+e:e;a=this.options.timeFormat.padMin&&10>a?"0"+a:a;c=this.options.timeFormat.padSec&&10>c?"0"+c:c;e=""+(this.options.timeFormat.showHour?e+this.options.timeFormat.sepHour:"");e+=this.options.timeFormat.showMin?a+this.options.timeFormat.sepMin:"";return e+=this.options.timeFormat.showSec?c+this.options.timeFormat.sepSec:""}};var c=new f;b.jPlayer.convertTime=
function(a){return c.time(a)};b.jPlayer.uaBrowser=function(a){a=a.toLowerCase();var c=/(opera)(?:.*version)?[ \/]([\w.]+)/,e=/(msie) ([\w.]+)/,b=/(mozilla)(?:.*? rv:([\w.]+))?/;a=/(webkit)[ \/]([\w.]+)/.exec(a)||c.exec(a)||e.exec(a)||0>a.indexOf("compatible")&&b.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};b.jPlayer.uaPlatform=function(a){var c=a.toLowerCase(),e=/(android)/,b=/(mobile)/;a=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(c)||[];c=/(ipad|playbook)/.exec(c)||
!b.exec(c)&&e.exec(c)||[];a[1]&&(a[1]=a[1].replace(/\s/g,"_"));return{platform:a[1]||"",tablet:c[1]||""}};b.jPlayer.browser={};b.jPlayer.platform={};var a=b.jPlayer.uaBrowser(navigator.userAgent);a.browser&&(b.jPlayer.browser[a.browser]=!0,b.jPlayer.browser.version=a.version);a=b.jPlayer.uaPlatform(navigator.userAgent);a.platform&&(b.jPlayer.platform[a.platform]=!0,b.jPlayer.platform.mobile=!a.tablet,b.jPlayer.platform.tablet=!!a.tablet);b.jPlayer.getDocMode=function(){var a;b.jPlayer.browser.msie&&
(document.documentMode?a=document.documentMode:(a=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(a=7)));return a};b.jPlayer.browser.documentMode=b.jPlayer.getDocMode();b.jPlayer.nativeFeatures={init:function(){var a=document,c=a.createElement("video"),e={w3c:"fullscreenEnabled fullscreenElement requestFullscreen exitFullscreen fullscreenchange fullscreenerror".split(" "),moz:"mozFullScreenEnabled mozFullScreenElement mozRequestFullScreen mozCancelFullScreen mozfullscreenchange mozfullscreenerror".split(" "),
webkit:" webkitCurrentFullScreenElement webkitRequestFullScreen webkitCancelFullScreen webkitfullscreenchange ".split(" "),webkitVideo:"webkitSupportsFullscreen webkitDisplayingFullscreen webkitEnterFullscreen webkitExitFullscreen  ".split(" "),ms:" msFullscreenElement msRequestFullscreen msExitFullscreen MSFullscreenChange MSFullscreenError".split(" ")},b=["w3c","moz","webkit","webkitVideo","ms"],d,f;this.fullscreen=c={support:{w3c:!!a[e.w3c[0]],moz:!!a[e.moz[0]],webkit:"function"===typeof a[e.webkit[3]],
webkitVideo:"function"===typeof c[e.webkitVideo[2]],ms:"function"===typeof c[e.ms[2]]},used:{}};d=0;for(f=b.length;d<f;d++){var p=b[d];if(c.support[p]){c.spec=p;c.used[p]=!0;break}}if(c.spec){var s=e[c.spec];c.api={fullscreenEnabled:!0,fullscreenElement:function(c){c=c?c:a;return c[s[1]]},requestFullscreen:function(a){return a[s[2]]()},exitFullscreen:function(c){c=c?c:a;return c[s[3]]()}};c.event={fullscreenchange:s[4],fullscreenerror:s[5]}}else c.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},
requestFullscreen:function(){},exitFullscreen:function(){}},c.event={}}};b.jPlayer.nativeFeatures.init();b.jPlayer.focus=null;b.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON";var e=function(a){var c=b.jPlayer.focus,e;c&&(b.each(b.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(c,b){if(a.target.nodeName.toUpperCase()===b.toUpperCase())return e=!0,!1}),e||b.each(c.options.keyBindings,function(e,d){if(d&&b.isFunction(d.fn)&&("number"===typeof d.key&&a.which===d.key||"string"===typeof d.key&&
a.key===d.key))return a.preventDefault(),d.fn(c),!1}))};b.jPlayer.keys=function(a){b(document.documentElement).unbind("keydown.jPlayer");a&&b(document.documentElement).bind("keydown.jPlayer",e)};b.jPlayer.keys(!0);b.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,
minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",
duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,
hold:1E3},loop:!1,repeat:function(a){a.jPlayer.options.loop?b(this).unbind(".jPlayerRepeat").bind(b.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){b(this).jPlayer("play")}):b(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},
noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(a){a.status.paused?a.play():a.pause()}},fullScreen:{key:70,fn:function(a){(a.status.video||a.options.audioFullScreen)&&a._setOption("fullScreen",!a.options.fullScreen)}},muted:{key:77,fn:function(a){a._muted(!a.options.muted)}},
volumeUp:{key:190,fn:function(a){a.volume(a.options.volume+.1)}},volumeDown:{key:188,fn:function(a){a.volume(a.options.volume-.1)}},loop:{key:76,fn:function(a){a._loop(!a.options.loop)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",
cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},
m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},
fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',
flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var a=this;this.element.empty();this.status=b.extend({},this.status);this.internal=b.extend({},this.internal);this.options.timeFormat=b.extend({},b.jPlayer.timeFormat,this.options.timeFormat);this.internal.cmdsIgnored=b.jPlayer.platform.ipad||b.jPlayer.platform.iphone||b.jPlayer.platform.ipod;this.internal.domNode=this.element.get(0);
this.options.keyEnabled&&!b.jPlayer.focus&&(b.jPlayer.focus=this);this.androidFix={setMedia:!1,play:!1,pause:!1,time:NaN};b.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto");this.formats=[];this.solutions=[];this.require={};this.htmlElement={};this.html={};this.html.audio={};this.html.video={};this.aurora={};this.aurora.formats=[];this.aurora.properties=[];this.flash={};this.css={};this.css.cs={};this.css.jq={};this.ancestorJq=[];this.options.volume=
this._limitValue(this.options.volume,0,1);b.each(this.options.supplied.toLowerCase().split(","),function(c,e){var d=e.replace(/^\s+|\s+$/g,"");if(a.format[d]){var f=!1;b.each(a.formats,function(a,c){if(d===c)return f=!0,!1});f||a.formats.push(d)}});b.each(this.options.solution.toLowerCase().split(","),function(c,e){var d=e.replace(/^\s+|\s+$/g,"");if(a.solution[d]){var f=!1;b.each(a.solutions,function(a,c){if(d===c)return f=!0,!1});f||a.solutions.push(d)}});b.each(this.options.auroraFormats.toLowerCase().split(","),
function(c,e){var d=e.replace(/^\s+|\s+$/g,"");if(a.format[d]){var f=!1;b.each(a.aurora.formats,function(a,c){if(d===c)return f=!0,!1});f||a.aurora.formats.push(d)}});this.internal.instance="jp_"+this.count;this.instances[this.internal.instance]=this.element;this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count);this.internal.self=b.extend({},{id:this.element.attr("id"),jq:this.element});this.internal.audio=b.extend({},{id:this.options.idPrefix+"_audio_"+this.count,
jq:d});this.internal.video=b.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:d});this.internal.flash=b.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:d,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")});this.internal.poster=b.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:d});b.each(b.jPlayer.event,function(c,e){a.options[c]!==d&&(a.element.bind(e+
".jPlayer",a.options[c]),a.options[c]=d)});this.require.audio=!1;this.require.video=!1;b.each(this.formats,function(c,e){a.require[a.format[e].media]=!0});this.options=this.require.video?b.extend(!0,{},this.optionsVideo,this.options):b.extend(!0,{},this.optionsAudio,this.options);this._setSize();this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow);this.status.noVolume=this._uaBlocklist(this.options.noVolume);
b.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners();this._restrictNativeVideoControls();this.htmlElement.poster=document.createElement("img");this.htmlElement.poster.id=this.internal.poster.id;this.htmlElement.poster.onload=function(){a.status.video&&!a.status.waitForPlay||a.internal.poster.jq.show()};this.element.append(this.htmlElement.poster);this.internal.poster.jq=b("#"+this.internal.poster.id);this.internal.poster.jq.css({width:this.status.width,height:this.status.height});
this.internal.poster.jq.hide();this.internal.poster.jq.bind("click.jPlayer",function(c){c.stopPropagation();a._trigger(b.jPlayer.event.click)});this.html.audio.available=!1;this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio));this.html.video.available=!1;this.require.video&&(this.htmlElement.video=document.createElement("video"),
this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video));this.flash.available=this._checkForFlash(10.1);this.html.canPlay={};this.aurora.canPlay={};this.flash.canPlay={};b.each(this.formats,function(c,e){a.html.canPlay[e]=a.html[a.format[e].media].available&&""!==a.htmlElement[a.format[e].media].canPlayType(a.format[e].codec);a.aurora.canPlay[e]=-1<b.inArray(e,a.aurora.formats);a.flash.canPlay[e]=
a.format[e].flashCanPlay&&a.flash.available});this.html.desired=!1;this.aurora.desired=!1;this.flash.desired=!1;b.each(this.solutions,function(c,e){if(0===c)a[e].desired=!0;else{var d=!1,f=!1;b.each(a.formats,function(c,e){a[a.solutions[0]].canPlay[e]&&("video"===a.format[e].media?f=!0:d=!0)});a[e].desired=a.require.audio&&!d||a.require.video&&!f}});this.html.support={};this.aurora.support={};this.flash.support={};b.each(this.formats,function(c,e){a.html.support[e]=a.html.canPlay[e]&&a.html.desired;
a.aurora.support[e]=a.aurora.canPlay[e]&&a.aurora.desired;a.flash.support[e]=a.flash.canPlay[e]&&a.flash.desired});this.html.used=!1;this.aurora.used=!1;this.flash.used=!1;b.each(this.solutions,function(c,e){b.each(a.formats,function(c,b){if(a[e].support[b])return a[e].used=!0,!1})});this._resetActive();this._resetGate();this._cssSelectorAncestor(this.options.cssSelectorAncestor);this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:b.jPlayer.error.NO_SOLUTION,
context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:b.jPlayer.errorMsg.NO_SOLUTION,hint:b.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show());if(this.flash.used){var c,e="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(b.jPlayer.browser.msie&&(9>Number(b.jPlayer.browser.version)||9>b.jPlayer.browser.documentMode)){e=['<param name="movie" value="'+
this.internal.flash.swf+'" />','<param name="FlashVars" value="'+e+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];c=document.createElement('<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>');for(var f=0;f<e.length;f++)c.appendChild(document.createElement(e[f]))}else f=function(a,
c,g){var e=document.createElement("param");e.setAttribute("name",c);e.setAttribute("value",g);a.appendChild(e)},c=document.createElement("object"),c.setAttribute("id",this.internal.flash.id),c.setAttribute("name",this.internal.flash.id),c.setAttribute("data",this.internal.flash.swf),c.setAttribute("type","application/x-shockwave-flash"),c.setAttribute("width","1"),c.setAttribute("height","1"),c.setAttribute("tabindex","-1"),f(c,"flashvars",e),f(c,"allowscriptaccess","always"),f(c,"bgcolor",this.options.backgroundColor),
f(c,"wmode",this.options.wmode);this.element.append(c);this.internal.flash.jq=b(c)}this.status.playbackRateEnabled=this.html.used&&!this.flash.used?this._testPlaybackRate("audio"):!1;this._updatePlaybackRate();this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=b("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),
this.element.append(this.htmlElement.video),this.internal.video.jq=b("#"+this.internal.video.id),this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(c){c.stopPropagation();a._trigger(b.jPlayer.event.click)})));this.options.emulateHtml&&this._emulateHtmlBridge();!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){a.internal.ready=
!0;a.version.flash="n/a";a._trigger(b.jPlayer.event.repeat);a._trigger(b.jPlayer.event.ready)},100);this._updateNativeVideoControls();this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();b.jPlayer.prototype.count++},destroy:function(){this.clearMedia();this._removeUiClass();this.css.jq.currentTime.length&&this.css.jq.currentTime.text("");this.css.jq.duration.length&&this.css.jq.duration.text("");b.each(this.css.jq,function(a,c){c.length&&c.unbind(".jPlayer")});this.internal.poster.jq.unbind(".jPlayer");
this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer");this._fullscreenRemoveEventListeners();this===b.jPlayer.focus&&(b.jPlayer.focus=null);this.options.emulateHtml&&this._destroyHtmlBridge();this.element.removeData("jPlayer");this.element.unbind(".jPlayer");this.element.empty();delete this.instances[this.internal.instance]},destroyRemoved:function(){var a=this;b.each(this.instances,function(c,e){a.element===e||e.data("jPlayer")||(e.jPlayer("destroy"),delete a.instances[c])})},enable:function(){},
disable:function(){},_testCanPlayType:function(a){try{return a.canPlayType(this.format.mp3.codec),!0}catch(c){return!1}},_testPlaybackRate:function(a){a=document.createElement("string"===typeof a?a:"audio");try{return"playbackRate"in a?(a.playbackRate=.5,.5===a.playbackRate):!1}catch(c){return!1}},_uaBlocklist:function(a){var c=navigator.userAgent.toLowerCase(),e=!1;b.each(a,function(a,g){if(g&&g.test(c))return e=!0,!1});return e},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&
(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",
height:"0px"})))},_addHtmlEventListeners:function(a,c){var e=this;a.preload=this.options.preload;a.muted=this.options.muted;a.volume=this.options.volume;this.status.playbackRateEnabled&&(a.defaultPlaybackRate=this.options.defaultPlaybackRate,a.playbackRate=this.options.playbackRate);a.addEventListener("progress",function(){c.gate&&(e.internal.cmdsIgnored&&0<this.readyState&&(e.internal.cmdsIgnored=!1),e._getHtmlStatus(a),e._updateInterface(),e._trigger(b.jPlayer.event.progress))},!1);a.addEventListener("loadeddata",
function(){c.gate&&(e.androidFix.setMedia=!1,e.androidFix.play&&(e.androidFix.play=!1,e.play(e.androidFix.time)),e.androidFix.pause&&(e.androidFix.pause=!1,e.pause(e.androidFix.time)),e._trigger(b.jPlayer.event.loadeddata))},!1);a.addEventListener("timeupdate",function(){c.gate&&(e._getHtmlStatus(a),e._updateInterface(),e._trigger(b.jPlayer.event.timeupdate))},!1);a.addEventListener("durationchange",function(){c.gate&&(e._getHtmlStatus(a),e._updateInterface(),e._trigger(b.jPlayer.event.durationchange))},
!1);a.addEventListener("play",function(){c.gate&&(e._updateButtons(!0),e._html_checkWaitForPlay(),e._trigger(b.jPlayer.event.play))},!1);a.addEventListener("playing",function(){c.gate&&(e._updateButtons(!0),e._seeked(),e._trigger(b.jPlayer.event.playing))},!1);a.addEventListener("pause",function(){c.gate&&(e._updateButtons(!1),e._trigger(b.jPlayer.event.pause))},!1);a.addEventListener("waiting",function(){c.gate&&(e._seeking(),e._trigger(b.jPlayer.event.waiting))},!1);a.addEventListener("seeking",
function(){c.gate&&(e._seeking(),e._trigger(b.jPlayer.event.seeking))},!1);a.addEventListener("seeked",function(){c.gate&&(e._seeked(),e._trigger(b.jPlayer.event.seeked))},!1);a.addEventListener("volumechange",function(){c.gate&&(e.options.volume=a.volume,e.options.muted=a.muted,e._updateMute(),e._updateVolume(),e._trigger(b.jPlayer.event.volumechange))},!1);a.addEventListener("ratechange",function(){c.gate&&(e.options.defaultPlaybackRate=a.defaultPlaybackRate,e.options.playbackRate=a.playbackRate,
e._updatePlaybackRate(),e._trigger(b.jPlayer.event.ratechange))},!1);a.addEventListener("suspend",function(){c.gate&&(e._seeked(),e._trigger(b.jPlayer.event.suspend))},!1);a.addEventListener("ended",function(){c.gate&&(b.jPlayer.browser.webkit||(e.htmlElement.media.currentTime=0),e.htmlElement.media.pause(),e._updateButtons(!1),e._getHtmlStatus(a,!0),e._updateInterface(),e._trigger(b.jPlayer.event.ended))},!1);a.addEventListener("error",function(){c.gate&&(e._updateButtons(!1),e._seeked(),e.status.srcSet&&
(clearTimeout(e.internal.htmlDlyCmdId),e.status.waitForLoad=!0,e.status.waitForPlay=!0,e.status.video&&!e.status.nativeVideoControls&&e.internal.video.jq.css({width:"0px",height:"0px"}),e._validString(e.status.media.poster)&&!e.status.nativeVideoControls&&e.internal.poster.jq.show(),e.css.jq.videoPlay.length&&e.css.jq.videoPlay.show(),e._error({type:b.jPlayer.error.URL,context:e.status.src,message:b.jPlayer.errorMsg.URL,hint:b.jPlayer.errorHint.URL})))},!1);b.each(b.jPlayer.htmlEvent,function(d,f){a.addEventListener(this,
function(){c.gate&&e._trigger(b.jPlayer.event[f])},!1)})},_addAuroraEventListeners:function(a,c){var e=this;a.volume=100*this.options.volume;a.on("progress",function(){c.gate&&(e.internal.cmdsIgnored&&0<this.readyState&&(e.internal.cmdsIgnored=!1),e._getAuroraStatus(a),e._updateInterface(),e._trigger(b.jPlayer.event.progress),0<a.duration&&e._trigger(b.jPlayer.event.timeupdate))},!1);a.on("ready",function(){c.gate&&e._trigger(b.jPlayer.event.loadeddata)},!1);a.on("duration",function(){c.gate&&(e._getAuroraStatus(a),
e._updateInterface(),e._trigger(b.jPlayer.event.durationchange))},!1);a.on("end",function(){c.gate&&(e._updateButtons(!1),e._getAuroraStatus(a,!0),e._updateInterface(),e._trigger(b.jPlayer.event.ended))},!1);a.on("error",function(){c.gate&&(e._updateButtons(!1),e._seeked(),e.status.srcSet&&(e.status.waitForLoad=!0,e.status.waitForPlay=!0,e.status.video&&!e.status.nativeVideoControls&&e.internal.video.jq.css({width:"0px",height:"0px"}),e._validString(e.status.media.poster)&&!e.status.nativeVideoControls&&
e.internal.poster.jq.show(),e.css.jq.videoPlay.length&&e.css.jq.videoPlay.show(),e._error({type:b.jPlayer.error.URL,context:e.status.src,message:b.jPlayer.errorMsg.URL,hint:b.jPlayer.errorHint.URL})))},!1)},_getHtmlStatus:function(a,c){var e=0,b=0,d=0,f=0;isFinite(a.duration)&&(this.status.duration=a.duration);e=a.currentTime;b=0<this.status.duration?100*e/this.status.duration:0;"object"===typeof a.seekable&&0<a.seekable.length?(d=0<this.status.duration?100*a.seekable.end(a.seekable.length-1)/this.status.duration:
100,f=0<this.status.duration?100*a.currentTime/a.seekable.end(a.seekable.length-1):0):(d=100,f=b);c&&(b=f=e=0);this.status.seekPercent=d;this.status.currentPercentRelative=f;this.status.currentPercentAbsolute=b;this.status.currentTime=e;this.status.remaining=this.status.duration-this.status.currentTime;this.status.videoWidth=a.videoWidth;this.status.videoHeight=a.videoHeight;this.status.readyState=a.readyState;this.status.networkState=a.networkState;this.status.playbackRate=a.playbackRate;this.status.ended=
a.ended},_getAuroraStatus:function(a,c){var e=0,b=0,d=0,f=0;this.status.duration=a.duration/1E3;e=a.currentTime/1E3;b=0<this.status.duration?100*e/this.status.duration:0;0<a.buffered?(d=0<this.status.duration?a.buffered*this.status.duration/this.status.duration:100,f=0<this.status.duration?e/(a.buffered*this.status.duration):0):(d=100,f=b);c&&(b=f=e=0);this.status.seekPercent=d;this.status.currentPercentRelative=f;this.status.currentPercentAbsolute=b;this.status.currentTime=e;this.status.remaining=
this.status.duration-this.status.currentTime;this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=!1},_resetStatus:function(){this.status=b.extend({},this.status,b.jPlayer.prototype.status)},_trigger:function(a,c,e){a=b.Event(a);a.jPlayer={};a.jPlayer.version=b.extend({},this.version);a.jPlayer.options=b.extend(!0,{},this.options);a.jPlayer.status=b.extend(!0,{},this.status);a.jPlayer.html=b.extend(!0,{},this.html);a.jPlayer.aurora=b.extend(!0,{},this.aurora);
a.jPlayer.flash=b.extend(!0,{},this.flash);c&&(a.jPlayer.error=b.extend({},c));e&&(a.jPlayer.warning=b.extend({},e));this.element.trigger(a)},jPlayerFlashEvent:function(a,c){if(a===b.jPlayer.event.ready)if(!this.internal.ready)this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=c.version,this.version.needFlash!==this.version.flash&&this._error({type:b.jPlayer.error.VERSION,context:this.version.flash,message:b.jPlayer.errorMsg.VERSION+this.version.flash,
hint:b.jPlayer.errorHint.VERSION}),this._trigger(b.jPlayer.event.repeat),this._trigger(a);else if(this.flash.gate){if(this.status.srcSet){var e=this.status.currentTime,d=this.status.paused;this.setMedia(this.status.media);this.volumeWorker(this.options.volume);0<e&&(d?this.pause(e):this.play(e))}this._trigger(b.jPlayer.event.flashreset)}if(this.flash.gate)switch(a){case b.jPlayer.event.progress:this._getFlashStatus(c);this._updateInterface();this._trigger(a);break;case b.jPlayer.event.timeupdate:this._getFlashStatus(c);
this._updateInterface();this._trigger(a);break;case b.jPlayer.event.play:this._seeked();this._updateButtons(!0);this._trigger(a);break;case b.jPlayer.event.pause:this._updateButtons(!1);this._trigger(a);break;case b.jPlayer.event.ended:this._updateButtons(!1);this._trigger(a);break;case b.jPlayer.event.click:this._trigger(a);break;case b.jPlayer.event.error:this.status.waitForLoad=!0;this.status.waitForPlay=!0;this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"});this._validString(this.status.media.poster)&&
this.internal.poster.jq.show();this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show();this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media);this._updateButtons(!1);this._error({type:b.jPlayer.error.URL,context:c.src,message:b.jPlayer.errorMsg.URL,hint:b.jPlayer.errorHint.URL});break;case b.jPlayer.event.seeking:this._seeking();this._trigger(a);break;case b.jPlayer.event.seeked:this._seeked();this._trigger(a);break;case b.jPlayer.event.ready:break;
default:this._trigger(a)}return!1},_getFlashStatus:function(a){this.status.seekPercent=a.seekPercent;this.status.currentPercentRelative=a.currentPercentRelative;this.status.currentPercentAbsolute=a.currentPercentAbsolute;this.status.currentTime=a.currentTime;this.status.duration=a.duration;this.status.remaining=a.duration-a.currentTime;this.status.videoWidth=a.videoWidth;this.status.videoHeight=a.videoHeight;this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=
!1},_updateButtons:function(a){a===d?a=!this.status.paused:this.status.paused=!a;a?this.addStateClass("playing"):this.removeStateClass("playing");!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen");this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped");this.css.jq.play.length&&this.css.jq.pause.length&&(a?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide()));
this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide()));this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},
_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%");this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));var a="";this.css.jq.currentTime.length&&(a=this._convertTime(this.status.currentTime),a!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime)));
var a="",a=this.status.duration,c=this.status.remaining;this.css.jq.duration.length&&("string"===typeof this.status.media.duration?a=this.status.media.duration:("number"===typeof this.status.media.duration&&(a=this.status.media.duration,c=a-this.status.currentTime),a=this.options.remainingDuration&&0<a?(0<c?"-":"")+this._convertTime(c):this._convertTime(a)),a!==this.css.jq.duration.text()&&this.css.jq.duration.text(a))},_convertTime:f.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&
this.css.jq.seekBar.addClass("jp-seeking-bg");this.addStateClass("seeking")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg");this.removeStateClass("seeking")},_resetGate:function(){this.html.audio.gate=!1;this.html.video.gate=!1;this.aurora.gate=!1;this.flash.gate=!1},_resetActive:function(){this.html.active=!1;this.aurora.active=!1;this.flash.active=!1},_escapeHtml:function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},
_qualifyURL:function(a){var c=document.createElement("div");c.innerHTML='<a href="'+this._escapeHtml(a)+'">x</a>';return c.firstChild.href},_absoluteMediaUrls:function(a){var c=this;b.each(a,function(e,b){b&&c.format[e]&&"data:"!==b.substr(0,5)&&(a[e]=c._qualifyURL(b))});return a},addStateClass:function(a){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[a])},removeStateClass:function(a){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[a])},setMedia:function(a){var c=
this,e=!1,d=this.status.media.poster!==a.poster;this._resetMedia();this._resetGate();this._resetActive();this.androidFix.setMedia=!1;this.androidFix.play=!1;this.androidFix.pause=!1;a=this._absoluteMediaUrls(a);b.each(this.formats,function(d,f){var l="video"===c.format[f].media;b.each(c.solutions,function(d,m){if(c[m].support[f]&&c._validString(a[f])){var q="html"===m,w="aurora"===m;l?(q?(c.html.video.gate=!0,c._html_setVideo(a),c.html.active=!0):(c.flash.gate=!0,c._flash_setVideo(a),c.flash.active=
!0),c.css.jq.videoPlay.length&&c.css.jq.videoPlay.show(),c.status.video=!0):(q?(c.html.audio.gate=!0,c._html_setAudio(a),c.html.active=!0,b.jPlayer.platform.android&&(c.androidFix.setMedia=!0)):w?(c.aurora.gate=!0,c._aurora_setAudio(a),c.aurora.active=!0):(c.flash.gate=!0,c._flash_setAudio(a),c.flash.active=!0),c.css.jq.videoPlay.length&&c.css.jq.videoPlay.hide(),c.status.video=!1);e=!0;return!1}});if(e)return!1});e?(this.status.nativeVideoControls&&this.html.video.gate||!this._validString(a.poster)||
(d?this.htmlElement.poster.src=a.poster:this.internal.poster.jq.show()),"string"===typeof a.title&&(this.css.jq.title.length&&this.css.jq.title.html(a.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",a.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",a.title)),this.status.srcSet=!0,this.status.media=b.extend({},a),this._updateButtons(!1),this._updateInterface(),this._trigger(b.jPlayer.event.setmedia)):this._error({type:b.jPlayer.error.NO_SUPPORT,
context:"{supplied:'"+this.options.supplied+"'}",message:b.jPlayer.errorMsg.NO_SUPPORT,hint:b.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus();this._updateButtons(!1);this._updateInterface();this._seeked();this.internal.poster.jq.hide();clearTimeout(this.internal.htmlDlyCmdId);this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia();this.html.active?this._html_clearMedia():
this.aurora.active?this._aurora_clearMedia():this.flash.active&&this._flash_clearMedia();this._resetGate();this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(b.jPlayer.focus=this)},play:function(a){"object"===typeof a&&this.options.useStateClassSkin&&!this.status.paused?this.pause(a):(a="number"===typeof a?a:NaN,
this.status.srcSet?(this.focus(),this.html.active?this._html_play(a):this.aurora.active?this._aurora_play(a):this.flash.active&&this._flash_play(a)):this._urlNotSetError("play"))},videoPlay:function(){this.play()},pause:function(a){a="number"===typeof a?a:NaN;this.status.srcSet?this.html.active?this._html_pause(a):this.aurora.active?this._aurora_pause(a):this.flash.active&&this._flash_pause(a):this._urlNotSetError("pause")},tellOthers:function(a,c){var e=this,d="function"===typeof c,f=Array.prototype.slice.call(arguments);
"string"===typeof a&&(d&&f.splice(1,1),b.jPlayer.prototype.destroyRemoved(),b.each(this.instances,function(){e.element!==this&&(d&&!c.call(this.data("jPlayer"),e)||this.jPlayer.apply(this,f))}))},pauseOthers:function(a){this.tellOthers("pause",function(){return this.status.srcSet},a)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(a){a=this._limitValue(a,
0,100);this.status.srcSet?this.html.active?this._html_playHead(a):this.aurora.active?this._aurora_playHead(a):this.flash.active&&this._flash_playHead(a):this._urlNotSetError("playHead")},_muted:function(a){this.mutedWorker(a);this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},a)},mutedWorker:function(a){this.options.muted=a;this.html.used&&this._html_setProperty("muted",a);this.aurora.used&&this._aurora_mute(a);this.flash.used&&this._flash_mute(a);
this.html.video.gate||this.html.audio.gate||(this._updateMute(a),this._updateVolume(this.options.volume),this._trigger(b.jPlayer.event.volumechange))},mute:function(a){"object"===typeof a&&this.options.useStateClassSkin&&this.options.muted?this._muted(!1):(a=a===d?!0:!!a,this._muted(a))},unmute:function(a){a=a===d?!0:!!a;this._muted(!a)},_updateMute:function(a){a===d&&(a=this.options.muted);a?this.addStateClass("muted"):this.removeStateClass("muted");this.css.jq.mute.length&&this.css.jq.unmute.length&&
(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):a?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(a){this.volumeWorker(a);this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},a)},volumeWorker:function(a){a=this._limitValue(a,0,1);this.options.volume=a;this.html.used&&this._html_setProperty("volume",a);this.aurora.used&&this._aurora_volume(a);this.flash.used&&
this._flash_volume(a);this.html.video.gate||this.html.audio.gate||(this._updateVolume(a),this._trigger(b.jPlayer.event.volumechange))},volumeBar:function(a){if(this.css.jq.volumeBar.length){var c=b(a.currentTarget),e=c.offset(),d=a.pageX-e.left,f=c.width();a=c.height()-a.pageY+e.top;c=c.height();this.options.verticalVolume?this.volume(a/c):this.volume(d/f)}this.options.muted&&this._muted(!1)},_updateVolume:function(a){a===d&&(a=this.options.volume);a=this.options.muted?0:a;this.status.noVolume?(this.addStateClass("noVolume"),
this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*a+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1);
this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(a){var c=this;this.options.cssSelectorAncestor=a;this._removeUiClass();this.ancestorJq=a?b(a):[];a&&1!==this.ancestorJq.length&&this._warning({type:b.jPlayer.warning.CSS_SELECTOR_COUNT,context:a,message:b.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:b.jPlayer.warningHint.CSS_SELECTOR_COUNT});this._addUiClass();b.each(this.options.cssSelector,function(a,e){c._cssSelector(a,e)});
this._updateInterface();this._updateButtons();this._updateAutohide();this._updateVolume();this._updateMute()},_cssSelector:function(a,c){var e=this;"string"===typeof c?b.jPlayer.prototype.options.cssSelector[a]?(this.css.jq[a]&&this.css.jq[a].length&&this.css.jq[a].unbind(".jPlayer"),this.options.cssSelector[a]=c,this.css.cs[a]=this.options.cssSelectorAncestor+" "+c,this.css.jq[a]=c?b(this.css.cs[a]):[],this.css.jq[a].length&&this[a]&&this.css.jq[a].bind("click.jPlayer",function(c){c.preventDefault();
e[a](c);e.options.autoBlur?b(this).blur():b(this).focus()}),c&&1!==this.css.jq[a].length&&this._warning({type:b.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[a],message:b.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[a].length+" found for "+a+" method.",hint:b.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:b.jPlayer.warning.CSS_SELECTOR_METHOD,context:a,message:b.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:b.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:b.jPlayer.warning.CSS_SELECTOR_STRING,
context:c,message:b.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:b.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(a){this.options.toggleDuration&&(this.options.captureDuration&&a.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))},seekBar:function(a){if(this.css.jq.seekBar.length){var c=b(a.currentTarget),e=c.offset();a=a.pageX-e.left;c=c.width();this.playHead(100*a/c)}},playbackRate:function(a){this._setOption("playbackRate",a)},playbackRateBar:function(a){if(this.css.jq.playbackRateBar.length){var c=
b(a.currentTarget),e=c.offset(),d=a.pageX-e.left,f=c.width();a=c.height()-a.pageY+e.top;c=c.height();this.playbackRate((this.options.verticalPlaybackRate?a/c:d/f)*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate)}},_updatePlaybackRate:function(){var a=(this.options.playbackRate-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),
this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*a+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(a){"object"===typeof a&&this.options.useStateClassSkin&&this.options.loop?this._loop(!1):this._loop(!0)},repeatOff:function(){this._loop(!1)},_loop:function(a){this.options.loop!==
a&&(this.options.loop=a,this._updateButtons(),this._trigger(b.jPlayer.event.repeat))},option:function(a,c){var e=a;if(0===arguments.length)return b.extend(!0,{},this.options);if("string"===typeof a){var f=a.split(".");if(c===d){for(var e=b.extend(!0,{},this.options),m=0;m<f.length;m++)if(e[f[m]]!==d)e=e[f[m]];else return this._warning({type:b.jPlayer.warning.OPTION_KEY,context:a,message:b.jPlayer.warningMsg.OPTION_KEY,hint:b.jPlayer.warningHint.OPTION_KEY}),d;return e}for(var m=e={},n=0;n<f.length;n++)n<
f.length-1?(m[f[n]]={},m=m[f[n]]):m[f[n]]=c}this._setOptions(e);return this},_setOptions:function(a){var c=this;b.each(a,function(a,e){c._setOption(a,e)});return this},_setOption:function(a,c){var e=this;switch(a){case "volume":this.volume(c);break;case "muted":this._muted(c);break;case "globalVolume":this.options[a]=c;break;case "cssSelectorAncestor":this._cssSelectorAncestor(c);break;case "cssSelector":b.each(c,function(a,c){e._cssSelector(a,c)});break;case "playbackRate":this.options[a]=c=this._limitValue(c,
this.options.minPlaybackRate,this.options.maxPlaybackRate);this.html.used&&this._html_setProperty("playbackRate",c);this._updatePlaybackRate();break;case "defaultPlaybackRate":this.options[a]=c=this._limitValue(c,this.options.minPlaybackRate,this.options.maxPlaybackRate);this.html.used&&this._html_setProperty("defaultPlaybackRate",c);this._updatePlaybackRate();break;case "minPlaybackRate":this.options[a]=c=this._limitValue(c,.1,this.options.maxPlaybackRate-.1);this._updatePlaybackRate();break;case "maxPlaybackRate":this.options[a]=
c=this._limitValue(c,this.options.minPlaybackRate+.1,16);this._updatePlaybackRate();break;case "fullScreen":if(this.options[a]!==c){var d=b.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;if(!d||d&&!this.status.waitForPlay)d||(this.options[a]=c),c?this._requestFullscreen():this._exitFullscreen(),d||this._setOption("fullWindow",c)}break;case "fullWindow":this.options[a]!==c&&(this._removeUiClass(),this.options[a]=c,this._refreshSize());break;case "size":this.options.fullWindow||this.options[a].cssClass===
c.cssClass||this._removeUiClass();this.options[a]=b.extend({},this.options[a],c);this._refreshSize();break;case "sizeFull":this.options.fullWindow&&this.options[a].cssClass!==c.cssClass&&this._removeUiClass();this.options[a]=b.extend({},this.options[a],c);this._refreshSize();break;case "autohide":this.options[a]=b.extend({},this.options[a],c);this._updateAutohide();break;case "loop":this._loop(c);break;case "remainingDuration":this.options[a]=c;this._updateInterface();break;case "toggleDuration":this.options[a]=
c;break;case "nativeVideoControls":this.options[a]=b.extend({},this.options[a],c);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this._restrictNativeVideoControls();this._updateNativeVideoControls();break;case "noFullWindow":this.options[a]=b.extend({},this.options[a],c);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow);this._restrictNativeVideoControls();this._updateButtons();
break;case "noVolume":this.options[a]=b.extend({},this.options[a],c);this.status.noVolume=this._uaBlocklist(this.options.noVolume);this._updateVolume();this._updateMute();break;case "emulateHtml":this.options[a]!==c&&((this.options[a]=c)?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case "timeFormat":this.options[a]=b.extend({},this.options[a],c);break;case "keyEnabled":this.options[a]=c;c||this!==b.jPlayer.focus||(b.jPlayer.focus=null);break;case "keyBindings":this.options[a]=b.extend(!0,
{},this.options[a],c);break;case "audioFullScreen":this.options[a]=c;break;case "autoBlur":this.options[a]=c}return this},_refreshSize:function(){this._setSize();this._addUiClass();this._updateSize();this._updateButtons();this._updateAutohide();this._trigger(b.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,
this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass);this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height});!this.status.waitForPlay&&this.html.active&&
this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var a=this,c=function(c){var e=!1,b;"undefined"!==typeof a.internal.mouse?(e=a.internal.mouse.x-c.pageX,b=a.internal.mouse.y-c.pageY,e=0<Math.floor(e)||0<Math.floor(b)):
e=!0;a.internal.mouse={x:c.pageX,y:c.pageY};e&&a.css.jq.gui.fadeIn(a.options.autohide.fadeIn,function(){clearTimeout(a.internal.autohideId);a.internal.autohideId=setTimeout(function(){a.css.jq.gui.fadeOut(a.options.autohide.fadeOut)},a.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(".jPlayerAutohide"),this.css.jq.gui.unbind(".jPlayerAutohide"),this.status.nativeVideoControls?this.css.jq.gui.hide():
this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind("mousemove.jPlayer.jPlayerAutohide",c),this.css.jq.gui.bind("mousemove.jPlayer.jPlayerAutohide",c),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(a){"object"===typeof a&&this.options.useStateClassSkin&&this.options.fullScreen?this._setOption("fullScreen",!1):this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},
_fullscreenAddEventListeners:function(){var a=this,c=b.jPlayer.nativeFeatures.fullscreen;c.api.fullscreenEnabled&&c.event.fullscreenchange&&("function"!==typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){a._fullscreenchange()}),document.addEventListener(c.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var a=b.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.removeEventListener(a.event.fullscreenchange,
this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!b.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var a=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],c=b.jPlayer.nativeFeatures.fullscreen;c.used.webkitVideo&&(a=this.htmlElement.video);c.api.fullscreenEnabled&&c.api.requestFullscreen(a)},_exitFullscreen:function(){var a=b.jPlayer.nativeFeatures.fullscreen,c;a.used.webkitVideo&&
(c=this.htmlElement.video);a.api.fullscreenEnabled&&a.api.exitFullscreen(c)},_html_initMedia:function(a){var c=b(this.htmlElement.media).empty();b.each(a.track||[],function(a,e){var g=document.createElement("track");g.setAttribute("kind",e.kind?e.kind:"");g.setAttribute("src",e.src?e.src:"");g.setAttribute("srclang",e.srclang?e.srclang:"");g.setAttribute("label",e.label?e.label:"");e.def&&g.setAttribute("default",e.def);c.append(g)});this.htmlElement.media.src=this.status.src;"none"!==this.options.preload&&
this._html_load();this._trigger(b.jPlayer.event.timeupdate)},_html_setFormat:function(a){var c=this;b.each(this.formats,function(e,b){if(c.html.support[b]&&a[b])return c.status.src=a[b],c.status.format[b]=!0,c.status.formatType=b,!1})},_html_setAudio:function(a){this._html_setFormat(a);this.htmlElement.media=this.htmlElement.audio;this._html_initMedia(a)},_html_setVideo:function(a){this._html_setFormat(a);this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(a.poster)?
a.poster:"");this.htmlElement.media=this.htmlElement.video;this._html_initMedia(a)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=
!1,this.htmlElement.media.load());clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(a){var c=this,e=this.htmlElement.media;this.androidFix.pause=!1;this._html_load();if(this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=a;else if(isNaN(a))e.play();else{this.internal.cmdsIgnored&&e.play();try{if(!e.seekable||"object"===typeof e.seekable&&0<e.seekable.length)e.currentTime=a,e.play();else throw 1;}catch(b){this.internal.htmlDlyCmdId=setTimeout(function(){c.play(a)},250);
return}}this._html_checkWaitForPlay()},_html_pause:function(a){var c=this,e=this.htmlElement.media;this.androidFix.play=!1;0<a?this._html_load():clearTimeout(this.internal.htmlDlyCmdId);e.pause();if(this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=a;else if(!isNaN(a))try{if(!e.seekable||"object"===typeof e.seekable&&0<e.seekable.length)e.currentTime=a;else throw 1;}catch(b){this.internal.htmlDlyCmdId=setTimeout(function(){c.pause(a)},250);return}0<a&&this._html_checkWaitForPlay()},
_html_playHead:function(a){var c=this,e=this.htmlElement.media;this._html_load();try{if("object"===typeof e.seekable&&0<e.seekable.length)e.currentTime=a*e.seekable.end(e.seekable.length-1)/100;else if(0<e.duration&&!isNaN(e.duration))e.currentTime=a*e.duration/100;else throw"e";}catch(b){this.internal.htmlDlyCmdId=setTimeout(function(){c.playHead(a)},250);return}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=
!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(a,c){this.html.audio.available&&(this.htmlElement.audio[a]=c);this.html.video.available&&(this.htmlElement.video[a]=c)},_aurora_setAudio:function(a){var c=this;b.each(this.formats,function(e,b){if(c.aurora.support[b]&&a[b])return c.status.src=a[b],c.status.format[b]=!0,c.status.formatType=
b,!1});this.aurora.player=new AV.Player.fromURL(this.status.src);this._addAuroraEventListeners(this.aurora.player,this.aurora);"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())},_aurora_play:function(a){this.status.waitForLoad||isNaN(a)||this.aurora.player.seek(a);
this.aurora.player.playing||this.aurora.player.play();this.status.waitForLoad=!1;this._aurora_checkWaitForPlay();this._updateButtons(!0);this._trigger(b.jPlayer.event.play)},_aurora_pause:function(a){isNaN(a)||this.aurora.player.seek(1E3*a);this.aurora.player.pause();0<a&&this._aurora_checkWaitForPlay();this._updateButtons(!1);this._trigger(b.jPlayer.event.pause)},_aurora_playHead:function(a){0<this.aurora.player.duration&&this.aurora.player.seek(a*this.aurora.player.duration/100);this.status.waitForLoad||
this._aurora_checkWaitForPlay()},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)},_aurora_volume:function(a){this.aurora.player.volume=100*a},_aurora_mute:function(a){a?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume;this.aurora.properties.muted=a},_flash_setAudio:function(a){var c=this;try{b.each(this.formats,function(e,b){if(c.flash.support[b]&&a[b]){switch(b){case "m4a":case "fla":c._getMovie().fl_setAudio_m4a(a[b]);
break;case "mp3":c._getMovie().fl_setAudio_mp3(a[b]);break;case "rtmpa":c._getMovie().fl_setAudio_rtmp(a[b])}c.status.src=a[b];c.status.format[b]=!0;c.status.formatType=b;return!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(e){this._flashError(e)}},_flash_setVideo:function(a){var c=this;try{b.each(this.formats,function(e,b){if(c.flash.support[b]&&a[b]){switch(b){case "m4v":case "flv":c._getMovie().fl_setVideo_m4v(a[b]);break;case "rtmpv":c._getMovie().fl_setVideo_rtmp(a[b])}c.status.src=
a[b];c.status.format[b]=!0;c.status.formatType=b;return!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(e){this._flashError(e)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"});this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(a){this._flashError(a)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(a){this._flashError(a)}this.status.waitForLoad=!1},_flash_play:function(a){try{this._getMovie().fl_play(a)}catch(c){this._flashError(c)}this.status.waitForLoad=
!1;this._flash_checkWaitForPlay()},_flash_pause:function(a){try{this._getMovie().fl_pause(a)}catch(c){this._flashError(c)}0<a&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(a){try{this._getMovie().fl_play_head(a)}catch(c){this._flashError(c)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&
(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(a){try{this._getMovie().fl_volume(a)}catch(c){this._flashError(c)}},_flash_mute:function(a){try{this._getMovie().fl_mute(a)}catch(c){this._flashError(c)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var a=0,c;if(window.ActiveXObject)try{if(c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var e=c.GetVariable("$version");
e&&(e=e.split(" ")[1].split(","),a=parseInt(e[0],10)+"."+parseInt(e[1],10))}}catch(b){}else navigator.plugins&&0<navigator.mimeTypes.length&&(c=navigator.plugins["Shockwave Flash"])&&(a=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1"));return 1*a},_checkForFlash:function(a){var c=!1;this._getFlashPluginVersion()>=a&&(c=!0);return c},_validString:function(a){return a&&"string"===typeof a},_limitValue:function(a,c,e){return a<c?c:a>e?e:a},_urlNotSetError:function(a){this._error({type:b.jPlayer.error.URL_NOT_SET,
context:a,message:b.jPlayer.errorMsg.URL_NOT_SET,hint:b.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(a){var c;c=this.internal.ready?"FLASH_DISABLED":"FLASH";this._error({type:b.jPlayer.error[c],context:this.internal.flash.swf,message:b.jPlayer.errorMsg[c]+a.message,hint:b.jPlayer.errorHint[c]});this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(a){this._trigger(b.jPlayer.event.error,a);this.options.errorAlerts&&this._alert("Error!"+(a.message?"\n"+a.message:"")+(a.hint?
"\n"+a.hint:"")+"\nContext: "+a.context)},_warning:function(a){this._trigger(b.jPlayer.event.warning,d,a);this.options.warningAlerts&&this._alert("Warning!"+(a.message?"\n"+a.message:"")+(a.hint?"\n"+a.hint:"")+"\nContext: "+a.context)},_alert:function(a){a="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+a;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(a):alert(a)},_emulateHtmlBridge:function(){var a=this;b.each(b.jPlayer.emulateMethods.split(/\s+/g),
function(c,e){a.internal.domNode[e]=function(c){a[e](c)}});b.each(b.jPlayer.event,function(c,e){var d=!0;b.each(b.jPlayer.reservedEvent.split(/\s+/g),function(a,e){if(e===c)return d=!1});d&&a.element.bind(e+".jPlayer.jPlayerHtml",function(){a._emulateHtmlUpdate();var e=document.createEvent("Event");e.initEvent(c,!1,!0);a.internal.domNode.dispatchEvent(e)})})},_emulateHtmlUpdate:function(){var a=this;b.each(b.jPlayer.emulateStatus.split(/\s+/g),function(c,e){a.internal.domNode[e]=a.status[e]});b.each(b.jPlayer.emulateOptions.split(/\s+/g),
function(c,e){a.internal.domNode[e]=a.options[e]})},_destroyHtmlBridge:function(){var a=this;this.element.unbind(".jPlayerHtml");b.each((b.jPlayer.emulateMethods+" "+b.jPlayer.emulateStatus+" "+b.jPlayer.emulateOptions).split(/\s+/g),function(c,e){delete a.internal.domNode[e]})}};b.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"};b.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",
FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+b.jPlayer.prototype.version.script+
" needs Jplayer.swf version "+b.jPlayer.prototype.version.needFlash+" but found "};b.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."};
b.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"};b.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."};
b.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}});
function Accordion(b){window[b]=this;var d=this,f,c,a,e,g;d.initialize=function(){f=d.settings.cssClasses.expandedSectionHeader;c=d.settings.cssClasses.sectionHeader;a=d.settings.onSectionSlideDown;e=d.settings.onSectionSlideUp;g=d.settings.onInitComplete;$.each(d.foldableSections(),function(a,c){$("#"+c.headerLink+", #"+c.header).click(function(){d.handleSectionClick(c)})});null!=g&&$(document).trigger(g,d)};d.foldableSections=function(){return $(d.sections).filter(function(a,c){return c.isFoldable})};
d.handleSectionClick=function(a){a.isExpanded?d.collapseSection(a):d.expandSection(a)};d.expandSection=function(e){$("#"+e.header).removeClass(c).addClass(f);$("#"+e.content).slideDown(d.settings.animationDuration,function(){null!=a&&$(document).trigger(a,e.content)});e.isExpanded=!e.isExpanded};d.collapseSection=function(a){$("#"+a.header).removeClass(f).addClass(c);$("#"+a.content).slideUp(d.settings.animationDuration,function(){null!=e&&$(document).trigger(e,a.content)});a.isExpanded=!a.isExpanded};
return d}
function AccordionGrid(b){window[b]=this;var d=this;this.expandedRowCssClass=this.hiddenGridCssClass=null;this.subGridClientIds=[];d.toggleAccordionGrid=function(b,c){var a=$("."+b).parent("li");a.hasClass(d.hiddenGridCssClass)||void 0==c?("UL"!=$("."+b).get(0).tagName&&$(d.subGridClientIds).each(function(){this.cssClass==b&&1>this.totalCount&&this.refresh()}),$(c).addClass(d.expandedRowCssClass),a.removeClass(d.hiddenGridCssClass)):($(c).removeClass(d.expandedRowCssClass),a.addClass(d.hiddenGridCssClass))};d.reOpenOnPostBack=
function(b,c){""!=b&&void 0!=b&&d.toggleAccordionGrid(b);""!=c&&void 0!=c&&d.toggleAccordionGrid(c)};d.getSelectedValues=function(){var b=!1;$(d.subGridClientIds).each(function(){0<this.getSelectedValues().length&&(b=!0)});return b?!0:""}}
function AsyncDependenciesResolver(){var b={},d={deferredObjects:{},getOrCreateDeferredObject:function(b){if(d.deferredObjects[b])return d.deferredObjects[b];d.deferredObjects[b]=$.Deferred();return d.deferredObjects[b]}};b.dependencyLoaded=function(b){d.getOrCreateDeferredObject(b).resolve()};b.subscribeToDependencyLoadEvent=function(b,c){d.getOrCreateDeferredObject(b).done(c)};b.loadScriptDynamically=function(b,c){var a=document.createElement("script");a.type="text/javascript";a.onload=c;a.onreadystatechange=
function(){"complete"===a.readyState&&c()};a.src=b;$(window).load(function(){document.getElementsByTagName("head")[0].appendChild(a)})};b.loadScriptAsync=function(b){var c=$.Deferred(),a=function(){c.resolve()},e=function(){c.reject()},g=function(){c.notify()},d=document.createElement("script");d.type="text/javascript";d.onload=a;d.onreadystatechange=function(){"complete"===d.readyState&&a()};d.onerror=e;if(b.attributes)for(var k in b.attributes)b.attributes.hasOwnProperty(k)&&d.setAttribute(k,b.attributes[k]);
d.src=b.url;document.getElementsByTagName("head")[0].appendChild(d);b.timeoutInMilliseconds&&setTimeout(e,b.timeoutInMilliseconds);b.notifyLongLoading&&setTimeout(g,3E3);return c.promise()};return b}var asyncDependencies={signalRHubScript:0},asyncDependenciesResolver=AsyncDependenciesResolver();
function BrowserSniffer(){var b={isDirectoryUploadSupported:function(){var b=document.createElement("input");return"webkitdirectory"in b||"directory"in b},isDragAndDropSupported:function(){return"draggable"in document.createElement("span")},isInternetExplorer9:function(){return $("body").hasClass("h-ie9")},isInternetExplorer10OrOlder:function(){return 0<window.navigator.userAgent.indexOf("MSIE ")?!0:!1},isInternetExplorer11:function(){return 0<window.navigator.userAgent.indexOf("Trident/")?!0:!1},
isInternetExplorerAnyVersion:function(){return b.isInternetExplorer9()||b.isInternetExplorer10OrOlder()||b.isInternetExplorer11()?!0:!1},isFirefox:function(){return 0<navigator.userAgent.indexOf("Firefox")?!0:!1},isEdge:function(){return 0<window.navigator.userAgent.indexOf("Edge/")?!0:!1},isMobileIos:function(){return window.navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1},isAnyMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?
!0:!1}};return b}var browserSniffer=BrowserSniffer();
function Calendar(b){window[b]=this;var d=this,f,c,a,e;d.initialize=function(){c=d.settings;a=d.customSettings;e=d.customScripts;f=d.calendar;$.extend(c,{select:e.onSelect,eventRender:e.eventRender,dayRender:e.dayRender,eventDrop:e.eventDrop,eventResize:e.eventResize,eventClick:e.eventClick,loading:e.loading,weekNumberCalculation:function(a){var e=f.fullCalendar("getView");return e&&e.name==window.fullCalendarViews.agendaDay?"":Calendar.getWeekNumber(a,c.firstDay)},viewChange:e.onChangeView,viewRender:function(a){f.fullCalendar("option",
"contentHeight",a.name==window.fullCalendarViews.month?NaN:2500);e.viewRender(a)},updateTodayButton:e.updateTodayButton,eventAfterAllRender:e.eventAfterAllRender,showMoreMousedown:e.showMoreMousedown});f.fullCalendar(c)};d.refetchEvents=function(c,e){var b=[];$.each(c,function(a,c){b.push(c.id)});$.isFunction(e)&&e(!0);$.ajax({type:"POST",url:a.refetchEventsSource,data:{ids:b.join()},datatype:"json",success:function(a){$.each(c,function(a,c){d.removeEvent(c.id)});$.each(a,function(a,e){var b=$.grep(c,
function(a){return a.id==e.id})[0];b.source?d.addEventForSource(e,b.source):d.addEvent(e)});$.isFunction(e)&&e(!1)},error:function(){$.isFunction(e)&&e(!1)}})};d.refetchAll=function(){f.fullCalendar("refetchEvents")};d.removeEvent=function(a){f.fullCalendar("removeEvents",a)};d.addEvent=function(a){f.fullCalendar("renderEvent",a)};d.refetchSource=function(a){f.fullCalendar("refetchSource",a)};d.refetchSourceByName=function(a){a in d.eventSources&&d.refetchSource(d.eventSources[a])};d.addEventForSource=
function(a,c){f.fullCalendar("renderEventForSource",a,c)};d.addEventForSourceByName=function(a,c){c in d.eventSources&&d.addEventForSource(a,d.eventSources[c])}}
Calendar.getWeekNumber=function(b,d){d="number"==typeof d?d:1;d=0==d?7:d;var f=Calendar.calculateWeekNumber(b,d);if(11==b.getMonth()){var c=new Date(b.getFullYear()+1,0,1);if(7==d)c=new Date(b.getFullYear(),b.getMonth(),b.getDate()-b.getDay()),(new Date(c.getFullYear(),c.getMonth(),c.getDate()+6)).getFullYear()>c.getFullYear()&&(f=1);else{var c=c.getIsoDay(),a=new Date(b.getFullYear(),b.getMonth(),b.getDate()-(b.getIsoDay()-1));(new Date(a.getFullYear(),a.getMonth(),a.getDate()+6)).getFullYear()>
a.getFullYear()&&5>c&&(f=1)}}0==f&&(f=new Date(b.getFullYear(),b.getMonth(),b.getDate()-7),f=Calendar.calculateWeekNumber(f,d));return f};
Calendar.calculateWeekNumber=function(b,d){var f=[0,31,59,90,120,151,181,212,243,273,304,334],c=[0,31,60,91,121,152,182,213,244,274,305,335],f=1==(new Date(b.getFullYear(),1,29)).getMonth()?b.getDate()+c[b.getMonth()]:b.getDate()+f[b.getMonth()],c=b.getIsoDay(),c=Calendar.getShiftBetweenNumbers(d,c),c=Calendar.shiftNumber(1,c);return Math.floor((f-c+(7==d?13:10))/7)};Calendar.getShiftBetweenNumbers=function(b,d){for(var f=0;7>f;f++){if(b==d)return f;b++;8==b&&(b=1)}return 0};
Calendar.shiftNumber=function(b,d){if(0==d)return b;for(var f=0;f<d;f++)b++,8==b&&(b=1);return b};Date.prototype.getIsoDay=function(){var b=this.getDay();return 0==b?7:b};
function ClientInlineEditor(b,d,f,c,a,e,g){if(b){var h=this;h.isWatermarkMode=!1;h.isGetInitialTextFromHidden=!!f;h.hiddenField=f;h.viewField=$(b);h.editModeActivator=d?$(d):h.viewField;h.editField=void 0;h.editHidden=void 0;h.editLink=$();h.onEditFunction=a;h.onChangeModeFunction=e;h.userData=g;h.options=$.extend({multiline:!1,watermark:"",autoResize:!1,clickToEditToolTip:"",clickToSaveToolTip:"",submitOnEnter:!1,ignoreViewModeText:!1,editFieldCssClass:"",watermarkCssClass:"",editFieldAutoWidth:!0,
editFieldDisplayInline:!1,viewFieldRemoveDisplay:!1,highlightOnSave:!1,highlightOnFocus:!1,maxLength:0,renderRightLinkWithIcon:!1,rightLinkCssClass:"",rightLinkViewModeCssClass:"",rightLinkEditModeCssClass:"",supressOriginalBehaviour:!1,blockedCharacters:[],forceContainerSize:!1},c);h.options.useWatermark=!!h.options.watermark;h.options.useClickToEditToolTip=!!h.options.clickToEditToolTip;h.options.useEditFieldCssClass=!!h.options.editFieldCssClass;h.options.useWatermarkCssClass=!!h.options.watermarkCssClass;
h.options.renderRightLinkWithIcon&&(h.editLink=$("<a href='#'></a>").addClass(h.options.rightLinkCssClass).append($("<img alt='' />").attr("src",CommonConstants.onePixelTransparentImageSource)).insertAfter(h.viewField).click({self:h},h.rightLinkClick).keydown({self:h},h.rightLinkKeyDown),h.initDeviceChecks(),h.toggleRightLinkMode(!0,!0));h.options.supressOriginalBehaviour||h.editModeActivator.click($.proxy(h.switchToEditMode,h)).filter("a").keydown({self:h},h.editModeActivatorKeyDown);h.toggleActivatorTooltip(!0);
h.fixSize();return{switchToEditMode:function(){h.switchToEditMode();return h.editField},setNewText:function(a){h.setNewText(a)},getEditFieldText:function(){return h.getEditFieldText()},setToolTip:function(a){h.options.clickToEditToolTip=a;h.editModeActivator.attr("title",a)}}}}
ClientInlineEditor.prototype={isIos:void 0,hiddenCssClass:"h-hidden",createEditor:function(b){this.options.renderRightLinkWithIcon||this.initDeviceChecks();this.editField=$(b.multiline?"<textarea/>":'<input type="text"/>').css("resize","none").addClass(this.hiddenCssClass);this.setEditFieldWidth();b.useEditFieldCssClass&&this.editField.addClass(b.editFieldCssClass);!b.multiline&&b.maxLength&&this.editField.attr("maxlength",b.maxLength);b.multiline&&b.maxLength&&this.editField.maxlength({max:b.maxLength});
this.editHidden=this.isGetInitialTextFromHidden?$(this.hiddenField):$('<input type="hidden"/>').val(this.viewField.text());this.setNewText(b.ignoreViewModeText?"":$.trim(this.editHidden.val()));this.viewField.after(this.editField);this.isGetInitialTextFromHidden||this.viewField.after(this.editHidden);b.multiline&&b.autoResize&&this.editField.autogrow();this.switchToViewMode(!1);this.editField.removeClass(this.hiddenCssClass).keyup({self:this},this.editFieldKeyUp).keypress({self:this},this.editFieldKeyPress).on("paste",
$.proxy(this.hideWatermark,this)).focus({self:this},this.editFieldFocus).blur({self:this},this.editFieldBlur)},setNewText:function(b){this.options.ignoreViewModeText||this.options.supressOriginalBehaviour||(b?this.options.multiline?this.viewField.html(CommonFunctions.replaceLineBreaksWithBrTags(b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g," &nbsp;"))):this.viewField.text(b):this.viewField.html(""));this.editField||this.createEditor(this.options);this.editField.val(b);
this.editHidden.val(b)},fixSize:function(){if(this.options.forceContainerSize){var b=this.viewField.parent();b.css("width","0px");setTimeout(function(){b.css("width","auto")},10)}},switchToViewMode:function(b,d){this.editField.hide();b&&this.options.highlightOnSave?this.viewField.fadeIn("slow"):this.viewField.show();this.options.viewFieldRemoveDisplay&&this.viewField.css("display","");this.toggleActivatorTooltip(!0);this.fireChangeMode(!1,b,d);this.toggleRightLinkMode(!0)},switchToEditMode:function(){this.editField?
this.setEditFieldWidth():this.createEditor(this.options);this.isViewMode()&&(this.viewField.hide(),this.editField.show(),this.options.editFieldDisplayInline&&this.editField.css("display","inline"),this.toggleActivatorTooltip(!1),this.fireChangeMode(!0,!1),this.editField.focus(),this.toggleRightLinkMode(!1))},fireChangeMode:function(b,d,f){if(this.onChangeModeFunction){var c=this;setTimeout(function(){c.onChangeModeFunction({isEditMode:b,isNewTextSaved:d,actualText:f,source:c.viewField,currentOptions:c.options,
userData:c.userData})})}this.fixSize()},isViewMode:function(){return this.editField.is(":hidden")},updateText:function(){var b=this;b.updateValue();var d={isUpdateSuccess:!0,stopOnEdit:!1,actualText:b.isWatermarkMode?"":b.editField.val(),source:b.viewField,currentOptions:b.options,userData:b.userData};if(d.actualText===b.editHidden.val())setTimeout(function(){b.switchToViewMode(!1)},b.options.renderRightLinkWithIcon?100:0);else if(b.toggleEditField(!1),b.onEditFunction)b.onEditFunction(d,$.proxy(b.onUpdateComplete,
b));else setTimeout(function(){b.onUpdateComplete(d)})},onUpdateComplete:function(b){this.toggleEditField(!0);b.isUpdateSuccess?(this.setNewText(b.actualText),this.switchToViewMode(!0,b.actualText)):b.stopOnEdit||this.rollbackText()},rollbackText:function(){this.editField.val(this.editHidden.val());this.switchToViewMode(!1)},toggleEditField:function(b){this.editField.prop("disabled",!b)},toggleActivatorTooltip:function(b){this.editModeActivator.css("cursor",b?"pointer":"default");this.options.useClickToEditToolTip&&
this.editModeActivator.attr("title",b?this.options.clickToEditToolTip:null)},isEnterKey:function(b){return b.which===CommonConstants.keyCodes.enter&&!b.shiftKey},isEnterKeyAndNeedToSubmit:function(b){return this.options.submitOnEnter&&b.which===CommonConstants.keyCodes.enter&&!b.shiftKey},showWatermark:function(){!this.options.useWatermark||this.isWatermarkMode||this.editField.val()||(this.options.useWatermarkCssClass&&this.editField.addClass(this.options.watermarkCssClass),this.editField.val(this.options.watermark),
this.isWatermarkMode=!0)},hideWatermark:function(){this.options.useWatermark&&this.isWatermarkMode&&(this.options.useWatermarkCssClass&&this.editField.removeClass(this.options.watermarkCssClass),this.editField.val(""),this.isWatermarkMode=!1)},editModeActivatorKeyDown:function(b){var d=b.data.self;d.fireClickByKeyDown(b,d.editModeActivator)},rightLinkKeyDown:function(b){var d=b.data.self;d.fireClickByKeyDown(b,d.editLink)},fireClickByKeyDown:function(b,d){b.which===CommonConstants.keyCodes.enter&&
(b.preventDefault(),setTimeout(function(){d.click()},400))},editFieldFocus:function(b){b=b.data.self;var d=b.editField.get(0);b.showWatermark();CommonFunctions.setFocusTo(d,!b.isWatermarkMode);b.options.highlightOnFocus&&(b.isIos?d.setSelectionRange(0,d.value.length):b.editField.select());b.options.multiline&&b.options.autoResize&&b.editField.change()},editFieldBlur:function(b){b.data.self.updateTextOnBlur();b.stopPropagation()},updateTextOnBlur:function(){this.editField.prop("disabled")||(this.hideWatermark(),
this.updateText())},editFieldKeyUp:function(b){var d=b.data.self;if(!d.isViewMode()){if(d.editField.prop("disabled"))return!0;if(b.which===CommonConstants.keyCodes.escape)d.rollbackText();else if(d.isEnterKey(b)){if(d.options.multiline&&!d.isEnterKeyAndNeedToSubmit(b))return!0;d.updateText();if(d.isEnterKeyAndNeedToSubmit(b))return b.stopPropagation(),!1}else d.isIos||d.isAndroidDevice||d.updateValue()}return!0},updateValue:function(){if(null!=this.options.blockedCharacters&&0<this.options.blockedCharacters.length){for(var b=
this.editField.val(),d=b,f=this.options.blockedCharacters.length,c=0;c<f;c++)if(this.options.blockedCharacters[c])for(;-1<b.indexOf(this.options.blockedCharacters[c]);)b=b.replace(this.options.blockedCharacters[c],"");b!==d&&this.editField.val(b)}},editFieldKeyPress:function(b){var d=b.data.self;d.hideWatermark();d.options.multiline||!d.isEnterKey(b)||d.isEnterKeyAndNeedToSubmit(b)||b.preventDefault();return!d.isEnterKeyAndNeedToSubmit(b)},initDeviceChecks:function(){this.isAndroidDevice=(this.isIos=
CommonFunctions.isIos())?!1:CommonFunctions.isAndroidDevice()},rightLinkClick:function(b){var d=b.data.self;!d.editField||d.isViewMode()?d.switchToEditMode():d.isIos&&d.updateTextOnBlur();b.preventDefault()},toggleRightLinkMode:function(b,d){this.editLink.toggleClass(this.options.rightLinkEditModeCssClass,!b).prop("title",b?this.options.clickToEditToolTip:this.options.clickToSaveToolTip);this.isIos||this.isAndroidDevice||this.editLink.toggleClass(this.options.rightLinkViewModeCssClass,b);b&&!d&&this.editLink.focus().blur()},
getEditFieldText:function(){return this.editField.val()},setEditFieldWidth:function(){this.options.editFieldAutoWidth&&this.editField.width(this.viewField.width())}};function CodeContracts(){return{require:function(b,d){if(!objectState.isBoolean(b)||objectState.isNullOrUndefined(d))throw"invalid contract";if(!b)if(objectState.isFunction(d))d();else throw d;}}}var contract=CodeContracts();
function ColorPicker(b){function d(a){a=$(a).find("input:hidden:first").val();c(a)}function f(){var a=h.getSelectedColorKey();c(a)}function c(a){k.trigger(h.settings.clientEvents.colorOver,a)}function a(){if(l.is(":hidden")){var a=k.offset(),c=a.top+k.height()+3+"px",a=h.settings.popupAlignment===h.settings.popupAlignmentType.right?a.left-l.width()+k.width()+3+"px":a.left+"px";l.css({top:c,left:a}).show()}else e()}function e(a){l.hide();a&&k.focus()}function g(){l=$("<div></div>").addClass(h.settings.cssClasses.popup).addClass(h.settings.cssClasses.customPopup).appendTo("form").keydown(function(a){(a||
window.event).which===CommonConstants.keyCodes.escape&&(f(),e());return!0});m=$("<ul></ul>").appendTo(l);for(var a=0;a<h.settings.colorKeys.length;a++){var c=h.settings.colorKeys[a],b=$("<li></li>").append($('<input type="hidden" />').val(c)).append($("<a></a>").attr("href","javascript:void(0);").addClass(h.settings.colors[c].PickerColorCssClass)).appendTo(m);c===h.settings.selectedColorKey&&b.addClass(h.settings.cssClasses.selected)}}window[b]=this;var h=this,k,l,m;h.initialize=function(){k=h.controls.pickerLink;
g();$(document).click(function(a){a=a?a:window.event;var c=a.srcElement||a.target;!l.length||l.is(":hidden")||c===k.get(0)||$(c).parents().filter("#"+k.prop("id")).length||(c=l.offset(),a.clientX>c.left&&a.clientX<c.left+l.width()&&a.clientY>c.top&&a.clientY<c.top+l.height()||e())}).on("closeColorPicker",function(){e(!1)});var b=m.find("li");b.find("a").click(function(){var a=$(this.parentNode),g=a.find("input:hidden:first").val();e();b.removeClass(h.settings.cssClasses.selected);a.addClass(h.settings.cssClasses.selected);
c(g);k.trigger(h.settings.clientEvents.colorChange,g);return!1}).mouseenter(function(){d(this.parentNode)}).mouseleave(function(){f()}).focusin(function(){d(this.parentNode)}).focusout(function(){f()});k.click(function(c){c.preventDefault();$(document).click();a()})};h.getColorByKey=function(a){return h.settings.colors[a].RepaintColorCssClass};h.setColor=function(a){var c=m.find("li > input:hidden:[value='"+a+"']").parent();m.find("li").removeClass(h.settings.cssClasses.selected);c.addClass(h.settings.cssClasses.selected);
k.trigger(h.settings.clientEvents.colorChange,a)};h.setPickerLink=function(a){h.controls.pickerLink!==a&&(f(),e(),h.controls.pickerLink=a,h.initialize())};h.openPopup=function(){a()};h.getSelectedColorKey=function(){return m.find("li."+h.settings.cssClasses.selected+" input:hidden:first").val()};return h}
function ColorPickerMVC(b,d,f,c){function a(c){e(n,v,u);e(r,v,u);q&&q.setAttribute("class",m.preview+" "+u);s.classList.toggle(m.open);s.classList.contains(m.open)?(document.addEventListener("click",a),document.addEventListener("touch",a)):(document.removeEventListener("click",a),document.removeEventListener("touch",a));c&&c.stopPropagation();return!1}function e(a,c,e){a.setAttribute("value",c);a.setAttribute("class",e);try{a.dispatchEvent(new Event("change"))}catch(b){c=document.createEvent("Event"),
c.initEvent("change",!0,!0),a.dispatchEvent(c)}}function g(a,c){a&&c&&(w&&w.removeAttribute("selected"),w=c,v=c.value,u=a.classList?a.classList[0]:"",e(n,v,u),e(r,v,u),q&&q.setAttribute("class",m.preview+" "+u),c.setAttribute("selected","selected"))}function h(c,e){return function(b){g(c,e);a(b);return!1}}function k(a,c){return function(b){e(r,c.value,a.classList[0]);q&&q.setAttribute("class",m.preview+" "+a.classList[0]);b.stopPropagation();return!1}}function l(c,e){return function(c){if(c.keyCode===
CCL.CommonConstants.keyCodes.escape)return a(c),!1}}var m={preview:"ccl-colorpicker-mvc__previewbox",open:"ccl-colorpicker-mvc--open"},n=document.getElementById(b),p=document.getElementById(d),s=n.parentElement,r=s.getElementsByTagName("input")[1],q=s.getElementsByClassName(m.preview)[0];b=s.getElementsByTagName("ul")[0].children;var w,v,u;s.addEventListener("mouseout",function(){e(n,v,u);e(r,v,u);q&&q.setAttribute("class",m.preview+" "+u)});s.addEventListener("click",function(a){a.stopPropagation();
!1});s.addEventListener("touch",function(a){a.stopPropagation();!1});q&&q.addEventListener("click",a);q&&q.addEventListener("touch",a);p.addEventListener("click",a);p.addEventListener("touch",a);Array.prototype.forEach.call(b,function(a){var c=a.children[0],e=a.children[1];a.addEventListener("click",h(e,c));a.addEventListener("touch",h(e,c));a.addEventListener("mouseover",k(e,c));a.addEventListener("focus",k(e,c));a.addEventListener("keydown",l(e,c))});b[b.length-1].addEventListener("keydown",function(a){a.keyCode===
CCL.CommonConstants.keyCodes.tab&&(p.focus(),a.stopPropagation())});c&&(f=Math.floor(Math.random()*b.length)+1);w=s.querySelector("ul > li > input[value='"+f+"']");g(w.nextElementSibling,w)}window.Array.removeElements=function(b,d){for(var f,c=[].concat(d),a=c.length,e;a&&b.length;)for(f=c[--a];-1!=(e=b.indexOf(f));)b.splice(e,1);return b};String.format||(String.format=function(b){return CCL.CommonFunctions.formatString.apply(this,arguments)});
String.prototype.getQueryStringParameter||(String.prototype.getQueryStringParameter=function(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");b=(new RegExp("[\\?&]"+b+"=([^&#]*)")).exec(this);return null===b?"":decodeURIComponent(b[1].replace(/\+/g," "))});
String.prototype.setQueryStringParameter||(String.prototype.setQueryStringParameter=function(b,d){return d?-1<this.indexOf(b+"=")?this.replace(new RegExp(b+"=[^&]*(&|$)"),b+"="+encodeURIComponent(d)+"&"):this.slice(0,this.indexOf("?")+1)+b+"="+encodeURIComponent(d)+"&"+this.slice(this.indexOf("?")+1):-1<this.indexOf(b+"=")?this.replace(new RegExp(b+"=[^&]*(&|$)"),""):this.toString()});
String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(b,d){d=d||0;return this.lastIndexOf(b,d)===d}});var CCL;
(function(b){(function(b){})(b.CommonConstants||(b.CommonConstants={}));(function(b){b.setFocusTo=function(b,c){if(b.setSelectionRange){b.focus();var a=c?b.value.length:0;b.setSelectionRange(a,a)}else b.createTextRange&&(a=b.createTextRange(),c&&a.collapse(!1),a.select())};b.setupDropDownMenu=function(b,c,a,e){var g=b?"touchstart":"click";a.find("a").click(function(){a.hide();e&&e()});c.on(g+" keydown",function(c){c.type!==g&&c.which!==CommonConstants.keyCodes.arrowDown&&c.which!==CommonConstants.keyCodes.enter||
"false"!==$(".c-messages-popup").attr("aria-hidden")||$(".c-messages__overlay").click();a.toggle()});$(document).on(g+" "+CommonTriggers.clickInInnerFrame,function(b){if(a.is(":visible")){var g=b.target,d=$(g);b=g===c.get(0)||1===d.closest(c).length;g=!b&&(g===a.get(0)||1===d.closest(a).length);b||g||(a.hide(),e&&e())}});$(document).keydown(function(c){c.which===CommonConstants.keyCodes.escape&&($(a).hide(),e&&e())})};b.safeExecuteFunction=function(b){if(b)try{return b()}catch(c){}return!0};b.isPlainText=
function(b){var c=RegExp("^s*<[a-z]+>[^<]*</[a-z]+>(s|\n)*$","ig");b=b.replace(/<br((\s*)|(\s[^>]*))\/?>/gi,"");b=b.replace(/<\/p>\s*<p(\s+[^>]*)?>/gi,"\n");return-1==b.indexOf("<")||null!=b.match(c)};b.isIos=function(){return null!=navigator.userAgent.match(/iPod|iPhone|iPad/i)};b.isAndroidDevice=function(){return null!=navigator.userAgent.match(/Android/i)};b.isAndroidBrowser=function(){return $("body").hasClass("h-android")};b.isIe=function(){return-1!==navigator.userAgent.indexOf("MSIE")||/rv:11.0/i.test(navigator.userAgent)};
b.setEmbeddedObjectsVisibility=function(f,c,a){c&&c.find("applet").toggle(f);a&&(c=a.find("iframe,object"),b.isIe()?c.toggle(f):c.css("visibility",f?"visible":"hidden").toggleClass("h-visibility-hidden",!f))}})(b.CommonFunctions||(b.CommonFunctions={}));(function(b){})(b.CommonWindowMessages||(b.CommonWindowMessages={}));(function(b){})(b.CommonTriggers||(b.CommonTriggers={}))})(CCL||(CCL={}));
var CommonConstants=CCL.CommonConstants,CommonFunctions=CCL.CommonFunctions,CommonWindowMessages=CCL.CommonWindowMessages,CommonTriggers=CCL.CommonTriggers;
(function(b){b.fn.setCursorPosition=function(b){this.each(function(f,c){if(c.setSelectionRange)c.setSelectionRange(b,b);else if(c.createTextRange){var a=c.createTextRange();a.collapse(!0);a.moveEnd("character",b);a.moveStart("character",b);a.select()}});return this};b.fn.scrollMinimal=function(){var d=this.offset().top,f=this.outerHeight(!0),c=b(window).scrollTop(),a=b(window).height();d<c?b(window).scrollTop(d):d+f>c+a&&b(window).scrollTop(d-a+f)};b.fn.toggleHyperlink=function(b){b?(this.removeAttr("disabled"),
this.removeData("disabled")):(this.attr("disabled","disabled"),this.data("disabled",!0));return this};b.fn.getIfHyperLinkEnabled=function(){return"disabled"!==this.attr("disabled")&&!this.data("disabled")};b.fn.maxlength=function(d){d=b.extend({max:200},d);return this.each(function(){var f=b(this);f.keypress(function(c){var a=d.max,e=b(c.target),g=c.which;(g>=CommonConstants.keyCodes.space||g===CommonConstants.keyCodes.enter)&&e.val().length>=a&&c.preventDefault()});f.change(function(c){var a=d.max;
c=b(c.target);c.val().length>a&&(a=c.val().substr(0,a),c.val(a))})})};b.fn.tclick=function(b){this.on("touchstart",function(f){b.call(this,f);f.stopPropagation();f.preventDefault()});this.on("click",function(f){b.call(this,f)});return this}})(jQuery);
(function(b){b.ContentBlockExpander=function(b,f){function c(a){if(!a)return!1;var c=a.css("max-height");return!c||0>=c.indexOf("px")?!1:parseInt(c.replace("px",""),10)==a.height()}function a(){h||(h=$('<div class="'+css.container+'" data-collapsed="1"><span class="'+css.line+'"></span><span class="'+css.line+'"></span><div class="'+css.clearfix+'"></div><a href="javascript:void(0)" id="'+linkId+'">'+f.lang.showMore+"</a></div>").insertAfter(b),h.find("a").on("click",function(){e(!!h.attr("data-collapsed"))}))}
function e(a){(a=!!a)?h.removeAttr("data-collapsed"):h.attr("data-collapsed",1);$("#"+linkId).text(a?f.lang.showLess:f.lang.showMore);b.css("max-height",a?"":collapseHeight)}if(!b||!f)throw"error invoking ContentBlockExpander";f.clientInstanceName&&(window[f.clientInstanceName]=this);var g=this;css=$.extend({},{overflow:"h-ov-hidden",container:"ccl-textexpander-container",line:"ccl-textexpander-line",clearfix:"h-clf"},f.css);maxHeight=f.maxHeight||0;collapseHeight=f.collapseHeight||maxHeight;linkId=
f.clientInstanceName+"_link";var h;g.renderShowMoreLinkIfNeed=function(g){0<maxHeight&&(c(b)||b.height()>maxHeight)?setTimeout(function(){b.addClass(css.overflow);b.css("max-height",collapseHeight);a();h.show();f.callback&&f.callback();e(g)},0):h&&(b.css("max-height",""),h.hide())};g.reRenderShowMoreLink=function(){h&&g.renderShowMoreLinkIfNeed(!h.attr("data-collapsed"))};g.expandIfCollapsed=function(){h.attr("data-collapsed")&&e(!0)};g.renderShowMoreLinkIfNeed(!1)}})(CCL||(CCL={}));
function ContextDialog(b,d){var f=this,c=$(b),a,e={setFocus:!0,width:300,maxWidth:null,showArrow:!0,arrowOffset:"auto",align:"auto",valign:"auto",marginLeft:10,marginRight:10,marginTop:-40,marginBottom:40,toggleElement:null,customScripts:{beforeCloseDialog:null},zIndex:999,closeWithOutsideClick:!0,scrollToLastWindowOnClose:!0,allowAccessToParentWindow:!0,expandParentFrame:!0,closeLinkTooltip:"",blackThemeActivated:!1,showHeader:!0,showCloseLink:!0,useMobileViewIfNeeded:!0},g=c.wrap("<div class='ccl-context-dialog'></div>").parent(),
h=g.parent(),k=$("<header class='ccl-context-dialog-header'></header>").prependTo(g),l=$("<a href='javascript:void(0);'>&#215;</a>").appendTo(g),m=$("<h2></h2>").appendTo(k),n=$("<div class='ccl-context-dialog-arrow'></div>").prependTo(g),p,s=$("html"),r=$("body"),q=$(window),w,v,u=CommonFunctions.isAndroidBrowser(),t;f.dispose=function(){c.removeClass("ccl-context-dialog-content");c.insertBefore(g);g.remove();f=null};f.openDialogAt=function(b,d,k){function l(){var a,c,f=g.outerWidth(),h=g.outerHeight(),
p=q.scrollLeft(),s=q.scrollTop(),r=q.width()+p,s=q.height()+s;"auto"==e.align?c=r-b>f+e.marginLeft?b+e.marginLeft:b-f-e.marginRight:"center"==e.align?c=b-f/2:"left"==e.align?c=b-f-e.marginRight:"right"==e.align&&(c=b+e.marginLeft);"auto"==e.valign?a=s-e.marginBottom-d>h+e.marginTop?d+e.marginTop:s-h-e.marginBottom:"top"==e.valign?a=d-h-e.marginBottom:"center"==e.valign?a=d-h/2:"bottom"==e.valign&&(a=d+e.marginTop);k||(c=c<p?p:c);g.css({top:a,left:c});var w,v;a<=d&&a+h>d?(w="top",v=Math.max(0,Math.min(d-
a,h-12)),c+f<b?g.addClass("left"):b<c&&g.addClass("right")):c<=b&&c+f>b&&(w="left",v=Math.max(0,Math.min(b-c,f-12)),a>d?g.addClass("bottom"):a+h<d&&g.addClass("top"));"auto"==e.arrowOffset?"top"==w?n.css({top:v,left:""}):"left"==w&&n.css({top:"",left:v}):n.css({top:"",left:""});k&&(c=g.outerWidth()/2,0<c-m&&(g.css({left:e.marginLeft-m}),n.css({left:m-e.marginLeft+b})),f=c-(t-m-b-e.marginRight),0<f&&(g.css({left:b-c-f-e.marginRight}),n.css({left:c+f+e.marginRight})),u||(g.css("max-height",""),a=q.height()-
a-e.marginBottom,0<a&&g.height()>a&&g.css("max-height",a)))}k?b+=h.width():(b||(b=0),d||(d=0));$(document).trigger("contextdialog:show",[c]);p=q.scrollTop();f.isMobileView=!1;e.useMobileViewIfNeeded?(s.addClass("ccl-context-dialog-has-overlay"),f.isMobileView=q.width()<=CommonConstants.mediaScreenSizes.mobile):g.addClass("ccl-disable-mobile-view");g.toggleClass("ccl-context-dialog-black-theme",e.blackThemeActivated);g.toggleClass("show-arrow",e.showArrow);g.removeClass("top bottom left right");e.width&&
g.outerWidth(e.width);e.maxWidth&&g.css("max-width",e.maxWidth+"px");e.showHeader||f.hideHeader();e.showCloseLink||f.toggleCloseLink(!1);var m=h.position().left,t=q.width();if(f.isMobileView&&k)g.addClass("bottom"),g.css({left:e.marginLeft-m,width:t-e.marginLeft-e.marginRight}),n.css({left:m-e.marginLeft+b});else if(f.isMobileView){if(e.expandParentFrame&&(CommonFunctions.makePostMessageCall(window.top,new CommonWindowMessages.GenericMessage(CommonWindowMessages.MessageNames.expandContentAreaFrame)),
IframeResizer.reportSetIframeDefaultHeight()),e.allowAccessToParentWindow&&window.parent&&$(window.parent).width()>CommonConstants.mediaScreenSizes.mobile&&l(),window.top!=window)try{var v=$(window.top).width();v<q.width()&&r.outerWidth(v,!0)}catch(O){}}else l();g.show();w=window.parent&&e.allowAccessToParentWindow?window.parent.document.activeElement:document.activeElement;e.setFocus&&e.focusTarget&&e.focusTarget.focus();a=!0};f.openDialog=function(c){if(!a){var e=0,b=0;c&&("touchend"===c.type&&
null!=c.originalEvent&&(e=c.originalEvent.changedTouches[0],c.pageX=e.pageX,c.pageY=e.pageY),e=c.pageX,b=c.pageY,0>=e&&0>=b&&c.target&&(b=$(c.target).offset(),e=b.left+c.target.offsetWidth/2,b=b.top+c.target.offsetHeight/2),c.stopPropagation());f.openDialogAt(e,b)}};f.openModal=function(){a||(t&&t.remove(),t=$("<div id='mask'></div>").appendTo("body").addClass("ccl-dialog-mask").click(f.closeDialog).css({opacity:"0",filter:"alpha(opacity=0)","z-index":e.zIndex-1}),t.fadeTo(400,.5),f.openDialogAt($(window).width()/
2,$(window).height()/2))};f.closeDialog=function(b){e.customScripts.beforeCloseDialog&&CommonFunctions.safeExecuteFunction(e.customScripts.beforeCloseDialog(b));f.isMobileView&&e.expandParentFrame&&(CommonFunctions.makePostMessageCall(window.top,new CommonWindowMessages.GenericMessage(CommonWindowMessages.MessageNames.collapseContentAreaFrame)),IframeResizer.reportSetIframeDefaultHeight(),r.width(""));t&&t.fadeOut(400,0,function(){t.remove();t=null});g.hide();s.removeClass("ccl-context-dialog-has-overlay");
e.scrollToLastWindowOnClose&&q.scrollTop(p);$(document).trigger("contextdialog:close",[c]);a=!1;e.scrollToLastWindowOnClose&&w&&w.focus()};f.setCloseFunction=function(a){f.closeDialog=a;l.unbind("click");l.click(a)};f.setTitle=function(a){e.title=a;m.text(e.title)};f.setContent=function(a){c.html(a)};f.setCloseLinkFunction=function(a){l.unbind("click");l.click(a)};f.showFooter=function(){v&&v.show()};f.hideFooter=function(){v&&v.hide()};f.showHeader=function(){k.show()};f.hideHeader=function(){k.hide()};
f.toggleCloseLink=function(a){l.toggle(a)};f.isOpened=function(){return a};f.setBeforeCloseDialog=function(a){e.customScripts.beforeCloseDialog=a};f.onEscape=function(){l.trigger("click")};f.mainContainer=g;f.arrowContainer=n;f.closeWithOutsideClick=function(a){e.closeWithOutsideClick=a};(function(){$.extend(e,d);m.uniqueId();g.attr({role:"dialog","aria-labelledby":m.attr("id")});c.addClass("ccl-context-dialog-content");if(e.footerContent){var a=$("#"+e.footerContent);v=$("<footer class='ccl-context-dialog-footer'></footer>");
v.appendTo(g);a.appendTo(v)}e.cssClass&&g.addClass(e.cssClass);g.css({"z-index":e.zIndex});f.setTitle(e.title);c.show();e.closeLinkTooltip&&l.attr("title",e.closeLinkTooltip);e&&e.closeCssClass?l.addClass(e.closeCssClass):l.addClass("ccl-context-dialog-close");l.click(f.closeDialog)})();$(function(){function c(b){a&&0===$(b.target).closest(g).length&&!(e.toggleElement&&0<$(b.target).closest(e.toggleElement).length)&&b.pageX<$(window).width()&&e.closeWithOutsideClick&&f.closeDialog(b)}function b(c){if(a&&
c.which===CommonConstants.keyCodes.escape)f.onEscape()}function d(a){a.each(function(a,e){e.addEventListener?(e.addEventListener(k,c,!0),e.addEventListener("keydown",b,!0)):($(e).on(k,c),$(e).on("keydown",b))})}var h=$(window);window.parent&&e.allowAccessToParentWindow&&(h=h.add(window.parent));var k=window.CommonFunctions.isIos()?"touchstart":"mousedown";d(h);$("iframe").on("load",function(){try{var a=$(this.contentWindow||this.contentDocument);d(a)}catch(c){}});$(document).on(CommonTriggers.clickInInnerFrame,
function(){a&&e.closeWithOutsideClick&&f.closeDialog()})});return f}
function CssModal(b){function d(){return u.closeButton.getIfHyperLinkEnabled()&&(!C||C())}function f(){return window.location.hash.replace("#","")===r}function c(){$(document).off("cssmodal:hide",c);a()}function a(){if(f()&&!w){if(CssModal.IsAnyDialogOpened()){$(document).on("cssmodal:hide",c);return}if(!e())return;w=!0;CommonFunctions.safeExecuteFunction(t.beforeOpenDialog);k();CommonFunctions.safeExecuteFunction(t.afterOpenDialog)}!f()&&w&&(w=!1,CommonFunctions.safeExecuteFunction(t.beforeCloseDialog),
setTimeout(function(){if(v.userInputControlsSelector){var a=$(v.userInputControlsSelector);CommonFunctions.setEmbeddedObjectsVisibility(!0,a,a)}u.contentContainer.removeClass(CssModal.commonSettings.cssClasses.webkitOverflow);A.removeClass(CssModal.commonSettings.cssClasses.overlay);v.isIos&&A.removeClass(CssModal.commonSettings.cssClasses.overlayIos);v.PreventScrollingBeforeCloseDialog||G.scrollTop(H);if(z){if(CssModal.modes.ajaxDynamically===q||CssModal.modes.iframeDynamically===q)u.contentContainer.find("iframe").attr("src",
"about:blank"),setTimeout(m,100);$(z).removeClass(CssModal.commonSettings.cssClasses.isActive);v.addMaskToTopMenu&&(CCL.CommonFunctions.makePostMessageCall(window.top,new CCL.CommonWindowMessages.GenericMessage(CCL.CommonWindowMessages.MessageNames.unregisterExtraNavBar)),CCL.CommonFunctions.makePostMessageCall(window.top,new CCL.CommonWindowMessages.GenericMessage(CCL.CommonWindowMessages.MessageNames.unmaskNavigationBar)));v.isNestedDialog||(p(CommonWindowMessages.MessageNames.collapseContentAreaFrame),
M.width(""));$(document).trigger(CssModal.commonSettings.events.hide,[z,r]);CommonFunctions.makePostMessageCall(window.parent,{messageName:CommonWindowMessages.MessageNames.dialogOrModalHasBeenClosed});z=null}s.setCloseConfirmation(null);D&&D.focus();v.isNestedDialog&&CommonFunctions.makePostMessageCall(window.parent,{messageName:CommonWindowMessages.MessageNames.nestedCssModalDialogCollapsed});v.addMaskToTopMenu&&IframeResizer.reportSetIframeDefaultHeight();CommonFunctions.safeExecuteFunction(t.afterCloseDialog)},
100))}function e(){var a=!0;CCL.FormCheckBeforeUnload.manuallyRunBeforeUnloadHandler();var c=CCL.DialogWhiteList.isDialogAllowed(s.getId());c.isAllowed||(confirm(c.confirmationMessage)?c.deniedByInstances.forEach(function(a){a.clearStateCallback()}):(CssModal.closeDialog(),a=!1));return a}function g(){O&&clearTimeout(O);O=setTimeout(h,v.resizeTimeoutInMilliseconds)}function h(){if(f()&&w){u.innerContainer.removeAttr("style");u.contentContainer.removeAttr("style");if(G.width()>CommonConstants.mediaScreenSizes.mobile&&
!v.isNestedDialog){if(s._maximized)u.innerContainer.css({width:$(window).width(),height:$(window).height(),left:"0",top:"0"});else if(v.preferredWidth&&0<v.preferredWidth&&u.innerContainer.width(Math.min(v.preferredWidth,G.width()-40)),v.preferredHeight&&0<v.preferredHeight){var a=u.contentContainer.outerHeight(!0)-u.contentContainer.height();u.contentContainer.outerHeight(v.preferredHeight+a,!0)}u.contentContainer.css({width:v.minContentWidth&&0<v.minContentWidth?v.minContentWidth:void 0,minWidth:v.minContentWidth&&
0<v.minContentWidth?v.minContentWidth:void 0,minHeight:v.minContentHeight&&0<v.minContentHeight?v.minContentHeight:void 0});a=u.innerContainer.height()-u.headerContainer.outerHeight()-u.footerContainer.outerHeight();if(s._maximized)u.contentContainer.outerHeight(a);else{u.contentContainer.outerHeight()-1>a&&u.contentContainer.outerHeight(a);var c;v.addMaskToTopMenu?(a=0,c="0"):(a=u.innerContainer.height()/2,c="50%");var e=u.innerContainer.width()/2;u.innerContainer.css({left:"50%","margin-left":-1*
e,"margin-top":-1*a,top:c})}}else{var b=0;u.innerContainer.children().not(u.contentContainer).each(function(){v.hideFooterInMobileView&&$(this).is(u.footerContainer)||(b+=$(this).outerHeight())});u.contentContainer.outerHeight(u.innerContainer.height()-b)}CommonFunctions.safeExecuteFunction(t.adjustWindowSize)}}function k(){if(f()&&w){if(v.userInputControlsSelector){var a=$(v.userInputControlsSelector);CommonFunctions.setEmbeddedObjectsVisibility(!1,a,a)}H=G.scrollTop();A.addClass(CssModal.commonSettings.cssClasses.overlay);
v.isIos&&A.addClass(CssModal.commonSettings.cssClasses.overlayIos);p(CommonWindowMessages.MessageNames.expandContentAreaFrame);if(window.top!=window)try{var c=$(window.top).width();c<G.width()&&M.outerWidth(c,!0)}catch(e){}$(z).removeClass(CssModal.commonSettings.cssClasses.isActive);u.container.addClass(CssModal.commonSettings.cssClasses.isActive);z=u.container.get(0);v.addMaskToTopMenu&&(CCL.CommonFunctions.makePostMessageCall(window.top,new CCL.CommonWindowMessages.GenericMessage(CCL.CommonWindowMessages.MessageNames.registerExtraNavBar)),
CCL.CommonFunctions.makePostMessageCall(window.top,new CCL.CommonWindowMessages.GenericMessage(CCL.CommonWindowMessages.MessageNames.maskNavigationBar)));CssModal.modes.ajaxDynamically===q&&l();CssModal.modes.iframeDynamically===q&&n();z&&(D=document.activeElement,z.focus());$(document).trigger(CssModal.commonSettings.events.show,[z,r]);CommonFunctions.makePostMessageCall(window.parent,{messageName:CommonWindowMessages.MessageNames.dialogOrModalHasBeenOpened});CssModal.modes.ajaxDynamically!==q&&
CssModal.modes.iframeDynamically!==q&&h();u.contentContainer.toggleClass(CssModal.commonSettings.cssClasses.webkitOverflow);v.isNestedDialog&&CommonFunctions.makePostMessageCall(window.parent,{messageName:CommonWindowMessages.MessageNames.nestedCssModalDialogExpanded});v.addMaskToTopMenu&&IframeResizer.reportSetIframeDefaultHeight()}}function l(){u.contentContainer.empty();u.contentContainer.html(v.loadingText);if(CssModal.modes.ajaxStatically===q)u.contentContainer.load(v.ajaxUrl,h);else if(CssModal.modes.ajaxDynamically===
q){var a=void 0!==P?$.param(P,!0):{};$.ajax({type:"GET",url:v.ajaxUrl,data:a,success:function(a){u.contentContainer.html(a);h();CommonFunctions.safeExecuteFunction(t.afterOpenDialogAjaxDynamicallySuccess)},error:function(a,c,e){CommonScripts.jQueryWebServiceErrorHelper(a,c,e)}})}}function m(){u.contentContainer.html("")}function n(){u.contentContainer.empty().append($("<iframe/>").attr("src",v.iframeUrl).addClass(CssModal.commonSettings.cssClasses.iframe).attr("seamless","seamless").attr("frameborder",
"0").attr("title",v.iframeTitle).on("load",function(){h()}))}function p(a){v.expandToAllWindowSize&&(CommonFunctions.makePostMessageCall(window.top,{messageName:a}),IframeResizer.reportSetIframeDefaultHeight())}window[b]=this;var s=this,r=b,q,w=!1,v,u,t,C,D,z,H,G=$(window),A=$("html"),M=$("body"),O,P={};s.initialize=function(c,e,b){t=e;v=b;u=$.extend(c,{closeButton:$("."+v.closeButtonClass)});q=v.mode;$(document).keyup(function(a){s.keyUp(a)});CssModal.modes.ajaxStatically===q&&l();CssModal.modes.iframeStatically===
q&&n();G.on("hashchange",a);G.on("resize",g);G.on("load",a);u.closeButton.click(d);CssModal.instances.push(this);if(CssModal.modes.iframeStatically===q||CssModal.modes.iframeDynamically===q)CommonFunctions.attachPostMessageEventListener($(window),CommonWindowMessages.MessageNames.nestedCssModalDialogExpanded,function(){u.contentContainer.toggleClass(CssModal.commonSettings.cssClasses.webkitOverflow,!1);u.innerContainer.toggleClass(v.mobileExpandedNestedContentClass,!0)}),CommonFunctions.attachPostMessageEventListener($(window),
CommonWindowMessages.MessageNames.nestedCssModalDialogCollapsed,function(){u.contentContainer.toggleClass(CssModal.commonSettings.cssClasses.webkitOverflow,!0);u.innerContainer.toggleClass(v.mobileExpandedNestedContentClass,!1)})};s.getId=function(){return r};s.openDialog=function(a){s._maximized=a;window.location.hash="#"+r;a?(u.innerContainer.addClass("ccl-cssmodal-modal-maximized"),u.innerContainer.removeClass("ccl-cssmodal-modal-inner")):(u.innerContainer.addClass("ccl-cssmodal-modal-inner"),
u.innerContainer.removeClass("ccl-cssmodal-modal-maximized"))};s.keyUp=function(a){f()&&a.which===CommonConstants.keyCodes.escape&&d()&&CssModal.closeDialog()};s.setContentMinSize=function(a,c){v.minContentWidth=a;v.minContentHeight=c;h()};s.setPreferredSize=function(a,c){0<a&&(v.preferredWidth=a);0<c&&(v.preferredHeight=c);h()};s.clearContent=function(){u.contentContainer.empty()};s.setTitle=function(a){if(a){var c=$("h2",u.headerContainer);c&&c.text(a)}};s.setAjaxUrl=function(a,c,e){v.ajaxUrl=a;
P=c;e&&l()};s.setIframeUrl=function(a,c){v.iframeUrl=a;c&&n()};s.setIframeTitle=function(a){v.setIframeTitle=a};s.setCloseConfirmation=function(a){C=a};s.toggleDialogCloseButton=function(a){u.closeButton.toggleHyperlink(a)};s.getHeader=function(){return u.headerContainer};s.getFooter=function(){return u.footerContainer};s.adjustWindowSize=function(){h()};s.setMode=function(a){q=a};s.setCustomScripts=function(a){t=a};s.getIsOpened=function(){return w};return s}CssModal.commonSettings=void 0;
CssModal.modes=void 0;CssModal.closeDialog=function(){window.location.hash="!"};CssModal.instances=[];CssModal.IsAnyDialogOpened=function(b){for(var d=0;d<CssModal.instances.length;d++)if((!b||b(CssModal.instances[d].getId()))&&CssModal.instances[d].getIsOpened())return!0;return!1};
function DatePicker(b){function d(a){if("date"===$.type(a))return!0;try{if(1E3>$.datepicker.parseDate(k.dateFormat,a,{shortYearCutoff:99}).getFullYear())return!1}catch(c){return!1}return!0}function f(){return!h.controls.dateInput.val()||h.controls.dateInput.val()===k.waterMark}function c(){h.controls.dateInput.val(k.waterMark).removeClass(l.watermark).addClass(l.watermark)}function a(){!r&&q&&(r=window[h.settings.timeSlotPickerClientInstanceName]);return r}function e(a,c){if((m||w)&&h.getAvailableDatesFunction){var e=
12==c?new Date(a,12,6):new Date(a,c,6),e={startDate:JSON.stringify(1==c?new Date(a,-1,25):new Date(a,c-2,25)),endDate:JSON.stringify(e),filterId:v};h.getAvailableDatesFunction(e);n=e.allowedDates}}function g(a,c){if(p&&h.getCssClassesForCalendarDatesFunction){var e=12==c?new Date(a,12,6):new Date(a,c,6),e={startDate:JSON.stringify(1==c?new Date(a,-1,25):new Date(a,c-2,25)),endDate:JSON.stringify(e)};h.getCssClassesForCalendarDatesFunction(e);s=e.customCssClassesForCalendarDates}}window[b]=this;var h=
this,k,l,m,n,p,s,r,q,w,v;h.initialize=function(){k=h.settings;l=k.cssClasses;p=k.useCustomCssClassesForCalendarDates;m=k.useRestrictedDateSelection;q=!!h.settings.timeSlotPickerClientInstanceName;DatePickerPool.add(h.controls.dateInput,h);h.controls.dateInput.datepicker({showOn:k.hideInput?"button":"both",buttonImage:"",buttonImageOnly:!1,showButtonPanel:!0,showOtherMonths:!0,selectOtherMonths:!0,defaultDate:k.defaultDate,dateFormat:k.dateFormat,firstDay:k.firstDayOfWeek,waterMark:k.waterMark,monthNames:k.monthNames,
monthNamesShort:k.abbreviatedMonthNames,dayNames:k.dayNames,dayNamesShort:k.abbreviatedDayNames,dayNamesMin:k.abbreviatedDayNames,closeText:k.closeText,prevText:k.previousMonthText,nextText:k.nextMonthText,currentText:k.todayText,disabled:k.disabled,showWeek:k.showWeek,weekHeader:k.weekHeader,disableWeekSelection:k.DisableWeekSelection,beforeShow:function(a,c){a=$(a);a.val()==$.datepicker._get(c,"waterMark")&&a.val("").removeClass(l.watermark);var b=a.datepicker("getDate");null==b&&(b=new Date);(m||
w)&&e(b.getFullYear(),b.getMonth()+1);p&&g(b.getFullYear(),b.getMonth()+1);setTimeout(function(){a.trigger("update")},1)},onChangeMonthYear:function(a,c,b){e(a,c);g(a,c);setTimeout(function(){$(b.input).trigger("update")},1)},beforeShowDay:function(a){if(!m&&!w&&!p||void 0==n&&void 0==s)return[!0];a=[a.getFullYear(),a.getMonth()+1,a.getDate()].join("_");var c=[!0];(m||w)&&void 0!=n&&(c=void 0==n[a]?[!1,l.disabled]:1==n[a]?[!0,l.avalaible]:[!1,l.busy]);p&&void 0!=s&&void 0!=s[a]&&$.each(s[a],function(a,
e){c[1]=a;c[2]=e});return c},onClose:function(c,e){var b=$(this);b.val()||(b.val($.datepicker._get(e,"waterMark")).addClass(l.watermark),q&&a().resetTimes());h.relatedWithDateInput&&h.relatedWithDateInput.fillMissingDateFromRelatedInput&&c&&""===window[h.relatedWithDateInput.id].getDateAsString()&&window[h.relatedWithDateInput.id].setDate(c)}}).on("update",function(){if(h.settings.showWeek)if(h.settings.disableWeekSelection)$("td.ui-datepicker-week-col").addClass(l.disabled).wrapInner("<span></span>");
else $("td.ui-datepicker-week-col").wrapInner('<a href="javascript:void(0);"></a>').on("click",function(){var a,c;h.relatedWithDateInput?(h.relatedWithDateInput.isLater?($(this).next().click(),c=a=h.controls.dateInput.datepicker("getDate"),c.setDate(a.getDate()+6)):(a=$(this).parent().find("td"),a.get(a.length-1).click(),c=a=h.controls.dateInput.datepicker("getDate"),c.setDate(a.getDate()-6)),window[h.relatedWithDateInput.id].setDate(c)):$(this).next().click()});k.hideTodayButton&&$(".ui-datepicker-current").hide()}).trigger("update");
$("#ui-datepicker-div").hide();k.hideInput&&h.controls.dateInput.hide();f()&&c();h.controls.dateInput.change(function(){if(h.onDateSelectedFunction){var a={dateText:h.getDateAsString(),dateFilterId:w?v:0};h.onDateSelectedFunction(a)}}).keypress(function(a){a.which===CommonConstants.keyCodes.enter&&(h.controls.dateInput.change(),a.preventDefault())});m&&h.controls.dateInput.keypress(function(a){a.which!==CommonConstants.keyCodes.del&&a.which!==CommonConstants.keyCodes.backspace&&a.preventDefault()})};
h.getDateAsString=function(){if(f())return"";var a=h.controls.dateInput.val();return d(a)?a:""};h.getTime=function(){var a=$("#"+h.settings.timePickerSelectHourClientId),c=$("#"+h.settings.timePickerSelectMinuteClientId),e={};0<a.length&&0<c.length&&(e.hours=a.val(),e.minutes=c.val());return e};h.getDateTimeAsString=function(){var a=h.getDateAsString();if(""===a)return a;var c=h.getTime();return null==c.hours||null==c.minutes?a:a+" "+c.hours+":"+c.minutes};h.isDateValid=function(){if(f())return!1;
var a=h.controls.dateInput.val();return d(a)};h.getDate=function(){return f()?void 0:h.controls.dateInput.datepicker("getDate")};h.setDate=function(a){a&&d(a)?(h.controls.dateInput.removeClass(l.watermark),h.controls.dateInput.datepicker("setDate",a)):c()};h.setDefaultDate=function(a){var e=h.getDate();h.controls.dateInput.datepicker("option","defaultDate",a);h.setDate(e);f()&&c()};h.clearDateAndTime=function(c){f()||c||h.setDate("");q&&a().resetTimes()};h.setFilteringMode=function(a){w=a};h.setFilterId=
function(a){v=a};return h}
(function(b,d){function f(a,e){e=e?e:0;if(e<a.length)for(var b=c.length-1;0<=b;b--)if(c[b].jQueryInput.get(0)===a.get(e))return c[b].datePickerFunction;return d}var c=[];b.DatePickerPool={add:function(a,e){c.push({jQueryInput:a,datePickerFunction:e})},getDateAsString:function(a){return(a=f(a))?a.getDateAsString():""},isDateValid:function(a){return(a=f(a))?a.isDateValid():!1},getDate:function(a){return f(a)?f(a).getDate():d},setDate:function(a,c){for(var b=a.length-1;0<=b;b--){var d=f(a,b);d&&d.setDate(c)}}}})(window);
function DateTimeActivation(b){function d(){e||(e=window[f.settings.datePickerClientInstanceName]);return e}window[b]=this;var f=this,c,a,e,g,h,k,l;f.initialize=function(){c=f.settings;a=c.cssClasses;g=c.dateFilteringInUse;h=f.controls.selectActivationMode.parent();l=c.modes;k=!!c.timeSlotPickerClientInstanceName;f.controls.selectActivationMode.change(function(){var e=f.getMode();f.controls.dateTimeControlsContainer.toggle(e!=l.empty&&e!=l.infinity);$("."+a.timeControlsContainer,h).toggleClass(a.hiddenTimeControlsContainer,
e!=l.date&&e!=l.dateAndEndOfDayCombined);f.controls.endOfDayLabel.toggle(e==l.endOfDay);var b=g&&e==l.filtering;f.controls.datePickerFilterHolder.toggle(b);d().setFilteringMode(b);g&&d().clearDateAndTime(e!=l.filtering);k&&window[c.timeSlotPickerClientInstanceName].toggle(e==l.filtering);if(f.onChangeActivationModeFunction)f.onChangeActivationModeFunction()});g&&(f.controls.filterDropDown.change(function(){var a=f.controls.filterDropDown.val();f.controls.filterHidden.val(a);d().clearDateAndTime();
d().setFilterId(a)}),d()&&(d().setFilterId(f.controls.filterHidden.val()),d().setFilteringMode(g&&f.getMode()==l.filtering)))};f.getMode=function(){return c.useRadioButtonStyle?$(f.controls.selectActivationMode).find("input:radio:checked").val():f.controls.selectActivationMode.val()};f.isDateSelected=function(){return f.getMode()==(l.empty||l.infinity)?!1:d().isDateValid()};f.getAllowToSubmitAfterDeadline=function(){return 0<f.controls.useEndOfDateCheckBox.length?f.controls.useEndOfDateCheckBox.is(":checked"):
null};f.getSelectedEventId=function(){return k?window[c.timeSlotPickerClientInstanceName].getSelectedTimeSlot():null};f.getSelectedDateTime=function(){return d().getDateTimeAsString()};return f}
function Dialog(b){function d(){w&&(l.show(),c(),CommonFunctions.makePostMessageCall(window.parent,{messageName:CommonWindowMessages.MessageNames.dialogOrModalHasBeenOpened}),CommonFunctions.safeExecuteFunction(g.customScripts.afterOpenDialog),IframeResizer.reportSetIframeDefaultHeight(),w=!1)}function f(){k.scrollLeft(t);k.scrollTop(u);IframeResizer.reportSetIframeDefaultHeight();v=!1}function c(){var a=function(a,c,e,b){e=Math.max((a-e)/2,10);a<b&&(e+=c);return 0>e?0:e},c=$(document);l.offset({left:a(k.width(),
k.scrollLeft(),l.width(),c.width()),top:a(k.height(),k.scrollTop(),l.height(),c.height())})}function a(){g.settings.useInProgressFunctionality?(k.unload(function(){g.close()}),n.attr("title",g.settings.okButtonInProgressTitle),n.addClass(g.settings.inProgressCssClass),g.disableDialog(),setTimeout(function(){CommonFunctions.safeExecuteFunction(g.customScripts.afterOkClick);l.find("input,button").prop("disabled",!0)},100)):CommonFunctions.safeExecuteFunction(g.customScripts.afterOkClick)&&g.close()}
function e(){CommonFunctions.safeExecuteFunction(g.customScripts.afterCancelClick)&&g.close()}window[b]=this;var g=this,h=$("#mask"),k=$(window),l,m,n,p,s,r,q,w=!1,v=!1,u,t,C=CommonWindowMessages.MessageNames.contentAreaFrameHasExpanded,D=CommonWindowMessages.MessageNames.contentAreaFrameHasCollapsed,z=!1;g.initialize=function(){l=g.controls.container;m=g.controls.iframe;n=g.controls.okButton;p=g.settings.showBackgroundMask;s=g.settings.useTransparentMask;r=g.settings.expandToAllWindowSize;q=g.settings.ignoreKeyDown;
z=!r||window==window.top;l.css("z-index",g.settings.zIndex).keydown(function(a){return g.keyDown(a)}).keypress(function(a){return g.keyPress(a)});g.controls.closeLink.click(function(){e();return!1}).keydown(function(a){return a.which===CommonConstants.keyCodes.enter?(e(),!1):!0});n.click(function(){a();return!1});g.controls.cancelLink.click(function(){e();return!1});r&&CommonFunctions.attachPostMessageEventListener(k,[C,D],function(a){a.messageName===C&&w?d():a.messageName===D&&v&&f()});g.settings.openDialogAfterLoading&&
g.open()};g.openWithTitle=function(a){g.setNewTitle(a);g.open()};g.open=function(){w=!0;t=k.scrollLeft();u=k.scrollTop();p&&(0==h.length&&(h=$("<div id='mask'></div>").appendTo("body").addClass(g.settings.maskCssClass)),h.css({opacity:s?"0":"1","z-index":g.settings.backgroundMaskZIndex}),h.show());CommonFunctions.safeExecuteFunction(g.customScripts.beforeOpenDialog);z?d():r&&g.toggleContentAreaFrame(!0);setTimeout(d,100)};g.close=function(){v=!0;CommonFunctions.safeExecuteFunction(g.customScripts.beforeCloseDialog);
p&&h.hide();l.hide();CommonFunctions.makePostMessageCall(window.parent,{messageName:CommonWindowMessages.MessageNames.dialogOrModalHasBeenClosed});CommonFunctions.safeExecuteFunction(g.customScripts.afterCloseDialog);z?f():r&&g.toggleContentAreaFrame(!1)};g.setupIframe=function(a,c,e,b){m.attr("width",c?c:m.attr("width")).attr("height",e?e:m.attr("height")).attr("scrolling",b?b:m.attr("scrolling"));g.setIframeSrc(a)};g.setIframeSrc=function(a){g.settings.frameLoadingText&&m.contents().find("body").empty().text(g.settings.frameLoadingText);
document.getElementById(m.prop("id")).contentWindow.location.href=a};g.setNewAfterOkClickFunction=function(a){g.customScripts.afterOkClick=a};g.setNewAfterCancelClickFunction=function(a){g.customScripts.afterCancelClick=a};g.setNewBeforeCloseDialogFunction=function(a){g.customScripts.beforeCloseDialog=a};g.setNewTitle=function(a){g.controls.titleContainer.text(a)};g.enableOrDisableOkButton=function(a){n.prop("disabled",!a)};g.disableDialog=function(){g.enableOrDisableOkButton(!1);g.controls.cancelLink.unbind("click").attr("disabled",
!0);g.controls.closeLink.unbind("click").attr("disabled",!0);g.controls.closeLink.find("img").prop("src",g.settings.closeImageDisabledUrl)};g.getContainerJQueryElement=function(){return l};g.focusOnCloseLink=function(){g.controls.closeLink.focus()};g.keyDown=function(c){if(c.target&&c.target.className&&0<=c.target.className.indexOf("cke_source")||q)return!0;c.which===CommonConstants.keyCodes.escape?e():c.which!==CommonConstants.keyCodes.enter||c.shiftKey||c.srcElement&&"A"===c.srcElement.tagName||
a();return!0};g.keyPress=function(a){return!0};g.scrollWindowToCenter=function(){var a=l.offset().top,c=k.height(),e=l.height();window.scrollTo(0,a-(c/2-e/2))};g.toggleContentAreaFrame=function(a){CommonFunctions.makePostMessageCall(window.top,new CommonWindowMessages.GenericMessage(a?CommonWindowMessages.MessageNames.expandContentAreaFrame:CommonWindowMessages.MessageNames.collapseContentAreaFrame));IframeResizer.reportSetIframeDefaultHeight()};g.setWidth=function(a){l.css("width",a);c()};return g}
function DivToggler(b){var d=this;d.settings=b;d.div=d.settings.divControl?$(d.settings.divControl):$("#"+d.settings.divId);void 0==d.settings.changeDivVisibility&&(d.settings.changeDivVisibility=!0);d.initialize=function(){d.settings.isCollapsed?d.collapseDiv():d.expandDiv();return d};d.afterToggle=function(){d.settings.afterToggle&&"function"===typeof d.settings.afterToggle&&d.settings.afterToggle()};d.toggleDiv=function(b){d.settings.isCollapsed?d.expandDiv():d.collapseDiv();b&&"function"===typeof b&&
b()};d.collapseDiv=function(){d.settings.changeDivVisibility&&d.div.hide();d.settings.isCollapsed=!0;d.afterToggle()};d.expandDiv=function(){d.settings.changeDivVisibility&&d.div.show();d.settings.isCollapsed=!1;d.afterToggle()};return d}
function DropDownMenu(b,d){function f(a,c){l&&clearTimeout(l);l=setTimeout(function(){var a=c.relatedTarget||document.activeElement,b=$(a),d=a===g[0]||1===b.closest(g).length,a=a===h[0]||1===b.closest(h).length;d||a||e.hideMenu()},a)}function c(){m.scroll(a);e.settings.cssClasses&&e.settings.cssClasses.selectedHolder&&h.addClass(e.settings.cssClasses.selectedHolder);var c=e.settings.useTargetPosition?k.position():k.offset();e.settings.setMinWidthByTarget&&g.css("min-width",k.outerWidth()+"px");var b=
c.top+k.outerHeight(!1),d="auto",f="auto";switch(e.settings.horizontalPosition){case DropDownMenuCommonSettings.horizontalPositions.center:d=c.left+(k.outerWidth(!1)-g.outerWidth(!1))/2;break;case DropDownMenuCommonSettings.horizontalPositions.rightEdge:d=c.left+k.outerWidth(!1)-g.outerWidth(!1);0>d&&(d=c.left);break;case DropDownMenuCommonSettings.horizontalPositions.rightEdgeRightOffset:f=m.width()-m.scrollLeft()-c.left-k.outerWidth(!1);0>f&&(f=0);break;case DropDownMenuCommonSettings.horizontalPositions.auto:break;
case DropDownMenuCommonSettings.horizontalPositions.leftEdgeParentRightBorder:var d=c.left,c=k.offsetParent(),c=c.outerWidth(!1)+(e.settings.useTargetPosition?0:c.offset().left),l=g.outerWidth(!1);c<d+l&&(d=c-l);break;default:d=c.left}var w={top:e.settings.useFixedPosition?b-m.scrollTop():b,left:d,right:f,"z-index":e.settings.zIndex};e.settings.useFixedPosition&&(w.position="fixed");e.settings.autofitHeight&&(b=m.height()-b-(g.outerHeight(!0)-g.height()),w["max-height"]=0>b?0:b,w["overflow-y"]="auto");
m.scroll(function(){g.css(w)});g.css(w).show();g.trigger("menu:show")}function a(){var a=e.settings.useTargetPosition?k.position():k.offset();g.css({top:a.top+k.outerHeight(!1)})}window[b]=this;var e=this,g,h,k,l,m=$(window);e.name=b;d&&DropDownMenu.instances.push(this);e.initialize=function(){g||e.initializeControls($("#"+e.controls.menuContainerId),$("#"+e.controls.targetLinkId),$("#"+e.controls.layoutAlignmentControlId))};e.initializeControls=function(a,b,d){if(!g){g=a;h=b;k=d;e.settings.cssClasses&&
e.settings.cssClasses.targetLink&&h.addClass(e.settings.cssClasses.targetLink);if(e.settings.operatesInManagedMode)CCL.DropDownMenuManager.getInstance().containerAddOrReplaceInstance(e.settings.manageModeContainerKey,e);else if(!e.settings.showMenuOnHover||e.settings.isIos)$(document).on((e.settings.isIos?"touchend":"click")+" "+CommonTriggers.clickInInnerFrame,function(a){a.target===h[0]||1===h.find(a.target).length?g.is(":visible")?e.hideMenu():c():g.is(":visible")&&a.target!==g[0]&&1!==g.find(a.target).length&&
e.hideMenu()});else h.on("focusin mouseover",function(){c()}),g.add(h).on("focusout mouseout",function(a){f(250,a)});e.settings.closeMenuWhenClickingOnLink&&g.find("li").click(function(){e.hideMenu()});e.settings.closeMenuWhenClickingInside&&g.click(function(){e.hideMenu()});$(document).ready(function(){e.settings.appendToBody&&g.appendTo("body")})}};e.toggleManagedMenu=function(){g.is(":visible")?e.hideMenu():c()};e.hideMenu=function(){m.unbind("scroll",a);g.hide();e.settings.cssClasses&&e.settings.cssClasses.selectedHolder&&
h.removeClass(e.settings.cssClasses.selectedHolder);g.trigger("menu:hide")};return e}DropDownMenu.instances=[];DropDownMenu.initialize=function(){for(var b=0,d=this.instances.length;b<d;b+=1)this.instances[b].initialize()};ExpandableContainer.defaults={isExpanded:!1,expander:".ccl-expandable-container-header",target:".ccl-expandable-container-content",keepStateInCookie:!1,cookieName:"ExpandableContainerState",accessibleExpander:"a",expandTooltip:void 0,collapseTooltip:void 0};
function ExpandableContainer(b,d){function f(a){g.settings.collapseTooltip&&g.settings.expandTooltip&&n.attr("title",a?g.settings.collapseTooltip:g.settings.expandTooltip)}function c(){var a=e();a?h.addClass("expanded"):m.hide();f(a)}function a(){var a=$.cookie(g.settings.cookieName);return null===a||""===a?{}:JSON.parse(a)}function e(){if(g.settings.isExpanded)return!0;if(!g.settings.keepStateInCookie)return!1;var c=h.attr("Id");return void 0===c?!1:!0===a()[c]||!1}var g=this,h=$(b);g.settings={};
$.extend(g.settings,ExpandableContainer.defaults);$.extend(g.settings,d);var k=$(g.settings.expander,b),l=k.attr("data-expander-target")||g.settings.target,m=$(l,b),n=$(g.settings.accessibleExpander,k);g.toggle=function(){var c=!g.getIsExpandedState();c?(h.addClass("expanded"),m.slideDown()):(h.removeClass("expanded"),m.slideUp());$(document).trigger("expandablecontainer:toggled",[b,c]);f(c);if(g.settings.keepStateInCookie){var e=h.attr("Id");if(void 0!==e){var d=a();d[e]=c;$.cookie(g.settings.cookieName,
JSON.stringify(d),{path:"/"})}}return!1};g.getIsExpandedState=function(){return h.hasClass("expanded")};(function(){if(g.settings.keepStateInCookie&&void 0===$.cookie)throw Error("keepStateInCookie option requires $.cookie to be defined.");k.addClass("ccl-expandable-container-expander");if((0===m.length||0===k.length)&&g.settings.throwOnMissingTarget)throw"Targets not found";c();k.click(function(){g.toggle()})})();return g}
function ExpandableList(b){function d(){try{var a=parent.document.getElementsByTagName("iframe");if(void 0!=a)for(var c=0,b=a.length;c<b;c++){var d=a[c];if((d.contentDocument||d.contentWindow.document)===document)return d}}catch(f){}return null}window[b]=this;var f=this,c,a;f.initialize=function(){c=f.controls;a=f.settings};f.expand=function(e){var b=$(c.showlink).position(),f=b.top,k=$(window).scrollTop(),l=null,m=!1;CommonFunctions.isIos()&&(m=!0,b=d(),null!==b&&(l=b.parentNode,null!==l&&(k=l.scrollTop)));
c.list.children("li").show().removeClass(a.lastVisibleItemCssClass);c.showlink.hide();c.hidelink.show();b=$(c.hidelink).position();k+=b.top-f;m?null!==l&&(l.scrollTop=k):$(window).scrollTop(k);e()};f.collapse=function(e){var b=$(c.hidelink).position(),f=b.top,k=$(window).scrollTop(),l=null,m=!1;CommonFunctions.isIos()&&(m=!0,b=d(),null!==b&&(l=b.parentNode,null!==l&&(k=l.scrollTop)));0<a.maxItemsShown?(b=c.list.children("li").eq(a.maxItemsShown-1),b.addClass(a.lastVisibleItemCssClass),b.nextAll().hide()):
c.list.children("li").hide();c.hidelink.hide();c.showlink.show();b=$(c.showlink).position();k-=f-b.top;m?null!==l&&(l.scrollTop=k):$(window).scrollTop(k);e()};return f}
$.widget("itslccl.extendedTextBox",{options:{watermarkText:"",watermarkCssClass:""},_input:void 0,_isWatermarkMode:!1,_create:function(){var b=this;this._input=this.element;this._input.is(":focus")?this._input.setCursorPosition(this._input.val().length):this._showWatermark();this._input.keypress(function(d){d=d?d:window.event;b._hideWatermark();return d.which!==CommonConstants.keyCodes.enter||d.shiftKey});this._input.blur(function(){b._input.is(":visible")&&b._showWatermark()});this._input.focus(function(){b._hideWatermark()});
this._input.on("paste",function(){b._hideWatermark()})},_showWatermark:function(){this._isWatermarkMode||this._input.val()||(this._input.val(this.options.watermarkText),this._input.addClass(this.options.watermarkCssClass),this._isWatermarkMode=!0)},_hideWatermark:function(){this._isWatermarkMode&&(this._input.val(""),this._input.removeClass(this.options.watermarkCssClass),this._isWatermarkMode=!1)},isEmpty:function(){return this._isWatermarkMode||0==$.trim(this._input.val()).length}});
function ExternalStorageAvailabilityChecker(){return{isDropboxAvailable:function(){return void 0!==window.Dropbox?!0:!1},isGoogleDriveAvailable:function(){return void 0!==window.gapi?!0:!1}}}
function Feedback(b,d,f,c){window[b]=this;var a=this;a.controls=f;a.settings=d;a.functions=c;var e={initialize:function(){a.controls.showMoreLink.click(function(){e.onShowMoreClick()});a.controls.showLessLink.click(function(){e.onShowLessClick()});a.settings.multiline||(a.controls.messageContainer.css("display","block"),a.controls.messageContainer.css("overflow","hidden"),e.setMaxMessageContainerHeight(),$(window).resize(function(){e.handleContainerSizeChange()}),e.handleContainerSizeChange())},onShowMoreClick:function(){a.controls.showMoreLink.hide();
a.controls.showLessLink.show();e.showHideableContent()},showHideableContent:function(){a.settings.multiline?$(".hideable-line").show():a.controls.messageContainer.css("max-height","none")},onShowLessClick:function(){a.controls.showMoreLink.show();a.controls.showLessLink.hide();e.hideHideableContent()},hideHideableContent:function(){a.settings.multiline?$(".hideable-line").hide():e.setMaxMessageContainerHeight()},handleContainerSizeChange:function(){$(a.controls.messageContainer).prop("scrollHeight")>
e.getMaxMessageContainerHeight()?"none"===$(a.controls.showLessLink).css("display")&&a.controls.showMoreLink.show():(a.controls.showMoreLink.hide(),a.controls.showLessLink.hide(),e.setMaxMessageContainerHeight())},setMaxMessageContainerHeight:function(){var c=parseFloat(a.controls.container.css("line-height"));a.controls.messageContainer.css("max-height",c*a.settings.maxLinesToDisplayByDefault+"px")},getMaxMessageContainerHeight:function(){return parseFloat(a.controls.messageContainer.css("line-height"))*
a.settings.maxLinesToDisplayByDefault}};a.showMessage=function(c,e){a.controls.container.removeClass(a.settings.cssClasses.join(" ")).addClass(a.settings.feedbackCssClass).addClass(a.settings.cssClasses[c]).show();e?a.controls.textSpan.html(e).show():a.controls.textSpan.hide();a.hideUndo()};a.hide=function(c){a.controls.container.hide();if((void 0==c||c)&&a.functions.onClose)a.functions.onClose()};a.hideUndo=function(){a.controls.undoLink.hide()};a.show=function(){a.controls.container.show()};a.toggleCloseLink=
function(c){a.controls.closeLink.toggle(c)};a.undo=function(){if(a.functions.onUndo)if(a.settings.undoConfirmationText){if(confirm(a.settings.undoConfirmationText))a.functions.onUndo()}else a.functions.onUndo()};e.initialize();return a}
function FileList(b){window[b]=this;var d={},f=this;d.getTitle=function(c){return f.settings.titleText+" "+c};d.setTitle=function(c){$(f.controls.title).html(c)};d.urlHasQueryParams=function(c){return-1===c.indexOf("?")?!1:!0};d.appendQueryParamsToUrl=function(c,a){return c+="?"+$.param(a)};d.getUrl=function(c,a,e,b){var h=f.settings.serviceMethodUrl;d.urlHasQueryParams(h)?(h=h.replace(f.settings.templateQueryParams.fileName,encodeURIComponent(c)),h=h.replace(f.settings.templateQueryParams.viewOnly,
b.toString()),h=h.replace(f.settings.templateQueryParams.fileRepoId,encodeURIComponent(a)),h=h.replace(f.settings.templateQueryParams.uniqueId,e)):h=d.appendQueryParamsToUrl(h,{fileName:c,fileId:a,uniqueFileId:e,viewOnly:b});return h};d.openInModalDialog=function(c,a,e,b){var d=f.controls.dialog.replace("#","");window[d].setAjaxUrl(e);window[d].setContentMinSize(c,a);window[d].openDialog(b)};d.checkIfBrowserIsOldIE=function(){var c=navigator.userAgent.toLowerCase();return-1!=c.indexOf("msie")?10>=
parseInt(c.split("msie")[1])?!0:!1:!1};d.attachEventForOldIE=function(c,a,e){c.addEventListener?c.addEventListener(a,e,!1):c.attachEvent?c.attachEvent(a,e):c[a]=e};d.openInWindow=function(c){var a=window.open(c,"","width="+.8*screen.width+", height="+.8*screen.height+",location = 0, directories = 0, toolbar = 0, scrollbars = 0, status = 0, menubars = 0, resizable = 1");d.checkIfBrowserIsOldIE()&&d.attachEventForOldIE(a,"onload",function(){$("head",a.document).append('<style type="text/css">html,body{height:100%}html{width:auto;margin-top:-8px;}</style>')})};
d.openInNewTab=function(c){window.open(c)};d.getFileExtension=function(c){return(/[.]/.exec(c)?/[^.]+$/.exec(c):void 0).pop()};d.allowedWopiFileExtensionsExist=function(){return"undefined"===typeof f.settings.allowedWopiFileExtensions||null===f.settings.allowedWopiFileExtensions?!1:!0};d.isOwasFileType=function(c){c=d.getFileExtension(c);return 0<=f.settings.allowedWopiFileExtensions.indexOf(c)};f.showPreview=function(c,a,e,b,h,k,l){var m=d.getTitle(c);d.setTitle(m);a=d.getUrl(c,a,e,b);e=!1;d.allowedWopiFileExtensionsExist()&&
(e=d.isOwasFileType(c));if(e){if(f.settings.useModalForOWASFiles){d.openInModalDialog(h,k,a,e);return}}else if(f.settings.useModalForFilesDifferentThanOWAS){d.openInModalDialog(h,k,a,l);return}d.openInWindow(a)};f.showCloudItemPreview=function(c){var a=f.settings.cloudItemViewerUrl,a=d.appendQueryParamsToUrl(a,{id:c});d.openInNewTab(a)};return f}
(function(b){"function"===typeof define&&define.amd?define(["jquery","tmpl","load-image","./jquery.fileupload-fp"],b):b(window.jQuery,window.tmpl,window.loadImage)})(function(b,d,f){b.widget("blueimp.fileupload",b.blueimp.fileupload,{options:{autoUpload:!0,maxNumberOfFiles:void 0,maxFileSize:void 0,minFileSize:void 0,acceptFileTypes:/.+$/i,previewSourceFileTypes:/^image\/(gif|jpeg|png)$/,previewSourceMaxFileSize:5E6,previewMaxWidth:80,previewMaxHeight:80,previewAsCanvas:!0,filesContainer:void 0,prependFiles:!1,
dataType:"json",kbText:"KB",mbText:"MB",confirmReplaceFile:function(){return!0},customErrors:void 0,drop:function(c,a){var e=(b(this).data("blueimp-fileupload")||b(this).data("fileupload")).options,g=[],d=!1;b.each(a.files,function(a,c){!c.type&&(void 0===c.size||1>c.size||0==c.size%4096&&2>c.name.split(".").length)?d=!0:g.push(c)});d&&(a.files=g);e.singleFileMode&&1<a.files.length&&(a.files=a.files.slice(0,1))},add:function(c,a){var e=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),
g=e.options,d=a.files;b(this).fileupload("process",a).done(function(){if(g.singleFileMode&&0==g.maxNumberOfFiles)if(g.confirmReplaceFile())e.emptyFileList();else return!1;e._adjustMaxNumberOfFiles(-d.length);a.maxNumberOfFilesAdjusted=!0;a.files.valid=a.isValidated=e._validate(d);0<a.files.length&&e.options.defaultThumbnailUrl&&(a.files[0].thumbnailUrl=e.options.defaultThumbnailUrl);a.context=e._renderUpload(d).data("data",a);g.filesContainer[g.prependFiles?"prepend":"append"](a.context);e._renderPreviews(a);
e._forceReflow(a.context);e._transition(a.context).done(function(){!1!==e._trigger("added",c,a)&&(g.autoUpload||a.autoUpload)&&!1!==a.autoUpload&&a.isValidated&&a.submit()})})},send:function(c,a){var e=b(this).data("blueimp-fileupload")||b(this).data("fileupload");if(e._additionalClientValidationCallback&&!e._additionalClientValidationCallback(a)||!a.isValidated&&(a.maxNumberOfFilesAdjusted||(e._adjustMaxNumberOfFiles(-a.files.length),a.maxNumberOfFilesAdjusted=!0),!e._validate(a.files)))return!1;
a.context&&a.dataType&&"iframe"===a.dataType.substr(0,6)&&(a.context.find(".ccl-progressbar").addClass(!b.support.transition&&"progress-animated").find(".ui-progressbar-value").css("width","100%"),a.context.find(".ccl-progressbar-labelcontainer").html("100%"));e._addUploadToList(c,a);return e._trigger("sent",c,a)},done:function(c,a){var e=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),g=e._getFilesFromResponse(a),d,f;a.context?a.context.each(function(f){var k=g[f]||{error:"Empty file upload result"},
n=e._addFinishedDeferreds();k.error||e._addFilesToList(g);e._transition(b(this)).done(function(){var g=b(this);d=e._renderDownload([k]).replaceAll(g);e._forceReflow(d);e._transition(d).done(function(){a.context=b(this);e._renderPreviews(a);e._trigger("completed",c,a);e._trigger("finished",c,a);n.resolve()})})}):(g.length&&(b.each(g,function(c,b){a.maxNumberOfFilesAdjusted&&b.error?e._adjustMaxNumberOfFiles(1):a.maxNumberOfFilesAdjusted||b.error||e._adjustMaxNumberOfFiles(-1)}),a.maxNumberOfFilesAdjusted=
!0),d=e._renderDownload(g).appendTo(e.options.filesContainer),e._renderPreviews(a),e._forceReflow(d),f=e._addFinishedDeferreds(),e._transition(d).done(function(){a.context=b(this);e._trigger("completed",c,a);e._trigger("finished",c,a);f.resolve()}))},fail:function(c,a){var e=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),g,d;a.maxNumberOfFilesAdjusted&&e._adjustMaxNumberOfFiles(a.files.length);a.context?a.context.each(function(f){if("abort"!==a.errorThrown){var l=a.files[f],m;if(a.jqXHR&&
a.jqXHR.responseText)try{m=b.parseJSON(a.jqXHR.responseText).message}catch(n){m=void 0}else m=void 0;l.error=l.error||m||a.errorThrown||e.options.customErrors.unknownError;d=e._addFinishedDeferreds();e._transition(b(this)).done(function(){var f=b(this);g=e._renderDownload([l]).replaceAll(f);e._forceReflow(g);e._transition(g).done(function(){a.context=b(this);e._trigger("failed",c,a);e._trigger("finished",c,a);d.resolve()})})}else d=e._addFinishedDeferreds(),e._transition(b(this)).done(function(){b(this).remove();
e._trigger("failed",c,a);e._trigger("finished",c,a);d.resolve()})}):"abort"!==a.errorThrown?(a.context=e._renderUpload(a.files).appendTo(e.options.filesContainer).data("data",a),e._forceReflow(a.context),d=e._addFinishedDeferreds(),e._transition(a.context).done(function(){a.context=b(this);e._trigger("failed",c,a);e._trigger("finished",c,a);d.resolve()})):(e._trigger("failed",c,a),e._trigger("finished",c,a),e._addFinishedDeferreds().resolve())},progress:function(c,a){if(a.context){var e=parseInt(a.loaded/
a.total*100,10);a.context.find(".ccl-progressbar .ui-progressbar-value").css("width",e+"%");a.context.find(".ccl-progressbar-labelcontainer").html(e+"%")}},progressall:function(c,a){var e=b(this),g=parseInt(a.loaded/a.total*100,10),d=e.find(".fileupload-progress"),f=d.find(".progress-extended");f.length&&f.html((e.data("blueimp-fileupload")||e.data("fileupload"))._renderExtendedProgress(a));d.find(".ccl-progressbar .ui-progressbar-value").css("width",g+"%");d.find(".ccl-progressbar-labelcontainer").html(g+
"%")},start:function(c){var a=b(this).data("blueimp-fileupload")||b(this).data("fileupload");a._resetFinishedDeferreds();a._transition(b(this).find(".fileupload-progress")).done(function(){a._trigger("started",c)});a._startUploadCallback&&a._startUploadCallback()},stop:function(c){var a=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),e=a._addFinishedDeferreds();b.when.apply(b,a._getFinishedDeferreds()).done(function(){a._trigger("stopped",c)});a._transition(b(this).find(".fileupload-progress")).done(function(){var a=
b(this);a.find(".ccl-progressbar .ui-progressbar-value").css("width","0");a.find(".ccl-progressbar-labelcontainer").html("0%");a.find(".progress-extended").html("&nbsp;");e.resolve()});a._stopUploadCallback&&a._stopUploadCallback()},destroy:function(c,a){var e=b(this).data("blueimp-fileupload")||b(this).data("fileupload");a.url&&b.ajax(a);a.filekey&&e._adjustMaxNumberOfFiles(1);e._removeFilesFromList(a.filekey);e._transition(a.context).done(function(){b(this).remove();e._trigger("destroyed",c,a)})}},
_addFilesToList:function(c){var a=this;a._fileList||(a._fileList=[],a._fileListKeys=[]);b.each(c,function(c,b){a._fileList.push(b);a._fileListKeys.push(b.id)});a.options.stateHiddenField.val(JSON.stringify(a._fileList));a._notifyAboutResultChanges();a._addFileCallback&&a._addFileCallback()},_addUploadToList:function(c,a){this._uploadsList||(this._uploadsList=[]);this._uploadsList.push({element:c,data:a})},_removeFilesFromList:function(c){this._fileList&&0<this._fileList.length&&(c=this._fileListKeys.indexOf(c),
-1<c&&(this._fileList.splice(c,1),this._fileListKeys.splice(c,1)));this.options.stateHiddenField.val(JSON.stringify(this._fileList));this._notifyAboutResultChanges();this._removeFileCallback&&this._removeFileCallback()},_notifyAboutResultChanges:function(){this._trigger("resultschanged",null,{results:this._fileList})},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(c){c||(c=b.Deferred());this._finishedUploads.push(c);return c},_getFinishedDeferreds:function(){return this._finishedUploads},
_getFilesFromResponse:function(c){return c.result&&b.isArray(c.result.files)?c.result.files:[]},_enableDragToDesktop:function(){var c=b(this),a=c.prop("href"),e=c.prop("download");c.bind("dragstart",function(c){try{c.originalEvent.dataTransfer.setData("DownloadURL",["application/octet-stream",e,a].join(":"))}catch(b){}})},_adjustMaxNumberOfFiles:function(c){"number"===typeof this.options.maxNumberOfFiles&&(this.options.maxNumberOfFiles+=c,1>this.options.maxNumberOfFiles&&!this.options.singleFileMode?
this._disableFileInputButton():this._enableFileInputButton())},_formatFileSize:function(c){return"number"!==typeof c?"":1048576<=c?(c/1048576).toFixed(2)+" "+this.options.mbText:(c/1024).toFixed(2)+" "+this.options.kbText},_formatBitrate:function(c){return"number"!==typeof c?"":1E9<=c?(c/1E9).toFixed(2)+" Gbit/s":1E6<=c?(c/1E6).toFixed(2)+" Mbit/s":1E3<=c?(c/1E3).toFixed(2)+" kbit/s":c.toFixed(2)+" bit/s"},_formatTime:function(c){var a=new Date(1E3*c);c=parseInt(c/86400,10);return(c?c+"d ":"")+("0"+
a.getUTCHours()).slice(-2)+":"+("0"+a.getUTCMinutes()).slice(-2)+":"+("0"+a.getUTCSeconds()).slice(-2)},_formatPercentage:function(c){return(100*c).toFixed(2)+" %"},_renderExtendedProgress:function(c){return this._formatBitrate(c.bitrate)+" | "+this._formatTime(8*(c.total-c.loaded)/c.bitrate)+" | "+this._formatPercentage(c.loaded/c.total)+" | "+this._formatFileSize(c.loaded)+" / "+this._formatFileSize(c.total)},_hasError:function(c){return c.error?c.error:0>this.options.maxNumberOfFiles?this.options.customErrors&&
this.options.customErrors.maxNumberOfFilesExceeded?this.options.customErrors.maxNumberOfFilesExceeded:"Maximum number of files exceeded":this.options.acceptFileTypes.test(c.type)||this.options.acceptFileTypes.test(c.name)?this.options.maxFileSize&&c.size>this.options.maxFileSize?(this._errorCallback&&this._errorCallback(),this.options.customErrors&&this.options.customErrors.fileIsTooBig?this.options.customErrors.fileIsTooBig:"File is too big"):"number"===typeof c.size&&c.size<this.options.minFileSize?
this.options.customErrors&&this.options.customErrors.fileIsTooSmall?this.options.customErrors.fileIsTooSmall:"File is too small":null:this.options.customErrors&&this.options.customErrors.fileTypeNotAllowed?this.options.customErrors.fileTypeNotAllowed:"Filetype not allowed"},_validate:function(c){var a=this,e=!!c.length;b.each(c,function(c,b){b.error=a._hasError(b);b.error&&(e=!1)});return e},_renderTemplate:function(c,a){if(!c)return b();var e=c({files:a,formatFileSize:this._formatFileSize,options:this.options});
return e instanceof b?e:b(this.options.templatesContainer).html(e).children()},_renderPreview:function(c,a){var e=this,g=this.options,d=b.Deferred();return(f&&f(c,function(c){a.empty();a.append(c);e._forceReflow(a);e._transition(a).done(function(){d.resolveWith(a)});b.contains(e.document[0].body,a[0])||d.resolveWith(a)},{maxWidth:g.previewMaxWidth,maxHeight:g.previewMaxHeight,canvas:g.previewAsCanvas})||d.resolveWith(a))&&d},_renderPreviews:function(c){var a=this,e=this.options;c.context.find(".preview span").each(function(g,
d){var f=c.files[g];e.previewSourceFileTypes.test(f.type)&&("number"!==b.type(e.previewSourceMaxFileSize)||f.size<e.previewSourceMaxFileSize)&&(a._processingQueue=a._processingQueue.pipe(function(){var e=b.Deferred(),g=b.Event("previewdone",{target:d});a._renderPreview(f,b(d)).done(function(){a._trigger(g.type,g,c);e.resolveWith(a)});return e.promise()}))});return this._processingQueue},_renderUpload:function(c){return this._renderTemplate(this.options.uploadTemplate,c)},_renderDownload:function(c){return this._renderTemplate(this.options.downloadTemplate,
c).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(c){c.preventDefault();c=b(c.currentTarget);var a=c.closest(".template-upload").data("data");a&&a.submit&&!a.jqXHR&&a.submit()&&c.prop("disabled",!0)},_cancelHandler:function(c){c.preventDefault();var a=b(c.currentTarget).closest(".template-upload").data("data")||{};this._notifyAboutResultChanges();this._removeFileCallback&&this._removeFileCallback();a.jqXHR?a.jqXHR.abort():(a.errorThrown="abort",this._trigger("fail",
c,a))},_deleteHandler:function(c){c.preventDefault();var a=b(c.currentTarget);this._trigger("destroy",c,b.extend({context:a.closest(".template-download"),type:"POST",dataType:this.options.dataType},a.data()))},_forceReflow:function(c){return b.support.transition&&c.length&&c[0].offsetWidth},_transition:function(c){var a=b.Deferred();b.support.transition&&c.hasClass("fade")?c.bind(b.support.transition.end,function(e){e.target===c[0]&&(c.unbind(b.support.transition.end),a.resolveWith(c))}).toggleClass("in"):
(c.toggleClass("in"),a.resolveWith(c));return a},_initButtonBarEventHandlers:function(){var c=this.element.find(".fileupload-buttonbar"),a=this.options.filesContainer;this._on(c.find(".start"),{click:function(c){c.preventDefault();a.find(".start button").click()}});this._on(c.find(".cancel"),{click:function(c){c.preventDefault();a.find(".cancel button").click()}});this._on(c.find(".delete"),{click:function(e){e.preventDefault();a.find(".delete input:checked").siblings("button").click();c.find(".toggle").prop("checked",
!1)}});this._on(c.find(".toggle"),{change:function(c){a.find(".delete input").prop("checked",b(c.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar button"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{"click .start button":this._startHandler,"click .cancel button":this._cancelHandler,"click .delete .button":this._deleteHandler});
this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".ccl-fileuploader-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".ccl-fileuploader-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var c=this.options;c.templatesContainer=
this.document[0].createElement(c.filesContainer.prop("nodeName"));d&&(c.uploadTemplateId&&(c.uploadTemplate=d(c.uploadTemplateId)),c.downloadTemplateId&&(c.downloadTemplate=d(c.downloadTemplateId)))},_initFilesContainer:function(){var c=this.options;void 0===c.filesContainer?c.filesContainer=this.element.find(".files"):c.filesContainer instanceof b||(c.filesContainer=b(c.filesContainer))},_stringToRegExp:function(c){c=c.split("/");var a=c.pop();c.shift();return new RegExp(c.join("/"),a)},_initRegExpOptions:function(){var c=
this.options;"string"===b.type(c.acceptFileTypes)&&(c.acceptFileTypes=this._stringToRegExp(c.acceptFileTypes));"string"===b.type(c.previewSourceFileTypes)&&(c.previewSourceFileTypes=this._stringToRegExp(c.previewSourceFileTypes))},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates();this._initRegExpOptions()},_setOption:function(c,a){this._super(c,a);"maxNumberOfFiles"===c&&this._adjustMaxNumberOfFiles(0)},_create:function(){this._super();this._refreshOptionsList.push("filesContainer",
"uploadTemplateId","downloadTemplateId");this._processingQueue||(this._processingQueue=b.Deferred().resolveWith(this).promise(),this.process=function(){return this._processingQueue});this._resetFinishedDeferreds()},enable:function(){var c=!1;this.options.disabled&&(c=!0);this._super();c&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton());
this._super()},emptyFileList:function(){this.options.filesContainer.find(".delete .button, .cancel button").click()},clearResults:function(){b(this.options.filesContainer[0]).find("tr").each(function(){var c=b(this);c.hasClass("clearme")||0===c.find(".error").length?c.remove():c.addClass("clearme")});this._fileList&&(this._adjustMaxNumberOfFiles(this._fileList.length),this._fileList.length=0,this._fileListKeys.length=0);this.options.stateHiddenField.val(JSON.stringify(this._fileList));this._notifyAboutResultChanges()},
allowHide:function(){return 0===b(this.options.filesContainer[0]).find("tr .error").length},abortAllUploads:function(){if(this._uploadsList){var c=this;b.each(this._uploadsList,function(a,e){e.data.jqXHR?e.data.jqXHR.abort():(e.data.errorThrown="abort",c._trigger("fail",e,e.data))})}},getUploadedFiles:function(){return this._fileList||[]},setStartUploadCallback:function(c){"function"==typeof c&&(this._startUploadCallback=c)},setStopUploadCallback:function(c){"function"==typeof c&&(this._stopUploadCallback=
c)},setAddFileCallback:function(c){"function"==typeof c&&(this._addFileCallback=c)},setRemoveFileCallback:function(c){"function"==typeof c&&(this._removeFileCallback=c)},setErrorCallback:function(c){"function"==typeof c&&(this._errorCallback=c)},setAdditionalClientValidationCallback:function(c){"function"==typeof c&&(this._additionalClientValidationCallback=c)},renderHiddenFieldContent:function(){var c=this.options,a=this.options.stateHiddenField.val();if((a=a?JSON.parse(a):[])&&0<a.length){var e=
this._renderDownload(a);e.appendTo(c.filesContainer);var g=[];b.each(a,function(a,c){c.error&&0!=c.error.length||g.push(c)});0<g.length&&this._addFilesToList(g);this._adjustMaxNumberOfFiles(c.singleFileMode?-a.length:-g.length);var d=[];b.each(a,function(a,e){e.type&&c.previewSourceFileTypes.test(e.type)&&e.fileUrl&&(d.push(e),d[d.length-1].toString=function(){return e.fileUrl})});0<d.length&&(a=e.data("data",{files:a}),this._renderPreviews({context:a,files:d}))}}})});var FixedHeader;
(function(b,d,f){FixedHeader=function(c,a){if(c)if(!this instanceof FixedHeader)alert("FixedHeader warning: FixedHeader must be initialised with the 'new' keyword.");else{var e={aoCache:[],oSides:{top:!0,bottom:!1,left:0,right:0},oZIndexes:{top:104,bottom:103,left:102,right:101,topLeft:105},oCloneOnDraw:{top:!1,bottom:!1,left:!0,right:!0},oMes:{iTableWidth:0,iTableHeight:0,iTableLeft:0,iTableRight:0,iTableTop:0,iTableBottom:0},oOffset:{top:0},nTable:null,bFooter:!1,bInitComplete:!1};this.fnGetSettings=
function(){return e};this.fnUpdate=function(){this._fnUpdateClones();this._fnUpdatePositions()};this.fnPosition=function(){this._fnUpdatePositions()};this.fnInit(c,a);"function"==typeof c.fnSettings&&(c._oPluginFixedHeader=this)}};FixedHeader.prototype={fnInit:function(c,a){var e=this.fnGetSettings(),g=this;this.fnInitSettings(e,a);e.nTable=c;e.bFooter=0<f(">tfoot",e.nTable).length?!0:!1;e.oSides.left&&e.aoCache.push(g._fnCloneTable("fixedLeft","FixedHeader_Left",g._fnCloneTLeft,e.oSides.left));e.oSides.top&&
e.oSides.left&&e.aoCache.push(g._fnCloneTable("fixedTopLeft","FixedHeader_TopLeft",g._fnCloneTTopLeft,e.oSides.left));e.oSides.top&&e.aoCache.push(g._fnCloneTable("fixedHeader","FixedHeader_Header",g._fnCloneThead));FixedHeader.afnScroll.push(function(){g._fnUpdatePositions.call(g)});f(b).resize(function(){FixedHeader.fnCalculatePosition()});e.frameSizeChangedEvent&&f(b).bind(e.frameSizeChangedEvent,function(){FixedHeader.fnCalculatePosition()});f(e.nTable).on("column-reorder column-visibility",function(){FixedHeader.fnMeasure();
g._fnUpdateClones(!0);g._fnUpdatePositions()}).on("row-resize",function(){g._fnFindEqualiseTLeftRowsHeight()});FixedHeader.fnMeasure();g._fnUpdateClones();g._fnUpdatePositions();g._fnRemoveExcessIdentifiers();e.bInitComplete=!0},fnInitSettings:function(c,a){void 0!==a&&(void 0!==a.top&&(c.oSides.top=a.top),void 0!==a.bottom&&(c.oSides.bottom=a.bottom),"boolean"==typeof a.left?c.oSides.left=a.left?1:0:void 0!==a.left&&(c.oSides.left=a.left),"boolean"==typeof a.right?c.oSides.right=a.right?1:0:void 0!==
a.right&&(c.oSides.right=a.right),void 0!==a.zTop&&(c.oZIndexes.top=a.zTop),void 0!==a.zBottom&&(c.oZIndexes.bottom=a.zBottom),void 0!==a.zLeft&&(c.oZIndexes.left=a.zLeft),void 0!==a.zRight&&(c.oZIndexes.right=a.zRight),void 0!==a.offsetTop&&(c.oOffset.top=a.offsetTop),void 0!==a.alwaysCloneTop&&(c.oCloneOnDraw.top=a.alwaysCloneTop),void 0!==a.alwaysCloneBottom&&(c.oCloneOnDraw.bottom=a.alwaysCloneBottom),void 0!==a.alwaysCloneLeft&&(c.oCloneOnDraw.left=a.alwaysCloneLeft),void 0!==a.alwaysCloneRight&&
(c.oCloneOnDraw.right=a.alwaysCloneRight),void 0!=a.frameSizeChangedEvent&&(c.frameSizeChangedEvent=a.frameSizeChangedEvent))},_fnCloneTable:function(c,a,e,b){var f=this.fnGetSettings(),k;k=f.nTable.cloneNode(!1);k.removeAttribute("id");var l=d.createElement("div");l.style.position="absolute";l.style.top="0px";l.style.left="0px";l.className+=" FixedHeader_Cloned "+c+" "+a;"fixedHeader"==c&&(l.style.zIndex=f.oZIndexes.top);"fixedLeft"==c&&(l.style.zIndex=f.oZIndexes.left);"fixedTopLeft"==c&&(l.style.zIndex=
f.oZIndexes.topLeft);k.style.margin="0";l.appendChild(k);d.body.appendChild(l);return{nNode:k,nWrapper:l,sType:c,sPosition:"",sTop:"",sLeft:"",fnClone:e,iCells:b}},_fnMeasure:function(){var c=this.fnGetSettings(),a=c.oMes,e=f(c.nTable),b=e.offset(),d=this._fnSumScroll(c.nTable.parentNode,"scrollTop");this._fnSumScroll(c.nTable.parentNode,"scrollLeft");a.iTableWidth=e.outerWidth();a.iTableHeight=e.outerHeight();a.iTableLeft=b.left+c.nTable.parentNode.scrollLeft;a.iTableTop=b.top+d;a.iTableRight=a.iTableLeft+
a.iTableWidth;a.iTableRight=FixedHeader.oDoc.iWidth-a.iTableLeft-a.iTableWidth;a.iTableBottom=FixedHeader.oDoc.iHeight-a.iTableTop-a.iTableHeight},_fnSumScroll:function(c,a){for(var e=c[a];(c=c.parentNode)&&"HTML"!=c.nodeName&&"BODY"!=c.nodeName;)e=c[a];return e},_fnUpdatePositions:function(){var c=this.fnGetSettings();this._fnMeasure();for(var a=0,e=c.aoCache.length;a<e;a++)"fixedHeader"==c.aoCache[a].sType?this._fnScrollFixedHeader(c.aoCache[a]):"fixedLeft"==c.aoCache[a].sType?this._fnScrollHorizontalLeft(c.aoCache[a]):
"fixedTopLeft"==c.aoCache[a].sType&&this._fnScrollHorisontalOrVerticalTopLeft(c.aoCache[a])},_fnRemoveExcessIdentifiers:function(){var c=this.fnGetSettings();f("thead",c.nTable).find(":not(input[type=hidden])").removeAttr("id").removeAttr("name");f("td:nth-child(-n+"+c.oSides.left+")",c.nTable).find(":not(input[type=hidden])").andSelf().removeAttr("id").removeAttr("name");for(var a=0,e=c.aoCache.length;a<e;a++){var b=c.aoCache[a].nNode;f("input[type=hidden]",b).remove();switch(c.aoCache[a].sType){case "fixedHeader":f("th:nth-child(-n+"+
c.oSides.left+")",b).children().andSelf().removeAttr("id").removeAttr("name");break;case "fixedLeft":f("thead",b).find("*").removeAttr("id").removeAttr("name")}}},_fnUpdateClones:function(c){var a=this.fnGetSettings();c&&(a.bInitComplete=!1);for(var e=0,b=a.aoCache.length;e<b;e++)a.aoCache[e].fnClone.call(this,a.aoCache[e]);c&&(a.bInitComplete=!0)},_fnClearTableColumnWidths:function(){},_fnScrollHorizontalLeft:function(c){var a=this.fnGetSettings().oMes,e=FixedHeader.oWin,b=c.nWrapper,d=f(b).outerWidth();
e.iScrollLeft<a.iTableLeft?(this._fnUpdateCache(c,"sPosition","absolute","position",b.style),this._fnUpdateCache(c,"sTop",a.iTableTop+"px","top",b.style),this._fnUpdateCache(c,"sLeft",a.iTableLeft+"px","left",b.style)):e.iScrollLeft<a.iTableLeft+a.iTableWidth-d?(this._fnUpdateCache(c,"sPosition","fixed","position",b.style),this._fnUpdateCache(c,"sTop",a.iTableTop-e.iScrollTop+"px","top",b.style),this._fnUpdateCache(c,"sLeft","0px","left",b.style)):(this._fnUpdateCache(c,"sPosition","absolute","position",
b.style),this._fnUpdateCache(c,"sTop",a.iTableTop+"px","top",b.style),this._fnUpdateCache(c,"sLeft",a.iTableLeft+a.iTableWidth-d+"px","left",b.style))},_fnScrollHorisontalOrVerticalTopLeft:function(c){var a=this.fnGetSettings(),e=a.oMes,b=FixedHeader.oWin,d=c.nWrapper,k=f(d).outerWidth();a.nTable.getElementsByTagName("tbody");b.iScrollLeft<e.iTableLeft&&e.iTableTop>b.iScrollTop+a.oOffset.top?(this._fnUpdateCache(c,"sPosition","absolute","position",d.style),this._fnUpdateCache(c,"sTop",e.iTableTop+
"px","top",d.style),this._fnUpdateCache(c,"sLeft",e.iTableLeft+"px","left",d.style)):e.iTableTop>b.iScrollTop+a.oOffset.top?b.iScrollLeft<e.iTableLeft?(this._fnUpdateCache(c,"sPosition","absolute","position",d.style),this._fnUpdateCache(c,"sTop",e.iTableTop+"px","top",d.style),this._fnUpdateCache(c,"sLeft",e.iTableLeft+"px","left",d.style)):b.iScrollLeft<e.iTableLeft+e.iTableWidth-k?(this._fnUpdateCache(c,"sPosition","fixed","position",d.style),this._fnUpdateCache(c,"sTop",e.iTableTop-b.iScrollTop+
"px","top",d.style),this._fnUpdateCache(c,"sLeft","0px","left",d.style)):(this._fnUpdateCache(c,"sPosition","absolute","position",d.style),this._fnUpdateCache(c,"sTop",e.iTableTop+"px","top",d.style),this._fnUpdateCache(c,"sLeft",e.iTableLeft+e.iTableWidth-k+"px","left",d.style)):(this._fnUpdateCache(c,"sPosition","fixed","position",d.style),this._fnUpdateCache(c,"sTop",a.oOffset.top+"px","top",d.style),b.iScrollLeft<e.iTableLeft?this._fnUpdateCache(c,"sLeft",e.iTableLeft-b.iScrollLeft+"px","left",
d.style):this._fnUpdateCache(c,"sLeft","0px","left",d.style))},_fnScrollFixedHeader:function(c){for(var a=this.fnGetSettings(),e=a.oMes,b=FixedHeader.oWin,d=c.nWrapper,f=0,l=a.nTable.getElementsByTagName("tbody"),m=0;m<l.length;++m)f+=l[m].offsetHeight;e.iTableTop>b.iScrollTop+a.oOffset.top?(this._fnUpdateCache(c,"sPosition","absolute","position",d.style),this._fnUpdateCache(c,"sTop",e.iTableTop+"px","top",d.style),this._fnUpdateCache(c,"sLeft",e.iTableLeft+"px","left",d.style)):b.iScrollTop+a.oOffset.top>
e.iTableTop+f?(this._fnUpdateCache(c,"sPosition","absolute","position",d.style),this._fnUpdateCache(c,"sTop",e.iTableTop+f+"px","top",d.style),this._fnUpdateCache(c,"sLeft",e.iTableLeft+"px","left",d.style)):(this._fnUpdateCache(c,"sPosition","fixed","position",d.style),this._fnUpdateCache(c,"sTop",a.oOffset.top+"px","top",d.style),this._fnUpdateCache(c,"sLeft",e.iTableLeft-b.iScrollLeft+"px","left",d.style))},_fnUpdateCache:function(c,a,e,b,d){c[a]!=e&&(d[b]=e,c[a]=e)},_fnClassUpdate:function(c,
a){var e=this;if("TR"===c.nodeName.toUpperCase()||"TH"===c.nodeName.toUpperCase()||"TD"===c.nodeName.toUpperCase()||"SPAN"===c.nodeName.toUpperCase())a.className=c.className;f(c).children().each(function(b){e._fnClassUpdate(f(c).children()[b],f(a).children()[b])})},_fnCloneThead:function(c){var a=this.fnGetSettings(),e=c.nNode;if(a.bInitComplete&&!a.oCloneOnDraw.top)this._fnClassUpdate(f("thead",a.nTable)[0],f("thead",e)[0]);else{var b=f(a.nTable).outerWidth();c.nWrapper.style.width=b+"px";for(e.style.width=
b+"px";0<e.childNodes.length;)f("thead th",e).unbind("click"),e.removeChild(e.childNodes[0]);c=f("thead",a.nTable).clone(!0,!0)[0];e.appendChild(c);var d=[],k=[];f("thead>tr th",a.nTable).each(function(a){d.push(f(this).width())});f("thead>tr td",a.nTable).each(function(a){k.push(f(this).width())});f("thead>tr th",a.nTable).each(function(a){f("thead>tr th:eq("+a+")",e).width(d[a]);f(this).width(d[a])});f("thead>tr td",a.nTable).each(function(a){f("thead>tr td:eq("+a+")",e).width(k[a]);f(this).width(k[a])})}},
_fnCloneTLeft:function(c){for(var a=this.fnGetSettings(),e=c.nNode,b=f("tbody",a.nTable)[0];0<e.childNodes.length;)e.removeChild(e.childNodes[0]);e.appendChild(f("thead",a.nTable).clone(!0)[0]);e.appendChild(f("tbody",a.nTable).clone(!0)[0]);var d="gt("+(c.iCells-1)+")";f("thead tr",e).each(function(a){f("th:"+d,this).remove()});f("tbody tr",e).each(function(a){f("td:"+d,this).remove()});this._fnEqualiseRowsHeight(a,c,b,e);for(var k=b=0;k<c.iCells;k++)b+=f("thead tr th:eq("+k+")",a.nTable).outerWidth();
e.style.width=b+"px";c.nWrapper.style.width=b+"px"},_fnEqualiseRowsHeight:function(c,a,e,b){f("tr",b).removeClass("ccl-table-highlight");f("tr",c.nTable).height("auto");this._fnEqualiseHeights("thead",e.parentNode,b);this._fnEqualiseHeights("tbody",e.parentNode,b)},_fnFindEqualiseTLeftRowsHeight:function(){var c=this.fnGetSettings();this._fnMeasure();for(var a=0,e=c.aoCache.length;a<e;a++)if("fixedLeft"==c.aoCache[a].sType){var b=c.aoCache[a],d=f("tbody",c.nTable)[0];this._fnEqualiseRowsHeight(c,
b,d,b.nNode)}},_fnCloneTTopLeft:function(c){var a=this.fnGetSettings(),e=c.nNode;for(f("tbody",a.nTable);0<e.childNodes.length;)e.removeChild(e.childNodes[0]);e.appendChild(f("thead",a.nTable).clone(!0)[0]);var b="gt("+(c.iCells-1)+")";f("thead tr",e).each(function(a){f("th:"+b,this).remove()});for(var d=0,k=0;k<c.iCells;k++)d+=f("thead tr th:eq("+k+")",a.nTable).outerWidth();e.style.width=d+"px";c.nWrapper.style.width=d+"px"},_fnEqualiseHeights:function(c,a,e){var b=f(c+" tr",a),d;f(c+" tr",e).each(function(a){d=
b.eq(a).css("height");"Microsoft Internet Explorer"==navigator.appName&&(d=parseInt(d,10)+1);f(this).css("height",d);b.eq(a).css("height",d)})}};FixedHeader.oWin={iScrollTop:0,iScrollRight:0,iScrollBottom:0,iScrollLeft:0,iHeight:0,iWidth:0};FixedHeader.oDoc={iHeight:0,iWidth:0};FixedHeader.afnScroll=[];FixedHeader.fnMeasure=function(){var c=f(b),a=f(d),e=FixedHeader.oWin,g=FixedHeader.oDoc;g.iHeight=a.height();g.iWidth=a.width();e.iHeight=c.height();e.iWidth=c.width();e.iScrollTop=c.scrollTop();e.iScrollLeft=
c.scrollLeft();e.iScrollRight=g.iWidth-e.iScrollLeft-e.iWidth;e.iScrollBottom=g.iHeight-e.iScrollTop-e.iHeight};FixedHeader.VERSION="2.1.0-dev";FixedHeader.prototype.VERSION=FixedHeader.VERSION;FixedHeader.fnCalculatePosition=function(){FixedHeader.fnMeasure();for(var c=0,a=FixedHeader.afnScroll.length;c<a;c++)FixedHeader.afnScroll[c]()};f(b).scroll(function(){FixedHeader.fnCalculatePosition()})})(window,document,jQuery);
function FolderSelector(b){window[b.clientId]=this;var d=this;d.id=b.clientId;d.rootId="0";d.rootTitle="";d.hideRootCrumb=!1;d.selectedId="";d.parentId="";d.cache={};d.hiddenItems=b.hiddenItems;d.loadingTreshold=b.loadingTreshold;d.insertFeedbackClientId=b.insertFeedbackClientId;d.showBreadCrumbs="true"===b.showBreadCrumbs;d.closeOnlyAfterSelectionSaved="true"===b.closeOnlyAfterSelectionSaved;d.needToClose=!1;d.showUnpublishedFolders=b.showUnpublishedFolders||!1;d.controls={dialog:window[b.dialogClientId],
grid:window[b.gridClientId]};d.dialogContainer=$("#"+b.dialogClientId);d.gridContainer=d.dialogContainer.find("."+b.cssClasses.gridContainer);d.treeContainer=d.dialogContainer.find("."+b.cssClasses.treeContainer);d.navigation=d.dialogContainer.find("."+b.cssClasses.navigation);d.loadingIndicator=d.dialogContainer.find("."+b.cssClasses.loadingIndicator);d.dialogContainer.addClass(b.cssClasses.folderSelector);d.gridContainer.addClass(b.cssClasses.hidecontents);d.treeContainer.addClass(b.cssClasses.hidecontents);
d.selectButton=$("."+b.cssClasses.selectButton);d.selectAndCloseButton=$("."+b.cssClasses.selectAndCloseButton);d.navigateUpLink=$("a."+b.cssClasses.navigateUpLink);d.openDialog=function(a){d.toggleSelectButtons(!1);d.needToClose=!1;d.hideSelectFeedback();d.initializeCurrentView(a);window[b.dialogClientId].openDialog()};d.buildStructure=function(){d.reinitialize();$(d).trigger(b.eventNames.open);return!1};d.disposeStructure=function(){$(d).trigger(b.eventNames.close);d.treeContainer.empty();delete d.controls.tree};
d.reinitialize=function(a,e){a&&(d.cache={});d.treeContainer.empty();delete d.controls.tree;d.selectedId="";d.parentId="";d.toggleNavigateUpLink(!(d.selectedId===d.rootId||!d.parentId&&!d.selectedId));d.showBreadCrumbs&&c(0);d.hideSelectFeedback();d.initializeCurrentView(e);d.createTreeMenu()};d.initializeCurrentView=function(a){a&&(d.rootId="0",""!=a.ReadDataServiceUrl&&(d.controls.grid.dataSourceWebMethodUrl=a.ReadDataServiceUrl))};d.createTreeMenu=function(){d.treeContainer.empty();d.treeContainer.jstree({json_data:{data:d._loadTreeData},
plugins:["ui","json_data"],core:{animation:0,strings:{loading:" "}}}).bind("select_node.jstree",function(a,c){d.navigateToNode(c.rslt.obj.attr("nodeId"))});d.controls.tree=$.jstree._reference(d.treeContainer)};d.showEmptyContentFeedback=function(){d.dialogContainer.find("."+b.cssClasses.content).hide();d.navigation.hide();d.selectButton.hide();d.selectAndCloseButton.hide();d.dialogContainer.find("."+b.cssClasses.emptyContent).show()};d.controls.grid.refresh=function(){d.navigateToPage(d.controls.grid.pageNumber,
d.controls.grid.pageSize)};d.baseToggleSelect=d.controls.grid.toggleSelect;d.controls.grid.toggleSelect=function(a){d.baseToggleSelect(a);a=d.controls.grid.getSelectedValues();$(d).trigger("gridSelectionChange",[{nodeIds:a}])};d.baseToggleSelectAll=d.controls.grid.toggleSelectAll;d.controls.grid.toggleSelectAll=function(a){d.baseToggleSelectAll(a);a=d.controls.grid.getSelectedValues();$(d).trigger("gridSelectionChange",[{nodeIds:a}])};$(d).on("gridSelectionChange",function(a,c){d.toggleSelectButtons(0<
c.nodeIds.length)});d.toggleSelectButtons=function(a){d.selectButton.toggleHyperlink(a);d.selectAndCloseButton.toggleHyperlink(a)};var f=function(){var a=d.controls.grid.getSelectedValues();$(d).trigger(b.eventNames.select,[{selectedId:d.selectedId,nodeIds:a}])};d.saveSelection=function(){if(!d.selectButton.getIfHyperLinkEnabled())return!1;d.needToClose=!1;f();return!1};d.saveSelectionAndClose=function(){if(!d.selectAndCloseButton.getIfHyperLinkEnabled())return!1;d.needToClose=!0;f();d.closeOnlyAfterSelectionSaved?
d.toggleSelectButtons(!1):CssModal.closeDialog();return!1};$(document).on(b.eventNames.selectionSaved,function(){d.needToClose&&(CssModal.closeDialog(),d.toggleSelectButtons(!0))});d.gridContainer.on("click","a."+b.cssClasses.folderLink,function(){d.navigateToNode($(this).attr("folderId"));return!1});d.navigateUp=function(){if(!d.navigateUpLink.getIfHyperLinkEnabled())return!1;if(d.parentId&&"0"!=d.parentId||"0"==d.parentId&&"0"==d.rootId)d.selectedId==d.rootId?(d.rootId=d.parentId,d.reinitialize(),
d.showBreadCrumbs&&c()):d.navigateToNode(d.parentId);return!1};d.toggleNavigateUpLink=function(a){d.navigateUpLink.toggleHyperlink(a)};d._loadTreeData=function(a,c){var b=(a.data?a.attr("nodeId"):void 0)||d.rootId,f=(a.data?a.attr("setRootAsParent"):void 0)||!1;d.getData(b,1,d.controls.grid.pageSize,function(a){a=d.getCachedFolderData(a);if(d.showFeedbackOnEmpty&&d.isContentEmpty(b,a))d.showEmptyContentFeedback();else{for(var f=-1,h=[],n=a.folders.length,p=0;p<n;p++){var s=a.folders[p];h.push({data:{title:s.title,
icon:s.cssClass},attr:{nodeId:s.id,setRootAsParent:s.setRootAsParent},state:"closed"});s.selectedByDefault&&0>f&&(f=p)}c(h);""===d.selectedId&&(d.selectedId=d.rootId,d.renderGrid(d.selectedId,1,d.controls.grid.pageSize),0<=f&&f<n&&(d.hideRootCrumb=!0,d.navigateToNode(a.folders[f].id,!0)))}},f)};d.isContentEmpty=function(a,c){return"0"==a?0==c.folders.length&&0==c.items.pages[1].length:!1};d.navigateToNode=function(a,e){if(a!=d.selectedId){d.hideSelectFeedback();d.treeContainer.find("li").removeClass(b.cssClasses.selected);
var g=d.treeContainer.find("li[nodeId="+a+"]");g.addClass(b.cssClasses.selected);d.showBreadCrumbs&&c(g);var f=(g.data?g.attr("setRootAsParent"):void 0)||!1;d.getData(a,1,d.controls.grid.pageSize,function(a){d.selectedId=a;e&&(d.rootId=a);d.toggleNavigateUpLink(!(d.selectedId===d.rootId||!d.parentId&&!d.selectedId));d.renderGrid(a,1,d.controls.grid.pageSize);g[0]&&d.controls.tree.open_node(g)},f)}};d.navigateToPage=function(a,c){d.hideSelectFeedback();d.getData(d.selectedId,a,c,function(){d.renderGrid(d.selectedId,
a,c);d.controls.dialog.adjustWindowSize()})};d.getData=function(a,e,g,f,k){e=e||d.controls.grid.page;g=g||d.controls.grid.pageSize;d.hasCachedFolderData(a)&&d.hasCachedItemData(a,e,g)?f(a):(d.showLoadingIndicator(),$(d).trigger(b.eventNames.loadStart,[{nodeId:a,page:e,pageSize:g}]),$.ajax({type:"GET",url:d.controls.grid.dataSourceWebMethodUrl,data:d.getRequestData(a,e,g,k),dataType:"jsonp",success:function(k){var m=$.Event(b.eventNames.loadComplete);$(d).trigger(m,[{success:!0,data:k}]);m.isPropagationStopped()||
(a==d.rootId&&(d.rootId=k.Id,d.rootTitle=k.Title,d.showBreadCrumbs&&c()),d.cacheData(k,k.Id,e,g),f(k.Id),d.hideLoadingIndicator())},error:function(){$(d).trigger(b.eventNames.loadComplete,[{success:!1}]);d.hideLoadingIndicator()}}))};d.showLoadingIndicator=function(){clearTimeout(d.loadingTimeout);d.loadingTimeout=setTimeout(function(){d.loadingIndicator.show()},d.loadingTreshold)};d.hideLoadingIndicator=function(){clearTimeout(d.loadingTimeout);d.loadingIndicator.hide();d.gridContainer.removeClass(b.cssClasses.hidecontents);
d.treeContainer.removeClass(b.cssClasses.hidecontents)};d.getCachedFolderData=function(a){return d.cache[a]};d.getCachedItemData=function(a,c,b){a=d.cache[a];if(void 0!==a&&null!==a&&(a=a.items||{},a.pageSize===b&&a.pages))return a.pages[c.toString()]};d.hasCachedFolderData=function(a){a=d.getCachedFolderData(a);return void 0!==a&&null!==a};d.hasCachedItemData=function(a,c,b){a=d.getCachedItemData(a,c,b);return void 0!==a&&null!==a};d.getRequestData=function(a,c,b,f){return{nodeId:a,page:c,pageSize:b,
omitItems:d.hasCachedItemData(a,c,b),omitFolders:d.hasCachedFolderData(a),includeUnpublished:d.showUnpublishedFolders,setRootAsParent:void 0!==f?f||!1:!1}};d.cacheData=function(a,c,b,f){var k=d.cache[c]||{};k.description=a.Description;k.parentId=a.SetRootAsParent?d.rootId:a.ParentId;k.title=a.Title;if(null!=a.Folders){k.folders=[];for(var l=a.Folders.length,m=0;m<l;m++){var n=a.Folders[m];k.folders.push({id:n.Id,title:n.Title,description:n.Description,cssClass:n.CssClass,isFolder:n.IsFolder,selectedByDefault:n.SelectedByDefault,
setRootAsParent:n.SetRootAsParent})}}if(null!=a.Items){for(var l=[],p=a.Items.length,m=0;m<p;m++)n=a.Items[m],l.push({id:n.Id,title:n.Title,description:n.Description,cssClass:n.CssClass,isFolder:n.IsFolder,selectable:n.Selectable&&(!d.hiddenItems||-1===d.hiddenItems.indexOf(parseInt(n.Id))),selectedByDefault:n.SelectedByDefault});k.items=k.items||{};f!==k.items.pageSize&&(k.items={});k.items.pageSize=f;k.items.pages=k.items.pages||{};k.items.pages[b.toString()]=l;k.virtualItemCount=a.VirtualItemCount}d.cache[c]=
k};d.renderTypeCell=function(a){return"<div class='"+a.cssClass+"'></div>"};d.renderItemCell=function(a){var c="<span class='"+a.cssClass+"'>"+CommonFunctions.htmlEncode(a.title)+"</span>",d="";a.description&&void 0!==a.description&&(d="<div class='"+b.cssClasses.itemDescription+"'>"+CommonFunctions.htmlEncode(a.description)+"</div>");return a.isFolder?"<a href='#' class='"+b.cssClasses.folderLink+"' folderId='"+a.id+"'>"+c+"</a>"+d:c+d};d.getItemXML=function(a){var c=[];c.push("<Item>");c.push("<Id>"+
a.id+"</Id>");c.push("<Item>"+CommonFunctions.htmlEncode(d.renderItemCell(a))+"</Item>");c.push("<Selectable>"+(!0===a.selectable?"true":"false")+"</Selectable>");c.push("</Item>");return c.join("")};d.renderGrid=function(a,c,g){a=d.cache[a];d.controls.grid.pageNumber=c;d.controls.grid.pageSize=g;g=d.gridContainer.find("."+b.cssClasses.gridHeader+" > h2");var f=d.gridContainer.find("."+b.cssClasses.gridHeader+" > span");g.text(a.title);f.text(a.description);d.parentId=a.parentId;g=d.gridContainer.find("."+
b.cssClasses.navigateUpLink);""===d.parentId?g.addClass(b.cssClasses.disabled):g.removeClass(b.cssClasses.disabled);d.controls.grid.clearSelection();d.toggleSelectButtons(!1);g=a.items.pages[c].length;f=[];f.push("<Data>");f.push("<Items>");for(var k=0;k<g;k++)f.push(d.getItemXML(a.items.pages[c][k]));f.push("</Items>");f.push("<VirtualCount>"+a.virtualItemCount+"</VirtualCount>");f.push("</Data>");d.controls.grid.render(f.join(""),!1);$(d).trigger(b.eventNames.gridRender,[d.controls.grid,a])};d.showSuccessFeedback=
function(){"undefined"!=d.insertFeedbackClientId&&window[d.insertFeedbackClientId].showMessage(b.feedbackTypes.info,b.terms.insertSuccessFeedbackText)};d.showErrorFeedback=function(){"undefined"!=d.insertFeedbackClientId&&window[d.insertFeedbackClientId].showMessage(b.feedbackTypes.error,b.terms.insertErrorFeedbackText)};d.showProgressFeedback=function(){if("undefined"!=d.insertFeedbackClientId){var a=$("<span></span>").addClass(b.cssClasses.progressMessage).html(b.terms.insertProgressFeedbackText);
window[d.insertFeedbackClientId].showMessage(b.feedbackTypes.info,a)}};d.hideSelectFeedback=function(){"undefined"!=d.insertFeedbackClientId&&window[d.insertFeedbackClientId].hide()};var c=function(a){var c=[];a&&(null!=a.attr("nodeid")&&c.push([a.attr("nodeid"),a.children("a:first").contents().last().text()]),a.parentsUntil("."+b.cssClasses.treeContainer,"li").each(function(){var a=$(this);c.push([a.attr("nodeid"),a.children("a:first").contents().last().text()])}));d.hideRootCrumb||c.push([d.rootId,
d.rootTitle]);var g=$("<ul />").addClass(b.cssClasses.crumbs);a=$("<nav />").addClass(b.cssClasses.crumbsWrapper).append(g);$.each(c,function(a,c){var e=$("<li />").append($("<span />").addClass(b.cssClasses.crumbsSeparator).text(b.breadCrumbsSeparator));0<a?e.append($("<span />").append($("<a />").addClass(b.cssClasses.crumb).attr("href","#").data("node-id",c[0]).text(c[1]))):e.append($("<span />").text(c[1]));e.prependTo(g)});d.navigation.children("."+b.cssClasses.crumbsWrapper).remove().end().append(a)};
d.navigation.on("click","a."+b.cssClasses.leftMenuToggler,function(){768<$(window).width()?d.dialogContainer.toggleClass(b.cssClasses.desktopTreeContainerVisible).toggleClass(b.cssClasses.desktopTreeContainerHidden):d.dialogContainer.toggleClass(b.cssClasses.mobileTreeContainerVisible).toggleClass(b.cssClasses.mobileTreeContainerHidden);return!1});d.navigation.on("click","."+b.cssClasses.crumb,function(){d.navigateToNode($(this).data("node-id"));return!1});return d}
function FunctionFinder(){return{getFunctionByName:function(b,d){if(void 0!==b&&null!==b){if(void 0===d||null===d)d=window;for(var f=b.split("."),c=f.pop(),a=0;a<f.length;a++)d=d[f[a]];return d[c]}}}}function CclGridColumn(b,d,f,c,a,e,g,h){this.dataField=b;this.sortField=d;this.sortDescendingByDefault=a;this.headerHtml=f;this.width=c;this.title=e;this.className=g;this.renderTableDataCellValueInsideDiv=h}
function CclAjaxGrid(b){function d(c){return c.replace(/^\s+|\s+$/,"")}window[b]=this;var f=this;f.name=b;f.pageSize=null;f.pageNumber=null;f.mainColumn=null;f.sortingProperty=null;f.filteringPreference=null;f.sortingDirection=null;f.dataSourceWebMethodUrl=null;f.dataSourceWebMethodParams={};f.gridClientID=null;f.columnChooserDialogName=null;f.columnChooserClientID=null;f.pagerInstanceName=null;f.allowSelecting=!1;f.allowColumnChoosing=!0;f.dataKeyName=null;f.selectingHiddenClientID=null;f.pageNumberHiddenClientID=
null;f.pageSizeHiddenClientID=null;f.sortingHiddenClientID=null;f.filteringHiddenClientID=null;f.columnOrderHiddenClientID=null;f.gridContentHiddenClientID=null;f.preferenceCategoryName=null;f.visibleColumns=[];f.columns=[];f.totalCount=0;f.keepSelection=!0;f.allowRowExpanding=!0;f.expandedRowButtonTitle=null;f.emptyTableText=null;f.accordionDataSourceUrl=null;f.saveToPreferencesWebMethodUrl=null;f.gridEmbeddedInAccordionGridControlClientId=null;f.cclGridConstants=null;f.virtualCount=null;f.rowClickable=
!1;f._getColumnsCount=function(){return f.visibleColumns.length+(f.allowColumnChoosing?1:0)+(f.allowSelecting?1:0)};f._saveToPreferences=function(c,a,e,b){f.saveToPreferencesWebMethodUrl&&$.ajax({type:"POST",url:f.saveToPreferencesWebMethodUrl,data:{category:c,name:a,value:e},success:b,error:null})};f._getInvisibleColumns=function(){for(var c=[],a=0;a<f.columns.length;a++)f.visibleColumns.contains(f.columns[a].dataField)||c.push(f.columns[a].dataField);return c};f._applySelectedRowClass=function(c,
a){if(a){var e=f.cclGridConstants.cssClasses.selectedRow;c.className=d(c.className.replace(e,""));c.className=d(c.className+" "+e)}else c.className=d(c.className.replace(f.cclGridConstants.cssClasses.selectedRow,""))};f._addRemoveSelectedValue=function(c,a){a?CCL.CommonFunctions.addIdToHidden($("#"+f.selectingHiddenClientID),c):CCL.CommonFunctions.removeIdFromHidden($("#"+f.selectingHiddenClientID),c)};f.toggleSelect=function(c){null!=c&&f._applySelectedRowClass(c.parentNode.parentNode,c.checked);
var a=!0,e=$("#"+f.gridClientID);e.find("tr td."+f.cclGridConstants.cssClasses.selectColumn+" input:checkbox").each(function(e,b){b.checked||(a&=0);null!=c&&f._addRemoveSelectedValue(b.value,b.checked)});e.find("tr th."+f.cclGridConstants.cssClasses.selectColumn+" input:checkbox").prop("checked",a)};f.toggleSelectById=function(c,a){var e=$("#"+f.gridClientID).find("tr td."+f.cclGridConstants.cssClasses.selectColumn+" input:checkbox[value='"+c+"']");null!=e[0]&&(e.prop("checked",!0),a&&e.prop("disabled",
!0),e[0].parentNode&&e[0].parentNode.parentNode&&f._applySelectedRowClass(e[0].parentNode.parentNode,e[0].checked))};f.toggleSelectAll=function(c){var a=$("#"+f.gridClientID);a.find("tr td."+f.cclGridConstants.cssClasses.selectColumn+" input:checkbox:enabled").each(function(a,b){b.checked=c;f._applySelectedRowClass(b.parentNode.parentNode,c);f._addRemoveSelectedValue(b.value,b.checked)});a.find("tr th."+f.cclGridConstants.cssClasses.selectColumn+" input:checkbox:enabled").prop("checked",c)};f.toggleEnableAll=
function(c){var a=$("#"+f.gridClientID);a.find("tr td."+f.cclGridConstants.cssClasses.selectColumn+" input:checkbox").prop("disabled",!c);a.find("tr th."+f.cclGridConstants.cssClasses.selectColumn+" input:checkbox").prop("disabled",!c)};f.init=function(){f.restoreState();f.hidePagerDependingOnElementsNumberAndGridSettings();f.rowClickable&&$("#"+f.gridClientID+" tr."+f.cclGridConstants.cssClasses.rowClickable+" td").not("."+f.cclGridConstants.cssClasses.selectColumn).mousedown(f._mousedown.bind(this)).mouseup(f._mouseup.bind(this))};
f._mousedown=function(c){f._skipRowClickAction(c)||f._isRightButton(c)||(window.getSelection?window.getSelection().removeAllRanges():document.selection.empty())};f._mouseup=function(c){if(!f._skipRowClickAction(c)&&!f._isRightButton(c)){var a="",a=window.getSelection?window.getSelection().toString():document.selection.createRange().text;0<a.length||$(c.target).trigger("clickableRowClicked")}};f._isRightButton=function(c){if("which"in c)return 3===c.which;if("button"in c)return 2===c.button};f._skipRowClickAction=
function(c){return c.target instanceof HTMLInputElement||c.target instanceof HTMLAnchorElement||$(c.target).hasClass(f.cclGridConstants.cssClasses.emptyTableCell)?!0:!1};f.restoreState=function(){var c=document.getElementById(f.sortingHiddenClientID).value.split(":");f.pageSize=parseInt(document.getElementById(f.pageSizeHiddenClientID).value,10);f.pageNumber=parseInt(document.getElementById(f.pageNumberHiddenClientID).value,10);f.sortingProperty=c[0];f.sortingDirection=c[1];f.filteringPreference=
document.getElementById(f.filteringHiddenClientID).value;f.visibleColumns=document.getElementById(f.columnOrderHiddenClientID).value.split(",")};f.hidePagerDependingOnElementsNumberAndGridSettings=function(){var c=$("#"+f.pagerContainerClientId);c&&f.hidePagerWhenTotalCountLessMinPageSize&&f.virtualCount<=f.cclGridConstants.minRowCount&&c.hide()};f.saveState=function(){document.getElementById(f.sortingHiddenClientID).value=f.sortingProperty+":"+f.sortingDirection;document.getElementById(f.pageSizeHiddenClientID).value=
f.pageSize;document.getElementById(f.pageNumberHiddenClientID).value=f.pageNumber;document.getElementById(f.columnOrderHiddenClientID).value=f.visibleColumns.toString();document.getElementById(f.filteringHiddenClientID).value=f.filteringPreference};f._getParamsStr=function(){var c="",a;for(a in f.dataSourceWebMethodParams)c+="&"+a+"="+escape(f.dataSourceWebMethodParams[a]);return c};f.refresh=function(){f.saveState();if(f.dataSourceWebMethodUrl){var c="",a="";f.sortingProperty&&(c=f.sortingProperty+
":"+f.sortingDirection,f.columns.findBySortField(f.sortingProperty).dataField!=f.mainColumn&&(c+=","+f.columns.findByDataField(f.mainColumn).sortField+":asc"));f.filteringPreference&&(a=f.filteringPreference);if(0<f.gridEmbeddedInAccordionGridControlClientId.length&&0<f.getSelectedValues().length&&0<document.getElementById(f.gridContentHiddenClientID).value.length)f.render(document.getElementById(f.gridContentHiddenClientID).value,!1);else{if(0==f.totalCount&&f.gridEmbeddedInAccordionGridControlClientId.length){var e=
$("#"+f.gridClientID+" ."+f.cclGridConstants.cssClasses.emptyTableCell);1>$(e).length&&(e=$("#"+f.gridClientID+" > tbody"),$(e).empty(),$("#"+f.gridClientID+" > tfoot").empty(),f._addRowWithText(e,"<img class='"+f.cclGridConstants.cssClasses.gridEmbededInAccordionGridControlLoadingCssClass+"'src='"+f.cclGridConstants.onePixelTransparentImageUrl+"' />",f._getColumnsCount(),f.cclGridConstants.cssClasses.emptyTableCell))}$.ajax({type:"POST",url:f.dataSourceWebMethodUrl,data:"pageNumber="+f.pageNumber+
"&pageSize="+f.pageSize+"&sort="+c+"&filter="+a+f._getParamsStr(),dataType:"xml",success:function(a){0<f.gridEmbeddedInAccordionGridControlClientId.length&&(document.getElementById(f.gridContentHiddenClientID).value=a.xml?a.xml:f.XmlToString(a));f.render(a,!0)},error:null})}}else f.postbackFunction()};f.sort=function(c){f.sortingDirection=f.sortingProperty==c?"asc"==f.sortingDirection?"desc":"asc":f.columns.findBySortField(c).sortDescendingByDefault?"desc":"asc";f.sortingProperty=c;f.goToPage(1);
c=f.sortingProperty+":"+f.sortingDirection;f.columns.findByDataField(f.mainColumn).sortField==f.sortingProperty&&"asc"==f.sortingDirection&&(c=null);f._saveToPreferences(f.preferenceCategoryName,f.cclGridConstants.preferenceKeys.sorting,c)};f.filter=function(c){f.filteringPreference!=c&&(f.filteringPreference=c,f.goToPage(1),f._saveToPreferences(f.preferenceCategoryName,f.cclGridConstants.preferenceKeys.filtering,c))};f.goToPage=function(c){f.keepSelection||c==f.pageNumber||(document.getElementById(f.selectingHiddenClientID).value=
"");f.pageNumber=c;f.refresh()};f.changePageSize=function(c){f.pageSize=c;f.goToPage(1);f._saveToPreferences(f.preferenceCategoryName,f.cclGridConstants.preferenceKeys.pagesize,c)};f._getPageHref=function(c){return"javascript:"+f.name+".goToPage("+c+");"};f._addPager=function(){var c=window[f.pagerInstanceName];c&&(c.totalCount=f.totalCount,c.pageSize=f.pageSize,c.pageNumber=f.pageNumber,f.hidePagerWhenTotalCountLessMinPageSize&&f.totalCount<=c.getMinAvailablePageSize()?$("#"+f.pagerContainerClientId).hide():
($("#"+f.pagerContainerClientId).show(),c.createIn($("#"+f.pagerContainerClientId).empty())))};f._addHeader=function(c){var a=$("<tr></tr>"),e;f.allowSelecting&&(e=$("<th></th>").attr("scope","col").attr("class",f.cclGridConstants.cssClasses.selectColumn),e.append($("<input type='checkbox'/>").attr("id",f.name+"_select").on("click",function(){f.toggleSelectAll(this.checked)})),e.append($("<label class='"+f.cclGridConstants.cssClasses.hiddenLabel+"'</label>").attr("for",f.name+"_select").text(f.cclGridConstants.terms.selectAllRows)),
a.append(e));for(var b=0;b<f.visibleColumns.length;b++){var d=f.columns.findByDataField(f.visibleColumns[b]);e=$("<th></th>").attr("scope","col");if(d.sortField){var k=$("<a></a>").attr("href","#").attr("title",d.title).click({sortField:d.sortField},function(a){f.sort(a.data.sortField);return!1}),l=$("<span></span>").attr("class",f.cclGridConstants.cssClasses.thText).html(d.headerHtml);if(f.sortingProperty==d.sortField){e.attr("class",f.cclGridConstants.cssClasses.thSelected);var m=f.cclGridConstants.cssClasses.sortingArrow;
"asc"!=f.sortingDirection&&(m+=" "+f.cclGridConstants.cssClasses.sortingArrowDesc);k.append($("<img />").attr("class",m).attr("src",f.cclGridConstants.onePixelTransparentImageUrl))}else e.attr("class",f.cclGridConstants.cssClasses.thSortable);k.append(l);e.append(k)}else e.html(d.headerHtml);d.className&&e.addClass(d.className);d.width&&e.css("width",d.width+"px");e.appendTo(a)}f.allowColumnChoosing&&(e=$("<a class='"+f.cclGridConstants.cssClasses.columnChooserLink+"'></a>").attr("href","javascript:"+
f.name+".showColumnChooser();").attr("title",f.cclGridConstants.terms.columnChooserToolTip),e.append($("<img />").attr("src",f.cclGridConstants.onePixelTransparentImageUrl).attr("alt",f.cclGridConstants.terms.columnChooserToolTip)),$("<th></th>").attr("class",f.cclGridConstants.cssClasses.columnChooserColumn).append(e).appendTo(a));c.append(a)};f.getSelectedValues=function(){var c=$("#"+f.selectingHiddenClientID).val();return 0==c.length?[]:c.slice(0,c.length-1).split(",")};f.clearSelection=function(){$("#"+
f.selectingHiddenClientID).val("")};f.clear=function(){f.totalCount=0;f._addHeader($("#"+f.gridClientID+" > thead").empty());f._addPager();var c=$("#"+f.gridClientID+" > tbody");c.empty();var a=f._getColumnsCount();f._addRowWithText(c,f.emptyTableText,a,f.cclGridConstants.cssClasses.emptyTableCell);f._addEmptyRows(c,f.cclGridConstants.minRowCount-1,a);$("tr:nth-child(even)",c).addClass(f.cclGridConstants.cssClasses.alternateRow)};f.render=function(c,a){a||(c=f.StringToXml(c));f.totalCount=$("VirtualCount",
c).last().text();var e=f.getSelectedValues();f._addHeader($("#"+f.gridClientID+" > thead").empty());f._addPager();var b=$("#"+f.gridClientID+" > tbody");b.empty();var d=$(":first-child > Items > *",c),k=0<d.length;1>d.length&&""!=$(c).text()&&(d=$(c).children().children());1>f.totalCount&&(d.length=0,k=!1);d.each(function(a,c){var d=$("<tr></tr>"),h=$(f.dataKeyName,c).text(),l=$(f.cclGridConstants.rowTooltipTextProperty,c);0<l.length&&d.attr("title",l.text());f.allowRowExpanding&&(d.css("cursor",
"pointer"),d.on("click",function(a){f.expandCollapseRow(c,a,h);return!0}));if(f.allowSelecting){l=e.contains(h);k&=l;var q=$("<td></td>").attr("class",f.cclGridConstants.cssClasses.selectColumn);0!=f.dataKeySelectionVisible.length&&"true"!==$(f.dataKeySelectionVisible,c).text()||q.append($("<input type='checkbox'/>").attr("id",f.name+"_select_"+h).attr("value",h).prop("checked",l).prop("defaultChecked",l).on("click",function(){f.toggleSelect(this)})).append($("<label class='"+f.cclGridConstants.cssClasses.hiddenLabel+
"'</label>").attr("for",f.name+"_select_"+h).text(f.cclGridConstants.terms.selectOneRow+" "+$(f.mainColumn,this).text()));d.append(q);l&&d.addClass(f.cclGridConstants.cssClasses.selectedRow)}for(l=0;l<f.visibleColumns.length;l++){var q=f.columns.findByDataField(f.visibleColumns[l]),w=$(f.visibleColumns[l],c),v=$("<td></td>");v.html(q.renderTableDataCellValueInsideDiv?"<div title='"+w.text()+"'>"+w.text()+"</div>":w.text());q.className&&v.addClass(q.className);v.appendTo(d)}f.allowColumnChoosing&&
d.append($("<td></td>"));b.append(d)});f.allowSelecting&&$("thead tr th."+f.cclGridConstants.cssClasses.selectColumn+" input:checkbox").prop("checked",k);var l=f._getColumnsCount();0==d.length&&f._addRowWithText(b,f.emptyTableText,l,f.cclGridConstants.cssClasses.emptyTableCell);d.length<f.cclGridConstants.minRowCount&&f._addEmptyRows(b,f.cclGridConstants.minRowCount-Math.max(d.length,1),l);$("tr:nth-child(even)",b).addClass(f.cclGridConstants.cssClasses.alternateRow)};f._addRowWithText=function(c,
a,e,b){c.append($("<tr></tr>").append($("<td></td>").attr("class",b).attr("colSpan",e).html(a)))};f._addEmptyRows=function(c,a,e){for(var b=0;b<a;b++)f._addRowWithText(c,"&nbsp;",e,"")};f.createColumnChooser=function(c){f.columnChooserClientID&&$("#"+f.columnChooserClientID).sortable({opacity:.8,placeholder:c,tolerance:"pointer"})};f.showColumnChooser=function(){$("#"+f.columnChooserClientID).empty();for(var c=f.visibleColumns.concat(f._getInvisibleColumns()),a=0;a<c.length;a++){var e=f.columns.findByDataField(c[a]),
b=f.visibleColumns.contains(e.dataField),e=$("<li />").attr("class",f.cclGridConstants.cssClasses.columnChooser).append($("<input type='checkbox'/>").val(e.dataField).attr("id",f.name+"_"+e.dataField+"_chk").prop("checked",b).prop("defaultChecked",b)).append($("<label></label>").attr("for",f.name+"_"+e.dataField+"_chk").html(e.headerHtml));$("#"+f.columnChooserClientID).append(e)}window[f.columnChooserDialogName].open();(c=$("#"+this.columnChooserClientID).find("input:not(:disabled):first"))&&c.focus()};
f.updateColumnsList=function(){var c=[];$(":checkbox","#"+f.columnChooserClientID).each(function(a,b){var d=$(b);d.prop("checked")&&c.push(d.val())});0==c.length&&c.push(f.mainColumn);if(!c.isEqual(f.visibleColumns)){f.visibleColumns=c;f.visibleColumns.contains(f.columns.findBySortField(f.sortingProperty).dataField)?f.refresh():f.sort(f.columns.findByDataField(f.visibleColumns[0]).sortField);var a=null;c.isEqual(f.defaultColumnOrder)||(a=f.visibleColumns.toString());f._saveToPreferences(f.preferenceCategoryName,
f.cclGridConstants.preferenceKeys.columnOrder,a)}return!0};f._collapseAll=function(){$("#"+f.gridClientID+" > tbody > tr."+f.accordionRow).hide()};f.expandCollapseRow=function(c,a,e){if(a=a?a:window.event)if(a=a.srcElement||a.target,"TD"!=a.tagName&&"TR"!=a.tagName)return;if($(c).next().hasClass(f.cclGridConstants.cssClasses.accordionRow))b=$(c).next(),b.is(":hidden")?(f._collapseAll(),b.show(),b.removeAttr("style")):b.hide();else{f._collapseAll();var b=$("<tr class='"+f.cclGridConstants.cssClasses.accordionRow+
"'></tr>").hide(),d=$("<td></td>").attr("colSpan",f._getColumnsCount());a=0<this.accordionDataSourceUrl.indexOf("?")?"&":"?";$.get(f.accordionDataSourceUrl+a+f.accordionDataSourceUrlParameterName+"="+encodeURIComponent(e),{},function(a){d.html(a);b.show();b.removeAttr("style")},"html");b.append(d);$(c).after(b)}};f.getRow=function(c){return $("#"+f.gridClientID+" > tbody").find("tr:has(td:first input[value='"+c+"']:checkbox)")};Array.prototype.findByDataField=function(c){for(x in this)if(this[x].dataField==
c)return this[x];return null};Array.prototype.findBySortField=function(c){for(x in this)if(this[x].sortField==c)return this[x];return null};Array.prototype.isEqual=function(c){if(this.length!=c.length)return!1;for(var a=0;a<c.length;a++)if(this[a].compare&&!this[a].compare(c[a])||this[a]!==c[a])return!1;return!0};Array.prototype.contains=function(c){for(x in this)if(this[x]==c)return!0;return!1};f.StringToXml=function(c){var a;window.ActiveXObject?(a=new ActiveXObject("Microsoft.XMLDOM"),a.async=
"false",a.loadXML(c)):a=(new DOMParser).parseFromString(c,"text/xml");return a};f.XmlToString=function(c){return window.ActiveXObject?c.xml:(new XMLSerializer).serializeToString(c)}}
function CclGridSearchFilterInstance(b){window[b]=this;var d=this;this.inputEmptyCssClass=null;d.firstLoad=function(){d.isEmpty=d.settings.isEmpty;d.controls.searchInput.focus(function(){d.onFocus()}).keyup(function(b){return d.onKeyUp(b)}).keydown(function(b){b.which===CommonConstants.keyCodes.enter&&b.stopPropagation()}).keypress(function(b){return b.which!==CommonConstants.keyCodes.enter}).blur(function(){d.onBlur()});d.refresh()};d.onFocus=function(){d.isEmpty&&(d.isEmpty=!1,d.refresh(!0))};d.onBlur=
function(){if(0==d.controls.searchInput.val().length)d.isEmpty=!0,d.refresh(),d.filter("");else{var b=d.settings.preferenceWithoutValue+d.controls.searchInput.val();d.filter(b)}};d.onKeyUp=function(b){if(d.isEmpty)return d.isEmpty=!1,d.refresh(!0),!0;if(b.which===CommonConstants.keyCodes.enter)return b=d.settings.preferenceWithoutValue+d.controls.searchInput.val(),d.filter(b),!1};d.defineState=function(){d.isEmpty||0!=d.controls.searchInput.val().length||(d.isEmpty=!0)};d.refresh=function(b){d.isEmpty?
(d.controls.searchInput.addClass(d.inputEmptyCssClass),d.controls.searchInput.val(d.settings.searchText)):(b&&d.controls.searchInput.val(""),d.controls.searchInput.removeClass(d.inputEmptyCssClass))}}
function HtmlItemPicker(b){function d(){p.css("width",n.width()-q);p.removeClass(l.settings.cssClasses.hiddenClass)}function f(){return m.is(":visible")}function c(a){$(m).find("li[data-id='"+a+"']").addClass("ccl-htmlitempicker-highlighteditem")}function a(a){$(m).find("li[data-id='"+a+"']").removeClass("ccl-htmlitempicker-highlighteditem")}function e(e,b){var d;a(e.id);d=l.settings.items[b];c(d.id);s=d}function g(){m=$("<span></span>").attr("id",b+"_menu").addClass(l.settings.cssClasses.menu).insertAfter(n).hide();
var a=$(String.format("<ul class='{0}'></ul>",l.settings.cssClasses.alignment)).appendTo(m);$.each(l.settings.items,function(c,e){a.append($("<li></li>").attr("data-id",e.id.toString()).append($("<a></a>").attr("href","#").html(e.innerHtml).mouseenter(function(a){a=$(a.currentTarget);this.offsetWidth<this.scrollWidth&&!a.prop("title")&&a.prop("title",a.text())}).click(function(a){h();l.controls.selectedValueHidden.val()!==e.id.toString()&&(k(e.id,e.innerHtml),l.onValueChangedFunction(e,l));a.preventDefault()})))})}
function h(){m.hide();a(s.id);n.removeClass(l.settings.cssClasses.menuOpen)}function k(a,c){l.controls.selectedValueHidden.val(a);l.setSelectedHtmlContainer(c);l.controls.container.trigger(l.settings.StateChangedEventName)}window[b]=this;var l=this,m,n,p,s,r=$(window),q;l.initialize=function(){n=l.controls.container;p=n.find("> span");n.find("> a");g();q=p.outerWidth(!0)-p.width();d();$(document).click(function(a){if(a.target===n[0]||1===$(a.target).closest(n).length){if(n.getIfHyperLinkEnabled())if(m.is(":visible"))h();
else{var e=n.offset();a=l.settings.menuAlignment===l.settings.menuAlignmentEnum.top?e.top-m.outerHeight():e.top+n.outerHeight();var b=n.position();a=l.settings.menuAlignment===l.settings.menuAlignmentEnum.top?0<a?b.top-m.outerHeight():b.top-e.top:b.top+n.outerHeight();var b=b.left,d=r.width(),g=n.innerWidth();m.css("width",m.width()<=g?g:"auto");var k=m.outerWidth(),g=r.scrollLeft();l.settings.menuHorizontalAlignment===l.settings.menuHorizontalAlignmentEnum.left?b=0:k<d?(e=e.left+k,e>d+g&&(b-=e-d-
g)):b=-e.left+g;d=(e=CCL.CommonFunctions.isIosDevice())&&10>CCL.CommonFunctions.getIosVersion();!CCL.CommonFunctions.isSafari()||e&&!d||(b=a=0);m.css({top:a+"px",left:b+"px","z-index":l.settings.zIndex});null!==l.settings.listHeight&&m.css("max-height",l.settings.listHeight);l.settings.useModernSkin&&m.css("top",n.outerHeight(!0)+"px");m.show();n.addClass(l.settings.cssClasses.menuOpen)}f()&&(s=l.getSelectedItem(),c(s.id))}else f()&&(b=m.offset(),a.clientX>b.left&&a.clientX<b.left+m.width()&&a.clientY>
b.top&&a.clientY<b.top+m.height()||h())});$(document).keydown(function(a){if(f())switch(a.which){case CommonConstants.keyCodes.enter:return l.controls.selectedValueHidden.val()!==s.id.toString()&&(k(s.id,s.innerHtml),l.onValueChangedFunction(s,l)),h(),a.preventDefault(),!1;case CommonConstants.keyCodes.escape:h();break;case CommonConstants.keyCodes.arrowUp:var c;f()&&(c=l.settings.items.indexOf(s),c=0==c?l.settings.items.length-1:c-1,e(s,c));a.preventDefault();return!1;case CommonConstants.keyCodes.arrowDown:return f()&&
(c=l.settings.items.indexOf(s),c=c==l.settings.items.length-1?0:c+1,e(s,c)),a.preventDefault(),!1}});$(window).resize(function(a){p.addClass(l.settings.cssClasses.hiddenClass);d()});l.settings.disabled&&l.toggleEnabled(!1)};l.loadMenu=function(a){l.settings.items=a;l.getMenu().remove();g()};l.selectItem=function(a){k(a,$.grep(l.settings.items,function(c){return c.id.toString()===a.toString()})[0].innerHtml)};l.hasAnyItems=function(){return 0<l.settings.items.length};l.onchange=function(a){l.controls.container.on(l.settings.StateChangedEventName,
a)};l.toggleEnabled=function(a){l.controls.container.toggleHyperlink(a)};l.closeMenu=function(){m.is(":visible")&&h()};l.getMenu=function(){return m};l.getSelectedItem=function(){var a=l.settings.items[0];$.each(l.settings.items,function(c,e){l.controls.selectedValueHidden.val()==e.id.toString()&&(a=e)});return a};l.setSelectedHtmlContainer=function(a){p.html("\n"+a+"\n")};l.setMenuItemContent=function(a,c){$(m.find("a")[a]).html(c);l.settings.items[a].innerHtml=c};return l}
(function(b,d){b(document).on("click","div[data-hybrid-editor-settings]>div.ccl-hybrideditoritem-text-container, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",null,function(d){var c=b(d.currentTarget).parent("div.ccl-hybrideditoritem");c.hybridEditorItem();c.hybridEditorItem("edit",d.currentTarget,d.target)});b(document).on("keydown","div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",
null,function(b){b.which===CommonConstants.keyCodes.enter&&(b.preventDefault(),setTimeout(function(){b.target.click()},400))});b(document).on("mouseenter mouseleave focus blur","div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",null,function(d){b(d.currentTarget).siblings("div.ccl-hybrideditoritem-text-container:first").toggleClass("ccl-hybrideditoritem-text-container-hovered","mouseenter"==d.type||"focusin"==
d.type)});b.widget("ccl.hybridEditor",{options:{editorClientId:d,editorSetContentFuncName:d,editorGetContentFuncName:d,dialogClientId:d,saveButtonClientId:d,modalDialogCloseHref:d,textUpdateCompleted:b.noop,ckePopupFixClass:d,isIos:!1,containerCss:d,textContainerCss:d},_create:function(){b("#"+this.options.saveButtonClientId).on("click",b.proxy(this._handleSaveClick,this));b("#"+this.options.cancelButtonClientId).on("click",b.proxy(this._handleCancelClick,this));b(document).on("keyup","."+this.options.containerCss,
b.proxy(this._handleContainerKeyUp,this));if(this.options.isIos){var d=this,c=b("html");b(document).on("cssmodal:show",function(a,e,b){b==d.options.dialogClientId&&c.addClass(d.options.ckePopupFixClass)}).on("cssmodal:hide",function(a,e,b){b==d.options.dialogClientId&&c.removeClass(d.options.ckePopupFixClass)})}},_handleContainerKeyUp:function(d){d.which===CCL.CommonConstants.keyCodes.enter&&b(d.target).find("."+this.options.textContainerCss).click()},_handleCancelClick:function(b){this._closeDialog();
return!1},_handleSaveClick:function(b){var c="";this.options.editorClientId&&this.options.editorGetContentFuncName&&(c=this.options.editorGetContentFuncName(this.options.editorClientId));this._trigger("textUpdateCompleted",b,c);this._closeDialog();return!1},_closeDialog:function(){window.location.href=this.options.modalDialogCloseHref},openEditor:function(b,c){this.updateEditorText(b);c&&""!=c&&window[this.options.dialogClientId].setTitle(c);window.location.href="#"+this.options.dialogClientId},updateEditorText:function(b){this.options.editorClientId&&
this.options.editorSetContentFuncName&&(this.options.editorSetContentFuncName(b,this.options.editorClientId),window[this.options.dialogClientId].adjustWindowSize())}})})(jQuery);
(function(b,d){b.widget("ccl.hybridEditorItem",{options:{groupSettingsFunctionName:d,groupSettingsFunctionParam:d,textContainerId:d,editLinkId:d,hybridEditorClientId:d,editModeEnabled:"hybrid",webMethodParams:d,webMethodDataParamName:d,saveContentWebUrl:d,inlineEditorOptions:d,editorDialogTitle:"",editToolTipText:d,textContainerWatermark:d,textContainerWatermarkCssClass:d,watermarkDataAttributeName:d,enable:!0},widgetState:{idle:0,inlineEditorOpened:1,savingPlainText:2,savingRichContent:3},_editor:d,
_inlineEditor:d,_textContainer:d,_editLink:d,_isAjaxEnabled:!1,_isWatermarkUsed:!1,_groupSettingsAreUsed:!1,_currentState:d,_create:function(){this._initializeSettings();this.options.webMethodParams=this._groupSettingsAreUsed?this.options.webMethodParams:JSON.parse(this.options.webMethodParams);this.options.webMethodDataParamName=this.options.webMethodDataParamName?this.options.webMethodDataParamName:"data";this._isAjaxEnabled=!!this.options.saveContentWebUrl;this._textContainer=b("#"+this.options.textContainerId);
this._textValueHidden=b("#"+this.options.textValueHiddenId);this._editLink=b("#"+this.options.editLinkId);this._isWatermarkUsed=this.options.textContainerWatermark!=d&&""!=this.options.textContainerWatermark;if(("hybrid"===this.options.editModeEnabled||"inline"===this.options.editModeEnabled)&&this.options.inlineEditorOptions){var f=this._groupSettingsAreUsed?this.options.inlineEditorOptions:JSON.parse(this.options.inlineEditorOptions);f.editFieldCssClass=(f.editFieldCssClass?f.editFieldCssClass:
"")+(f.multiline?" ccl-modern-textarea":" ccl-modern-input");this._inlineEditor=new ClientInlineEditor(this._textContainer,null,this._textValueHidden,f,b.proxy(this._savePlainText,this),b.proxy(this._inlineEditorModeChanged,this),null)}this.options.hybridEditorClientId&&(this._editor=b("#"+this.options.hybridEditorClientId));this._editor&&0!=this._editor.length||(this.options.editModeEnabled="inline");this._currentState=this.widgetState.idle},edit:function(d,c){if(this.options.enable){if(d===this._textContainer.get(0)){if(c&&
0<b(c).closest("a,input,button,textarea").length)return;this._handleTextContainerClick()}d===this._editLink.get(0)&&this._handleIconClick()}},updateTextContainer:function(b,c){this._updateText(b,c)},_initializeSettings:function(){var d=this.element.data("hybrid-editor-settings");if(b.isFunction(window[d.groupSettingsFunctionName])){var c;c=d.groupSettingsFunctionParam?window[d.groupSettingsFunctionName](d.groupSettingsFunctionParam):window[d.groupSettingsFunctionName]();b.extend(this.options,c);this.options.textContainerId=
d.textContainerId;this.options.textValueHiddenId=d.textValueHiddenId;this.options.editLinkId=d.editLinkId;this.options.hybridEditorClientId||(this.options.hybridEditorClientId=d.hybridEditorClientId);this.options.watermarkDataAttributeName=d.watermarkDataAttributeName;b.extend(this.options.inlineEditorOptions,{supressOriginalBehaviour:!0,editFieldAutoWidth:!1});this._groupSettingsAreUsed=!0}else b.extend(this.options,d)},_handleTextContainerClick:function(){if(this._editor)switch(this.options.editModeEnabled){case "dialog":this._openHybridEditor();
break;case "hybrid":var b=this._textContainer.html();""===b||this._isWatermarkApplied()||CommonFunctions.isPlainText(b)?this._openInlineEditor():this._openHybridEditor();break;default:this._openInlineEditor()}else this._openInlineEditor()},_handleIconClick:function(){!this._editor||"hybrid"!==this.options.editModeEnabled&&"dialog"!==this.options.editModeEnabled?this._openInlineEditor():this._openHybridEditor()},_openInlineEditor:function(){this._inlineEditor&&this._currentState==this.widgetState.idle&&
(this._removeWatermark(),this._inlineEditor.switchToEditMode(),this._currentState=this.widgetState.inlineEditorOpened)},_openHybridEditor:function(){if(this._editor&&this._currentState!=this.widgetState.savingRichContent){var d=this._currentState==this.widgetState.inlineEditorOpened||this._currentState==this.widgetState.savingPlainText,c=b.proxy(this._saveRichContent,this);this._editor.off("hybrideditortextupdatecompleted").one("hybrideditortextupdatecompleted",c);c=this._textValueHidden.val();CommonFunctions.isPlainText(c)&&
(c=this._textContainer.html());d&&(c=CommonFunctions.replaceLineBreaksWithBrTags(this._inlineEditor.getEditFieldText()));this._editor.hybridEditor("openEditor",this._isWatermarkApplied()&&!d?"":c,this.options.editorDialogTitle)}},_savePlainText:function(d,c){var a=b.trim(d.actualText);if(!this._isAjaxEnabled)this._textUpdated(this._processPlainText(a),a),c(d);else if(this.options.saveContentWebUrl&&this.options.webMethodParams){var e=this,g={};g[this.options.webMethodDataParamName]=encodeURIComponent(this._processPlainText(a));
a=b.extend(this.options.webMethodParams,g);this._currentState=this.widgetState.savingPlainText;b.ajax({type:"POST",url:this.options.saveContentWebUrl,data:a,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(a){a&&(a.IsSuccessfull?(d.actualText=a.Value,e._textUpdated(a.SafeHtml,a.Value,a.CustomData)):(d.isUpdateSuccess=!1,d.stopOnEdit=!0,e._handleError(a.ErrorText)))},error:function(a,c,b){d.isUpdateSuccess=!1;d.stopOnEdit=!0;e._handleAjaxError(a,c,b)},complete:function(){c(d);
e.options.textUpdatedCallback&&(new Function(e.options.textUpdatedCallback))()}})}},_saveRichContent:function(d,c){b.isPlainObject(c)&&(c="");if(!this._isAjaxEnabled)this._textUpdated(c,c),this._addWatermark();else if(this.options.saveContentWebUrl&&this.options.webMethodParams){var a=this,e={};e[this.options.webMethodDataParamName]=encodeURIComponent(c);e=b.extend(this.options.webMethodParams,e);this._currentState=this.widgetState.savingRichContent;b.ajax({type:"POST",url:this.options.saveContentWebUrl,
data:e,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(c){c&&(c.IsSuccessfull?(a._textUpdated(c.SafeHtml,c.Value,c.CustomData),CommonFunctions.isPlainText(c.SafeHtml)&&a._inlineEditor.setNewText(c.Value)):a._handleError(c.ErrorText));a._addWatermark();a._currentState=a.widgetState.idle},error:function(c,e,b){a._handleAjaxError(c,e,b)}})}},_addWatermark:function(){if(this._isWatermarkUsed&&!this._isWatermarkApplied()){var d=this._textContainer.html();d&&""!=d||(d=b("<span "+
this.options.watermarkDataAttributeName+"='true'/>").text(this.options.textContainerWatermark),this.options.textContainerWatermarkCssClass&&d.addClass(this.options.textContainerWatermarkCssClass),this._textContainer.prepend(d))}},_removeWatermark:function(){if(this._isWatermarkUsed){var b=this._textContainer.find("span["+this.options.watermarkDataAttributeName+"]");0<b.length&&b.remove()}},_isWatermarkApplied:function(){return this._isWatermarkUsed&&0<this._textContainer.find("span["+this.options.watermarkDataAttributeName+
"]").length},_inlineEditorModeChanged:function(b){b.isEditMode||(this._addWatermark(),this._currentState=this.widgetState.idle);this._trigger("inlinemodechanged",null,b)},_textUpdated:function(b,c,a){this._updateText(b,c);this._trigger("textupdated",null,{html:b,value:c,customData:a})},_updateText:function(b,c){this._textValueHidden.val(c);this._textContainer.html(b)},_processPlainText:function(b){return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g," &nbsp;").replace(/\r?\n/g,
"<br />\n")},_handleAjaxError:function(b,c,a){this._trigger("ajaxerror",null,{xhrObject:b})},_handleError:function(b){this._trigger("saveerror",null,{errorText:b})},value:function(){return this._textValueHidden.val()},resetValue:function(){this._textUpdated("");this._inlineEditor.setNewText("");this._addWatermark()},setToolTip:function(b){this._inlineEditor.setToolTip(b);this._editLink.attr("title",b)},setEnable:function(b){this.options.enable=b;this._editLink.toggle(b);this._textContainer.toggleClass("ccl-hybrideditoritem-text-container-hovered",
b);this._textContainer.toggleClass("h-cursor-default",!b);b?(this._addWatermark(),this._textContainer.attr("title",this.options.editToolTipText)):(this._removeWatermark(),this._textContainer.attr("title",""))}})})(jQuery);
(function(b){function d(a,e,b){var d=a[0],g=/er/.test(b)?"indeterminate":/bl/.test(b)?"disabled":"checked",k="update"==b?{checked:d.checked,disabled:d.disabled,indeterminate:"true"==a.attr("indeterminate")||"false"==a.attr("determinate")}:d[g];if(/^(ch|di|in)/.test(b)&&!k)f(a,g);else if(/^(un|en|de)/.test(b)&&k)c(a,g);else if("update"==b)for(var h in k)k[h]?f(a,h,!0):c(a,h,!0);else e&&"toggle"!=b||(e||a.trigger("ifClicked"),k?"radio"!==d.type&&c(a,g):f(a,g))}function f(a,d,f){var k=a[0],s=a.parent(),
r="checked"==d,q="indeterminate"==d,w="disabled"==d,v=q?"determinate":r?"unchecked":"enabled",u=e(a,v+g(k.type)),t=e(a,d+g(k.type));if(!0!==k[d]){if(!f&&"checked"==d&&"radio"==k.type&&k.name){var C=a.closest("form"),D='input[name="'+k.name+'"]',D=C.length?C.find(D):b(D);D.each(function(){this!==k&&b(this).data("iCheck")&&c(b(this),d)})}q?(k[d]=!0,k.checked&&c(a,"checked","force")):(f||(k[d]=!0),r&&k.indeterminate&&c(a,"indeterminate",!1));h(a,r,d,f)}k.disabled&&e(a,"cursor",!0)&&s.find(".iCheck-helper").css("cursor",
"default");s.addClass(t||e(a,d)||"");s.attr("role")&&!q&&s.attr("aria-"+(w?"disabled":"checked"),"true");s.removeClass(u||e(a,v)||"")}function c(a,c,b){var d=a[0],f=a.parent(),k="checked"==c,q="indeterminate"==c,w="disabled"==c,v=q?"determinate":k?"unchecked":"enabled",u=e(a,v+g(d.type)),t=e(a,c+g(d.type));if(!1!==d[c]){if(q||!b||"force"==b)d[c]=!1;h(a,k,v,b)}!d.disabled&&e(a,"cursor",!0)&&f.find(".iCheck-helper").css("cursor","pointer");f.removeClass(t||e(a,c)||"");f.attr("role")&&!q&&f.attr("aria-"+
(w?"disabled":"checked"),"false");f.addClass(u||e(a,v)||"")}function a(a,c){a.data("iCheck")&&(a.parent().html(a.attr("style",a.data("iCheck").s||"")),c&&a.trigger(c),a.off(".i").unwrap(),b('label[for="'+a[0].id+'"]').add(a.closest("label")).off(".i"))}function e(a,c,e){if(a.data("iCheck"))return a.data("iCheck").o[c+(e?"":"Class")]}function g(a){return a.charAt(0).toUpperCase()+a.slice(1)}function h(a,c,e,b){b||(c&&a.trigger("ifToggled"),a.trigger("ifChanged").trigger("if"+g(e)))}var k=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);
b.fn.iCheck=function(e,g){var h='input[type="checkbox"], input[type="radio"]',p=b(),s=function(a){a.each(function(){var a=b(this);p=a.is(h)?p.add(a):p.add(a.find(h))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(e))return e=e.toLowerCase(),s(this),p.each(function(){var c=b(this);"destroy"==e?a(c,"ifDestroyed"):d(c,!0,e);b.isFunction(g)&&g()});if("object"!=typeof e&&e)return this;var r=b.extend({checkedClass:"checked",disabledClass:"disabled",indeterminateClass:"indeterminate",
labelHover:!0},e),q=r.handle,w=r.hoverClass||"hover",v=r.focusClass||"focus",u=r.activeClass||"active",t=!!r.labelHover,C=r.labelHoverClass||"hover",D=(""+r.increaseArea).replace("%","")|0;if("checkbox"==q||"radio"==q)h='input[type="'+q+'"]';-50>D&&(D=-50);s(this);return p.each(function(){var e=b(this);a(e);var g=this,h=g.id,l=-D+"%",m=100+2*D+"%",m={position:"absolute",top:l,left:l,display:"block",width:m,height:m,margin:0,padding:0,background:"#fff",border:0,opacity:0},l=k?{position:"absolute",
visibility:"hidden"}:D?m:{position:"absolute",opacity:0},n="checkbox"==g.type?r.checkboxClass||"icheckbox":r.radioClass||"iradio",p=b('label[for="'+h+'"]').add(e.closest("label")),s=!!r.aria,q="iCheck-"+Math.random().toString(36).substr(2,6),E='<div class="'+n+'" '+(s?'role="'+g.type+'" ':"");s&&p.each(function(){E+='aria-labelledby="';this.id?E+=this.id:(this.id=q,E+=q);E+='"'});E=e.wrap(E+"/>").trigger("ifCreated").parent().append(r.insert);m=b('<ins class="iCheck-helper"/>').css(m).appendTo(E);
e.data("iCheck",{o:r,s:e.attr("style")}).css(l);r.inheritClass&&E.addClass(g.className||"");r.inheritID&&h&&E.attr("id","iCheck-"+h);"static"==E.css("position")&&E.css("position","relative");d(e,!0,"update");if(p.length)p.on("click.i mouseover.i mouseout.i touchbegin.i touchend.i",function(a){var c=a.type,f=b(this);if(!g.disabled){if("click"==c){if(b(a.target).is("a"))return;d(e,!1,!0)}else t&&(/ut|nd/.test(c)?(E.removeClass(w),f.removeClass(C)):(E.addClass(w),f.addClass(C)));if(k)a.stopPropagation();
else return!1}});e.on("click.i focus.i blur.i keyup.i keydown.i keypress.i",function(a){var b=a.type;a=a.keyCode;if("click"==b)return!1;if("keydown"==b&&32==a)return"radio"==g.type&&g.checked||(g.checked?c(e,"checked"):f(e,"checked")),!1;if("keyup"==b&&"radio"==g.type)!g.checked&&f(e,"checked");else if(/us|ur/.test(b))E["blur"==b?"removeClass":"addClass"](v)});m.on("click mousedown mouseup mouseover mouseout touchbegin.i touchend.i",function(a){var c=a.type,b=/wn|up/.test(c)?u:w;if(!g.disabled){if("click"==
c)d(e,!1,!0);else if(/wn|er|in/.test(c)?E.addClass(b):E.removeClass(b+" "+u),p.length&&t&&b==w)p[/ut|nd/.test(c)?"removeClass":"addClass"](C);if(k)a.stopPropagation();else return!1}})})}})(window.jQuery||window.Zepto);
(function(b){var d=$(b.document);b.IframeClickEventHelper={registerDocumentClickBubblingOnTop:function(){var f="click touchstart";navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)&&(f="click");var c=b.parent,a=b.top;d.on(f,function(){a!=b&&(CommonFunctions.makePostMessageCall(a,{messageName:"iframeClickBubble"}),c!=a&&CommonFunctions.makePostMessageCall(c,{messageName:"iframeClickBubble"}))});d.on("touchstart",function(){a!=b&&(CommonFunctions.makePostMessageCall(a,{messageName:"iframeTouchstartBubble"}),
c!=a&&CommonFunctions.makePostMessageCall(c,{messageName:"iframeTouchstartBubble"}))})},handleDocumentClickBubblingOnTop:function(){CommonFunctions.attachPostMessageEventListener($(b),"iframeClickBubble",function(b){d.trigger(CommonTriggers.clickInInnerFrame)});CommonFunctions.attachPostMessageEventListener($(b),"iframeTouchstartBubble",function(b){d.trigger(CommonTriggers.touchstartInInnerFrame)})}}})(window);
function IframeIterator(b){if(void 0===b.nodeType||void 0===b.nodeName)throw"Starting element must be a HTML Node.";var d=[b],f=b;return{hasNext:function(){return 0<d.length},next:function(){void 0!==f&&$(f).find("iframe").each(function(c,a){var e=void 0;try{e=a.contentDocument}catch(b){return}null!==e&&d.push(e)});return f=d.pop()}}}
(function(b){b.IframeResizer={reportSetIframeDefaultHeight:function(){var d;(d=b.parent)&&b!==d&&CommonFunctions.makePostMessageCall(d,{messageName:"setIframeDefaultHeight"})},registerDefaultHeight:function(d,f){var c=$(b),a=$("#"+d.iframeClientId),e,g,h=CCL.CommonFunctions.calculateBottomOffset(a);g=b[d.setIframeDefaultHeightFunctionName]=function(){var e=IframeResizer.getFixedIframeDefaultHeight(c,a,h);d.useMinHeight?a.css("min-height",e+"px"):a.height(e);f&&f(e+8,a)};g();c.resize(function(){e&&
clearTimeout(e);e=setTimeout(g,200)});CommonFunctions.attachPostMessageEventListener(c,"setIframeDefaultHeight",function(a){g()})},getIframeDefaultHeight:function(b,f,c){return(CCL.CommonFunctions.isIosDevice()?screen.height:b.innerHeight())-f.offset().top-c},getFixedIframeDefaultHeight:function(b,f,c){return IframeResizer.getIframeDefaultHeight(b,f,c)-8},registerExtensionIframeListener:function(d){var f=$("#"+d.iframeClientId);CommonFunctions.attachPostMessageEventListener($(b),[CommonWindowMessages.MessageNames.expandExtensionIframe,
CommonWindowMessages.MessageNames.collapseExtensionIframe],function(c){var a=(c=c.messageName===CommonWindowMessages.MessageNames.expandExtensionIframe)?"0":"";f.css({position:c?"absolute":"",top:a,right:a,bottom:a,left:a});IframeResizer.reportSetIframeDefaultHeight()})}}})(window);
function postHeightToExtension(b,d){d.get(0)&&CommonFunctions.makePostMessageCall(d.get(0).contentWindow,new CommonWindowMessages.GenericMessageWithData(CommonWindowMessages.MessageNames.extensionContentOpened,{iframeHeight:b&&0<b?b:d.height()}))}function InlineFeedback(b){window[b]=this;var d=this;d.show=function(b){var c=d.controls;c.container.css("visibility","visible");0<b&&c.container.delay(1E3*b).fadeTo("slow",0,function(){$(this).css("visibility","hidden").css("opacity",1)})}}
(function(b){b.InlineReplyManager={sendButtonClick:function(b,f){var c=$(b),a=c.parent().prev(),e=a.val();e&&(c.prop("disabled",!0),f({target:c,messageBody:CommonFunctions.replaceLineBreaksWithBrTags(CommonFunctions.htmlEncode(e)),sendMessageCompleteCallback:function(){c.prop("disabled",!1)},sendMessageSuccessCallback:function(){a.val("")}}))}}})(window);
function ItslTextBox(b){function d(a){if((a.keyCode?a.keyCode:a.which?a.which:a.charCode)===CommonConstants.keyCodes.enter){if(h.onEnterAction)return h.onEnterAction(),a.preventDefault(),!1;$(this.form).submit();a.preventDefault();return!1}return!0}function f(c){var b=c.keyCode?c.keyCode:c.which?c.which:c.charCode,d;"undefined"!==e.selectionStart?(d=0<e.selectionEnd-e.selectionStart,e.focus()):d=!1;if(!d&&0<g.maxLength&&this.value.length>=g.maxLength){d=c.ctrlKey||c.metaKey;if(b>=CommonConstants.keyCodes.arrowLeft&&
b<=CommonConstants.keyCodes.arrowDown||b===CommonConstants.keyCodes.del||b===CommonConstants.keyCodes.backspace||d&&120===b||d&&97===b||d&&118===b||d&&99===b||d&&90===b)return c=a.val(),c.length>g.maxLength&&a.val(c.substr(0,g.maxLength)),!0;c.preventDefault();return!1}return!0}window[b]=this;var c=this,a=$("#"+b),e=a.get(0),g,h;c.initialize=function(){g=c.settings;h=c.functions;"maxLength"in e||a.bind("change keyup keydown input paste",f);g.submitOnEnter&&a.bind("change keyup keydown input paste",
d);if(c.settings.isAutogrow){var b=a.width();a.css({resize:"none",overflow:"hidden",width:b});a.autogrow({additionalHeight:c.settings.autogrowAdditionalHeight})}};return c}
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b(jQuery)})(function(b){if(!b.support.cors&&b.ajaxTransport&&window.XDomainRequest){var d=/^https?:\/\//i,f=/^get|post$/i,c=new RegExp("^"+location.protocol,"i");b.ajaxTransport("* text html xml json",function(a,e,g){if(a.crossDomain&&a.async&&f.test(a.type)&&d.test(a.url)&&c.test(a.url)){var h=null;return{send:function(c,d){var g="",f=(e.dataType||"").toLowerCase();h=new XDomainRequest;/^\d+$/.test(e.timeout)&&(h.timeout=e.timeout);
h.ontimeout=function(){d(500,"timeout")};h.onload=function(){var a="Content-Length: "+h.responseText.length+"\r\nContent-Type: "+h.contentType,c=200,e="success",g={text:h.responseText};try{if("html"===f||/text\/html/i.test(h.contentType))g.html=h.responseText;else if("json"===f||"text"!==f&&/\/json/i.test(h.contentType))try{g.json=b.parseJSON(h.responseText)}catch(k){c=500,e="parseerror"}else if("xml"===f||"text"!==f&&/\/xml/i.test(h.contentType)){var m=new ActiveXObject("Microsoft.XMLDOM");m.async=
!1;try{m.loadXML(h.responseText)}catch(u){m=void 0}if(!m||!m.documentElement||m.getElementsByTagName("parsererror").length)throw c=500,e="parseerror","Invalid XML: "+h.responseText;g.xml=m}}catch(t){throw t;}finally{d(c,e,g,a)}};h.onprogress=function(){};h.onerror=function(){d(500,"error",{text:h.responseText})};e.data&&(g="string"===b.type(e.data)?e.data:b.param(e.data));h.open(a.type,a.url);h.send(g)},abort:function(){h&&h.abort()}}}})}});
function KeepAlive(){function b(){f&&f.webMethodUrl&&$.ajax({type:"POST",data:f.postData,url:f.webMethodUrl,contentType:"application/json; charset=utf-8",success:function(a){if(a&&(a=a.hasOwnProperty("d")?a.d:a,a.ErrorCode&&0>a.ErrorCode&&a.StopPolling&&1==a.StopPolling))return;c=0;setTimeout(function(){b()},1E3*f.intervalInSeconds)},error:function(){c++;c<f.maxNumberOfTries&&setTimeout(function(){b()},1E3*f.errorTimeoutInSeconds)}})}var d=this,f,c=0;d.initialize=function(){(f=d.settings)&&setTimeout(function(){b()},
1E3*f.intervalInSeconds)};return d}
function LabeledInput(b){function d(){return m.find("."+e.settings.itemClass)}function f(a,c){e.settings.throwEventInsteadAddingItemToInput?$(document).trigger(e.settings.onSelectEventName,c.item.metadata):e.pushLabel(c.item.label,c.item.metadata);h.val("");return!1}function c(){h.prop("placeholder",d().length?"":e.settings.watermark);a();e.settings.onLabelsChangedHandler&&$.each(l,function(a,c){c()})}function a(){e.settings.watermark&&!h.val()&&0==d().length?(h.removeAttr("width"),h.attr("size",
h.attr("placeholder").length),h.css("max-width",m.width()-40+"px")):(h.removeAttr("size"),h.attr("width","100"))}var e=this,g,h,k,l=[],m;window[b]=e;e.initialize=function(){e.settings.onLabelsChangedHandler&&l.push(e.settings.onLabelsChangedHandler);g=e.settings.removeButtonTooltipFormat;m=$("#"+e.settings.containerId);m.on(e.settings.clickOrTouch,".ccl-labeled-input-remove",function(a){$(a.target).parent().remove();c()});h=$("#"+e.settings.inputId);k=h.parent();h.autocomplete({open:function(a,c){$(".ui-autocomplete").width(m.width())},
focus:function(a,c){a.preventDefault()},position:{collision:"none flip",of:m},source:e.settings.autocompleteCallback,select:f,delay:e.settings.autocomplete.delay,minLength:e.settings.autocomplete.minLength,messages:{noResults:"",results:function(){return""}},create:function(){e.settings.renderItem&&($(this).data("ui-autocomplete")._renderItem=e.settings.renderItem)}});h.keyup(function(){a()});h.keydown(function(a){a.which!==CommonConstants.keyCodes.backspace||e.hasText()||(a=d(),0<a.length&&(a.last().remove(),
c()))});h.blur(function(){h.val("");a()});h.focus(function(){a()});e.settings.autocomplete.autocompleteMenuCssClass&&h.data("ui-autocomplete").menu.activeMenu.addClass(e.settings.autocomplete.autocompleteMenuCssClass);k.append(h.data("ui-autocomplete").menu.activeMenu.detach());m.on(e.settings.clickOrTouch,function(a){h.is(":focus")||(a.preventDefault(),h.focus())});a()};e.pushLabel=function(a,b){var d=$("<span></span>"),f=$("<span>"+a+"</span>"),h=$('<a href="#" class="ccl-labeled-input-remove">\u00d7</a>');
h.prop("title",g.replace("{0}",a));d.data("meta",b);f.addClass(e.settings.textClass);d.addClass(e.settings.itemClass);d.append(f).append(h);d.insertBefore(k);c()};e.getLabelsMetadata=function(){return $.makeArray(d().map(function(a,c){return $(c).data("meta")}))};e.mapLabelsField=function(a){return e.getLabelsMetadata().map(function(c){return c[a]})};e.clear=function(){d().remove();h.val("");c()};e.hasText=function(){return""!==h.val().trim()};e.getText=function(){return h.val()};e.addLabelsChangedHandler=
function(a){e.settings.onLabelsChangedHandler&&l.push(a)};e.focus=function(){h.focus()}}
function LearningObjectivesSelector(b,d,f,c,a,e){window[b]=this;var g=this;g.readLearningObjectivesUrl=a.readLearningObjectivesUrl;g.selectedIds=c;g.selectableCategory=a.selectableCategory;g.selectableObjective=a.selectableObjective;g.selectableSubject=a.selectableSubject;g.cutOffLoStructure=a.cutOffLoStructure;g.terms=f;g.language=a.language;g.updateContainerOnSelect=a.updateContainerOnSelect;d?(g.folderSelector=d,g.baseGetRequestData=d.getRequestData,g.editable=!0):g.editable=!1;g.placeHolderOnEmpty=
a.placeHolderOnEmpty;g.courseId=a.courseId;g.countryCode=a.countryCode;g.showTooltip=a.showTooltip;g.firstLoad=!0;g.cache={};g.cssClasses=e;g.filtersData={};""!=a.filtersData&&(g.filtersData=a.filtersData);g.defaultFilter=a.defaultFilter;g.filtersddl=$(".js-filter-ddl");g.GetCurrentFilter=function(){return 0<g.filtersddl.length?g.filtersddl.find(":selected").val():g.defaultFilter};g.folderSelector&&(g.folderSelector.dialogContainer.addClass(g.cssClasses.learningObjectivesSelector),g.folderSelector.showFeedbackOnEmpty=
0==g.filtersddl.length);g.selectedContainer=$("#"+b).find("."+g.cssClasses.selectedContainer);g.emptyContainer=$("#"+b).find("."+g.cssClasses.emptyContainer);g.addLink=$("#"+b).find("."+g.cssClasses.addLink);if(g.editable)g.selectedContainer.on("click","."+g.cssClasses.removeLink,function(){$(g).trigger(a.clientEvents.removeItem,$(this));g.removeSelectedIds([$(this).data("loId")]);return!1});g.openDialog=function(){g.folderSelector&&g.folderSelector.openDialog(g.filtersData[g.GetCurrentFilter()])};
g.updateSelectedItemsContainer=function(){g.updateContainerOnSelect&&(g.selectedContainer.empty(),g.emptyContainer.empty(),g.listIsEmpty()?g.toggleEmptyContentFeedback(!0):(g.setSelectedIds(g.selectedIds,!0),g.loadData(g.selectedIds,function(a){var c=[];$.each(a,function(a,e){g.renderSelectedItemHtml(e.id,e.title,e.description,e.type,e.options);c.push(e.id)});0===c.length&&g.toggleEmptyContentFeedback(!0)})),$(g).trigger(a.clientEvents.itemContainerUpdated))};g.createTooltip=function(a,c){var e=$("<span></span>");
e.text(a);var b=new ToolTip(null,e);b.title=$("<div/>").text(a).html();b.description=c;b.settings={showPopupTimeout:300,hidePopupTimeout:300,cssClasses:{tooltipPopup:"ccl-tooltip-popup",linkToTooltip:"ccl-tooltip-link",arrowUp:"ccl-tooltip-arrow-up",arrowDown:"ccl-tooltip-arrow-down",arrowContainer:"ccl-tooltip-arrow-container",tooltipTitle:"ccl-tooltip-popup-title",tooltipDescription:"ccl-tooltip-popup-description"}};b.initialize();return e};g.renderSelectedItemHtml=function(a,c,e,b,d){c=$("<div></div>").addClass(g.cssClasses.selectedItem).append($("<span></span>").addClass(g.cssClasses.selectedItemIcon).addClass(b)).append(g.showTooltip?
g.createTooltip(c,e):$("<span></span>").text(c));g.editable&&(a=$("<a></a>").data("loId",a).addClass(g.cssClasses.removeLink).attr("data-loId",a).attr("title",g.terms.deleteTooltip).attr("href","#").text("\u00d7"),void 0!==d&&a.data("options",d),c.append(a));g.selectedContainer.append(c)};g.getSelectedItemsSelector=function(){return String.format(".{0}",g.cssClasses.selectedItem)};g.listIsEmpty=function(){return 0==g.selectedIds.length};g.toggleEmptyContentFeedback=function(a){g.emptyContainer.toggle(a).text(a?
g.placeHolderOnEmpty:"")};g.showSuccessFeedback=function(){g.folderSelector.showSuccessFeedback()};g.showErrorFeedback=function(){g.folderSelector.showErrorFeedback()};g.showProgressFeedback=function(){g.folderSelector.showProgressFeedback()};g.addSelectedIds=function(c){var e={};$.each(g.selectedIds,function(a,c){e[c]=c});$.each(c,function(a,c){e[c]=c});g.selectedIds=[];$.each(e,function(a){g.selectedIds.push(a)});$(g).trigger(a.clientEvents.selectionChange);g.updateSelectedItemsContainer()};g.removeSelectedIds=
function(c){var e={};$.each(g.selectedIds,function(a,c){e[c]=c});$.each(c,function(a,c){delete e[c]});g.selectedIds=[];$.each(e,function(a){g.selectedIds.push(a)});$(g).trigger(a.clientEvents.selectionChange);g.updateSelectedItemsContainer()};g.clearSelectedIds=function(){g.selectedIds=[];$(g).trigger(a.clientEvents.selectionChange);g.updateSelectedItemsContainer()};g.setSelectedIds=function(a,c){g.selectedIds=[];g.selectedIds=a;g.toggleFolderSelectById(g.selectedIds,c)};g.toggleFolderSelectById=
function(a,c){g.folderSelector&&($.each(a,function(a,e){g.folderSelector.controls.grid.toggleSelectById(e,c)}),c&&g.folderSelector.toggleSelectButtons(!1))};g.loadData=function(c,e){var b=[],d={};$.each(c,function(a,c){void 0===g.cache[c]?b.push(c):d[c]=g.cache[c]});0==b.length?e(d):$.ajax({type:"POST",url:g.readLearningObjectivesUrl,data:{ids:b.join(",")},dataType:"jsonp",success:function(a){$.each(a.Items,function(a,c){var e={id:c.Id,title:c.Title,description:c.Description,type:c.Type};g.cache[c.Id]=
e;d[c.Id]=e});e(d)},error:function(){$(g).trigger(a.clientEvents.error)}})};g.changeFilter=function(a){g.folderSelector.reinitialize(!0,g.filtersData[a])};if(d){var h=!1;d.getRequestData=function(a,c,e,b){a=g.baseGetRequestData(a,c,e,b);a.SelectableCategory=g.selectableCategory;a.SelectableLearningObjective=g.selectableObjective;a.SelectableSubject=g.selectableSubject;a.cutOffLoStructure=g.cutOffLoStructure;g.language&&(a.lan=g.language);return a};$(d).on(a.folderSelectorEvents.select,function(c,
e){var b=h?[e.selectedId]:e.nodeIds;$(g).trigger(a.clientEvents.addItems,[b.filter(function(a){return 0>g.selectedIds.indexOf(a)})]);g.addSelectedIds(b)});if(a.restrictInsertContext)$(d).on(a.folderSelectorEvents.gridRender,function(a,c,e){if(h=e.virtualItemCount>e.folders.length)c.toggleSelectAll(!0),c.toggleEnableAll(!1)});else $(d).on(a.folderSelectorEvents.gridRender,function(a,c,e){$.each(g.selectedIds,function(a,e){c.toggleSelectById(e,!0)})});if(g.filtersddl)g.filtersddl.on("change",function(){g.changeFilter($(this).val())})}g.updateSelectedItemsContainer();
return g}
function ListCollapser(b,d,f,c,a){var e=this;e.showCount=d;e.showCountJquerySelector=d-1;e.hidden=!0;e.listHolder=b;e.listChangesEvents=f;e.showLinkText=c;e.hideLinkText=a;e.getList=function(){return e.listHolder.children("ul")};e.getLength=function(){return e.getList().children("li").length};e.restructure=function(){var c=e.getLength(),b=$("#showLink",e.listHolder),d=$("#hideLink",e.listHolder),f=Math.min(e.showCount,c);e.getList().children("li:lt("+f+")").show();e.showCount<c?(void 0==b[0]?(b=$("<a>").attr("href",
"javascript:void(0);").attr("id","showLink").css("display","none").insertAfter(e.getList()),b.click(function(){e.hidden=!1;e.getList().children("li").show();d.show();b.hide()})):b.insertAfter(e.getList()),void 0==d[0]?(d=$("<a>").html(a).attr("href","javascript:void(0);").attr("id","hideLink").css("display","none").insertAfter(e.getList()),d.click(function(){e.hidden=!0;e.getList().children("li:gt("+e.showCountJquerySelector+")").hide();d.hide();b.show().html(e.showLinkText+" ("+e.getLength()+")")})):
d.insertAfter(e.getList()),e.hidden?(e.getList().children("li:gt("+e.showCountJquerySelector+")").hide(),d.hide(),b.show().html(e.showLinkText+" ("+c+")")):(b.hide(),d.show())):(b.hide(),d.hide())};e.init=function(){e.restructure();if(e.listChangesEvents)e.listHolder.on(e.listChangesEvents,e.restructure)}}
function MetadataTranslationsList(b){window[b]=this;var d=this,f;d.firstLoad=function(){f=d.controls.table.find("tbody");var c=d.controls.languageDataHidden.val();d.settings.metadataLanguages=c?JSON.parse(c):[];d.controls.addLanguageLink.on("click",function(){d.addLanguageLinkClick()});d.controls.languageInput.on("change",function(){d.controls.languageIdHidden.val(d.controls.languageInput.val())});d.updateAddButton();$.each(d.metadataColumns,function(a,c){if(c.IsMultiLine){var b=d.getInputForMetadataColumn(c),
f=b.attr("rows")*b.attr("cols")*2;b.keypress(function(a){b.val().length>f&&a.preventDefault()});b.on("paste",function(){setTimeout(function(){b.val($.trim(b.val().replace(/[\n\r]+/g,"")));b.val(b.val().substring(0,f))},100)})}})};d.getInputForMetadataColumn=function(c){return $("#"+d.settings.modalDialogClientId+"_"+c.Name)};d.addLanguageLinkClick=function(){d.fillLanguageInfo(null)};d.editLanguageLinkClick=function(c,a){d.fillLanguageInfo(a)};d.dialogLoaded=function(){d.controls.languageInput.is(":visible")?
d.controls.languageInput.focus():d.getInputForMetadataColumn(d.metadataColumns[0]).focus()};d.saveLanguageClick=function(){d.clearValidators();var c={},a=!0,e=parseInt(d.controls.languageIdHidden.val());0>e&&(d.showValidationMessage(d.controls.languageInput,d.settings.requiredValidationMessage),a=!1);c[d.settings.metadataLanguageIdDataField]=e;$.each(d.metadataColumns,function(e,b){var g=$.trim(d.getInputForMetadataColumn(b).val());d.validateMetadataColumn(b,g)||(a=!1);c[b.DataField]=g});if(!a)return!1;
var b=d.findMetadataLanguageById(e);b?$.each(d.metadataColumns,function(a,e){b[e.DataField]=c[e.DataField]}):d.settings.metadataLanguages.push(c);d.saveLanguagesToHidden();d.fillTableRow(c);d.updateTable();d.updateAddButton();return!0};d.getTableRow=function(c){c=f.find("tr:has(td:first input[value='"+c+"']:hidden)");0==c.length&&(c=$("<tr></tr>").appendTo(f));return c};d.fillTableRow=function(c){var a=d.cssClasses,e=c[d.settings.metadataLanguageIdDataField],b=d.getTableRow(e);b.empty().append($("<td></td>").addClass(a.TableColumnLanguage).append($("<input />").attr("type",
"hidden").val(e)).append($("<a></a>").attr("href","javascript:void(0);").text(d.getLanguageTitleById(e)).on("click",function(){d.editLanguageLinkClick(this,e)})));$.each(d.metadataColumns,function(a,e){b.append($("<td></td>").addClass(e.CssClass).text(c[e.DataField]))});b.append($("<td></td>").addClass(a.TableColumnDelete).append($("<a></a>").addClass("ccl-iconlink").addClass(a.TableColumnDeleteImage).attr("href","javascript:void(0);").attr("title",d.settings.deleteRowTooltip).on("click",function(){d.removeLanguageClick(this,
e)}).append($("<img />").attr("src",d.settings.deleteImageUrl).attr("alt",d.settings.deleteRowTooltip).addClass(a.tableColumnDeleteImage))))};d.validateMetadataColumn=function(c,a){var e=!0;c.IsRequired&&0==a.length&&(e=!1,d.showValidationMessage(d.getInputForMetadataColumn(c),d.settings.requiredValidationMessage));return e};d.removeLanguageClick=function(c,a){var e=d.settings.metadataLanguages;$.each(e,function(c,b){return b[d.settings.metadataLanguageIdDataField]==a?(e.splice(c,1),d.saveLanguagesToHidden(),
!1):!0});$(c).parent().parent().remove();d.updateTable();d.updateAddButton()};d.saveLanguagesToHidden=function(){d.controls.languageDataHidden.val(JSON.stringify(d.settings.metadataLanguages))};d.findMetadataLanguageById=function(c){var a=null;$.each(d.settings.metadataLanguages,function(e,b){return b[d.settings.metadataLanguageIdDataField]==c?(a=b,!1):!0});return a};d.getAvailableLanguagesData=function(){return $.grep(d.settings.languages,function(c){return null==d.findMetadataLanguageById(c.Key)})};
d.disableSelectedLanguages=function(){var c=d.controls.languageInput;c.find("option").remove();$.each(d.getAvailableLanguagesData(),function(a,e){c.append($("<option></option>").val(e.Key).text(e.Value))})};d.getLanguageTitleById=function(c){for(index in d.settings.languages)if(d.settings.languages[index].Key==c)return d.settings.languages[index].Value;return""};d.showValidationMessage=function(c,a){$("<div></div>").text(a).addClass(d.cssClasses.ErrorMessage).appendTo(c.parent())};d.clearValidators=
function(){d.controls.modalDialogContainer.find("div."+d.cssClasses.ErrorMessage).remove()};d.fillLanguageInfo=function(c){var a=null;0<=c&&(a=d.findMetadataLanguageById(c));var e=!!a;d.clearValidators();window[d.settings.modalDialogName].setNewTitle(e?d.getLanguageTitleById(c):d.settings.addLanguageDialogTitle);d.controls.languageIdHidden.val(e?a[d.settings.metadataLanguageIdDataField]:-1);d.controls.languageInput.parent().toggle(!e);$.each(d.metadataColumns,function(c,b){d.getInputForMetadataColumn(b).val(e?
a[b.DataField]:"")});e||d.disableSelectedLanguages();window[d.settings.modalDialogName].open()};d.updateTable=function(){var c=d.cssClasses.TableRowAlternate;f.find("tr:even").removeClass(c);f.find("tr:odd").addClass(c);f.parent().toggle(0<f.find("tr:has(td)").length)};d.updateAddButton=function(){d.controls.addLanguageLink.toggle(d.settings.metadataLanguages.length<d.settings.languages.length-1)};return d}
function ObjectInstanceAdministrator(){return{cleanupObject:function(b,d,f){var c=Object.keys(f);$.each(c,function(a,c){void 0===d[c]?delete b[c]:d[c]!=f[c]&&(b[c]=d[c])})},cloneObject:function(b){return Object.create(b)}}}
function ObjectPropertiesInspector(){return{getObjectProperties:function(b){var d=Object.keys(b),f={};$.each(d,function(c,a){f[a]=b[a]});return f},isValuePropertyOfObject:function(b,d){var f=Object.keys(d),c=!1;$.each(f,function(a,e){d[e]===b&&(c=!0)});return c},getPropertiesDelta:function(b,d){var f=Object.keys(d),c=[];$.each(f,function(a,e){b[e]!==d[e]&&c.push({keyValue:e,beforeValue:b[e],afterValue:d[e]})});return c}}}
function ObjectStateValidators(){var b={},d={isUndefinedSafe:function(b,c){return b===c}};b.isNull=function(b){return null===b};b.isUndefined=function(b){return d.isUndefinedSafe(b)};b.isNullOrUndefined=function(d){return b.isUndefined(d)||b.isNull(d)};b.isFunction=function(b){return"function"===typeof b};b.isArray=function(b){return Array.isArray(b)};b.isString=function(b){return"string"===typeof b};b.isNumber=function(b){return"number"===typeof b&&!isNaN(b)};b.isBoolean=function(b){return"boolean"===
typeof b};b.isWhitespace=function(d){return b.isString(d)&&/^\s*$/.test(d)};b.isNullOrWhitespace=function(d){return b.isNullOrUndefined(d)||b.isWhitespace(d)};b.isFileError=function(b){return"undefined"!==typeof FileError&&b instanceof FileError?!0:!1};b.isDomError=function(b){return"undefined"!==typeof DOMError&&b instanceof DOMError?!0:!1};return b}var objectState=ObjectStateValidators();
function OkOrCancel(b){window[b]=this;var d=this,f,c,a,e;d.initialize=function(){f=d.settings;c=d.scripts;a=d.controls;e=a.okButton.val();f.attachInProgressEventManually||a.okButton.click(function(){var a=$(this).parents("form:first");if(a.length&&"undefined"!==typeof a[0].checkValidity?a[0].checkValidity():1)d.toggleInProgressState(!0,f.toggleCancel),CommonFunctions.safeExecuteFunction(c.okButtonClick)})};d.toggleInProgressState=function(c,b){c?(a.okButton.addClass(d.settings.inProgressCssClass),
a.okButton.attr("title",d.settings.inProgressTitle),a.okButton.attr("value","")):(a.okButton.removeAttr("title"),a.okButton.removeClass(d.settings.inProgressCssClass),a.okButton.attr("value",e));a.okButton.prop("disabled",c);b&&a.cancelButton.toggleHyperlink(!c)};return d}
function Pager(b){window[b]=this;var d=this,f,c;d.totalCount=0;d.pageSize=0;d.pageNumber=0;d.initialize=function(){f=d.settings.cssClasses;c=d.settings.terms};d.goToPage=function(a){d.customScripts.goToPage&&d.customScripts.goToPage({pageNumber:a});d.events&&$(document).trigger(d.events.onPageNumberChanged,[b,a])};d.changePageSize=function(a){d.customScripts.changePageSize&&d.customScripts.changePageSize({pageSize:a});d.events&&$(document).trigger(d.events.onPageSizeChanged,[b,a])};d.hide=function(){d.controls.pagerContainer.empty()};
d.getMinAvailablePageSize=function(){return d.settings.pageSizes&&0<d.settings.pageSizes.length?d.settings.pageSizes[0]:0};d.render=function(){var a=d.controls.pagerContainer,e=$("<ul></ul>").attr("class",f.pager),g=Math.ceil(d.totalCount/d.pageSize),h,k,l;a.empty();a.append(e);if(d.mode&d.settings.pagerMode.nextPrev&&0<g){if(1<d.pageNumber){l=$("<li></li>").attr("class",f.previousNext);var m=d.pageNumber-1;k=$("<a></a>").attr("href","#").attr("title",c.previous).click(function(){d.goToPage(m);return!1}).append($("<span></span>").html("&laquo;").attr("class",
f.prevArrow));l.append(k)}else l=$("<li></li>").attr("class",f.text).append($("<span></span>").html("&laquo;").attr("class",f.prevArrowDisabled));if(d.pageNumber<g){var n=d.pageNumber+1;k=$("<li></li>").attr("class",f.previousNext).append($("<a></a>").attr("href","#").attr("title",c.next).click(function(){d.goToPage(n);return!1}).append($("<span></span>").html("&raquo;").attr("class",f.nextArrow)))}else k=$("<li></li>").attr("class",f.text).append($("<span></span>").html("&raquo;").attr("class",f.nextArrowDisabled));
e.append(l);d.mode&d.settings.pagerMode.nextPrevBeforeNumericPages&&e.append(k)}if(d.mode&d.settings.pagerMode.numericPages)for(d.mode&d.settings.pagerMode.nextPrevBeforeNumericPages&&e.append($("<li>|</li>").attr("class",f.text)),l=1;l<=g;l++)d.pageNumber==l?(h=!1,e.append($("<li></li>").attr("class",f.selectedItem).append($("<span></span>").text(l)))):d.pageNumber==l||1==l||l==g||Math.abs(d.pageNumber-l)<=d.settings.pageLinksNearSelectedCount?e.append($("<li></li>").append($("<a>"+l+"</a>").attr("href",
"#").click({actualPageNumber:l},function(a){d.goToPage(a.data.actualPageNumber);return!1}))):h||(h=!0,e.append($("<li></li>").attr("class",f.text).append("<span>...</span>")));0==(d.mode&d.settings.pagerMode.nextPrevBeforeNumericPages)&&e.append(k);if(d.mode&d.settings.pagerMode.pageSize||d.mode&d.settings.pagerMode.pageSizeDropdown||d.mode&d.settings.pagerMode.pageSizeStaticLabel||d.mode&d.settings.pagerMode.pageInfo){e=$("<span></span>").attr("class",f.pageSizeChooser);a.append(e);if(d.mode&d.settings.pagerMode.pageInfo){l=
d.pageSize*d.pageNumber;l>d.totalCount&&(l=d.totalCount);a=1+d.pageSize*(d.pageNumber-1);if(0==d.pageNumber||0==d.totalCount)a=0;e.append($("<span></span>").text(c.pageInfoLabelTemplate.replace("{0}",a).replace("{1}",l).replace("{2}",d.totalCount)))}a=d.settings.pageSizes;if(d.mode&d.settings.pagerMode.pageSize)for(g=$("<ul></ul>"),e.append(g),g.append($("<li></li>").attr("class",f.pageSizeChooserLabel).text(c.pageSizeChooserLabel)),l=0;l<a.length;l++)h=a[l]==d.pageSize?$("<li></li>").attr("class",
f.selectedItem).text(a[l]):$("<li></li>").append($("<a></a>").attr("href","javascript:"+b+".changePageSize("+a[l]+");").text(a[l])),g.append(h);if(d.mode&d.settings.pagerMode.pageSizeDropdown){l=$("<select></select>");$(l).change(function(){window[b].changePageSize(this.options[this.selectedIndex].value)});e.append(l);for(g=0;g<a.length;g++)h=$("<option></option>").attr("value",a[g]).text(c.pageSizeItemPrefix+" "+a[g]),l.append(h);l.find("option").each(function(){var a=$(this);if(a.val()==d.pageSize)return a.prop("selected",
!0),!1})}d.mode&d.settings.pagerMode.pageSizeStaticLabel&&e.append($("<span/>").text(c.pageSizeItemPrefix+" "+d.pageSize).addClass(f.pageSizeStaticLabel))}};d.createIn=function(a){var c=$("<div></div>").prop("className",f.main);a.append(c);d.controls.pagerContainer=c;d.render()};return d}
(function e$$0(d,f,c){function a(g,k){if(!f[g]){if(!d[g]){var l="function"==typeof require&&require;if(!k&&l)return l(g,!0);if(e)return e(g,!0);l=Error("Cannot find module '"+g+"'");throw l.code="MODULE_NOT_FOUND",l;}l=f[g]={exports:{}};d[g][0].call(l.exports,function(c){var e=d[g][1][c];return a(e?e:c)},l,l.exports,e$$0,d,f,c)}return f[g].exports}for(var e="function"==typeof require&&require,g=0;g<c.length;g++)a(c[g]);return a})({1:[function(b,d,f){function c(c){c.fn.perfectScrollbar=function(c){return this.each(function(){"object"===
typeof c||"undefined"===typeof c?e.get(this)||a.initialize(this,c):"update"===c?a.update(this):"destroy"===c&&a.destroy(this)})}}var a=b("../main"),e=b("../plugin/instances");"function"===typeof define&&define.amd?define(["jquery"],c):(b=window.jQuery?window.jQuery:window.$,"undefined"!==typeof b&&c(b));d.exports=c},{"../main":7,"../plugin/instances":18}],2:[function(b,d,f){f.add=function(c,a){if(c.classList)c.classList.add(a);else{var e=c.className.split(" ");0>e.indexOf(a)&&e.push(a);c.className=
e.join(" ")}};f.remove=function(c,a){if(c.classList)c.classList.remove(a);else{var e=c.className.split(" "),b=e.indexOf(a);0<=b&&e.splice(b,1);c.className=e.join(" ")}};f.list=function(c){return c.classList?Array.prototype.slice.apply(c.classList):c.className.split(" ")}},{}],3:[function(b,d,f){var c={e:function(a,c){var b=document.createElement(a);b.className=c;return b},appendTo:function(a,c){c.appendChild(a);return a},css:function(a,c,b){if("object"===typeof c){for(var d in c)b=c[d],"number"===
typeof b&&(b=b.toString()+"px"),a.style[d]=b;return a}if("undefined"===typeof b)return window.getComputedStyle(a)[c];d=b;"number"===typeof d&&(d=d.toString()+"px");a.style[c]=d;return a},matches:function(a,c){if("undefined"!==typeof a.matches)return a.matches(c);if("undefined"!==typeof a.matchesSelector)return a.matchesSelector(c);if("undefined"!==typeof a.webkitMatchesSelector)return a.webkitMatchesSelector(c);if("undefined"!==typeof a.mozMatchesSelector)return a.mozMatchesSelector(c);if("undefined"!==
typeof a.msMatchesSelector)return a.msMatchesSelector(c)},remove:function(a){"undefined"!==typeof a.remove?a.remove():a.parentNode&&a.parentNode.removeChild(a)},queryChildren:function(a,e){return Array.prototype.filter.call(a.childNodes,function(a){return c.matches(a,e)})}};d.exports=c},{}],4:[function(b,d,f){var c=function(a){this.element=a;this.events={}};c.prototype.bind=function(a,c){"undefined"===typeof this.events[a]&&(this.events[a]=[]);this.events[a].push(c);this.element.addEventListener(a,
c,!1)};c.prototype.unbind=function(a,c){var b="undefined"!==typeof c;this.events[a]=this.events[a].filter(function(d){if(b&&d!==c)return!0;this.element.removeEventListener(a,d,!1);return!1},this)};c.prototype.unbindAll=function(){for(var a in this.events)this.unbind(a)};b=function(){this.eventElements=[]};b.prototype.eventElement=function(a){var e=this.eventElements.filter(function(c){return c.element===a})[0];"undefined"===typeof e&&(e=new c(a),this.eventElements.push(e));return e};b.prototype.bind=
function(a,c,b){this.eventElement(a).bind(c,b)};b.prototype.unbind=function(a,c,b){this.eventElement(a).unbind(c,b)};b.prototype.unbindAll=function(){for(var a=0;a<this.eventElements.length;a++)this.eventElements[a].unbindAll()};b.prototype.once=function(a,c,b){var d=this.eventElement(a),f=function(a){d.unbind(c,f);b(a)};d.bind(c,f)};d.exports=b},{}],5:[function(b,d,f){d.exports=function(){function c(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return c()+
c()+"-"+c()+"-"+c()+"-"+c()+"-"+c()+c()+c()}}()},{}],6:[function(b,d,f){var c=b("./class"),a=b("./dom"),e=f.toInt=function(a){return parseInt(a,10)||0},g=f.clone=function(a){if(null===a)return null;if(a.constructor===Array)return a.map(g);if("object"===typeof a){var c={},e;for(e in a)c[e]=g(a[e]);return c}return a};f.extend=function(a,c){var e=g(a),b;for(b in c)e[b]=g(c[b]);return e};f.isEditable=function(c){return a.matches(c,"input,[contenteditable]")||a.matches(c,"select,[contenteditable]")||a.matches(c,
"textarea,[contenteditable]")||a.matches(c,"button,[contenteditable]")};f.removePsClasses=function(a){for(var e=c.list(a),b=0;b<e.length;b++){var d=e[b];0===d.indexOf("ps-")&&c.remove(a,d)}};f.outerWidth=function(c){return e(a.css(c,"width"))+e(a.css(c,"paddingLeft"))+e(a.css(c,"paddingRight"))+e(a.css(c,"borderLeftWidth"))+e(a.css(c,"borderRightWidth"))};f.startScrolling=function(a,e){c.add(a,"ps-in-scrolling");"undefined"!==typeof e?c.add(a,"ps-"+e):(c.add(a,"ps-x"),c.add(a,"ps-y"))};f.stopScrolling=
function(a,e){c.remove(a,"ps-in-scrolling");"undefined"!==typeof e?c.remove(a,"ps-"+e):(c.remove(a,"ps-x"),c.remove(a,"ps-y"))};f.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(b,d,f){f=b("./plugin/destroy");var c=b("./plugin/initialize");b=b("./plugin/update");d.exports={initialize:c,
update:b,destroy:f}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(b,d,f){d.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(b,d,f){var c=b("../lib/helper"),a=b("../lib/dom"),
e=b("./instances");d.exports=function(b){var d=e.get(b);d&&(d.event.unbindAll(),a.remove(d.scrollbarX),a.remove(d.scrollbarY),a.remove(d.scrollbarXRail),a.remove(d.scrollbarYRail),c.removePsClasses(b),e.remove(b))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(b,d,f){function c(c,e){var b=function(a){a.stopPropagation()};e.settings.stopPropagationOnClick&&e.event.bind(e.scrollbarY,"click",b);e.event.bind(e.scrollbarYRail,"click",function(b){var d=a.toInt(e.scrollbarYHeight/2),
d=e.railYRatio*(b.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top-d)/(e.railYRatio*(e.railYHeight-e.scrollbarYHeight));0>d?d=0:1<d&&(d=1);h(c,"top",(e.contentHeight-e.containerHeight)*d);g(c);b.stopPropagation()});e.settings.stopPropagationOnClick&&e.event.bind(e.scrollbarX,"click",b);e.event.bind(e.scrollbarXRail,"click",function(b){var d=a.toInt(e.scrollbarXWidth/2),d=e.railXRatio*(b.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left-d)/(e.railXRatio*(e.railXWidth-
e.scrollbarXWidth));0>d?d=0:1<d&&(d=1);h(c,"left",(e.contentWidth-e.containerWidth)*d-e.negativeScrollAdjustment);g(c);b.stopPropagation()})}var a=b("../../lib/helper"),e=b("../instances"),g=b("../update-geometry"),h=b("../update-scroll");d.exports=function(a){var b=e.get(a);c(a,b)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(b,d,f){function c(a,c){var b=null,d=null,f=function(g){var f=b+(g.pageX-d)*c.railXRatio,h=Math.max(0,c.scrollbarXRail.getBoundingClientRect().left)+
c.railXRatio*(c.railXWidth-c.scrollbarXWidth);c.scrollbarXLeft=0>f?0:f>h?h:f;f=e.toInt(c.scrollbarXLeft*(c.contentWidth-c.containerWidth)/(c.containerWidth-c.railXRatio*c.scrollbarXWidth))-c.negativeScrollAdjustment;l(a,"left",f);k(a);g.stopPropagation();g.preventDefault()},h=function(){e.stopScrolling(a,"x");c.event.unbind(c.ownerDocument,"mousemove",f)};c.event.bind(c.scrollbarX,"mousedown",function(k){d=k.pageX;b=e.toInt(g.css(c.scrollbarX,"left"))*c.railXRatio;e.startScrolling(a,"x");c.event.bind(c.ownerDocument,
"mousemove",f);c.event.once(c.ownerDocument,"mouseup",h);k.stopPropagation();k.preventDefault()})}function a(a,c){var b=null,d=null,f=function(g){var f=b+(g.pageY-d)*c.railYRatio,h=Math.max(0,c.scrollbarYRail.getBoundingClientRect().top)+c.railYRatio*(c.railYHeight-c.scrollbarYHeight);c.scrollbarYTop=0>f?0:f>h?h:f;f=e.toInt(c.scrollbarYTop*(c.contentHeight-c.containerHeight)/(c.containerHeight-c.railYRatio*c.scrollbarYHeight));l(a,"top",f);k(a);g.stopPropagation();g.preventDefault()},h=function(){e.stopScrolling(a,
"y");c.event.unbind(c.ownerDocument,"mousemove",f)};c.event.bind(c.scrollbarY,"mousedown",function(k){d=k.pageY;b=e.toInt(g.css(c.scrollbarY,"top"))*c.railYRatio;e.startScrolling(a,"y");c.event.bind(c.ownerDocument,"mousemove",f);c.event.once(c.ownerDocument,"mouseup",h);k.stopPropagation();k.preventDefault()})}var e=b("../../lib/helper"),g=b("../../lib/dom"),h=b("../instances"),k=b("../update-geometry"),l=b("../update-scroll");d.exports=function(e){var b=h.get(e);c(e,b);a(e,b)}},{"../../lib/dom":3,
"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(b,d,f){function c(c,b){function d(a,e){var g=c.scrollTop;if(0===a){if(!b.scrollbarYActive)return!1;if(0===g&&0<e||g>=b.contentHeight-b.containerHeight&&0>e)return!b.settings.wheelPropagation}g=c.scrollLeft;if(0===e){if(!b.scrollbarXActive)return!1;if(0===g&&0>a||g>=b.contentWidth-b.containerWidth&&0<a)return!b.settings.wheelPropagation}return!0}var g=!1;b.event.bind(c,"mouseenter",function(){g=!0});
b.event.bind(c,"mouseleave",function(){g=!1});var f=!1;b.event.bind(b.ownerDocument,"keydown",function(r){if(!r.isDefaultPrevented||!r.isDefaultPrevented()){var q=e.matches(b.scrollbarX,":focus")||e.matches(b.scrollbarY,":focus");if(g||q){if(q=document.activeElement?document.activeElement:b.ownerDocument.activeElement){if("IFRAME"===q.tagName)q=q.contentDocument.activeElement;else for(;q.shadowRoot;)q=q.shadowRoot.activeElement;if(a.isEditable(q))return}var w=q=0;switch(r.which){case 37:q=-30;break;
case 38:w=30;break;case 39:q=30;break;case 40:w=-30;break;case 33:w=90;break;case 32:w=r.shiftKey?90:-90;break;case 34:w=-90;break;case 35:w=r.ctrlKey?-b.contentHeight:-b.containerHeight;break;case 36:w=r.ctrlKey?c.scrollTop:b.containerHeight;break;default:return}k(c,"top",c.scrollTop-w);k(c,"left",c.scrollLeft+q);h(c);(f=d(q,w))&&r.preventDefault()}}})}var a=b("../../lib/helper"),e=b("../../lib/dom"),g=b("../instances"),h=b("../update-geometry"),k=b("../update-scroll");d.exports=function(a){var e=
g.get(a);c(a,e)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(b,d,f){function c(a,c){function b(e,d){var g=a.scrollTop;if(0===e){if(!c.scrollbarYActive)return!1;if(0===g&&0<d||g>=c.contentHeight-c.containerHeight&&0>d)return!c.settings.wheelPropagation}g=a.scrollLeft;if(0===d){if(!c.scrollbarXActive)return!1;if(0===g&&0>e||g>=c.contentWidth-c.containerWidth&&0<e)return!c.settings.wheelPropagation}return!0}function d(c,e){var b=
a.querySelector("textarea:hover, .ps-child:hover");if(b){if("TEXTAREA"!==b.tagName&&!window.getComputedStyle(b).overflow.match(/(scroll|auto)/))return!1;var g=b.scrollHeight-b.clientHeight;if(0<g&&!(0===b.scrollTop&&0<e||b.scrollTop===g&&0>e))return!0;g=b.scrollLeft-b.clientWidth;if(0<g&&!(0===b.scrollLeft&&0>c||b.scrollLeft===g&&0<c))return!0}return!1}function f(n){var r,q=n.deltaX;r=-1*n.deltaY;if("undefined"===typeof q||"undefined"===typeof r)q=-1*n.wheelDeltaX/6,r=n.wheelDeltaY/6;n.deltaMode&&
1===n.deltaMode&&(q*=10,r*=10);q!==q&&r!==r&&(q=0,r=n.wheelDelta);r=[q,r];q=r[0];r=r[1];!d(q,r)&&(p=!1,c.settings.useBothWheelAxes?c.scrollbarYActive&&!c.scrollbarXActive?(r?g(a,"top",a.scrollTop-r*c.settings.wheelSpeed):g(a,"top",a.scrollTop+q*c.settings.wheelSpeed),p=!0):c.scrollbarXActive&&!c.scrollbarYActive&&(q?g(a,"left",a.scrollLeft+q*c.settings.wheelSpeed):g(a,"left",a.scrollLeft-r*c.settings.wheelSpeed),p=!0):(g(a,"top",a.scrollTop-r*c.settings.wheelSpeed),g(a,"left",a.scrollLeft+q*c.settings.wheelSpeed)),
e(a),p=p||b(q,r))&&(n.stopPropagation(),n.preventDefault())}var p=!1;"undefined"!==typeof window.onwheel?c.event.bind(a,"wheel",f):"undefined"!==typeof window.onmousewheel&&c.event.bind(a,"mousewheel",f)}var a=b("../instances"),e=b("../update-geometry"),g=b("../update-scroll");d.exports=function(e){var b=a.get(e);c(e,b)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(b,d,f){function c(a,c){c.event.bind(a,"scroll",function(){e(a)})}var a=b("../instances"),e=b("../update-geometry");
d.exports=function(e){var b=a.get(e);c(e,b)}},{"../instances":18,"../update-geometry":19}],15:[function(b,d,f){function c(c,b){function d(){var a=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===a.toString().length?null:a.getRangeAt(0).commonAncestorContainer}function f(){s||(s=setInterval(function(){e.get(c)?(h(c,"top",c.scrollTop+r.top),h(c,"left",c.scrollLeft+r.left),g(c)):clearInterval(s)},50))}function p(){s&&(clearInterval(s),s=null);a.stopScrolling(c)}
var s=null,r={top:0,left:0},q=!1;b.event.bind(b.ownerDocument,"selectionchange",function(){c.contains(d())?q=!0:(q=!1,p())});b.event.bind(window,"mouseup",function(){q&&(q=!1,p())});b.event.bind(window,"mousemove",function(e){if(q){var b=e.pageX;e=e.pageY;var d=c.offsetLeft+c.offsetWidth,g=c.offsetTop,h=c.offsetTop+c.offsetHeight;b<c.offsetLeft+3?(r.left=-5,a.startScrolling(c,"x")):b>d-3?(r.left=5,a.startScrolling(c,"x")):r.left=0;e<g+3?(r.top=5>g+3-e?-5:-20,a.startScrolling(c,"y")):e>h-3?(r.top=
5>e-h+3?5:20,a.startScrolling(c,"y")):r.top=0;0===r.top&&0===r.left?p():f()}})}var a=b("../../lib/helper"),e=b("../instances"),g=b("../update-geometry"),h=b("../update-scroll");d.exports=function(a){var b=e.get(a);c(a,b)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(b,d,f){function c(a,c,b,d){var f,s;function r(c,e){h(a,"top",a.scrollTop-e);h(a,"left",a.scrollLeft-c);g(a)}function q(){G=!0}function w(){G=!1}function v(a){return a.targetTouches&&
1===a.targetTouches.length||a.pointerType&&"mouse"!==a.pointerType&&a.pointerType!==a.MSPOINTER_TYPE_MOUSE?!0:!1}function u(a){if(v(a)){A=!0;var c=a.targetTouches?a.targetTouches[0]:a;D.pageX=c.pageX;D.pageY=c.pageY;z=(new Date).getTime();null!==H&&clearInterval(H);a.stopPropagation()}}function t(e){!A&&c.settings.swipePropagation&&u(e);if(!G&&A&&v(e)){var b=e.targetTouches?e.targetTouches[0]:e,d={pageX:b.pageX,pageY:b.pageY},b=d.pageX-D.pageX,g=d.pageY-D.pageY;r(b,g);D=d;var d=(new Date).getTime(),
h=d-z;0<h&&(f=b/h,s=g/h,z=d);a:{var d=a.scrollTop,h=a.scrollLeft,m=Math.abs(b),n=Math.abs(g);if(n>m){if(0>g&&d===c.contentHeight-c.containerHeight||0<g&&0===d){b=!c.settings.swipePropagation;break a}}else if(m>n&&(0>b&&h===c.contentWidth-c.containerWidth||0<b&&0===h)){b=!c.settings.swipePropagation;break a}b=!0}b&&(e.stopPropagation(),e.preventDefault())}}function C(){!G&&A&&(A=!1,clearInterval(H),H=setInterval(function(){e.get(a)?.01>Math.abs(f)&&.01>Math.abs(s)?clearInterval(H):(r(30*f,30*s),f*=
.8,s*=.8):clearInterval(H)},10))}var D={},z=0;s=f=void 0;var H=null,G=!1,A=!1;b&&(c.event.bind(window,"touchstart",q),c.event.bind(window,"touchend",w),c.event.bind(a,"touchstart",u),c.event.bind(a,"touchmove",t),c.event.bind(a,"touchend",C));d&&(window.PointerEvent?(c.event.bind(window,"pointerdown",q),c.event.bind(window,"pointerup",w),c.event.bind(a,"pointerdown",u),c.event.bind(a,"pointermove",t),c.event.bind(a,"pointerup",C)):window.MSPointerEvent&&(c.event.bind(window,"MSPointerDown",q),c.event.bind(window,
"MSPointerUp",w),c.event.bind(a,"MSPointerDown",u),c.event.bind(a,"MSPointerMove",t),c.event.bind(a,"MSPointerUp",C)))}var a=b("../../lib/helper"),e=b("../instances"),g=b("../update-geometry"),h=b("../update-scroll");d.exports=function(b){if(a.env.supportsTouch||a.env.supportsIePointer){var d=e.get(b);c(b,d,a.env.supportsTouch,a.env.supportsIePointer)}}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(b,d,f){var c=b("../lib/helper"),a=b("../lib/class"),
e=b("./instances"),g=b("./update-geometry"),h={"click-rail":b("./handler/click-rail"),"drag-scrollbar":b("./handler/drag-scrollbar"),keyboard:b("./handler/keyboard"),wheel:b("./handler/mouse-wheel"),touch:b("./handler/touch"),selection:b("./handler/selection")},k=b("./handler/native-scroll");d.exports=function(b,d){d="object"===typeof d?d:{};a.add(b,"ps-container");var f=e.add(b);f.settings=c.extend(f.settings,d);a.add(b,"ps-theme-"+f.settings.theme);f.settings.handlers.forEach(function(a){h[a](b)});
k(b);g(b)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(b,d,f){function c(c){function b(){e.add(c,"ps-focus")}function d(){e.remove(c,"ps-focus")}this.settings=a.clone(g);this.contentHeight=this.contentWidth=this.containerHeight=this.containerWidth=null;this.isRtl="rtl"===
h.css(c,"direction");this.negativeScrollAdjustment=(this.isNegativeScroll=function(){var a=c.scrollLeft,e=null;c.scrollLeft=-1;e=0>c.scrollLeft;c.scrollLeft=a;return e}())?c.scrollWidth-c.clientWidth:0;this.event=new k;this.ownerDocument=c.ownerDocument||document;this.scrollbarXRail=h.appendTo(h.e("div","ps-scrollbar-x-rail"),c);this.scrollbarX=h.appendTo(h.e("div","ps-scrollbar-x"),this.scrollbarXRail);this.scrollbarX.setAttribute("tabindex",0);this.event.bind(this.scrollbarX,"focus",b);this.event.bind(this.scrollbarX,
"blur",d);this.scrollbarXLeft=this.scrollbarXWidth=this.scrollbarXActive=null;this.scrollbarXBottom=a.toInt(h.css(this.scrollbarXRail,"bottom"));this.scrollbarXTop=(this.isScrollbarXUsingBottom=this.scrollbarXBottom===this.scrollbarXBottom)?null:a.toInt(h.css(this.scrollbarXRail,"top"));this.railBorderXWidth=a.toInt(h.css(this.scrollbarXRail,"borderLeftWidth"))+a.toInt(h.css(this.scrollbarXRail,"borderRightWidth"));h.css(this.scrollbarXRail,"display","block");this.railXMarginWidth=a.toInt(h.css(this.scrollbarXRail,
"marginLeft"))+a.toInt(h.css(this.scrollbarXRail,"marginRight"));h.css(this.scrollbarXRail,"display","");this.railXRatio=this.railXWidth=null;this.scrollbarYRail=h.appendTo(h.e("div","ps-scrollbar-y-rail"),c);this.scrollbarY=h.appendTo(h.e("div","ps-scrollbar-y"),this.scrollbarYRail);this.scrollbarY.setAttribute("tabindex",0);this.event.bind(this.scrollbarY,"focus",b);this.event.bind(this.scrollbarY,"blur",d);this.scrollbarYTop=this.scrollbarYHeight=this.scrollbarYActive=null;this.scrollbarYRight=
a.toInt(h.css(this.scrollbarYRail,"right"));this.scrollbarYLeft=(this.isScrollbarYUsingRight=this.scrollbarYRight===this.scrollbarYRight)?null:a.toInt(h.css(this.scrollbarYRail,"left"));this.scrollbarYOuterWidth=this.isRtl?a.outerWidth(this.scrollbarY):null;this.railBorderYWidth=a.toInt(h.css(this.scrollbarYRail,"borderTopWidth"))+a.toInt(h.css(this.scrollbarYRail,"borderBottomWidth"));h.css(this.scrollbarYRail,"display","block");this.railYMarginHeight=a.toInt(h.css(this.scrollbarYRail,"marginTop"))+
a.toInt(h.css(this.scrollbarYRail,"marginBottom"));h.css(this.scrollbarYRail,"display","");this.railYRatio=this.railYHeight=null}var a=b("../lib/helper"),e=b("../lib/class"),g=b("./default-setting"),h=b("../lib/dom"),k=b("../lib/event-manager"),l=b("../lib/guid"),m={};f.add=function(a){var e=l();a.setAttribute("data-ps-id",e);m[e]=new c(a);return m[e]};f.remove=function(a){delete m[a.getAttribute("data-ps-id")];a.removeAttribute("data-ps-id")};f.get=function(a){return m[a.getAttribute("data-ps-id")]}},
{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(b,d,f){function c(a,c){a.settings.minScrollbarLength&&(c=Math.max(c,a.settings.minScrollbarLength));a.settings.maxScrollbarLength&&(c=Math.min(c,a.settings.maxScrollbarLength));return c}function a(a,c){var e={width:c.railXWidth};e.left=c.isRtl?c.negativeScrollAdjustment+a.scrollLeft+c.containerWidth-c.contentWidth:a.scrollLeft;c.isScrollbarXUsingBottom?e.bottom=c.scrollbarXBottom-
a.scrollTop:e.top=c.scrollbarXTop+a.scrollTop;h.css(c.scrollbarXRail,e);e={top:a.scrollTop,height:c.railYHeight};c.isScrollbarYUsingRight?e.right=c.isRtl?c.contentWidth-(c.negativeScrollAdjustment+a.scrollLeft)-c.scrollbarYRight-c.scrollbarYOuterWidth:c.scrollbarYRight-a.scrollLeft:e.left=c.isRtl?c.negativeScrollAdjustment+a.scrollLeft+2*c.containerWidth-c.contentWidth-c.scrollbarYLeft-c.scrollbarYOuterWidth:c.scrollbarYLeft+a.scrollLeft;h.css(c.scrollbarYRail,e);h.css(c.scrollbarX,{left:c.scrollbarXLeft,
width:c.scrollbarXWidth-c.railBorderXWidth});h.css(c.scrollbarY,{top:c.scrollbarYTop,height:c.scrollbarYHeight-c.railBorderYWidth})}var e=b("../lib/helper"),g=b("../lib/class"),h=b("../lib/dom"),k=b("./instances"),l=b("./update-scroll");d.exports=function(b){var d=k.get(b);d.containerWidth=b.clientWidth;d.containerHeight=b.clientHeight;d.contentWidth=b.scrollWidth;d.contentHeight=b.scrollHeight;var f;b.contains(d.scrollbarXRail)||(f=h.queryChildren(b,".ps-scrollbar-x-rail"),0<f.length&&f.forEach(function(a){h.remove(a)}),
h.appendTo(d.scrollbarXRail,b));b.contains(d.scrollbarYRail)||(f=h.queryChildren(b,".ps-scrollbar-y-rail"),0<f.length&&f.forEach(function(a){h.remove(a)}),h.appendTo(d.scrollbarYRail,b));!d.settings.suppressScrollX&&d.containerWidth+d.settings.scrollXMarginOffset<d.contentWidth?(d.scrollbarXActive=!0,d.railXWidth=d.containerWidth-d.railXMarginWidth,d.railXRatio=d.containerWidth/d.railXWidth,d.scrollbarXWidth=c(d,e.toInt(d.railXWidth*d.containerWidth/d.contentWidth)),d.scrollbarXLeft=e.toInt((d.negativeScrollAdjustment+
b.scrollLeft)*(d.railXWidth-d.scrollbarXWidth)/(d.contentWidth-d.containerWidth))):d.scrollbarXActive=!1;!d.settings.suppressScrollY&&d.containerHeight+d.settings.scrollYMarginOffset<d.contentHeight?(d.scrollbarYActive=!0,d.railYHeight=d.containerHeight-d.railYMarginHeight,d.railYRatio=d.containerHeight/d.railYHeight,d.scrollbarYHeight=c(d,e.toInt(d.railYHeight*d.containerHeight/d.contentHeight)),d.scrollbarYTop=e.toInt(b.scrollTop*(d.railYHeight-d.scrollbarYHeight)/(d.contentHeight-d.containerHeight))):
d.scrollbarYActive=!1;d.scrollbarXLeft>=d.railXWidth-d.scrollbarXWidth&&(d.scrollbarXLeft=d.railXWidth-d.scrollbarXWidth);d.scrollbarYTop>=d.railYHeight-d.scrollbarYHeight&&(d.scrollbarYTop=d.railYHeight-d.scrollbarYHeight);a(b,d);d.scrollbarXActive?g.add(b,"ps-active-x"):(g.remove(b,"ps-active-x"),d.scrollbarXWidth=0,d.scrollbarXLeft=0,l(b,"left",0));d.scrollbarYActive?g.add(b,"ps-active-y"):(g.remove(b,"ps-active-y"),d.scrollbarYHeight=0,d.scrollbarYTop=0,l(b,"top",0))}},{"../lib/class":2,"../lib/dom":3,
"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(b,d,f){var c=b("./instances"),a=document.createEvent("Event"),e=document.createEvent("Event"),g=document.createEvent("Event"),h=document.createEvent("Event"),k=document.createEvent("Event"),l=document.createEvent("Event"),m=document.createEvent("Event"),n=document.createEvent("Event"),p=document.createEvent("Event"),s=document.createEvent("Event"),r,q;a.initEvent("ps-scroll-up",!0,!0);e.initEvent("ps-scroll-down",!0,!0);g.initEvent("ps-scroll-left",
!0,!0);h.initEvent("ps-scroll-right",!0,!0);k.initEvent("ps-scroll-y",!0,!0);l.initEvent("ps-scroll-x",!0,!0);m.initEvent("ps-x-reach-start",!0,!0);n.initEvent("ps-x-reach-end",!0,!0);p.initEvent("ps-y-reach-start",!0,!0);s.initEvent("ps-y-reach-end",!0,!0);d.exports=function(b,d,f){if("undefined"===typeof b)throw"You must provide an element to the update-scroll function";if("undefined"===typeof d)throw"You must provide an axis to the update-scroll function";if("undefined"===typeof f)throw"You must provide a value to the update-scroll function";
"top"===d&&0>=f&&(b.scrollTop=f=0,b.dispatchEvent(p));"left"===d&&0>=f&&(b.scrollLeft=f=0,b.dispatchEvent(m));var t=c.get(b);"top"===d&&f>=t.contentHeight-t.containerHeight&&(f=t.contentHeight-t.containerHeight,1>=f-b.scrollTop?f=b.scrollTop:b.scrollTop=f,b.dispatchEvent(s));"left"===d&&f>=t.contentWidth-t.containerWidth&&(f=t.contentWidth-t.containerWidth,1>=f-b.scrollLeft?f=b.scrollLeft:b.scrollLeft=f,b.dispatchEvent(n));r||(r=b.scrollTop);q||(q=b.scrollLeft);"top"===d&&f<r&&b.dispatchEvent(a);
"top"===d&&f>r&&b.dispatchEvent(e);"left"===d&&f<q&&b.dispatchEvent(g);"left"===d&&f>q&&b.dispatchEvent(h);"top"===d&&(b.scrollTop=r=f,b.dispatchEvent(k));"left"===d&&(b.scrollLeft=q=f,b.dispatchEvent(l))}},{"./instances":18}],21:[function(b,d,f){var c=b("../lib/helper"),a=b("../lib/dom"),e=b("./instances"),g=b("./update-geometry"),h=b("./update-scroll");d.exports=function(b){var d=e.get(b);d&&(d.negativeScrollAdjustment=d.isNegativeScroll?b.scrollWidth-b.clientWidth:0,a.css(d.scrollbarXRail,"display",
"block"),a.css(d.scrollbarYRail,"display","block"),d.railXMarginWidth=c.toInt(a.css(d.scrollbarXRail,"marginLeft"))+c.toInt(a.css(d.scrollbarXRail,"marginRight")),d.railYMarginHeight=c.toInt(a.css(d.scrollbarYRail,"marginTop"))+c.toInt(a.css(d.scrollbarYRail,"marginBottom")),a.css(d.scrollbarXRail,"display","none"),a.css(d.scrollbarYRail,"display","none"),g(b),h(b,"top",b.scrollTop),h(b,"left",b.scrollLeft),a.css(d.scrollbarXRail,"display",""),a.css(d.scrollbarYRail,"display",""))}},{"../lib/dom":3,
"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]);
function PersonActivityLogger(b){function d(){for(var c=new IframeIterator(window.top.document);c.hasNext();)if(c.next().hasFocus())return!0;return!1}function f(c){!1!==d()&&(c.forEach(function(a){a.DateTime=(new Date).toISOString()}),$.ajax({type:"POST",url:b,data:JSON.stringify(c),contentType:"application/json; charset=utf-8",dataType:"json"}))}return{initialize:function(c,a){setInterval(function(){f(a)},1E3*c);f(a)}}}
(function(b,d){function f(e,b,d,f){var n={};n[d.format]=d.url;e.jPlayer("setMedia",n);if(d.isVideo){b.css({"line-height":0});var n=a(b),p=c(b);f.jPlayer.flash.used||p.add(n).removeAttr("style");f.jPlayer.status.noFullWindow&&(f=$(e.jPlayer("option","cssSelectorAncestor")),f.find(".jp-screen-control").hide(),f.find(".jp-bar").css({right:"0"}));0<p.length?(d=d.width?d.width:b.width(),f=Math.round(d/16*9),e.jPlayer("option","size",{width:d+"px",height:f+"px"}),b.css({position:"relative"})):g.commonSettings.isIpad?
0===b.find("canvas").length&&(e=$("<canvas>"),e.css({height:"auto"}),b.prepend(e),b.css({position:"relative","padding-top":"6.2%"})):n.css({position:"inherit"})}}function c(a){return a.find("object, embed")}function a(a){return a.find("video")}function e(a,c,e){$("#"+a).find(".jp-play").prop("title",c?e.pause:e.play)}var g=b.PlayerManager={commonSettings:d,addPlayer:function(b,d){$("#"+d.playerContainerId).on("click",function(a){a.stopPropagation()});return b.jPlayer({ready:function(a){f($(this),
b,d,a)},ended:function(a){f($(this),b,d,a)},error:function(a){a.jPlayer.error.type===$.jPlayer.error.URL&&(a='<div class="'+d.cssClassFeedback+'">'+d.terms.contentNotAvailable+"</div>",$(this).closest(".jp-flat-video, .jp-flat-audio").html(a).removeClass())},swfPath:g.commonSettings.swfPath,cssSelectorAncestor:"#"+d.playerContainerId,useStateClassSkin:!0,autoBlur:!1,smoothPlayBar:!0,remainingDuration:!0,keyEnabled:!0,keyBindings:{loop:null,muted:null,volumeUp:null,volumeDown:null},supplied:d.format,
size:d.isVideo?{width:"100%",height:0<c(b).length?"100%":"auto",cssClass:d.cssClassSize?d.cssClassSize:g.commonSettings.defaultCssClassSize}:{},sizeFull:d.isVideo?{cssClass:"jp-flat-video-full"}:{},autohide:d.isVideo?{full:!1,restored:!1}:{},noFullWindow:{msie:/msie/,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/}}).on($.jPlayer.event.play,
function(f){d.isVideo&&!f.jPlayer.flash.used&&c(b).add(a(b)).removeAttr("style");d.isVideo&&$(this).jPlayer("option","autohide",{full:!0,restored:!0});g.commonSettings.isIpad||a(b).css({position:"inherit"});e(d.playerContainerId,!0,d.terms);$(this).jPlayer("pauseOthers")}).on($.jPlayer.event.pause,function(){d.isVideo&&$(this).jPlayer("option","autohide",{full:!1,restored:!1});e(d.playerContainerId,!1,d.terms)}).on($.jPlayer.event.resize,function(e){if(d.isVideo&&!e.jPlayer.flash.used){c(b).add(a(b)).removeAttr("style");
b.css({position:e.jPlayer.options.fullScreen||e.jPlayer.options.fullWindow?"":"relative"});g.commonSettings.isIpad||a(b).css({position:"inherit"});e=e.jPlayer.options.fullScreen||e.jPlayer.options.fullWindow;var f=d.terms;$("#"+d.playerContainerId).find(".jp-full-screen").prop("title",e?f.restoreScreen:f.fullScreen)}}).on($.jPlayer.event.click,function(a){d.isVideo&&(a.jPlayer.status.paused?$(this).jPlayer("play"):$(this).jPlayer("pause"))})}}})(window);
function ProgressBar(b){window[b]=this;var d=this,f=!0,c,a;d.initialize=function(){c=d.settings;a=d.controls;void 0!==c.showLabel&&(f=c.showLabel);a.bar.find(".ui-progressbar-value").remove();a.bar.progressbar({value:c.percent});f&&a.labelContainer.html(c.percent+"%")};d.setPercent=function(c){a.bar.progressbar("option",{value:c});f&&a.labelContainer.html(c+"%")};d.setToolTip=function(c){a.bar.attr("title",c)};return d}
(function(b){b.ProgressCircle=function(b,f,c){function a(a,c,e){var b=document.createElementNS("http://www.w3.org/2000/svg",a);b.attr=function(a,c){b.setAttributeNS(null,a,c);return b};c&&b.attr("class",c);e.appendChild(b);return b}function e(a){c?l.textContent=Math.round(a.done/a.total*100)+"%":(h.textContent=a.done,k.textContent="/"+a.total);if(0===a.done)g.attr("d"," ");else{a=a.done/a.total*Math.PI*2;var e=["M",50,5];a>Math.PI&&(e=e.concat(["A",45,45,0,0,1,50,95]));e=e.concat(["A",45,45,0,0,1,
50+45*Math.cos(a-Math.PI/2),50+45*Math.sin(a-Math.PI/2)]);g.attr("d",e.join(" "))}}var g,h,k,l;c=c||!1;b=a("svg","itsl-progress-circle",b).attr("viewBox","0 0 100 100");a("path","itsl-progress-circle__outer",b).attr("d","M 50 5 A 45 45 0 1 1 49.999 5");g=a("path","itsl-progress-circle__progress",b);c?l=a("text","itsl-progress-circle__percent",b).attr("x",50).attr("y",50):(h=a("text","itsl-progress-circle__done",b).attr("x",25).attr("y",65),k=a("text","itsl-progress-circle__total",b).attr("x",50).attr("y",
65));e(f);return{update:e}}})(CCL||(CCL={}));
function QuotaBarInitializer(b,d,f,c,a){var e={},g={};e.safeBarWidth=b;e.warningBarWidth=d;e.unusedSpaceBarWidth=f;e.literals={};e.functionFinder=FunctionFinder();e.windowWidth={small:480,large:960};e.thresholdTextWidth={small:10,medium:15,large:20};e.positionerSelectors={leftBufferId:"#quota-left-buffer",warningThresholdTextId:"#quota-warning-threshold-text",middleBufferId:"#quota-middle-buffer",dangerThresholdTextId:"#quota-danger-threshold-text",rightBufferId:"#quota-right-buffer",safeBarId:"#quota-safe-bar",
warningBarId:"#quota-warning-bar",dangerBarId:"#quota-danger-bar",unusedSpaceBarId:"#quota-unused-space-bar"};e.literalsSelectors={warningThresholdTextId:"#quota-warning-threshold-text",dangerThresholdTextId:"#quota-danger-threshold-text",currentUsageTextId:"#quota-current-usage-text"};g.updateUsedSpace=function(a,c){e.unusedSpaceBarWidth=100-a;e.initAndRunPositioner();e.literals.currentUsageLiteral=c;e.literals.setLiteralsOnTextElements()};e.initialize=function(){e.initializeLiterals();e.initAndRunPositioner();
e.attachResizeEvent();void 0!==a.OnControlInitialization&&(a.OnControlInitialization=e.functionFinder.getFunctionByName(a.OnControlInitialization),a.OnControlInitialization(g))};e.initializeLiterals=function(){e.literals=QuotaBarLiterals(c,e.literalsSelectors);e.literals.setLiteralsOnTextElements()};e.attachResizeEvent=function(){$(window).resize(function(){e.initAndRunPositioner()})};e.initAndRunPositioner=function(){var a=e.calculateThresholdTextWidth();QuotaBarPositioner(e.positionerSelectors,
a).positionElements(e.safeBarWidth,e.warningBarWidth,e.unusedSpaceBarWidth)};e.calculateThresholdTextWidth=function(){var a=$(window).width();return a>=e.windowWidth.large?e.thresholdTextWidth.small:a<e.windowWidth.large&&a>=e.windowWidth.small?e.thresholdTextWidth.medium:a<e.windowWidth.small?e.thresholdTextWidth.large:e.thresholdTextWidth.small};e.initialize();return g}
function QuotaBarLiterals(b,d){contract.require(!objectState.isNullOrUndefined(b),"argument 'translations' is not defined");contract.require(!objectState.isNullOrUndefined(b.WarningThreshold),"argument 'translations.WarningThreshold' is not defined");contract.require(!objectState.isNullOrUndefined(b.DangerThreshold),"argument 'translations.DangerThreshold' is not defined");contract.require(!objectState.isNullOrUndefined(b.CurrentUsage),"argument 'translations.CurrentUsage' is not defined");contract.require(!objectState.isNullOrUndefined(d),
"argument 'selectors' is not defined");contract.require(!objectState.isNullOrUndefined(d.warningThresholdTextId),"argument 'selectors.warningThresholdTextId' is not defined");contract.require(!objectState.isNullOrUndefined(d.dangerThresholdTextId),"argument 'selectors.dangerThresholdTextId' is not defined");contract.require(!objectState.isNullOrUndefined(d.currentUsageTextId),"argument 'selectors.currentUsageTextId' is not defined");var f={};f.warningThresholdLiteral=b.WarningThreshold;f.dangerThresholdLiteral=
b.DangerThreshold;f.currentUsageLiteral=b.CurrentUsage;f.warningThresholdTextElement=$(d.warningThresholdTextId);f.dangerThresholdTextElement=$(d.dangerThresholdTextId);f.currentUsageTextElement=$(d.currentUsageTextId);f.setLiteralsOnTextElements=function(){f.warningThresholdTextElement.text(f.warningThresholdLiteral);f.dangerThresholdTextElement.text(f.dangerThresholdLiteral);f.currentUsageTextElement.text(f.currentUsageLiteral)};return f}
function QuotaBarPositioner(b,d){contract.require(!objectState.isNullOrUndefined(b),"argument 'selectors' is not defined");contract.require(!objectState.isNullOrUndefined(b.leftBufferId),"argument 'selectors.leftBufferId' is not defined");contract.require(!objectState.isNullOrUndefined(b.warningThresholdTextId),"argument 'selectors.warningThresholdTextId' is not defined");contract.require(!objectState.isNullOrUndefined(b.middleBufferId),"argument 'selectors.middleBufferId' is not defined");contract.require(!objectState.isNullOrUndefined(b.dangerThresholdTextId),
"argument 'selectors.dangerThresholdTextId' is not defined");contract.require(!objectState.isNullOrUndefined(b.rightBufferId),"argument 'selectors.rightBufferId' is not defined");contract.require(!objectState.isNullOrUndefined(b.safeBarId),"argument 'selectors.safeBarId' is not defined");contract.require(!objectState.isNullOrUndefined(b.warningBarId),"argument 'selectors.warningBarId' is not defined");contract.require(!objectState.isNullOrUndefined(b.dangerBarId),"argument 'selectors.dangerBarId' is not defined");
contract.require(!objectState.isNullOrUndefined(b.unusedSpaceBarId),"argument 'selectors.unusedSpaceBarId' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'thresholdTextWidth' is not defined");contract.require(50>=d,"argument 'thresholdTextWidth' can't be greater than 50");var f={},c={};f.leftBufferElement=$(b.leftBufferId);f.warningThresholdTextElement=$(b.warningThresholdTextId);f.middleBufferElement=$(b.middleBufferId);f.dangerThresholdTextElement=$(b.dangerThresholdTextId);
f.rightBufferElement=$(b.rightBufferId);f.safeBarElement=$(b.safeBarId);f.warningBarElement=$(b.warningBarId);f.dangerBarElement=$(b.dangerBarId);f.unusedSpaceBarElement=$(b.unusedSpaceBarId);c.widths={};c.widths.header={leftBuffer:null,warningThreshold:null,middleBuffer:null,dangerThreshold:null,rightBuffer:null};c.widths.bars={safe:null,warning:null,danger:null,unusedSpace:null};c.extraSpaceTakenByThresholdText=d/2;f.positionElements=function(a,e,b){contract.require(!objectState.isNullOrUndefined(a),
"argument 'safeBarWidth' is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'warningBarWidth' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'unusedSpaceBarWidth' is not defined");contract.require(100>=a+e,"sum of 'safeBarWidth' and 'warningBarWidth' can't be greater than 100");contract.require(100>=b,"argument 'unusedSpaceBarWidth' can't be greater than 100");c.calculateWidthsOfHeaderElements(a,e);c.calculateWidthsOfBars(a,e,b);c.setWidthsOfHeaderElements();
c.setWidthsOfBars(b);c.determineWarningElementsVisibility(a,b);c.determineDangerElementsVisibility(a,e,b)};c.calculateWidthsOfHeaderElements=function(a,e){c.calculateLeftBufferWidth(a);c.widths.header.warningThreshold=d;c.calculateMiddleBufferWidth(a,e);c.widths.header.dangerThreshold=d;c.calculateRightBufferWidth()};c.calculateLeftBufferWidth=function(a){c.widths.header.leftBuffer=c.ensureBufferWidthIsInBounds(a-c.extraSpaceTakenByThresholdText)};c.calculateMiddleBufferWidth=function(a,e){var b=
a+e+c.extraSpaceTakenByThresholdText;100<b&&(b=100);c.widths.header.middleBuffer=c.ensureBufferWidthIsInBounds(b-(a+c.extraSpaceTakenByThresholdText)-d)};c.ensureBufferWidthIsInBounds=function(a){a=c.ensureBufferWidthIsNotBiggerThanMaxWidth(a);return c.ensureBufferWidthIsNotNegative(a)};c.ensureBufferWidthIsNotBiggerThanMaxWidth=function(a){var c=100-2*d;return c<a?c:a};c.ensureBufferWidthIsNotNegative=function(a){return 0>a?0:a};c.calculateRightBufferWidth=function(){c.widths.header.rightBuffer=
c.ensureBufferWidthIsNotNegative(100-c.widths.header.leftBuffer-c.widths.header.warningThreshold-c.widths.header.middleBuffer-c.widths.header.dangerThreshold)};c.calculateWidthsOfBars=function(a,e,b){c.widths.bars.safe=a;c.widths.bars.warning=e;c.widths.bars.danger=100-a-e;c.widths.bars.unusedSpace=b};c.setWidthsOfHeaderElements=function(){f.leftBufferElement.width(c.convertToPercentageString(c.widths.header.leftBuffer));f.warningThresholdTextElement.width(c.convertToPercentageString(c.widths.header.warningThreshold));
f.middleBufferElement.width(c.convertToPercentageString(c.widths.header.middleBuffer));f.dangerThresholdTextElement.width(c.convertToPercentageString(c.widths.header.dangerThreshold));f.rightBufferElement.width(c.convertToPercentageString(c.widths.header.rightBuffer))};c.setWidthsOfBars=function(a){f.safeBarElement.width(c.convertToPercentageString(c.widths.bars.safe));f.warningBarElement.width(c.convertToPercentageString(c.widths.bars.warning));f.dangerBarElement.width(c.convertToPercentageString(c.widths.bars.danger));
f.unusedSpaceBarElement.width(c.convertToPercentageString(a))};c.convertToPercentageString=function(a){return a+"%"};c.determineWarningElementsVisibility=function(a,c){100-c<=a?(f.warningThresholdTextElement.hide(),f.warningBarElement.hide()):(f.warningThresholdTextElement.show(),f.warningBarElement.show())};c.determineDangerElementsVisibility=function(a,c,b){100-b<=a+c?(f.dangerThresholdTextElement.hide(),f.dangerBarElement.hide()):(f.dangerThresholdTextElement.show(),f.dangerBarElement.show())};
return f}
function CclResponsiveGrid(b){function d(){r=!1;h.trigger(CclResponsiveGrid.LoadingCompletedEventName)}function f(a){return a.replace(/^\s+|\s+$/,"")}function c(a){var c=m.scrollTop(),e=m.scrollLeft(),b=h.offset();b.frameTop=0;b.frameLeft=0;if(n){var d=$('iframe[name="mainmenu"]',m[0].document).offset();b.frameTop=d.top;b.frameLeft=d.left}d=b.top+b.frameTop+h.outerHeight()-k.outerHeight();c>=b.top+b.frameTop&&c<d?(k.hasClass(p)||(l.height(k.height()).show(),k.css("width",k.width()).addClass(p)),a?
k.css("top",c-b.frameTop):k.css("left",b.left-e)):k.hasClass(p)&&(l.hide(),k.removeClass(p).css("top","").css("left","").css("width",""))}function a(){k.hasClass(p)&&(k.removeClass(p).css("width",""),l.height(k.height()),k.css("width",k.width()).addClass(p))}function e(a,c){c&&(a+="[value='"+c+"']");return h.find(a)}window[b]=this;var g=this;g.name=b;g.gridClientID=null;g.pageSize=null;g.pageNumber=null;g.pagerInstanceName=null;g.cclGridConstants=null;g.pageNumberHiddenClientID=null;g.pageSizeHiddenClientID=
null;g.preferenceCategoryName=null;g.selectingHiddenClientID=null;g.sortingHiddenClientID=null;g.filteringHiddenClientID=null;g.selectColumn=null;g.selectedRow=null;g.ajaxSettings=null;g.totalCount=0;g.freezeToolbar=!1;g.scrollToControlOnPagination=!1;g.filteringPreference=null;g.sortingProperty=null;g.isIos=!1;g.isReorderModeAvailable=!1;g.orderProperty=null;g.reorderTogglerClientId=null;g.isReorderModeOn=!1;g.isReorderModeHandlerAttached=!1;var h,k,l,m=$(window),n=!1,p,s=0,r=!1;g.initialize=function(){h=
$("#"+g.gridClientID);k=h.find("."+g.cclGridConstants.cssClasses.toolbar);g.rowCheckBoxesSelector="."+g.cclGridConstants.cssClasses.gridRow+" ."+g.cclGridConstants.cssClasses.selectColumn+" input[type=checkbox]";g.headerRowCheckBoxesSelector="."+g.cclGridConstants.cssClasses.headerGridRow+" ."+g.cclGridConstants.cssClasses.selectColumn+" input[type=checkbox]";g.pageSizeHidden=document.getElementById(g.pageSizeHiddenClientID);g.pageNumberHidden=document.getElementById(g.pageNumberHiddenClientID);g.sortingHidden=
document.getElementById(g.sortingHiddenClientID);g.filteringHidden=document.getElementById(g.filteringHiddenClientID);g.selectingHidden=document.getElementById(g.selectingHiddenClientID);g.restoreState();g.attachEvents();g.ajaxSettings.useAjaxMode&&g.ajaxSettings.dataSourceWebMethodUrl&&!g.ajaxSettings.delayedInitialization&&g.refresh();if(g.freezeToolbar&&k.length){p=g.cclGridConstants.cssClasses.toolbarFreeze;l=$('<div style="display:none;"/>').attr("class",k.attr("class")).insertAfter(k);if(g.isIos&&
(n=window.top!=window)){m=$(window.top);var e=function(){c(!0)};m.on("scroll",e);$(window).on("unload",function(){m.off("scroll",e)})}$(window).scroll(function(){c()}).resize(function(){a()})}};g.useAjaxMode=function(){return g.ajaxSettings&&g.ajaxSettings.useAjaxMode};g.goToPage=function(a){g.clearSelection();g.pageNumber=a;g.refresh();g.scrollAfterPagination()};g.sort=function(a){g.sortingProperty!=a&&(g.sortingProperty=a,g.goToPage(1))};g.filter=function(a){g.filteringPreference!=a&&(g.filteringPreference=
a,g.goToPage(1))};g.changePageSize=function(a){g.pageSize=a;g.goToPage(1)};g.restoreState=function(){null!=g.pageSizeHidden&&(g.pageSize=parseInt(g.pageSizeHidden.value,10));null!=g.pageNumberHidden&&(g.pageNumber=parseInt(g.pageNumberHidden.value,10));null!=g.sortingHidden&&(g.sortingProperty=g.sortingHidden.value);null!=g.filteringHidden&&(g.filteringPreference=g.filteringHidden.value)};g.saveState=function(){null!=g.pageSizeHidden&&(g.pageSizeHidden.value=g.pageSize);null!=g.pageNumberHidden&&
(g.pageNumberHidden.value=g.pageNumber);null!=g.sortingHidden&&(g.sortingHidden.value=g.sortingProperty);null!=g.filteringHidden&&(g.filteringHidden.value=g.filteringPreference)};g._addRemoveSelectedValue=function(a,c){c?CCL.CommonFunctions.addIdToHidden($(g.selectingHidden),a):CCL.CommonFunctions.removeIdFromHidden($(g.selectingHidden),a)};g.toggleSelect=function(a){g._applySelectedRowClass(a.parentNode.parentNode,a.checked);g.updateHeaderRowCheckBoxSelection()};g.updateHeaderRowCheckBoxSelection=
function(){var a=!0;e(g.rowCheckBoxesSelector).each(function(c,e){a&&!e.checked&&(a=!1);g._addRemoveSelectedValue(e.value,e.checked)});e(g.headerRowCheckBoxesSelector).prop("checked",a)};g.getSelectedValues=function(){return null!=g.selectingHidden&&0<g.selectingHidden.value.length?g.selectingHidden.value.slice(0,g.selectingHidden.value.length-1).split(","):[]};g.getAllValues=function(){var a=[];g.getRows().each(function(){a.push($(this).data(g.cclGridConstants.dataAttributes.id))});return a};g.replaceKeyValue=
function(a,c){e(g.rowCheckBoxesSelector,a).each(function(e,b){b.value=c;b.checked&&(g._addRemoveSelectedValue(a,!1),g._addRemoveSelectedValue(c,!0))});var b=g.cclGridConstants.cssClasses.gridRow+"-";h.find("."+b+a+":first").removeClass(b+a).addClass(b+c)};g.isHeaderExist=function(){return h.find("."+g.cclGridConstants.cssClasses.headerGridRow).length};g.getRows=function(){return h.find("."+g.cclGridConstants.cssClasses.gridRow)};g.getSelectedRows=function(){return h.find("."+g.cclGridConstants.cssClasses.selectedRow)};
g.getRowById=function(a){return h.find("."+g.cclGridConstants.cssClasses.gridRow+"[data-"+g.cclGridConstants.dataAttributes.id+"="+a+"]:first")};g.deleteRowById=function(a,c){g.getRowById(a).remove();c&&eval(c)};g.getRowsContainer=function(){return h.find("."+g.cclGridConstants.cssClasses.gridRowsContainer+":first")};g.getRows=function(){return g.getRowsContainer().find("."+g.cclGridConstants.cssClasses.gridRow)};g.getRowsCount=function(){return g.getRows().length};g.toggleRowStatus=function(a,c){return g.getRowById(a).toggleClass(g.cclGridConstants.cssClasses.inactiveRow,
!c)};g.getGridElement=function(){return h};g.getToolbarElement=function(){return k};g.disableToolbarItem=function(a){a=g.getToolbarElement().find(a);0<a.length&&$(a.parent("li")).addClass("disabled")};g.getFeedback=function(){return window[g.feedbackInstanceName]};g.clearSelection=function(){null!=g.selectingHidden&&(g.selectingHidden.value="")};g._applySelectedRowClass=function(a,c){if(c){var e=g.cclGridConstants.cssClasses.selectedRow;a.className=f(a.className.replace(e,""));a.className=f(a.className+
" "+e)}else a.className=f(a.className.replace(g.cclGridConstants.cssClasses.selectedRow,""))};g.toggleSelectAll=function(a){e(g.rowCheckBoxesSelector).each(function(c,e){e.checked=a;g._addRemoveSelectedValue(e.value,a);g._applySelectedRowClass(e.parentNode.parentNode,a)});e(g.headerRowCheckBoxesSelector).prop("checked",a)};g.toggleDisableAll=function(a){e(g.rowCheckBoxesSelector).each(function(c,e){e.disabled=a});e(g.headerRowCheckBoxesSelector).prop("disabled",a)};g.addGridMessage=function(a){g.removeGridMessage();
g.removeEmptyText();var c=g.getRowsContainer();a=$("<div></div>").addClass(g.cclGridConstants.cssClasses.gridText).html(a);c.before(a)};g.addGridLoadingMessage=function(){g.addGridMessage(g.cclGridConstants.terms.ajaxLoadingText)};g.removeGridMessage=function(){h.find("."+g.cclGridConstants.cssClasses.gridText+":first").remove()};g.refresh=function(){g.saveState();g.updateFreezeState();if(g.ajaxSettings.useAjaxMode){g.addGridLoadingMessage();if(g.ajaxSettings.useChunkLoading&&0<g.ajaxSettings.chunkSize){s=
0;var a=g.getRowsContainer();a.empty();a.css("display","none");return g.refreshChunks()}r=!0;return $.ajax({type:"POST",url:g.ajaxSettings.dataSourceWebMethodUrl,data:"pageNumber="+g.pageNumber+"&pageSize="+g.pageSize+"&sort="+g.sortingProperty+"&filter="+g.filteringPreference+g._getParamsStr(),dataType:"json",success:function(a){g.removeGridMessage();g.render(a);g.updateFreezeState();d()},error:function(){g.addGridMessage(g.cclGridConstants.terms.ajaxErrorText);d()}})}g.postbackFunction()};g.refreshChunks=
function(){0===s&&(r=!0);return $.when($.ajax({type:"POST",url:g.ajaxSettings.dataSourceWebMethodUrl,data:"pageNumber="+g.pageNumber+"&pageSize="+g.pageSize+"&sort="+g.sortingProperty+"&filter="+g.filteringPreference+"&chunkNumber="+s+"&chunkSize="+g.ajaxSettings.chunkSize+g._getParamsStr(),dataType:"json"})).done(function(a){"undefined"!==typeof a.noChunks?(a.noChunks?(g.removeGridMessage(),g.render(a,!0),g.updateFreezeState(),d()):(s++,g.render(a,!0),g.refreshChunks()),g.getRowsContainer().css("display",
"")):(g.removeGridMessage(),g.addGridMessage(g.cclGridConstants.terms.ajaxErrorText))}).fail(function(){g.removeGridMessage();g.addGridMessage(g.cclGridConstants.terms.ajaxErrorText);d()})};g.isLoadingInProgress=function(){return r};g.scrollAfterPagination=function(){!0===g.scrollToControlOnPagination?$(window).scrollTop($("#"+g.gridClientID).offset().top):$(window).scrollTop(0)};g._getParamsStr=function(){var a="";$.each(g.ajaxSettings.dataSourceWebMethodParams,function(c,e){a+="&"+c+"="+escape(e)});
return a};g.getRowPrimaryKeyValue=function(a){return g.getCurrentRow(a).find("."+g.cclGridConstants.cssClasses.rowDetailsColumn+" ."+g.cclGridConstants.cssClasses.primaryKey).val()};g.getRowPrimaryKeyValueByIndex=function(a){return g.getRowsContainer().find("."+g.cclGridConstants.cssClasses.gridRow+":eq("+a+") ").find("."+g.cclGridConstants.cssClasses.rowDetailsColumn+" ."+g.cclGridConstants.cssClasses.primaryKey).val()};g.getRowPrimaryKeyValueByRow=function(a){return a.find("."+g.cclGridConstants.cssClasses.rowDetailsColumn+
" ."+g.cclGridConstants.cssClasses.primaryKey).val()};g.getRowIndex=function(a){return g.getCurrentRow(a).find("."+g.cclGridConstants.cssClasses.rowDetailsColumn+" ."+g.cclGridConstants.cssClasses.rowIndex).val()};g.getCurrentRow=function(a){return $(a).parents("."+g.cclGridConstants.cssClasses.gridRow)};g.setMode=function(a){g.getRowsContainer().attr("class",g.cclGridConstants.cssClasses.gridRowsContainer+" "+a)};g.render=function(a,c){c="undefined"!==typeof c?c:!1;g.totalCount=c?g.totalCount+a.virtualCount:
a.virtualCount;g.reInitializePager(g.pageNumber,g.pageSize,g.totalCount);var e=g.getRowsContainer();c?e.append(a.gridData):e.html(a.gridData);g.isReorderModeAvailable&&$("#"+g.reorderTogglerClientId).parent("li").removeClass(g.cclGridConstants.cssClasses.selectedItem);0<g.orderProperty.length&&(g.isReorderModeAvailable=0<=g.sortingProperty.indexOf(g.orderProperty)&&1<g.totalCount,g.attachReorderModeHandler(),0<g.reorderTogglerClientId.length&&g.toggleReorderTogglerElement($("#"+g.reorderTogglerClientId),
g.isReorderModeAvailable),"Auto"==g.reorderModeAjaxSettings.reorderMode&&g.toggleReorderMode());h.trigger("datachanged")};g.addNewRow=function(){return $.ajax({type:"POST",url:g.addNewSettings.webMethodUrl,data:g.addNewSettings.params||"{}",dataType:"json",success:function(a){g.render(a,!0);g.updateFreezeState();0<g.getRowsCount()&&g.getEmptyTextContainer().hide()},error:function(){g.addGridMessage(g.cclGridConstants.terms.ajaxErrorText)}})};g.attachEvents=function(){h.on("click",g.headerRowCheckBoxesSelector,
function(){g.toggleSelectAll($(this).prop("checked"))});h.on("click",g.rowCheckBoxesSelector,function(){g.toggleSelect(this)});h.on("change","."+g.cclGridConstants.cssClasses.sorting+" > select",function(){var a=$(this).val();g.sort(a)});if(g.freezeToolbar&&g.isIos)h.on("hybrideditoriteminlinemodechanged",function(a,e){e.isEditMode||c(!0)});g.isReorderModeAvailable&&g.attachReorderModeHandler()};g.reInitializePager=function(a,c,e){var b=window[g.pagerInstanceName];b&&(b.pageNumber=a,b.pageSize=c,
b.totalCount=e,b.render(),g.hidePagerWhenTotalCountLessMinPageSize?b.controls.pagerContainer.toggle(0<e&&g.totalCount>b.getMinAvailablePageSize()):b.controls.pagerContainer.toggle(0<e))};g.updateFreezeState=function(e){g.freezeToolbar&&k.length&&(c(e),a())};g.removeEmptyText=function(){g.getEmptyTextContainer().remove()};g.getEmptyTextContainer=function(){return g.getRowsContainer().children("."+g.cclGridConstants.cssClasses.emptyGridText)};g.getRowOrderPropertyValue=function(a){return a.find("."+
g.cclGridConstants.cssClasses.rowDetailsColumn+" ."+g.cclGridConstants.cssClasses.orderValue).val()};g.setRowOrderPropertyValue=function(a,c){return a.find("."+g.cclGridConstants.cssClasses.rowDetailsColumn+" ."+g.cclGridConstants.cssClasses.orderValue).val(c)};g.setRowIndexPropertyValue=function(a,c){return a.find("."+g.cclGridConstants.cssClasses.rowDetailsColumn+" ."+g.cclGridConstants.cssClasses.rowIndex).val(c)};g.attachReorderModeHandler=function(){!g.isReorderModeHandlerAttached&&g.isReorderModeAvailable&&
($("."+g.cclGridConstants.cssClasses.reorderModeSelector).sortable({axis:"y",scroll:!0,scrollSensitivity:50,scrollSpeed:10,handle:"."+g.cclGridConstants.cssClasses.reorderModeDragHandler,cursor:"move",items:"> ."+g.cclGridConstants.cssClasses.reorderMode}),h.find("."+g.cclGridConstants.cssClasses.reorderModeSelector).on("sortstart",function(a,c){c.item.hasClass(g.cclGridConstants.cssClasses.reorderMode)&&c.item.data(g.cclGridConstants.dataAttributes.startPosition,c.item.index())}),h.find("."+g.cclGridConstants.cssClasses.reorderModeSelector).on("sortstop",
function(a,c){if(c.item.hasClass(g.cclGridConstants.cssClasses.reorderMode)){var e=g.isHeaderExist()?1:0,b=c.item.data(g.cclGridConstants.dataAttributes.startPosition)-e,e=c.item.index()-e,d=g.getRowsCount();if(b!=e){var f=g.getRowPrimaryKeyValueByRow(c.item),h;h=e>b?e==d-1?g.getRowPrimaryKeyValueByIndex(e-1):g.getRowPrimaryKeyValueByIndex(e+1):g.getRowPrimaryKeyValueByIndex(e+1);g.useAjaxMode()?g.callReorderModeUpdateMethod(f,h,b,e,e==d-1):"undefined"!==typeof g.reorderModeAjaxSettings.reorderModeCallbackClientFunction&&
g.reorderModeAjaxSettings.reorderModeCallbackClientFunction(null)}}}),g.isReorderModeHandlerAttached=!0)};g.toggleReorderMode=function(){g.isReorderModeOn="Auto"==g.reorderModeAjaxSettings.reorderMode?!0:!g.isReorderModeOn;$("#"+g.reorderTogglerClientId).parent("li").toggleClass(g.cclGridConstants.cssClasses.selectedItem,g.isReorderModeOn);g.getRowsContainer().find("."+g.cclGridConstants.cssClasses.gridRow).toggleClass(g.cclGridConstants.cssClasses.reorderMode,g.isReorderModeOn);h.find("."+g.cclGridConstants.cssClasses.reorderModeColumnSelector+
" div > img").toggleClass(g.cclGridConstants.cssClasses.hidden,!g.isReorderModeOn)};g._getReorderParamsStr=function(){var a="";$.each(g.reorderModeAjaxSettings.reorderModeWebMethodParams,function(c,e){a+="&"+c+"="+escape(e)});return a};g.callReorderModeUpdateMethod=function(a,c,e,b,d){return $.ajax({type:"POST",url:g.reorderModeAjaxSettings.reorderModeWebMethodUrl,data:"sourceId="+a+"&targetId="+c+"&oldIndex="+e+"&newIndex="+b+"&insertAfterTargetItem="+d+g._getReorderParamsStr(),dataType:"json",success:function(a){"undefined"!==
typeof g.reorderModeAjaxSettings.reorderModeCallbackClientFunction&&g.reorderModeAjaxSettings.reorderModeCallbackClientFunction(a)},error:function(a,c,e){$("."+g.cclGridConstants.cssClasses.reorderModeSelector).sortable("cancel")}})};g.toggleReorderTogglerElement=function(a,c){var e=a.attr("id"),b=a.html(),d=a.attr("class");c?(a.parent("li").removeClass("disabled"),a.replaceWith('<a href="#" id="'+e+'" class="'+d+'" onclick="javascript:'+this.name+'.toggleReorderMode();">'+b+"</a>")):(a.parent("li").addClass("disabled"),
a.replaceWith('<span id="'+e+'" class="'+d+'">'+b+"</span>"))}}CclResponsiveGrid.LoadingCompletedEventName="ResponsiveGrid:LoadingCompleted";
function RubricAssessmentCriteriaList(b){function d(a,c,e){Aa[a]&&delete Aa[a];document.getElementById(e).remove();c=c||0===Object.keys(Aa).length;$(document).trigger(y.deleteLearningObjectiveEvent,{learningObjectiveId:a,reloadPage:c})}function f(c,e,b){ya(c,e,b,!1);a();c.toggleSelectAll(!1)}function c(a,c,e,b,d){if(0<c){sa[a]={LearningObjectiveId:a,Status:c,MasteryOption:e,Comment:b};da.overriddenCriteriaAssessmentsHidden.val(JSON.stringify(sa));var g=d.find(String.format("> span.{0}",B.statusBox)),
f=d.siblings("."+B.overrideMasterText).find("span."+B.masteredBoxHolder),h=f.find("> span"),f=f.find("> img"),k=d.siblings("."+B.overrideComment);d=k.find("."+B.overrideCommentText);k=k.find("."+B.overrideCommentLabel);n(g,c);k.parent().toggle(""!=b);d.text(b);y.useMastery&&(Ja[a].BreaksRecurrence&&e!==Sa.mastered?m(h,f,!1):(b=Ja[a].AffectsByLevel,g=Ja[a].AffectsByResettingMastery,a=Ja[a].MasteredWithoutOverride,e===Sa.mastered?m(h,f,!0):g&&(b?(c=p(c),m(h,f,c>=y.masteryStartsAt)):m(h,f,a))))}}function a(){y.searchSharedCriteriaBox&&
window[y.searchSharedCriteriaBox]&&window[y.searchSharedCriteriaBox].refresh()}function e(a,c){C(a);z(a,c);H(a);G(a)}function g(a){a=$(a.data);var c=a.parent(),e=a.hasClass(B.selectedBox);c.children("li."+B.selectedBox).removeClass(B.selectedBox);c.find("li span."+B.star).removeClass(B.starOn).addClass(B.starOff);var b=Q(a.find("input[type=hidden]").val()),d=b.key,b=b.value;e?(I[d]=y.rubricAssessmentCustomNull,c.find("li."+B.criteriaDescriptionRow).hide()):(a.addClass(B.selectedBox),a.find("span."+
B.star).removeClass(B.starOff).addClass(B.starOn),I[d]=b,c.find("li."+B.criteriaDescriptionRow).show());da.updatedCriteriaAssessmentsHidden.val(JSON.stringify(I));da.updatedCriteriaAssessmentsHidden.trigger("change");y.showOverride&&(a=c.parents("."+B.criteriaContainer),c=a.find("div."+B.overrideStatusBoxContainer).data("learningobjectiveid").toString(),l(a.find("ul."+B.row),c));a=k();h(a)}function h(a){function c(a){if(-1!==a){a=y.assessmentUpdaterSettings.maxScore*a/100;var e=Math.pow(10,2);a=(Math.round(a*
e)/e).toString();"."!==y.assessmentUpdaterSettings.numberDecimalSeparator&&0<a.indexOf(".")&&(a=a.replace(".",y.assessmentUpdaterSettings.numberDecimalSeparator));return a}return""}function e(a){var c=$.grep(X,function(c,e){return a>=c});return y.assessmentUpdaterSettings.assessmentPercentage[c[c.length-1]]}y.assessmentUpdaterSettings.connectAssessmentCriteriaToScale&&(y.assessmentUpdaterSettings.useScore&&V.callbacks.scoreSetValueFunction?V.callbacks.scoreSetValueFunction(c(a)):y.assessmentUpdaterSettings.useAssessment&&
V.callbacks.assessmentSetValueFunction&&V.callbacks.assessmentSetValueFunction(e(a)),ba.show())}function k(){var a=0,c=0,e=[];$("."+B.selectedBox).each(function(){var a=Q($(this).find("input[type=hidden]").val());e[a.key]=a.value});$.each(y.achievementLevelsPoints,function(b,d){if(e[b]&&0!=e[b]){var g=e[b],f=0;$.each(d,function(a,c){c>f&&(f=c)});a+=y.achievementLevelsPoints[b][g];c+=f}});return 0<c?a/c*100:-1}function l(a,c){if(y.showOverride){var e=0,b=a.length;a.each(function(){var a=$(this),c=
a.find("li."+B.column),d=a.find("li."+B.selectedBox),a=c.index(d)+1;y.achivementLevelOrderDirection==oa.lowestToHighest&&(a=$(c.get().reverse()).index(d)+1);1<=a?(c=c.length,e+=100*(c-a+1)/c):b--});var d=e/b,g=a.parents("."+B.criteriaContainer),f=g.find(String.format("div.{0} > span.{1}",B.overrideStatusBoxContainer,B.statusBox)),h=g.find("span."+B.masteredBoxHolder),g=h.find("> span"),h=h.find("> img");1<=d?$.each(ta,function(a,e){var b=a+1<ta.length?ta[a+1]:null,b=b?b.startsAt:y.maximumPercentageValue;
d>=e.startsAt&&d<b&&(za[c]=W[e.type].Title,da.assessmentStatusesByCriteriaHidden.val(JSON.stringify(za)),null==sa[c]&&n(f,e.type))}):(za[c]=W[Ta.notAssessed].Title,da.assessmentStatusesByCriteriaHidden.val(JSON.stringify(za)),null==sa[c]&&n(f,Ta.notAssessed));if(y.useMastery&&(null==sa[c]||!sa[c].MasteryOption))if(Ja[c].BreaksRecurrence)m(g,h,!1);else{var k=Ja[c],l=k.AffectsByLevel;k.AffectsByResettingMastery&&l&&(k=sa[c],k=null==k?d:p(k.Status),m(g,h,k>=y.masteryStartsAt))}}}function m(a,c,e){a.text(y.useMastery&&
e?Ma.mastered:Ma.notMastered);a.removeClass(B.noPrint);a.addClass(y.useMastery&&e?"":B.noPrint);c.prop("src",y.useMastery&&e?Na.masteredIcon:Na.notMasteredIcon);c.removeClass(B.noPrint);c.addClass(y.useMastery&&e?"":B.noPrint)}function n(a,c){$.each(W,function(c,e){a.removeClass(e.CssClass)});a.addClass(W[c].CssClass);a.text(W[c].Title)}function p(a){var c=0;$.each(ta,function(e,b){b.type==a&&(c=b.startsAt)});return c}function s(a,c,e,b){e=a.getRowById(e);var d=e.find("."+B.row+":first").find("a."+
B.criteriaWeight).text(),g=$(c);g.find("a."+B.undoLink).click(function(){q(a,g,d?d:0,b)});g.find("a."+B.undoCloseImage).click(function(){g.remove()});e.replaceWith(g)}function r(a,c,b){var d=window[Aa[a]].getRowsContainer(),g=0===v(d);c=$(c).appendTo(d);g&&0<v(d)&&(d.children("."+B.gridEmptyText).remove(),$(document).trigger(y.emptyStateChangedEvent,{isAnyEmpty:w(),loUpdate:{id:a,isEmpty:!1}}));e(c,b);ja()}function q(a,c,b,d){var g=c.children("input:first").val();$.ajax({type:"post",url:y.webMethods.restoreCriteria,
dataType:"html",data:{courseId:y.courseId,criteriaJson:g,showCriteriaWeights:y.showCriteriaWeights,criteriaWeightToRestore:b}}).done(function(g){g=$(g);var f=g.find("."+B.row+":first");c.replaceWith(g);g.find("a."+B.criteriaWeight).text(b);f=f.next().val();Da(d,f,b);e(g,!1);g.scrollMinimal();g=a.getRowsContainer();1===v(g)&&(g.children("."+B.gridEmptyText).remove(),$(document).trigger(y.emptyStateChangedEvent,{isAnyEmpty:w(),loUpdate:{id:d,isEmpty:!1}}))}).fail(ea)}function w(){return 0<$("div."+
B.criteriaContainer).filter(function(){return 0===v(this)}).length}function v(a){return $("."+B.row,a).length}function u(a){a=a.find("."+B.criteriaLevelDescription);$.each(a,function(a,c){var e={submitOnEnter:!0,multiline:!0,autoResize:!0,editFieldCssClass:B.inlineEditor,maxLength:1024};new ClientInlineEditor($(c),void 0,$(c).parent().find("input").last(),e,t,xa,void 0)})}function t(a,c){var e=a.source.parents("ul").next().val();na[e]=a.actualText;da.updatedCriteriaDecriptionsHidden.val(JSON.stringify(na));
a.isUpdateSuccess=!0;c(a)}function C(a){a=a.find("."+B.criteriaItem);$.each(a,function(a,c){if(D(c))return!0;var e={submitOnEnter:!0,multiline:!0,autoResize:!0,editFieldCssClass:B.inlineEditor,maxLength:y.criteriaItemDescriptionMaxLength};new ClientInlineEditor($(c),void 0,$(c).parent().find("input").last(),e,ra,xa,void 0)})}function D(a){return 0<$(a).closest(CommonFunctions.formatString(".{0},.{1}",B.officialCriteria,B.criteriaOfObsoleteLearningObjective)).length}function z(a,c){var e=a.find("."+
B.criteriaTitle);$.each(e,function(a,e){if(D(e))return!0;var b=new ClientInlineEditor(e,void 0,void 0,{submitOnEnter:!0,editFieldDisplayInline:!0,editFieldAutoWidth:!1,editFieldCssClass:B.criteriaTitle,maxLength:64},A,void 0,{isTitle:!0});c&&b.switchToEditMode().select()})}function H(a){a=a.find("."+B.criteriaDescription);$.each(a,function(a,c){if(D(c))return!0;var e={submitOnEnter:!0,multiline:!0,autoResize:!0,editFieldCssClass:B.inlineEditor,maxLength:y.criteriaItemDescriptionMaxLength};new ClientInlineEditor(c,
void 0,$(c).parent().find("input").last(),e,A,xa,{isTitle:!1})})}function G(a){a=a.find("."+B.criteriaWeight);$.each(a,function(a,c){new ClientInlineEditor(c,void 0,void 0,{submitOnEnter:!0,editFieldDisplayInline:!0,editFieldAutoWidth:!1,editFieldCssClass:B.criteriaWeight,maxLength:3},M,O,void 0)})}function A(a,c){var e=a.source.parents("ul").next().val();a.actualText=$.trim(a.actualText);a.userData.isTitle&&!a.actualText.length?(a.isUpdateSuccess=!1,c(a)):$.ajax({type:"post",url:y.webMethods.updateCriteria,
dataType:"json",data:{courseId:y.courseId,criteriaId:e,text:a.actualText,isTitle:a.userData.isTitle}}).done(function(c){a.isUpdateSuccess=!0;var b=a.source.parents("ul");pa(b);c&&(Z(c.learningObjectiveId,b,c.criteriaId),window[Aa[c.learningObjectiveId]].replaceKeyValue(e,c.criteriaId))}).fail(function(c,e,b){a.isUpdateSuccess=!1;ea(c,e,b)}).always(function(){c(a)})}function M(a,c){var e=parseInt(a.source.parents("."+B.criteriaContainer).siblings("input[type=hidden]").val()),b=a.source.parents("ul").next().val(),
d=a.source.parents("ul"),g=!$.trim(a.actualText).length||!/^[1-9][0-9]?$|^100$/.test(a.actualText);d.find("."+B.criteriaWeightValidationMessage).toggle(g);g?(a.stopOnEdit=!0,a.isUpdateSuccess=!1):(ka&&(g=parseInt(a.actualText),P(g,d),Da(e,b,g)),a.isUpdateSuccess=!0);c(a)}function O(a){a.isEditMode||a.source.parents("ul").find("."+B.criteriaWeightValidationMessage).hide()}function P(a,c){var e=c.find("."+B.criteriaItemWeight),b=y.achivementLevelOrderDirection==oa.lowestToHighest?1:e.length;$.each(e,
function(c,e){e.innerHTML=b*a;y.achivementLevelOrderDirection===oa.lowestToHighest?b++:b--})}function ra(a,c){var e=a.source.parents("li"),e=Q(e.find("input[type=hidden]").val()),b=e.key,e=e.value;a.actualText=$.trim(a.actualText);$.ajax({type:"post",url:y.webMethods.updateCriteriaItem,dataType:"json",data:{courseId:y.courseId,criteriaId:b,levelId:e,text:a.actualText}}).done(function(c){a.isUpdateSuccess=!0;var e=a.source.parents("ul");pa(e);c&&(Z(c.learningObjectiveId,e,c.criteriaId),window[Aa[c.learningObjectiveId]].replaceKeyValue(b,
c.criteriaId))}).fail(function(c,e,b){a.isUpdateSuccess=!1;ea(c,e,b)}).always(function(){c(a)})}function Z(a,c,e){E(a,c,e);c.next().val(e);a=c.find("li."+B.column+" > input[type=hidden]");$.each(a,function(a,c){var b=$(c),d=Q(b.val());d.key=e.toString();b.val(JSON.stringify(d))})}function E(a,c,e){if(ka){var b=c.next().val();c=parseInt(c.find("."+B.criteriaWeight+":first").text());ka&&ka[a]&&delete ka[a][b];Da(a,e,c)}}function Da(a,c,e){ka&&0<e&&(ka[a]||(ka[a]={}),ka[a][c]=e,ja())}function ja(){$(document).trigger(y.criteriaWeightsChangedEvent,
{data:ka,loCriteriaWeights:wa()})}function wa(){var a={};$("."+B.criteriaContainer).each(function(){var c=$(this),e=parseInt(c.siblings("input[type=hidden]").val());a[e]=0;$("a."+B.criteriaWeight,c).each(function(){var c=$(this),b=c.siblings("input."+B.criteriaWeight);a[e]+=parseInt(b.length?b.val():c.text())})});return a}function xa(a){var c=a.source;a.isEditMode||c.parent().find("input").last().val()?c.removeClass(B.criteriaItemEmptyState):(c.addClass(B.criteriaItemEmptyState),c.text(y.watermark))}
function Ia(a,c){$.each(c,function(c,e){var b=a.getRowById(e).find("."+B.row+":first");b.find("img."+B.shareLoadingIcon).show();b.find("img."+B.shareIcon).hide()})}function ya(a,c,e,b){$.each(e,function(e,d){var g=a.getRowById(d).find("."+B.row+":first"),f=g.find("img."+B.shareIcon);void 0!=c[d]&&(f.attr("title",b?c[d]:""),f.toggle(b),g.find("img."+B.reshareIcon).hide());g.find("img."+B.shareLoadingIcon).hide()})}function pa(a){a.find("img."+B.reshareIcon).toggle(a.find("img."+B.shareIcon).is(":visible"))}
function ea(a,c){a.status>=CCL.CommonConstants.httpStatusCodes.badRequest&&alert(!0===c&&a.statusText.length?a.statusText:V.settings.terms.errorOccured)}function Q(a){return JSON.parse(a||"{}")}function Wa(){var a=$.find("img."+B.shareLoadingIcon+":visible");$.each(a,function(a,c){c.hide()})}window[b]=this;var V=this,y,da,B,W,I,na,ta,sa,za,oa,ka={},Aa,Xa,Ta,Sa,Ma,Na,Ja,X=[],ba;V.initialize=function(){y=V.settings;da=V.controls;B=y.cssClasses;W=y.assessmentStatuses;I=Q(da.updatedCriteriaAssessmentsHidden.val());
na=Q(da.updatedCriteriaDecriptionsHidden.val());oa=y.achievementLevelOrder;Aa=Q(y.grids);Xa=Q(y.officialCriteriaGrids);y.criteriaWeightsData&&(ka=JSON.parse(y.criteriaWeightsData));if(y.assessMode){u(da.container);var a=da.container.find("ul li."+B.column);$.each(a,function(a,c){$(c).click(c,g)});Ta=y.assessmentStatusType;Sa=y.learningObjectiveOverrideMasteryOption;Ma=y.terms;Na=y.imgUrls;ta=Q(da.activeAssessmentStatusesHidden.val());sa=Q(da.overriddenCriteriaAssessmentsHidden.val());za=Q(da.assessmentStatusesByCriteriaHidden.val());
Ja=Q(da.possibleMasteredLearningObjectivesHidden.val());y.assessmentUpdaterSettings.connectAssessmentCriteriaToScale&&(y.assessmentUpdaterSettings.assessmentPercentage&&($.each(y.assessmentUpdaterSettings.assessmentPercentage,function(a,c){X.push(a)}),X.sort(function(a,c){return a-c})),ba=$("#"+y.assessmentUpdaterSettings.assessmentChangedWarningLabelClientId))}if(y.manageMode&&(e(da.container,!1),y.isIosDevice))$("input."+B.addButton).on("touchend",function(){$(this).click()});if(y.showOverride)da.changeReportStatusControl.on(V.settings.events.saveOverridingsEvent,
function(a){V.saveOverridings()});$(function(){$(document).on(V.settings.events.addSharedCriteriaJsEvent,function(a,c){$.each(c.Criteria,function(a,c){r(a,c,!1)});c.IsThereMismatchBetweenLevelsCount&&y.levelsMismatchWarningClientId&&$("#"+y.levelsMismatchWarningClientId).show()})})};V.deleteLearningObjective=function(a,c,e,b){y.webMethods.deleteLearningObjective?$.ajax({type:"post",url:y.webMethods.deleteLearningObjective,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({courseId:y.courseId,
topicId:e,learningObjectiveId:a})}).done(function(){d(a,c,b)}).fail(function(a){ea(a,!0)}):d(a,c,b)};V.addCriteria=function(a){$.ajax({type:"post",url:y.webMethods.addCriteria,dataType:"html",data:{courseId:y.courseId,learningObjectiveId:a,showCriteriaWeights:y.showCriteriaWeights}}).done(function(c){r(a,c,!0)}).fail(ea)};V.saveStatusOverridings=function(a,e,b){y.showOverride&&(b=b.toString(),a=0<a.length?parseInt(a):0,c(b,a,0,"",e.controls.container.parents("div."+B.overrideStatusBoxContainer).first()))};
V.saveOverridings=function(){if(y.showOverride){var a=da.learningObjectiveIdHidden.val(),e=$(String.format(".{0} option:selected",B.overrideStatusDropdown)).val(),e=0<e.length?parseInt(e):0,b=parseInt(y.useMastery?$(String.format(".{0} option:selected",B.overrideMasteryDropdown)).val():0),d=$(String.format(".{0}",B.overrideStatusComment)).val().substring(0,y.maximumCommentLength);c(a,e,b,d,$("a[rel="+a+"]").parent())}};V.shareSelectedCriterias=function(c,e){var b=window[Aa[c]],d=b.getSelectedValues();
1>d.length?alert(y.terms.noSelectionForSharing):(Ia(b,d),$.ajax({type:"post",url:y.webMethods.shareCriteria,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({courseId:y.courseId,hierarchyId:e,criteriaIdsJson:JSON.stringify(d)})}).done(function(c){ya(b,c.d,d,!0);a();b.toggleSelectAll(!1)}).fail(function(a){ea(a,!0)}).always(function(){Wa()}))};V.stopSharingSelectedCriterias=function(a){var c=window[Aa[a]],e=c.getSelectedValues();1>e.length?alert(y.terms.noSelectionForSharing):
(Ia(c,e),$.ajax({type:"post",url:y.webMethods.stopSharingCriteria,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({courseId:y.courseId,criteriaIdsJson:JSON.stringify(e)})}).done(function(a){f(c,a.d,e)}).fail(ea).always(function(){Wa()}))};V.removeSelectedCriterias=function(a){var c=window[Aa[a]],e=c.getSelectedValues();e.length?($.ajax({type:"post",url:y.webMethods.deleteCriteria,dataType:"html",data:{courseId:y.courseId,criteriaIdsJson:JSON.stringify(e)}}).done(function(b){b=
Q(b);f(c,b.criteriaToUnshare,e);$.each(b.criterias,function(e,b){s(c,b,e,a);ka&&ka[a]&&delete ka[a][e]});ja();b=c.getRowsContainer();if(0===v(b)){var d=c.getGridElement().find("."+B.criteriaEmptyGridText);0<d.length&&b.append(d.html());b=!1;(d=window[Xa[a]])?(d=d.getRowsContainer(),0===v(d)&&(b=!0)):b=!0;b&&$(document).trigger(y.emptyStateChangedEvent,{isAnyEmpty:!0,loUpdate:{id:a,isEmpty:!0}})}}).fail(ea),c.toggleSelectAll(!1)):alert(y.terms.noSelectionForRemoval)}}
function SafeConsoleLogger(){var b={},d={noop:function(){}};d.safeLogger={assert:d.noop,count:d.noop,dir:d.noop,error:d.noop,group:d.noop,groupEnd:d.noop,info:d.noop,log:d.noop,time:d.noop,timeEnd:d.noop,trace:d.noop,warn:d.noop};d.initialize=function(){objectState.isNullOrUndefined(window.console)||(d.safeLogger=window.console)};b.assert=function(b){d.safeLogger.assert(b)};b.count=function(b){d.safeLogger.count(b)};b.dir=function(b){d.safeLogger.dir(b)};b.error=function(b){d.safeLogger.error(b)};
b.group=function(b){d.safeLogger.group(b)};b.groupEnd=function(b){d.safeLogger.groupEnd(b)};b.info=function(b){d.safeLogger.info(b)};b.log=function(b){d.safeLogger.log(b)};b.time=function(b){d.safeLogger.time(b)};b.timeEnd=function(b){d.safeLogger.timeEnd(b)};b.trace=function(b){d.safeLogger.trace(b)};b.warn=function(b){d.safeLogger.warn(b)};d.initialize();return b}var safeConsoleLogger=SafeConsoleLogger();
$.widget("itslccl.searchTextBox",$.itslccl.extendedTextBox,{options:{searchInput:void 0,container:void 0,searchLink:void 0,fakeInput:void 0,searchKeyStorage:void 0,textSearchEvent:void 0,usePostBack:!1,clearByEsc:!1,postBackReference:void 0},_create:function(){this._super();var b=this,d=this.options.searchInput,f=this.options.searchLink,c=this.options.fakeInput;d.keydown(function(a){return a.which!==CommonConstants.keyCodes.enter||a.shiftKey?!0:(b._doSearch(),!1)});d.keyup(function(a){b.options.clearByEsc&&
a.which===CommonConstants.keyCodes.escape&&b._clearSearchBox();return!0});f&&f.click(function(a){a.preventDefault();b._doSearch()});c&&c.focus(function(){d.focus()})},_clearSearchBox:function(){this.options.searchInput.val("");this.options.searchInput.focus()},_doSearch:function(){this.options.searchInput.focus();var b=this._isWatermarkMode?"":$.trim(this.options.searchInput.val());this.options.usePostBack?(this._saveSearchTextToHiddenField(),eval(this.options.postBackReference)):this.options.container.trigger(this.options.textSearchEvent,
b)},_saveSearchTextToHiddenField:function(b){!this.options.usePostBack&&b?this.options.searchKeyStorage.val($.trim(b)):this.options.searchKeyStorage.val($.trim(this.options.searchInput.val()))}});
function SearchTextBox(b,d){window[b]=this;var f=this;d&&SearchTextBox.instances.push(this);f.initialize=function(){f.controls={searchInput:$("#"+f.controlIds.searchInputId),container:$("#"+f.controlIds.containerId),searchLink:$("#"+f.controlIds.searchLinkId),fakeInput:$("#"+f.controlIds.fakeInputId),searchKeyStorage:$("#"+f.controlIds.searchKeyStorageId)};var c=f.controls.searchInput;d&&c.hasClass(f.settings.focusRequiredCssClass)&&c.focus();c.searchTextBox({searchInput:f.controls.searchInput,container:f.controls.container,
searchLink:f.controls.searchLink,fakeInput:f.controls.fakeInput,searchKeyStorage:f.controls.searchKeyStorage,watermarkText:f.settings.watermarkText,watermarkCssClass:f.settings.watermarkCssClass,textSearchEvent:f.settings.textSearchEvent,clearByEsc:f.settings.clearByEsc,usePostBack:f.settings.usePostBack,postBackReference:f.settings.postBackReference,focusRequiredCssClass:f.settings.focusRequiredCssClass})};f.clearSearch=function(){f.controls.searchInput.val("")};f.autocompleteopen=function(c,a){var e=
f.controls.searchInput.autocomplete("widget");if(1<$(".ui-menu-item",e).length){var b=f.controls.searchInput.autocomplete("option","select");f.controls.searchInput.autocomplete({select:function(a,c){if(-1!==c.item.id)b(a,c);else{var d=[];$(".ui-menu-item:not(.ccl-searchtextbox-select-all)",e).each(function(){d.push($(this).data("ui-autocomplete-item"))});f.controls.searchInput.trigger("autocompleteselectall",{items:d});f.controls.searchInput.autocomplete("close")}}});var d=$("<li></li>").data("ui-autocomplete-item",
{id:-1,value:""}).attr("class","ui-menu-item ccl-searchtextbox-select-all").appendTo(e);$("<a></a>").attr("href","#").text(f.settings.selectAllText).appendTo(d)}}}SearchTextBox.instances=[];SearchTextBox.initialize=function(){for(var b=0,d=this.instances.length;b<d;b+=1)this.instances[b].initialize()};
function StarsSelector(b){window[b]=this;var d=this,f,c;d.initialize=function(){function a(a){a=isNaN(a)?0:a;d.settings.activeIconCss&&d.settings.inactiveIconCss?(c.filter(":lt("+a+")").find("i").removeClass().addClass(d.settings.activeIconCss),c.filter(":eq("+a+"), :gt("+a+")").find("i").removeClass().addClass(d.settings.inactiveIconCss)):d.settings.activeIconUrl&&d.settings.inactiveIconUrl&&(c.filter(":lt("+a+")").find("img").prop("src",d.settings.activeIconUrl),c.filter(":eq("+a+"), :gt("+a+")").find("img").prop("src",
d.settings.inactiveIconUrl))}f=d.controls.ratingHidden;c=d.controls.starsContainer.find("a");c.click(function(e){e=c.index(this)+1;f.val()!=e&&(f.val(e).change(),a(e));return!1}).mouseover(function(e){a(c.index(this)+1)}).mouseout(function(c){a(parseInt(f.val()))});$(document).on(d.settings.showRateEventName,function(c,b){f.val()!=b&&(f.val(b),a(b))});$(document).on(d.settings.rateSuccessEventName,function(a,b){for(var d=c.filter(":lt("+b+")"),f=0;2>f;f++)d.fadeTo("normal",.5).fadeTo("normal",1)})};
return d}function MakeTableHighlightable(b){function d(b){var c="mouseenter"==b.type;$("tr > :nth-child("+($(this).index()+1)+")",$(b.delegateTarget)).toggleClass("ccl-table-highlight",c);$(this).parent().toggleClass("ccl-table-highlight",c)}b.delegate("td","mouseenter mouseleave",d);b.delegate("tbody th","mouseenter mouseleave",d)}
(function(b,d){var f=b.TextBoxAutoCompleteManager={commonSettings:d,makeTextBoxAutocomplete:function(c,a,e,g){function h(a,c){var e=a.split(" "),b=c.split(" "),d=-1,g=!0,f=!1;$.each(e,function(a,c){f=!1;$.each(b,function(a,e){if(f=0==e.indexOf(c))return d=a,!1});-1<d&&(b.splice(d,1),d=-1);g=f&&g});return g}function k(){q.autocomplete("widget").is(":visible")?q.autocomplete("close"):($(".ui-autocomplete-input ui-autocomplete-loading").autocomplete("close"),q.autocomplete("option","minLength",0),q.autocomplete("search",
""));q.focus()}function l(){var a=q.get(0);c.isIos?a.setSelectionRange(0,a.value.length):a.select()}function m(a,e){var b=!1;$.each(a,function(a,d){var g=c.caseSensitiveSearch?e:e.toLowerCase();if((c.caseSensitiveSearch?d.value:d.value.toLowerCase())===g)return b=!0,!1});return b}function n(){c.allowCustomText||(m(c.values,q.val())?c.defaultText=q.val():(c.defaultText?q.val(c.defaultText):q.val(""),p(!1)));a&&a();c.isAutoPostBack&&q.closest("form").submit()}function p(a){c.useHighlight&&w.toggleClass(f.commonSettings.cssClasses.highlight,
a)}function s(a){var e=c.caseSensitiveSearch?$(this).val():$(this).val().toUpperCase(),b=q.data("ui-autocomplete");b.widget().children(".ui-menu-item").each(function(){var a=$(this).data("ui-autocomplete-item");if((c.caseSensitiveSearch?a.value:a.value.toUpperCase())===e)return b.selectedItem=a,!1});b.selectedItem&&b._trigger("select",a,{item:b.selectedItem})}var r=!0,q=$("#"+c.textboxId),w=q.parent(),v=b[c.textboxId]=q;c.isDropDown&&(c.minLength=0);q.autocomplete({autoFocus:!0,source:function(a,
e){e($.map(c.values,function(e){var b=c.caseSensitiveSearch?a.term:a.term.toLowerCase(),g=c.caseSensitiveSearch?e.value:e.value.toLowerCase();switch(c.filterType){case f.commonSettings.filterType.wordStartsWith:return h(b,g)?e:d;default:return 0<=g.indexOf(b)?e:d}}))},delay:c.delay,minLength:c.minLength,change:function(a,e){c.defaultText!==q.val()&&n()},close:function(a,c){e&&e();r=!0},select:function(a,c){v.selectValue(c.item);n()},open:function(a,e){c.zIndex&&q.autocomplete("widget").css("z-index",
c.zIndex);r=!1},create:function(a,e){q.data("autocompleteItemId",c.defaultValue)},messages:{noResults:c.terms.noResults,results:function(a){return 1==a?c.terms.oneResult:c.terms.resultsTemplate.replace("{0}",a.toString())}}});q.keyup(function(){p(!!q.val()&&!m(c.values,q.val()))}).keydown(function(a){a.which===CommonConstants.keyCodes.enter&&(r||a.preventDefault(),c.defaultText!==q.val()&&(a.preventDefault(),n()),q.autocomplete("close"))}).click(l).on("autocompletesearchcomplete",function(a,c){});
v.selectValue=function(a){p(!1);q.val(a.value);q.data("autocompleteItemId",a.id);$(".ui-autocomplete-input ui-autocomplete-loading").autocomplete("close");g&&g(a)};v.getValue=function(){return q.data("autocompleteItemId")};c.isDropDown&&($("#"+c.buttonId).click(k).click(l),q.click(k),q.blur(s))}}})(window);
(function(b){var d={},f=!1,c=b.TextEditorManager={commonSettings:void 0,addStartupFunction:function(a,c){d[a]=c},textEditorSetup:function(){function a(a,c,b){if(a=a.getButton(c))b=$("#"+a.domId).removeClass().addClass(b).removeAttr("title"),a=b.find("span").removeClass(),b.append(document.createTextNode(a.text())),a.text("")}f||(f=!0,b.CKEDITOR&&(CKEDITOR.on("dialogDefinition",function(e){e=e.data.definition;var b=e.onLoad;e.onLoad=function(){a(this,"ok",c.commonSettings.cssClasses.ok);a(this,"cancel",
c.commonSettings.cssClasses.cancel);if(b)return b.apply(this,arguments)}}),CKEDITOR.on("instanceReady",function(a){(a=d[a.editor.name])&&a()}),CommonFunctions.attachPostMessageEventListener($(b),CommonWindowMessages.MessageNames.textEditorInteraction,function(a,c){switch(a.interactionType){case CommonWindowMessages.TextEditorInteractionType.CloseDialog:CloseDialog();return;case CommonWindowMessages.TextEditorInteractionType.InsertHtml:InsertHtml(a.htmlContent,a.editorInstanceId,a.isEmbeddedImage);
break;case CommonWindowMessages.TextEditorInteractionType.InsertLinkToFile:var b=CKEDITOR,d=b.dialog.getCurrent()._.editor,f={href:a.linkUrl,target:"_blank"},m=d.getSelection(),n=m.getRanges(!0);if(1==n.length&&n[0].collapsed){var p=new b.dom.text(a.linkName,d.document);n[0].insertNode(p);n[0].selectNodeContents(p);m.selectRanges(n)}f=new b.style({element:"a",attributes:f});f.type=b.STYLE_INLINE;f.apply(d.document);break;case CommonWindowMessages.TextEditorInteractionType.UpdateItslPluginsList:d=
a.editorInstanceId&&""!=a.editorInstanceId?CKEDITOR.instances[a.editorInstanceId]:CKEDITOR.dialog.getCurrent()._.editor;d.plugins.dynamicinsertmenu?d.plugins.dynamicinsertmenu.update(d,a.pluginId):d.plugins.itslpluginlist&&d.plugins.itslpluginlist.update(d,a.pluginId);break;case CommonWindowMessages.TextEditorInteractionType.InsertImageToSlideshow:b=null,b=a.editorInstanceId&&0<a.editorInstanceId.length?CKEDITOR.instances[a.editorInstanceId]:CKEDITOR.dialog.getCurrent()._.editor,null!=b&&(a.closeDialogAfterPerformingOperation&&
(CloseDialog(),a.closeDialogAfterPerformingOperation=!1),CKEDITOR.dialog.getCurrent().insertImageToSlideshow(a.extendedData))}a.closeDialogAfterPerformingOperation&&CloseDialog()})))},getIframeFromDialog:function(a){return $("#"+a._.contents.iframe.undefined.domId)},refreshCustomOpenPopupButtonPosition:function(a,c){""===a.val()?c.html(unescape(c.attr("data-temp-html"))).removeClass("ccl-ck-link-right-bottom").addClass("ccl-ck-link-center"):c.html("").removeClass("ccl-ck-link-center").addClass("ccl-ck-link-right-bottom")}};
c.getOnContentLoadFunctionForIframeDialog=function(a){return function(){var e=CKEDITOR.dialog.getCurrent();if(e){e=c.getIframeFromDialog(e).attr({webkitallowfullscreen:"true",mozallowfullscreen:"true",allowfullscreen:"true"});a&&a(e);try{e.contents().keydown(function(a){a.which===CommonConstants.keyCodes.escape&&b.CloseDialog()}),e[0].focus()}catch(d){}}}};c.setupIframePlugin=function(a,b){var d=$.extend({addToolBarButton:!0,dialogName:void 0,dialogSrcReplacementFunction:void 0,beforeInitComplete:void 0,
dialogContentLoad:void 0,emptyIframeOnClose:!1,useBuiltInCloseButton:!1},b);return{requires:["iframedialog"],init:function(b){var e=b.config[a],f=e.DialogWidth,m=e.DialogHeight,n=d.dialogName,p=0,s=c.getOnContentLoadFunctionForIframeDialog(function(a){e.IsEditorDialogTransparent&&e.IframeCssClass&&a.addClass(e.IframeCssClass);d.dialogContentLoad&&d.dialogContentLoad(b,e,a)});b.addCommand(e.Id,{startDisabled:e.Disabled,exec:function(a){var c={onShow:function(){var a=CKEDITOR.dialog.getCurrent(),c=
a.parts;!1===d.useBuiltInCloseButton&&c.close.hide();c.footer.hide();c.title.hide();e.IsEditorDialogTransparent&&a._.element.addClass("hiddenDialog");CKEDITOR.env.ie&&a._.element.addClass("noScrollbars");TextEditorManager.getIframeFromDialog(a).parents("div.cke_dialog_page_contents").css({width:e.DialogWidth})},onHide:function(){d.emptyIframeOnClose&&TextEditorManager.getIframeFromDialog(CKEDITOR.dialog.getCurrent()).attr("src","")}},r=n+p++,u=d.dialogSrcReplacementFunction?d.dialogSrcReplacementFunction(b,
e,a):e.DialogSrc;u&&(CKEDITOR.dialog.addIframe(r,"",u,f,m,s,c),a.openDialog(r))}});if(d.addToolBarButton){var r={label:e.Text,command:e.Id};"string"===typeof d.icon&&(r.icon=d.icon);b.ui.addButton(e.Id,r)}d.beforeInitComplete&&d.beforeInitComplete(b,e)}}};c.setupContentForIframe=function(){$(b.document).keydown(function(a){a.which===CommonConstants.keyCodes.escape&&CommonFunctions.makePostMessageCall(b.parent,new CommonWindowMessages.TextEditorCloseDialogMessage)});b.focus()};c.setupPopupSettings=
function(a){var b=$("#"+a.popupSettings.linkToEditId),d=$("#"+a.popupSettings.hiddenInputId);""===d.val()&&b.html(a.popupSettings.text);b.attr("data-temp-html",escape(a.popupSettings.text));c.refreshCustomOpenPopupButtonPosition(d,b)};c.getExtensionIdFromIdString=function(a){var c=a.indexOf(":",0);if(0>c)return null;var b=a.indexOf(":",c+1);return 0>b?null:a.substring(c+1,b)}})(window);
function InsertHtml(b,d,f){var c=null,c=d&&0<d.length?CKEDITOR.instances[d]:CKEDITOR.dialog.getCurrent()._.editor;null!=c&&(f&&(f=c.getSelection().getSelectedElement())&&(f=f.getAscendant("img",!0),f=f.getAttribute("src"),b=b.replace("src='data:'","src='"+f+"'")),CKEDITOR.env.webkit?c.config.mask&&IsEditorEmpty(c.name,c.config.mask)?(SetHtml(b,d),checkForMaskAndDelete(c.name)):c.insertHtml(b):(CKEDITOR.env.gecko&&c.config.mask&&checkForMaskAndDelete(c.name),c.insertHtml(b)))}
function CloseDialog(){window.CKEDITOR.env.webkit&&closeRecorderIfExists();CKEDITOR.dialog.getCurrent().hide()}function SetHtml(b,d,f){d&&0<d.length?CKEDITOR.instances[d].setData(b,function(){f||SetTextEditorFocus(d)}):CKEDITOR.dialog.getCurrent()._.editor.setData(b,function(){f||CKEDITOR.dialog.getCurrent()._.editor.focus()})}
function GetTextEditorContent(b){return window.CKEDITOR?b&&0<b.length?CKEDITOR.instances[b].getData():CKEDITOR.dialog.getCurrent()?CKEDITOR.dialog.getCurrent()._.editor.getData():null:(b=$("div[data-ck-id="+b+"] > input[type=hidden]"),1===b.length?b.val():null)}function SetTextEditorFocus(b){CKEDITOR.instances[b].focus()}function RemoveEditorInstance(b){if(CKEDITOR.instances[b]){var d=CKEDITOR.instances[b].editable();d.hasFocus&&(d.blur(),d.hasFocus=!1);CKEDITOR.instances[b].destroy()}}
function IsEditorEmpty(b,d){var f=CKEDITOR.instances[b];if(f){var f=f.getData().replace("\n",""),c=CommonFunctions.htmlEncode(f),a=CommonFunctions.htmlEncode(d);return""==f||d&&c===a||"<p>&nbsp;</p>"==f||"<div>&nbsp;</div>"==f||"<p>&#160;</p>"==f||"<p></p>"==f||"<p>"+a+"</p>"==f?!0:!1}}function IsEditorContainsMask(b,d){var f=CKEDITOR.instances[b];if(f)return-1<f.getData().indexOf(d)}
function isTextEditorDirty(b){var d;if(b&&0<b.length&&(d=CKEDITOR.instances[b]))return d.checkDirty();if(CKEDITOR.dialog.getCurrent())return CKEDITOR.dialog.getCurrent()._.editor.checkDirty()}
function isAnyTextEditorDirty(){if(window.CKEDITOR)for(var b in CKEDITOR.instances)if("ready"===CKEDITOR.instances[b].status){var d=CKEDITOR.instances[b]._.previousValue.replace(/<p><br><\/p>/i,""),f=CKEDITOR.instances[b].getSnapshot().replace(/<p><br><\/p>/i,"");if(!0===CKEDITOR.instances[b].checkDirty()&&d!=f)return!0}return!1}
function resetEditorIsDirty(b){if(b&&0<b.length)return CKEDITOR.instances[b].resetDirty();if(CKEDITOR.dialog.getCurrent())return CKEDITOR.dialog.getCurrent()._.editor.resetDirty()}function resetAllTextEditorsIsDirty(){if(window.CKEDITOR)for(var b in CKEDITOR.instances)CKEDITOR.instances[b].resetDirty();return!1}function setTextEditorTextColor(b,d){var f=CKEDITOR.instances[b],c=new CKEDITOR.style(CKEDITOR.config.colorButton_foreStyle,{color:d});f.applyStyle(c)}
function setTextEditorTextSize(b,d){var f=CKEDITOR.instances[b],c=new CKEDITOR.style(CKEDITOR.config.fontSize_style,{size:d});f.applyStyle(c)}
var focusListener=function(b){var d=b.editor.config.mask,f=!1;IsEditorEmpty(b.editor.name,d)?(toggleWatermark(!1,b.editor),f=!0):IsEditorContainsMask(b.editor.name,d)&&(d=b.editor.getData().replace(d,""),b.editor.document.getBody().setHtml(d),f=!0);f&&(b.editor.mayBeDirty=!0,resetEditorIsDirty(b.editor.name))},blurListener=function(b){IsEditorEmpty(b.editor.name)&&b.editor.config.mask&&0<b.editor.config.mask.length&&(toggleWatermark(!0,b.editor),resetEditorIsDirty(b.editor.name))},modeListener=function(b){IsEditorEmpty(b.editor.name,
b.editor.config.mask)&&toggleWatermark("source"!=b.editor.mode,b.editor)};function toggleWatermark(b,d){if("wysiwyg"==d.mode){var f=d.document.getBody();b?(f.setHtml(d.config.mask),f.addClass("watermarked")):(f.setHtml(""),f.removeClass("watermarked"))}else b||d.setData("")}
function cleanOnFocusEvent(b,d,f){var c=CKEDITOR.instances[d];if(c){c.config.mask=b;if(f||IsEditorEmpty(c.name,c.config.mask))c.focusManager.hasFocus||setTimeout(function(){toggleWatermark(!0,c);c.mayBeDirty=!1;resetEditorIsDirty(c.name)},50);c.on("focus",focusListener);c.on("blur",blurListener);c.on("mode",modeListener);window.CKEDITOR.env.ie&&AttachListenersToInsertEvents(d)}}
function closeRecorderIfExists(){var b=TextEditorManager.getIframeFromDialog(CKEDITOR.dialog.getCurrent()),d,f;try{d=b.contents(),(f=d.find("object"))&&f.hide()}catch(c){}}function checkForMaskAndDelete(b){var d=null;b&&0<b.length?d=CKEDITOR.instances[b]:CKEDITOR.dialog.getCurrent()&&(d=CKEDITOR.dialog.getCurrent()._.editor);null!=d&&d.config.mask&&IsEditorEmpty(d.name,d.config.mask)&&d.document.getBody().setHtml("")}
function AttachListenersToInsertEvents(b){if(b&&0<b.length){var d=CKEDITOR.instances[b];d.on("insertText",function(d){checkForMaskAndDelete(b)});d.on("insertElement",function(d){checkForMaskAndDelete(b)});d.on("insertHtml",function(d){checkForMaskAndDelete(b)})}}
function TextEditorToolbar(b){function d(a){a.parent("ul").children("li").removeClass("active");a.addClass("active")}window[b]=this;var f=this,c,a,e;f.initialize=function(){a=f.controls.container.find("."+f.settings.fontColorSectionClass).find("li");e=f.controls.container.find("."+f.settings.fontSizeSectionClass).find("li");CKEDITOR.on("instanceReady",function(){c=CKEDITOR.instances[f.settings.editorId];c.on("selectionChange",function(){f.updateToolbarState()});a.find("a").click(function(){var a=
$(this).parent("li"),c=a.find("input:hidden:first").val();SetTextEditorFocus(f.settings.editorId);setTextEditorTextColor(f.settings.editorId,c);d(a);return!1});e.find("a").click(function(){var a=$(this).parent("li"),c=a.find("input:hidden:first").val();SetTextEditorFocus(f.settings.editorId);setTextEditorTextSize(f.settings.editorId,c);d(a);return!1});f.updateToolbarState()})};f.insertImage=function(a){InsertHtml('<img src="'+a+'" alt="" />',f.settings.editorId)};f.updateToolbarState=function(){var b=
c.getSelection();if(b){var d,k;if(b=$(b.getStartElement().$))k=b.prop("style").color,k||(d=b.parents('span[style*="color:"]:first'))&&d.prop("style")&&(k=d.prop("style").color),d=k,(k=d.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))?(d=[],d.push("#"),d.push(("0"+parseInt(k[1],10).toString(16)).slice(-2)),d.push(("0"+parseInt(k[2],10).toString(16)).slice(-2)),d.push(("0"+parseInt(k[3],10).toString(16)).slice(-2)),k=d.join("")):k=d,k=k.toLowerCase(),d=b.prop("style").fontSize,d||(b=b.parents('span[style*="font-size:"]:first'))&&
b.prop("style")&&(d=b.prop("style").fontSize);k||(k="#000000");d||(d=f.settings.defaultFontSizeStyle);a.removeClass("active");a.filter(":has(input[value='"+k+"']:hidden)").addClass("active");e.removeClass("active");d&&e.filter(":has(input[value='"+d+"']:hidden)").addClass("active")}}}
function TextEditorToolbarExtenderDialog(b){window[b]=this;var d=this;d.initialize=function(){d.controls.targetlink.on("click",function(b){b.preventDefault();d.show();return!1});d.controls.closelink.on("click",function(b){b.preventDefault();d.hide();return!1});d.controls.container.appendTo("body").on("click",function(b){b.preventDefault();return!1});d.controls.container.find("ul li a").on("click",function(b){d.hide();return!0});$(document).click(function(b){var c=d.controls.container;return 2>b.button&&
!c.is(":hidden")?(d.hide(),!1):!0})};d.show=function(){var b=d.controls.targetlink.offset();d.controls.container.css({top:b.top+d.controls.targetlink.height()+"px",left:b.left+"px"}).show()};d.hide=function(){d.controls.container.hide()};return d}
function TimeSlotPicker(b){function d(){g.val(a.val())}window[b]=this;var f=this,c,a,e,g,h;f.initialize=function(){c=$("#"+f.settings.clientIds.timeSlotPickerPanel);a=$("#"+f.settings.clientIds.timeSlotDropDown);e=$("#"+f.settings.clientIds.availableTimeSlotsHidden);g=$("#"+f.settings.clientIds.selectedTimeSlotIdHidden);a.change(function(){d()});var b=e.val();b&&(h=JSON.parse(b));f.toggle(!0)};f.toggle=function(a){c.toggle(a&&!!h)};f.updateFilteredTimeForDate=function(c,b){if(f.getAvailableTimeSlotsForDateFunction){var g=
{date:c,dateFilterId:b};f.getAvailableTimeSlotsForDateFunction(g);h=g.availableTimeSlots;e.val(h?JSON.stringify(h):"");if(h){a.empty();if(h&&h.length)for(g=0;g<h.length;g++)a.append("<option value='"+h[g].TimeSlotId+"'>"+h[g].Description+"</option>");f.toggle(!0);d()}else f.resetTimes()}};f.resetTimes=function(){a.empty();h=void 0;e.val(h?JSON.stringify(h):"");d();f.toggle(!1)};f.getSelectedTimeSlot=function(){return g.val()};return f}
function Toast(b,d,f,c,a,e){var g={controls:{},collapseAnimationDurationInMs:1500,scrollFrictionTimer:null,scrollFrictionStopTimeInMs:1200,minimalBottomMargin:20,isCollapsedHiddenField:null,initialize:function(){g.configureToastrPlugin();g.setuUpButtons();g.isCollapsedHiddenField=$("#"+e);"true"===g.isCollapsedHiddenField.val()&&setInterval(g.collapse(),100);g.attachPositionHandlersForMobileIos()},attachPositionHandlersForMobileIos:function(){if(browserSniffer.isMobileIos()){window.document.addEventListener("touchmove",
function(a){g.moveForMobileIosHandler()},!1);window.addEventListener("orientationchange",function(){g.moveForMobileIosHandler()});var a=g.calculateDefaultBottomMargin();g.setBottomMargin(a)}},configureToastrPlugin:function(){toastr.options=g.getToastrPluginOptions();toastr.success(b,d,f)},getToastrPluginOptions:function(){return{closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,toastClass:"ccl-toast",positionClass:"ccl-toast position-bottom-right",preventDuplicates:!0,onclick:null,showDuration:"0",
hideDuration:"1000",timeOut:"0",extendedTimeOut:"0",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut",tapToDismiss:!1,containerId:a}},setuUpButtons:function(){g.controls.toastContainer=$("#"+a);g.controls.messageContainer=$(".ccl-toast.ccl-default-toast");g.controls.collapseButton=g.createButton("toggle-toast-button collapse");g.controls.collapseButtonContainer=g.createCollapseButtonContainer(g.controls.collapseButton);g.controls.expandButton=g.createButton("toggle-toast-button expand");
g.controls.collapsedStateIcon=g.createCollapsedStateIcon();g.controls.expandButtonContainer=g.createExpandButtonContainer();g.setUpExpandButton();g.setUpCollapseButton()},createCollapsedStateIcon:function(){return $("<img/>",{src:c,style:"background-color: white;"})},createButton:function(a){return $("<button/>",{"class":a})},createExpandButtonContainer:function(){return $("<div />",{"class":"expand-button-container"}).append(g.controls.expandButton).append($("<br />")).append(g.controls.collapsedStateIcon)},
createCollapseButtonContainer:function(a){return $("<div />",{"class":"collapse-button-container"}).append(a)},setUpExpandButton:function(){g.controls.toastContainer.prepend(g.controls.expandButtonContainer);g.controls.expandButtonContainer.hide();g.controls.expandButton.click(function(){g.isCollapsedHiddenField.val("false");g.controls.messageContainer.css("margin-left","0");g.controls.expandButtonContainer.hide();g.controls.collapseButton.show();g.controls.toastContainer.animate({right:"+="+g.controls.toastContainer.css("right").replace("-",
"")},g.collapseAnimationDurationInMs)})},setUpCollapseButton:function(){g.controls.toastContainer.prepend(g.controls.collapseButtonContainer);g.controls.collapseButton.click(function(){g.onCollapseButtonClick()})},onCollapseButtonClick:function(){g.isCollapsedHiddenField.val("true");g.controls.collapseButton.unbind("click");g.controls.toastContainer.animate({right:"-="+g.controls.toastContainer.css("width")},g.collapseAnimationDurationInMs,function(){g.collapse();g.controls.collapseButton.click(function(){g.onCollapseButtonClick()})})},
collapse:function(){g.controls.toastContainer.css("right","-"+g.controls.toastContainer.width()+"px");g.controls.collapseButton.hide();g.controls.expandButtonContainer.show();g.controls.messageContainer.css("margin-left",g.controls.expandButtonContainer.width())},getScreenHeight:function(){return g.isMobileLandscape()?screen.width:screen.height},isMobileLandscape:function(){return 90===Math.abs(window.orientation)?!0:!1},calculateDefaultBottomMargin:function(){return $(parent.document).height()-g.getScreenHeight()+
$("#"+a).height()},setBottomMargin:function(c){$("#"+a).css("margin-bottom",c)},calculateBottomMarginForMobileIos:function(){var a=g.calculateDefaultBottomMargin()-$(parent.document).scrollTop();return 0>=$(parent.document).scrollTop()?g.calculateDefaultBottomMargin():a<g.minimalBottomMargin?g.minimalBottomMargin:a},moveForMobileIosHandler:function(){null!==g.scrollFrictionTimer&&clearTimeout(g.scrollFrictionTimer);g.scrollFrictionTimer=setTimeout(function(){var a=g.calculateBottomMarginForMobileIos();
g.setBottomMargin(a)},g.scrollFrictionStopTimeInMs)}};g.initialize();return{}}
(function(b){b(["jquery"],function(b){return function(){function f(a,c){a||(a=e());h=b("#"+a.containerId);if(h.length)return h;if(c){var g=a;h=b("<div/>").attr("id",g.containerId).addClass(g.positionClass).attr("aria-live","polite").attr("role","alert");h.appendTo(b(g.target))}return h}function c(a,c,e){e=e&&e.force?e.force:!1;return a&&(e||0===b(":focus",a).length)?(a[c.hideMethod]({duration:c.hideDuration,easing:c.hideEasing,complete:function(){g(a)}}),!0):!1}function a(a){function c(){z.hover(w,
q);!u.onclick&&u.tapToDismiss&&z.click(m);u.closeButton&&A&&A.click(function(a){a.stopPropagation?a.stopPropagation():void 0!==a.cancelBubble&&!0!==a.cancelBubble&&(a.cancelBubble=!0);m(!0)});u.onclick&&z.click(function(){u.onclick();m()})}function m(a){if(!b(":focus",z).length||a)return clearTimeout(M.intervalId),z[u.hideMethod]({duration:u.hideDuration,easing:u.hideEasing,complete:function(){g(z);if(u.onHidden&&"hidden"!==O.state)u.onHidden();O.state="hidden";O.endTime=new Date;k&&k(O)}})}function q(){if(0<
u.timeOut||0<u.extendedTimeOut)D=setTimeout(m,u.extendedTimeOut),M.maxHideTime=parseFloat(u.extendedTimeOut),M.hideEta=(new Date).getTime()+M.maxHideTime}function w(){clearTimeout(D);M.hideEta=0;z.stop(!0,!0)[u.showMethod]({duration:u.showDuration,easing:u.showEasing})}function v(){var a=(M.hideEta-(new Date).getTime())/M.maxHideTime*100;G.width(a+"%")}var u=e(),t=a.iconClass||u.iconClass;"undefined"!==typeof a.optionsOverride&&(u=b.extend(u,a.optionsOverride),t=a.optionsOverride.iconClass||t);var C;
a:{if(u.preventDuplicates)if(a.message===n){C=!0;break a}else n=a.message;C=!1}if(!C){l++;h=f(u,!0);var D=null,z=b("<div/>");C=b("<div/>");var H=b("<div/>"),G=b("<div/>"),A=b(u.closeHtml),M={intervalId:null,hideEta:null,maxHideTime:null},O={toastId:l,state:"visible",startTime:new Date,options:u,map:a};a.iconClass&&z.addClass(u.toastClass).addClass(t);a.title&&(C.append(a.title).addClass(u.titleClass),z.append(C));a.message&&(H.append(a.message).addClass(u.messageClass),z.append(H));u.closeButton&&
(A.addClass("toast-close-button").attr("role","button"),z.prepend(A));u.progressBar&&(G.addClass("toast-progress"),z.prepend(G));u.newestOnTop?h.prepend(z):h.append(z);z.hide();z[u.showMethod]({duration:u.showDuration,easing:u.showEasing,complete:u.onShown});0<u.timeOut&&(D=setTimeout(m,u.timeOut),M.maxHideTime=parseFloat(u.timeOut),M.hideEta=(new Date).getTime()+M.maxHideTime,u.progressBar&&(M.intervalId=setInterval(v,10)));c();k&&k(O);u.debug&&console&&console.log(O);return z}}function e(){return b.extend({},
{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1E3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1E3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5E3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:'<button type="button">&times;</button>',
newestOnTop:!0,preventDuplicates:!1,progressBar:!1},m.options)}function g(a){h||(h=f());a.is(":visible")||(a.remove(),0===h.children().length&&(h.remove(),n=void 0))}var h,k,l=0,m={clear:function(a,g){var k=e();h||f(k);if(!c(a,k,g))for(var l=h.children(),m=l.length-1;0<=m;m--)c(b(l[m]),k)},remove:function(a){var c=e();h||f(c);a&&0===b(":focus",a).length?g(a):h.children().length&&h.remove()},error:function(c,b,d){return a({type:"error",iconClass:e().iconClasses.error,message:c,optionsOverride:d,title:b})},
getContainer:f,info:function(c,b,d){return a({type:"info",iconClass:e().iconClasses.info,message:c,optionsOverride:d,title:b})},options:{},subscribe:function(a){k=a},success:function(c,b,d){return a({type:"success",iconClass:e().iconClasses.success,message:c,optionsOverride:d,title:b})},version:"2.1.1",warning:function(c,b,d){return a({type:"warning",iconClass:e().iconClasses.warning,message:c,optionsOverride:d,title:b})}},n;return m}()})})("function"===typeof define&&define.amd?define:function(b,
d){"undefined"!==typeof module&&module.exports?module.exports=d(require("jquery")):window.toastr=d(window.jQuery)});
function Toggle(b){function d(){0<l.length&&"INPUT"==l[0].tagName&&"checkbox"==l.attr("type")&&(n.bind("mousedown",function(){return!1}),p.bind("mousedown",function(){return!1}),"true"===r&&(m.bind(k.options.clientClickEventName,c),l.bind("change",f)))}function f(){g()?a():e();l.trigger(k.options.clientStateChangedEventName,[{toggleInstanceId:b}])}function c(){l.is(":disabled")||(l.prop("checked",!g()),f())}function a(){"true"===s&&m.removeClass(q.toggleOff).addClass(q.toggleOn);p.removeClass(q.checkedLabel).addClass(q.uncheckedLabel);
n.removeClass(q.uncheckedLabel).addClass(q.checkedLabel);l.prop("checked",!0)}function e(){"true"===s&&m.removeClass(q.toggleOn).addClass(q.toggleOff);n.removeClass(q.checkedLabel).addClass(q.uncheckedLabel);p.removeClass(q.uncheckedLabel).addClass(q.checkedLabel);l.prop("checked",!1)}function g(){return l.prop("checked")}function h(){if(!m.data("events"))return!1;var a=m.data("events")[k.options.clientClickEventName],b=!1;$.each(a,function(a,e){if(e.handler==c)return b=!0,!1});return b}window[b]=
this;var k=this,l,m,n,p,s,r,q;k.initialize=function(){l=k.controls.checkbox;m=k.controls.toggleBox;n=k.controls.labelOn;n.attr("title");p=k.controls.labelOff;p.attr("title");s=k.options.onOffMode;r=k.options.enabled;q=k.options.cssClassess;d()};k.revertStateAndDisable=function(){r&&m.unbind(k.options.clientClickEventName,c);g()?e():a();m.addClass(q.toggleDisabled)};k.clone=function(a,c){var b=new Toggle(c);b.controls={checkbox:a.find(k.controls.checkbox.selector),toggleBox:a.find(k.controls.toggleBox.selector),
labelOn:a.find(k.controls.labelOn.selector),labelOff:a.find(k.controls.labelOff.selector)};b.options=k.options;b.initialize()};k.toggleOnOff=function(c){c?a():e()};k.isChecked=function(){return g()};k.enable=function(){h()||m.bind(k.options.clientClickEventName,c);m.removeClass(q.toggleDisabled)};k.disable=function(){h()&&m.unbind(k.options.clientClickEventName,c);m.addClass(q.toggleDisabled)}}
function ToolTip(b,d){function f(a,b,e,d){xa=a;!b&&e&&(clearTimeout(E),E=setTimeout(function(){clearTimeout(Z);d&&k();c(xa)},m.settings.showPopupTimeout))}function c(a){z=D.scrollLeft();H=D.scrollTop();n.offset();e();$(document).trigger("hideTooltips");O=p.outerHeight(!0);P=p.outerWidth(!0);s||(s=h(),s.insertAfter(p));M=s.outerHeight(!0);ra=s.outerWidth(!0);q=M+1;w=D.width()+z;v=D.height()+H;n.height();if(0>=a.pageX&&0>=a.pageY){var c=$(a.target),b=c.offset();a.pageX=b.left+c.outerWidth()/2;a.pageY=
b.top+c.outerHeight()/2}t=a.pageX?a.pageX:a.originalEvent.touches[0].pageX;C=a.pageY?a.pageY:a.originalEvent.touches[0].pageY;ja=C-H>O+q;Da=v-C>O+q;wa=ja&&!Da;r||(r=$("<div></div>").appendTo(s));r.attr("class",wa?G.arrowDown:G.arrowUp);p.show();s.show();r.show();a=P/2;p.css({top:wa?C-O-q:C+q,left:t-a<z?z:t+a>w?w-P:t-a});A=p.offset();u=A.left+p.outerWidth();a=wa?A.top+O-1:A.top+1-M;c=u-ra;c=t>c?c:t-ra/2;t<A.left+ra/2&&(c=A.left);s.css({top:a,left:c})}function a(){p&&s&&(p.hide(),s.hide())}function e(){p||
(p=g(),p.appendTo("form"))}function g(){var c=$("<div></div>").addClass(G.tooltipPopup).hover(function(){clearTimeout(Z)},function(){Z=setTimeout(function(){a()},m.settings.hidePopupTimeout)});m.autoWidth&&$(c).addClass(G.tooltipAutoWidth);$("<div></div>").addClass(G.tooltipTitle).appendTo(c).html(m.title);$("<div></div>").addClass(G.tooltipDescription).appendTo(c).html(m.description);return c}function h(){return $("<div></div>").addClass(G.arrowContainer).hover(function(){clearTimeout(Z)},function(){Z=
setTimeout(function(){a()},m.settings.hidePopupTimeout)})}function k(){if(m.dataSource){var a=n.data(m.settings.attributes.idDataKey),c=m.dataSource[a];c?l(c.title,c.description):(l("",""),m.loadDataClientFunction&&m.loadDataClientFunction(a).done(function(){(c=m.dataSource[a])&&l(c.title,c.description)}))}else l(n.data(m.settings.attributes.titleDataKey),n.data(m.settings.attributes.descriptionDataKey))}function l(a,c){m.title=a;m.description=c;p&&(p.find("."+G.tooltipTitle).html(m.title?m.title:
""),p.find("."+G.tooltipDescription).html(m.title||m.description?m.description:m.settings.missingDataText))}window[b]=this;var m=this,n=d,p,s,r,q,w,v,u,t,C,D=$(window),z,H,G,A,M,O,P,ra,Z,E,Da,ja,wa,xa;m.initialize=function(){m.dataSource&&(m.title=m.dataSource[m.dataKey].title,m.description=m.dataSource[m.dataKey].description,m.autoWidth=m.dataSource[m.dataKey].autoWidth);G=m.settings.cssClasses;$(document).bind("hideTooltips",function(){a()});n.is("a")||n.addClass(G.linkToTooltip);var b=!!document.ontouchstart;
n.hover(function(a){f(a,b,!0,!1)},function(){b||(clearTimeout(E),Z=setTimeout(function(){a()},m.settings.hidePopupTimeout))}).mousemove(function(a){f(a,b,p&&p.is(":visible"),!1)}).on("ensureTooltipExists",function(){e()}).on("click",function(b){clearTimeout(Z);clearTimeout(E);p&&p.is(":visible")?a():c(b)})};m.initializeUnobtrusive=function(){G=m.settings.cssClasses;$(document).on("hideTooltips",function(){a()}).on("mouseenter","["+m.settings.attributes.id+"],["+m.settings.attributes.title+"], ["+
m.settings.attributes.description+"]",function(b){n=$(this);var d=!!document.ontouchstart;n.data("tooltip_initialized")||(n.is("a")||n.addClass(G.linkToTooltip),n.mousemove(function(a){f(a,d,p&&p.is(":visible"),!0)}).on("mouseleave",function(){clearTimeout(E);Z=setTimeout(function(){clearTimeout(Z);a()},m.settings.hidePopupTimeout)}).on("ensureTooltipExists",function(){e()}).on("click",function(b){clearTimeout(Z);clearTimeout(E);p&&p.is(":visible")?a():(k(),c(b))}),n.data("tooltip_initialized",!0));
f(b,d,!0,!0)});e()};return m}function TwoControlsSynchronizationObject(b){var d={},f={};f.callback=b;d.onFirstControlInitialized=function(c){f.control1=c;"undefined"!=typeof f.control2&&f.callback(f.control1,f.control2)};d.onSecondControlInitialized=function(c){f.control2=c;"undefined"!=typeof f.control1&&f.callback(f.control1,f.control2)};return d}UploaderSenderOptionsConstants={fileRepoData:"fileRepoData"};
function TrackXiti(b,d,f,c,a,e,g,h,k){xt_multc="&x1="+b+"&x2="+d+"&x3="+f+"&x4="+c;window.xtparam=null!=window.xtparam?window.xtparam+xt_multc:xt_multc;xtidc=xt_at=a;xt_ac=d;window.xtparam=null!=window.xtparam?window.xtparam+("&ac="+xt_ac+"&at="+xt_at):"&ac="+xt_ac+"&at="+xt_at;xtnv=document;xtsd=k;xtsite=e;xtn2=g;xtpage=h;xtdi=""}
(function(b){b.fn.autogrow=function(d){this.filter("textarea").each(function(){var f=this,c=b(f),a=c.height(),e,g=20;d&&d.hasOwnProperty("additionalHeight")&&(g=d.additionalHeight);var h=b("<div></div>").css({position:"absolute",top:-1E4,left:-1E4,fontSize:c.css("fontSize"),fontFamily:c.css("fontFamily"),font:c.css("font"),resize:"none"}).appendTo(document.body),k=function(){var b=c.css("word-wrap");h.css({width:c.width()-parseInt(c.css("paddingLeft"))-parseInt(c.css("paddingRight")),lineHeight:c.css("lineHeight"),
"word-wrap":b?b:"break-word"});b=f.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(a){for(var c="",b=0;b<a.length-1;b++)c+="&nbsp;";return c+" "});h.html(b);c.css("height",Math.max(h.height()+g,a))};c.bind("change keyup keydown input paste",k);b(window).resize(function(){e&&clearTimeout(e);e=setTimeout(function(){k.apply(f)},200)});k.apply(f)});return self}})(jQuery);
jQuery.cookie=function(b,d,f){if(1<arguments.length&&"[object Object]"!==String(d)){f=jQuery.extend({},f);if(null===d||void 0===d)f.expires=-1;if("number"===typeof f.expires){var c=f.expires,a=f.expires=new Date;a.setDate(a.getDate()+c)}d=String(d);return document.cookie=[encodeURIComponent(b),"=",f.raw?d:encodeURIComponent(d),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join("")}f=d||{};a=f.raw?function(a){return a}:
decodeURIComponent;return(c=(new RegExp("(?:^|; )"+encodeURIComponent(b)+"=([^;]*)")).exec(document.cookie))?a(c[1]):null};
(function(){var b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol?"symbol":typeof b};(function(d){function f(a,c){var b=2>=arguments.length||void 0===arguments[2]?{}:arguments[2],e=Object.create(a.prototype),d;for(d in b)e[d]=b[d];e.constructor=c;c.prototype=e;return c}function c(a){a=a||{};this.defaultProtocol=a.defaultProtocol||m.defaultProtocol;this.events=a.events||m.events;this.format=
a.format||m.format;this.formatHref=a.formatHref||m.formatHref;this.nl2br=a.nl2br||m.nl2br;this.tagName=a.tagName||m.tagName;this.target=a.target||m.target;this.validate=a.validate||m.validate;this.ignoreTags=[];this.attributes=a.attributes||a.linkAttributes||m.attributes;this.className=a.className||a.linkClass||m.className;a=a.ignoreTags||m.ignoreTags;for(var c=0;c<a.length;c++)this.ignoreTags.push(a[c].toUpperCase())}function a(a){return a}function e(){return function(a){this.j=[];this.T=a||null}}
function g(a,c,b,e){for(var d=0,g=a.length,f=[],h=void 0;d<g&&(h=c.next(a[d]));)c=h,d++;if(d>=g)return[];for(;d<g-1;)h=new s(e),f.push(h),c.on(a[d],h),c=h,d++;h=new s(b);f.push(h);c.on(a[g-1],h);return f}function h(){return function(a){a&&(this.v=a)}}function k(a){a=a?{v:a}:{};return f(q,h(),a)}function l(a){return a instanceof w||a instanceof E}var m={defaultProtocol:"http",events:null,format:a,formatHref:a,nl2br:!1,tagName:"a",target:function(a,c){return"url"===c?"_blank":null},validate:!0,ignoreTags:[],
attributes:null,className:"linkified"};c.prototype={resolve:function(a){var c=a.toHref(this.defaultProtocol);return{formatted:this.get("format",a.toString(),a),formattedHref:this.get("formatHref",c,a),tagName:this.get("tagName",c,a),className:this.get("className",c,a),target:this.get("target",c,a),events:this.getObject("events",c,a),attributes:this.getObject("attributes",c,a)}},check:function(a){return this.get("validate",a.toString(),a)},get:function(a,c,e){var d=this[a];if(!d)return d;switch("undefined"===
typeof d?"undefined":b(d)){case "function":return d(c,e.type);case "object":return a=d[e.type]||m[a],"function"===typeof a?a(c,e.type):a}return d},getObject:function(a,c,b){a=this[a];return"function"===typeof a?a(c,b.type):a}};var n=Object.freeze({defaults:m,Options:c,contains:function(a,c){for(var b=0;b<a.length;b++)if(a[b]===c)return!0;return!1}}),p=e();p.prototype={defaultTransition:!1,on:function(a,c){if(a instanceof Array){for(var b=0;b<a.length;b++)this.j.push([a[b],c]);return this}this.j.push([a,
c]);return this},next:function(a){for(var c=0;c<this.j.length;c++){var b=this.j[c],e=b[1];if(this.test(a,b[0]))return e}return this.defaultTransition},accepts:function(){return!!this.T},test:function(a,c){return a===c},emit:function(){return this.T}};var s=f(p,e(),{test:function(a,c){return a===c||c instanceof RegExp&&c.test(a)}}),r=f(p,e(),{jump:function(a){var c=1>=arguments.length||void 0===arguments[1]?null:arguments[1],b=this.next(new a(""));b===this.defaultTransition?(b=new this.constructor(c),
this.on(a,b)):c&&(b.T=c);return b},test:function(a,c){return a instanceof c}}),q=h();q.prototype={toString:function(){return this.v+""}};var w=k(),v=k("@"),u=k(":"),t=k("."),C=k(),D=k(),z=k("\n"),H=k(),G=k("+"),A=k("#"),M=k(),O=k("?"),P=k("/"),ra=k("_"),Z=k(),E=k(),Da=k(),ja=k("{"),wa=k("["),xa=k("<"),Ia=k("("),ya=k("}"),pa=k("]"),ea=k(">"),Q=k(")"),Wa=Object.freeze({Base:q,DOMAIN:w,AT:v,COLON:u,DOT:t,PUNCTUATION:C,LOCALHOST:D,NL:z,NUM:H,PLUS:G,POUND:A,QUERY:O,PROTOCOL:M,SLASH:P,UNDERSCORE:ra,SYM:Z,
TLD:E,WS:Da,OPENBRACE:ja,OPENBRACKET:wa,OPENANGLEBRACKET:xa,OPENPAREN:Ia,CLOSEBRACE:ya,CLOSEBRACKET:pa,CLOSEANGLEBRACKET:ea,CLOSEPAREN:Q}),V="aaa aarp abb abbott abogado ac academy accenture accountant accountants aco active actor ad adac ads adult ae aeg aero af afl ag agency ai aig airforce airtel al alibaba alipay allfinanz alsace am amica amsterdam an analytics android ao apartments app apple aq aquarelle ar aramco archi army arpa arte as asia associates at attorney au auction audi audio author auto autos avianca aw ax axa az azure ba baidu band bank bar barcelona barclaycard barclays bargains bauhaus bayern bb bbc bbva bcg bcn bd be beats beer bentley berlin best bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday bloomberg blue bm bms bmw bn bnl bnpparibas bo boats boehringer bom bond boo book boots bosch bostik bot boutique br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call camera camp cancerresearch canon capetown capital car caravan cards care career careers cars cartier casa cash casino cat catering cba cbn cc cd ceb center ceo cern cf cfa cfd cg ch chanel channel chase chat cheap chloe christmas chrome church ci cipriani circle cisco citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com commbank community company compare computer comsec condos construction consulting contact contractors cooking cool coop corsica country coupon coupons courses cr credit creditcard creditunion cricket crown crs cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance date dating datsun day dclk de dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev diamonds diet digital direct directory discount dj dk dm dnp do docs dog doha domains download drive dubai durban dvag dz earth eat ec edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er erni es esq estate et eu eurovision eus events everbank exchange expert exposed express fage fail fairwinds faith family fan fans farm fashion fast feedback ferrero fi film final finance financial firestone firmdale fish fishing fit fitness fj fk flickr flights florist flowers flsmidth fly fm fo foo football ford forex forsale forum foundation fox fr fresenius frl frogans frontier fund furniture futbol fyi ga gal gallery gallup game garden gb gbiz gd gdn ge gea gent genting gf gg ggee gh gi gift gifts gives giving gl glass gle global globo gm gmail gmbh gmo gmx gn gold goldpoint golf goo goog google gop got gov gp gq gr grainger graphics gratis green gripe group gs gt gu gucci guge guide guitars guru gw gy hamburg hangout haus hdfcbank health healthcare help helsinki here hermes hiphop hitachi hiv hk hm hn hockey holdings holiday homedepot homes honda horse host hosting hoteles hotmail house how hr hsbc ht hu hyundai ibm icbc ice icu id ie ifm iinet il im immo immobilien in industries infiniti info ing ink institute insurance insure int international investments io ipiranga iq ir irish is iselect ist istanbul it itau iwc jaguar java jcb je jetzt jewelry jlc jll jm jmp jo jobs joburg jot joy jp jpmorgan jprs juegos kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kitchen kiwi km kn koeln komatsu kp kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster land landrover lanxess lasalle lat latrobe law lawyer lb lc lds lease leclerc legal lexus lgbt li liaison lidl life lifeinsurance lifestyle lighting like limited limo lincoln linde link live living lixil lk loan loans local locus lol london lotte lotto love lr ls lt ltd ltda lu lupin luxe luxury lv ly ma madrid maif maison makeup man management mango market marketing markets marriott mba mc md me med media meet melbourne meme memorial men menu meo mg mh miami microsoft mil mini mk ml mm mma mn mo mobi mobily moda moe moi mom monash money montblanc mormon mortgage moscow motorcycles mov movie movistar mp mq mr ms mt mtn mtpc mtr mu museum mutuelle mv mw mx my mz na nadex nagoya name natura navy nc ne nec net netbank network neustar new news nexus nf ng ngo nhk ni nico nikon ninja nissan nl no nokia norton nowruz np nr nra nrw ntt nu nyc nz obi office okinawa om omega one ong onl online ooo oracle orange org organic origins osaka otsuka ovh pa page pamperedchef panerai paris pars partners parts party passagens pe pet pf pg ph pharmacy philips photo photography photos physio piaget pics pictet pictures pid pin ping pink pizza pk pl place play playstation plumbing plus pm pn pohl poker porn post pr praxi press pro prod productions prof promo properties property protection ps pt pub pw pwc py qa qpon quebec quest racing re read realtor realty recipes red redstone redumbrella rehab reise reisen reit ren rent rentals repair report republican rest restaurant review reviews rexroth rich ricoh rio rip ro rocher rocks rodeo room rs rsvp ru ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsung sandvik sandvikcoromant sanofi sap sapo sarl sas saxo sb sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scor scot sd se seat security seek select sener services seven sew sex sexy sfr sg sh sharp shell shia shiksha shoes show shriram si singles site sj sk ski skin sky skype sl sm smile sn sncf so soccer social softbank software sohu solar solutions song sony soy space spiegel spot spreadbetting sr srl st stada star starhub statefarm statoil stc stcgroup stockholm storage store studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiss sx sy sydney symantec systems sz tab taipei taobao tatamotors tatar tattoo tax taxi tc tci td team tech technology tel telecity telefonica temasek tennis tf tg th thd theater theatre tickets tienda tiffany tips tires tirol tj tk tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tp tr trade trading training travel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubs ug uk unicom university uno uol us uy uz va vacations vana vc ve vegas ventures verisign versicherung vet vg vi viajes video viking villas vin vip virgin vision vista vistaprint viva vlaanderen vn vodka volkswagen vote voting voto voyage vu vuelos wales walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weir wf whoswho wien wiki williamhill win windows wine wme wolterskluwer work works world ws wtc wtf xbox xerox xin xperia xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama youtube yt za zara zero zip zm zone zuerich zw".split(" "),
y="0123456789".split(""),da="0123456789abcdefghijklmnopqrstuvwxyz".split(""),B=" \f\r\t\x0B\u00a0\u1680\u180e".split(""),W=[],I=function(a){return new s(a)},na=I(),ta=I(H),sa=I(w),za=I(),oa=I(Da);na.on("@",I(v)).on(".",I(t)).on("+",I(G)).on("#",I(A)).on("?",I(O)).on("/",I(P)).on("_",I(ra)).on(":",I(u)).on("{",I(ja)).on("[",I(wa)).on("<",I(xa)).on("(",I(Ia)).on("}",I(ya)).on("]",I(pa)).on(">",I(ea)).on(")",I(Q)).on([",",";","!",'"',"'"],I(C));na.on("\n",I(z)).on(B,oa);oa.on(B,oa);for(var ka=0;ka<V.length;ka++){var Aa=
g(V[ka],na,E,w);W.push.apply(W,Aa)}var Xa=g("file",na,w,w),Ta=g("ftp",na,w,w),Sa=g("http",na,w,w);W.push.apply(W,Xa);W.push.apply(W,Ta);W.push.apply(W,Sa);var Ma=Xa.pop(),Na=Ta.pop(),Ja=Sa.pop(),X=I(w),ba=I(M);Na.on("s",X).on(":",ba);Ja.on("s",X).on(":",ba);W.push(X);Ma.on(":",ba);X.on(":",ba);var nb=g("localhost",na,D,w);W.push.apply(W,nb);na.on(y,ta);ta.on("-",za).on(y,ta).on(da,sa);sa.on("-",za).on(da,sa);for(var fb=0;fb<W.length;fb++)W[fb].on("-",za).on(da,sa);za.on("-",za).on(y,sa).on(da,sa);
na.defaultTransition=I(Z);var $a=function(a){for(var c=a.replace(/[A-Z]/g,function(a){return a.toLowerCase()}),b=a.length,e=[],d=0;d<b;){for(var g=na,f=null,h=0,k=null,l=-1;d<b&&(f=g.next(c[d]));)g=f,g.accepts()?(l=0,k=g):0<=l&&l++,h++,d++;0>l||(d-=l,h-=l,g=k.emit(),e.push(new g(a.substr(d-h,h))))}return e},ob=Object.freeze({State:s,TOKENS:Wa,run:$a,start:na}),Ra=h();Ra.prototype={type:"token",isLink:!1,toString:function(){for(var a=[],c=0;c<this.v.length;c++)a.push(this.v[c].toString());return a.join("")},
toHref:function(){return this.toString()},toObject:function(){return{type:this.type,value:this.toString(),href:this.toHref(0>=arguments.length||void 0===arguments[0]?"http":arguments[0])}}};var ab=f(Ra,h(),{type:"email",isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),Ga=f(Ra,h(),{type:"text"}),La=f(Ra,h(),{type:"nl"}),Va=f(Ra,h(),{type:"url",isLink:!0,toHref:function(){for(var a=0>=arguments.length||void 0===arguments[0]?"http":arguments[0],c=!1,b=!1,e=this.v,d=[],g=0;e[g]instanceof
M;)c=!0,d.push(e[g].toString().toLowerCase()),g++;for(;e[g]instanceof P;)b=!0,d.push(e[g].toString()),g++;for(;l(e[g]);)d.push(e[g].toString().toLowerCase()),g++;for(;g<e.length;g++)d.push(e[g].toString());d=d.join("");c||b||(d=a+"://"+d);return d},hasProtocol:function(){return this.v[0]instanceof M}}),Ea=Object.freeze({Base:Ra,EMAIL:ab,NL:La,TEXT:Ga,URL:Va}),L=function(a){return new r(a)},jb=L(),tb=L(),rb=L(),wb=L(),Ha=L(),lb=L(),R=L(Va),xb=L(),yb=L(Va),ca=L(Va),hb=L(),J=L(),Ya=L(),ib=L(),N=L(),
bb=L(Va),Pa=L(Va),cb=L(Va),ua=L(Va),la=L(),ma=L(),ha=L(),F=L(),ia=L(),K=L(),fa=L(ab),U=L(),aa=L(ab),S=L(),Y=L(),zb=L(),qa=L(La);jb.on(z,qa).on(M,tb).on(P,rb);tb.on(P,rb);rb.on(P,wb);jb.on(E,Ha).on(w,Ha).on(D,R).on(H,Ha);wb.on(E,ca).on(w,ca).on(H,ca).on(D,ca);Ha.on(t,lb);ia.on(t,K);lb.on(E,R).on(w,Ha).on(H,Ha).on(D,Ha);K.on(E,fa).on(w,ia).on(H,ia).on(D,ia);R.on(t,lb);fa.on(t,K);R.on(u,xb).on(P,ca);xb.on(H,yb);yb.on(P,ca);fa.on(u,U);U.on(H,aa);var ga=[w,v,D,H,G,A,M,P,E,ra,Z],T=[u,t,O,C,ya,pa,ea,Q,ja,
wa,xa,Ia];ca.on(ja,J).on(wa,Ya).on(xa,ib).on(Ia,N);hb.on(ja,J).on(wa,Ya).on(xa,ib).on(Ia,N);J.on(ya,ca);Ya.on(pa,ca);ib.on(ea,ca);N.on(Q,ca);bb.on(ya,ca);Pa.on(pa,ca);cb.on(ea,ca);ua.on(Q,ca);la.on(ya,ca);ma.on(pa,ca);ha.on(ea,ca);F.on(Q,ca);J.on(ga,bb);Ya.on(ga,Pa);ib.on(ga,cb);N.on(ga,ua);J.on(T,la);Ya.on(T,ma);ib.on(T,ha);N.on(T,F);bb.on(ga,bb);Pa.on(ga,Pa);cb.on(ga,cb);ua.on(ga,ua);bb.on(T,bb);Pa.on(T,Pa);cb.on(T,cb);ua.on(T,ua);la.on(ga,bb);ma.on(ga,Pa);ha.on(ga,cb);F.on(ga,ua);la.on(T,la);ma.on(T,
ma);ha.on(T,ha);F.on(T,F);ca.on(ga,ca);hb.on(ga,ca);ca.on(T,hb);hb.on(T,hb);var Ca=[w,H,G,A,O,ra,Z,E];Ha.on(Ca,S).on(v,Y);R.on(Ca,S).on(v,Y);lb.on(Ca,S);S.on(Ca,S).on(v,Y).on(t,zb);zb.on(Ca,S);Y.on(E,ia).on(w,ia).on(D,fa);var Ba=function(a){for(var c=a.length,b=0,e=[],d=[];b<c;){for(var g=jb,f=null,h=null,k=0,l=null,m=-1;b<c&&!(f=g.next(a[b]));)d.push(a[b++]);for(;b<c&&(h=f||g.next(a[b]));)f=null,g=h,g.accepts()?(m=0,l=g):0<=m&&m++,b++,k++;if(0>m)for(k=b-k;k<b;k++)d.push(a[k]);else 0<d.length&&(e.push(new Ga(d)),
d=[]),b-=m,k-=m,g=l.emit(),e.push(new g(a.slice(b-k,b)))}0<d.length&&e.push(new Ga(d));return e},Ua=Object.freeze({State:r,TOKENS:Ea,run:Ba,start:jb});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var va=function(a){return Ba($a(a))};d.find=function(a){for(var c=1>=arguments.length||void 0===arguments[1]?null:arguments[1],b=va(a),e=[],d=0;d<b.length;d++){var g=b[d];!g.isLink||c&&g.type!==c||e.push(g.toObject())}return e};d.inherits=f;d.options=
n;d.parser=Ua;d.scanner=ob;d.test=function(a){var c=1>=arguments.length||void 0===arguments[1]?null:arguments[1],b=va(a);return 1===b.length&&b[0].isLink&&(!c||b[0].type===c)};d.tokenize=va})(window.linkify=window.linkify||{})})();"use strict";
(function(b,d,f){d=function(c,a){function e(a,c,b){if(!a||1!==a.nodeType)throw Error("Cannot linkify "+a+" - Invalid DOM Node type");var d=c.ignoreTags;if("A"===a.tagName||k.contains(d,a.tagName))return a;for(d=a.firstChild;d;){switch(d.nodeType){case 1:e(d,c,b);break;case 3:var g=f(d.nodeValue);if(0===g.length||1===g.length&&g[0]instanceof m)break;var l;l=c;for(var n=b,t=[],C=Array.isArray(g),D=0,g=C?g:g[Symbol.iterator]();;){var z;if(C){if(D>=g.length)break;z=g[D++]}else{D=g.next();if(D.done)break;
z=D.value}if("nl"===z.type&&l.nl2br)t.push(n.createElement("br"));else if(z.isLink&&l.check(z)){var H=l.resolve(z);z=H.formatted;var G=H.formattedHref,A=H.className,M=H.target,O=H.events,P=H.attributes,H=n.createElement(H.tagName);H.setAttribute("href",G);A&&H.setAttribute("class",A);M&&H.setAttribute("target",M);if(P)for(var ra in P)H.setAttribute(ra,P[ra]);if(O)for(var Z in O)H.addEventListener?H.addEventListener(Z,O[Z]):H.attachEvent&&H.attachEvent("on"+Z,O[Z]);H.appendChild(n.createTextNode(z));
t.push(H)}else t.push(n.createTextNode(z.toString()))}l=t;n=a;t=l;g=t[t.length-1];n.replaceChild(g,d);for(d=t.length-2;0<=d;d--)n.insertBefore(t[d],g),g=t[d];d=l[l.length-1]}d=d.nextSibling}return a}function d(a,c){var g=2>=arguments.length||void 0===arguments[2]?!1:arguments[2];try{g=g||document||b&&b.document||global&&global.document}catch(f){}if(!g)throw Error("Cannot find document implementation. If you are in a non-browser environment like Node.js, pass the document implementation as the third argument to linkifyElement.");
c=new l(c);return e(a,c,g)}var f=a.tokenize,k=a.options,l=k.Options,m=a.parser.TOKENS.TEXT;d.helper=e;d.normalize=function(a){return new l(a)};try{!define&&(b.linkifyElement=d)}catch(n){}return function(a){function c(a){a=d.normalize(a);return this.each(function(){d.helper(this,a,e)})}var e=1>=arguments.length||void 0===arguments[1]?!1:arguments[1];a.fn=a.fn||{};try{e=e||document||b&&b.document||global&&global.document}catch(f){}if(!e)throw Error("Cannot find document implementation. If you are in a non-browser environment like Node.js, pass the document implementation as the second argument to linkify/jquery");
"function"!==typeof a.fn.linkify&&(a.fn.linkify=c,a(e).ready(function(){a("[data-linkify]").each(function(){var c=a(this),b=c.data(),e=b.linkify,d=b.linkifyNlbr,b={attributes:b.linkifyAttributes,defaultProtocol:b.linkifyDefaultProtocol,events:b.linkifyEvents,format:b.linkifyFormat,formatHref:b.linkifyFormatHref,nl2br:!!d&&0!==d&&"false"!==d,tagName:b.linkifyTagname,target:b.linkifyTarget,className:b.linkifyClassName||b.linkifyLinkclass,validate:b.linkifyValidate,ignoreTags:b.linkifyIgnoreTags};("this"===
e?c:c.find(e)).linkify(b)})}))}}(f,d);"function"!==typeof f.fn.linkify&&d(f)})(window,linkify,jQuery);
(function(b){function d(d){if("string"===typeof d.data){var c=d.handler,a=d.data.toLowerCase().split(" ");d.handler=function(e){if(this===e.target||!/textarea|select/i.test(e.target.nodeName)&&"text"!==e.target.type&&"password"!==e.target.type){var d="keypress"!==e.type&&b.hotkeys.specialKeys[e.which],f=String.fromCharCode(e.which).toLowerCase(),k="",l={};e.altKey&&"alt"!==d&&(k+="alt+");e.ctrlKey&&"ctrl"!==d&&(k+="ctrl+");e.metaKey&&!e.ctrlKey&&"meta"!==d&&(k+="meta+");e.shiftKey&&"shift"!==d&&(k+=
"shift+");d?l[k+d]=!0:(l[k+f]=!0,l[k+b.hotkeys.shiftNums[f]]=!0,"shift+"===k&&(l[b.hotkeys.shiftNums[f]]=!0));d=0;for(f=a.length;d<f;d++)if(l[a[d]])return c.apply(this,arguments)}}}}b.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",
105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};b.each(["keydown","keyup","keypress"],function(){b.event.special[this]={add:d}})})(jQuery);"use strict";
(function(){if(!jQuery||!jQuery.jstree){var b=!1,d=!1,f=!1;(function(c){c.vakata={};c.vakata.css={get_css:function(a,c,b){a=a.toLowerCase();var e=b.cssRules||b.rules,d=0;do{if(e.length&&d>e.length+5)break;if(e[d].selectorText&&e[d].selectorText.toLowerCase()==a)return!0===c?(b.removeRule&&b.removeRule(d),b.deleteRule&&b.deleteRule(d),!0):e[d]}while(e[++d]);return!1},add_css:function(a,b){if(c.jstree.css.get_css(a,!1,b))return!1;b.insertRule?b.insertRule(a+" { }",0):b.addRule(a,null,0);return c.vakata.css.get_css(a)},
remove_css:function(a,b){return c.vakata.css.get_css(a,!0,b)},add_sheet:function(a){var b=!1,e=!0;if(a.str)return a.title&&(b=c("style[id='"+a.title+"-stylesheet']")[0]),b?e=!1:(b=document.createElement("style"),b.setAttribute("type","text/css"),a.title&&b.setAttribute("id",a.title+"-stylesheet")),b.styleSheet?e?(document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet.cssText=a.str):b.styleSheet.cssText=b.styleSheet.cssText+" "+a.str:(b.appendChild(document.createTextNode(a.str)),document.getElementsByTagName("head")[0].appendChild(b)),
b.sheet||b.styleSheet;if(a.url)if(document.createStyleSheet)try{document.createStyleSheet(a.url)}catch(d){}else return b=document.createElement("link"),b.rel="stylesheet",b.type="text/css",b.media="all",b.href=a.url,document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet}};var a=[],e=-1,g={},h={};c.fn.jstree=function(b){var e="string"==typeof b,d=Array.prototype.slice.call(arguments,1),f=this;if(e){if("_"==b.substring(0,1))return f;this.each(function(){var e=a[c.data(this,"jstree_instance_id")],
e=e&&c.isFunction(e[b])?e[b].apply(e,d):e;if("undefined"!==typeof e&&(0===b.indexOf("is_")||!0!==e&&!1!==e))return f=e,!1})}else this.each(function(){var e=c.data(this,"jstree_instance_id"),f=[],h=b?c.extend({},!0,b):{},l=c(this),n=!1,v=[],f=f.concat(d);l.data("jstree")&&f.push(l.data("jstree"));h=f.length?c.extend.apply(null,[!0,h].concat(f)):h;"undefined"!==typeof e&&a[e]&&a[e].destroy();e=parseInt(a.push({}),10)-1;c.data(this,"jstree_instance_id",e);h.plugins=c.isArray(h.plugins)?h.plugins:c.jstree.defaults.plugins.slice();
h.plugins.unshift("core");h.plugins=h.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");n=c.extend(!0,{},c.jstree.defaults,h);n.plugins=h.plugins;c.each(g,function(a,b){-1===c.inArray(a,n.plugins)?(n[a]=null,delete n[a]):v.push(a)});n.plugins=v;a[e]=new c.jstree._instance(e,c(this).addClass("jstree jstree-"+e),n);c.each(a[e]._get_settings().plugins,function(c,b){a[e].data[b]={}});c.each(a[e]._get_settings().plugins,function(c,b){g[b]&&
g[b].__init.apply(a[e])});setTimeout(function(){a[e]&&a[e].init()},0)});return f};c.jstree={defaults:{plugins:[]},_focused:function(){return a[e]||null},_reference:function(b){if(a[b])return a[b];var e=c(b);e.length||"string"!==typeof b||(e=c("#"+b));return e.length?a[e.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(a,b,e){this.data={core:{}};this.get_settings=function(){return c.extend(!0,{},e)};this._get_settings=function(){return e};this.get_index=function(){return a};
this.get_container=function(){return b};this.get_container_ul=function(){return b.children("ul:eq(0)")};this._set_settings=function(a){e=c.extend(!0,{},e,a)}},_fn:{},plugin:function(a,b){b=c.extend({},{__init:c.noop,__destroy:c.noop,_fn:{},defaults:!1},b);g[a]=b;c.jstree.defaults[a]=b.defaults;c.each(b._fn,function(b,e){e.plugin=a;e.old=c.jstree._fn[b];c.jstree._fn[b]=function(){var a,d=e,g=Array.prototype.slice.call(arguments);a=new c.Event("before.jstree");var f=!1;if(!0!==this.data.core.locked||
"unlock"===b||"is_locked"===b){do{if(d&&d.plugin&&-1!==c.inArray(d.plugin,this._get_settings().plugins))break;d=d.old}while(d);if(d){if(0===b.indexOf("_"))a=d.apply(this,g);else{a=this.get_container().triggerHandler(a,{func:b,inst:this,args:g,plugin:d.plugin});if(!1===a)return;"undefined"!==typeof a&&(g=a);a=d.apply(c.extend({},this,{__callback:function(a){this.get_container().triggerHandler(b+".jstree",{inst:this,args:g,rslt:a,rlbk:f})},__rollback:function(){return f=this.get_rollback()},__call_old:function(a){return d.old.apply(this,
a?Array.prototype.slice.call(arguments,1):g)}}),g)}return a}}};c.jstree._fn[b].old=e.old;c.jstree._fn[b].plugin=a})},rollback:function(b){b&&(c.isArray(b)||(b=[b]),c.each(b,function(c,b){a[b.i].set_rollback(b.h,b.d)}))}};c.jstree._fn=c.jstree._instance.prototype={};c(function(){var a=navigator.userAgent.toLowerCase(),e=(a.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],g=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";
if(/msie/.test(a)&&6==parseInt(e,10)){b=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(h){}g+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(a)&&
7==parseInt(e,10)&&(d=!0,g+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(a)&&/mozilla/.test(a)&&1.9>parseFloat(e,10)&&(f=!0,g+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");c.vakata.css.add_sheet({str:g,title:"jstree"})});c.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+
this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",c.proxy(function(a){a=c(a.target);this.toggle_node(a)},this)).bind("mousedown.jstree",c.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(a){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){a=window.getSelection();
try{a.removeAllRanges(),a.collapse()}catch(c){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",c.proxy(function(a,b){var e=this._get_node(b.rslt.obj),d=this;-1===e&&(e=this.get_container_ul());e.length&&e.find("li").each(function(){var a=c(this);a.data("jstree")&&c.each(a.data("jstree"),function(b,e){d.data[b]&&c.isFunction(d["_"+b+"_notify"])&&d["_"+b+"_notify"].call(d,a,e)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",
c.proxy(function(a,b){var e=this._get_node(b.rslt.obj),d=this;-1===e&&(e=this.get_container_ul());e.length&&e.find("li.jstree-open:not(:has(ul))").each(function(){d.load_node(this,c.noop,c.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var b,d=this.get_index(),f=this._get_settings(),h=this;c.each(f.plugins,function(a,c){try{g[c].__destroy.apply(h)}catch(b){}});this.__callback();if(this.is_focused())for(b in a)if(a.hasOwnProperty(b)&&
b!=d){a[b].set_focus();break}d===e&&(e=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});c(document).unbind(".jstree-"+d).undelegate(".jstree-"+d);a[d]=null;delete a[d]},_core_notify:function(a,c){c.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(a){var b=this,e=!0,d=[],g=[];a||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=c.map(c.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=c.map(c.makeArray(this.data.core.to_load),function(a){return"#"+
a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(c.each(this.data.core.to_load,function(a,b){if("#"==b)return!0;c(b).length?d.push(b):g.push(b)}),d.length&&(this.data.core.to_load=g,c.each(d,function(a,c){b._is_loaded(c)||(b.load_node(c,function(){b.reload_nodes(!0)},function(){b.reload_nodes(!0)}),
e=!1)})));this.data.core.to_open.length&&c.each(this.data.core.to_open,function(a,c){b.open_node(c,!1,!0)});e&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){b.__callback({},b)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var a=this;this.data.core.to_open.length&&c.each(this.data.core.to_open,function(c,b){a.open_node(b,!1,!0)});this.__callback({})},refresh:function(a,c){var b=this;this.save_opened();a||(a=-1);(a=this._get_node(a))||
(a=-1);-1!==a?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){b.__callback({obj:a});b.reload_nodes();c&&"function"==typeof c&&c()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var a=c.jstree._focused();a&&a.unset_focus();this.get_container().addClass("jstree-focused");e=this.get_index();this.__callback()}},is_focused:function(){return e==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),
e=-1);this.__callback()},_get_node:function(a){var b=c(a,this.get_container());if(b.is(".jstree")||-1==a)return-1;b=b.closest("li:not(.jstree-header)",this.get_container());return b.length?b:!1},_get_next:function(a,c){a=this._get_node(a);return-1===a?this.get_container().find("> ul > li:not(.jstree-header):first-child"):a.length?c?0<a.nextAll("li:not(.jstree-header)").size()?a.nextAll("li:not(.jstree-header):eq(0)"):!1:a.hasClass("jstree-open")?a.find("li:not(.jstree-header):eq(0)"):0<a.nextAll("li:not(.jstree-header)").size()?
a.nextAll("li:not(.jstree-header):eq(0)"):a.parentsUntil(".jstree","li").next("li:not(.jstree-header)").eq(0):!1},_get_prev:function(a,c){a=this._get_node(a);if(-1===a)return this.get_container().find("> ul > li:not(.jstree-header):last-child");if(!a.length)return!1;if(c)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prevAll("li:not(.jstree-header)").length){for(a=a.prevAll("li:not(.jstree-header)").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:not(.jstree-header):last");
return a}var b=a.parentsUntil(".jstree","li:not(.jstree-header):eq(0)");return b.length?b:!1},_get_parent:function(a){a=this._get_node(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".jstree","li:not(.jstree-header):eq(0)");return a.length?a:-1},_get_children:function(a){a=this._get_node(a);return-1===a?this.get_container().children("ul:eq(0)").children("li:not(.jstree-header)"):a.length?a.children("ul:eq(0)").children("li:not(.jstree-header)"):!1},get_path:function(a,c){var b=[],e=this;a=this._get_node(a);
if(-1===a||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){b.push(c?this.id:e.get_text(this))});b.reverse();b.push(c?a.attr("id"):this.get_text(a));return b},_get_string:function(a){return this._get_settings().core.strings[a]||a},is_open:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-leaf")},
correct_state:function(a){a=this._get_node(a);if(!a||-1===a)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(a,c,e){a=this._get_node(a);if(!a.length)return!1;if(!a.hasClass("jstree-closed"))return c&&c.call(),!1;var d=e||b?0:this._get_settings().core.animation,g=this;this._is_loaded(a)?(this._get_settings().core.open_parents&&a.parentsUntil(".jstree",".jstree-closed").each(function(){g.open_node(this,!1,
!0)}),d&&a.children("ul").css("display","none"),a.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),d?a.children("ul").stop(!0,!0).slideDown(d,function(){this.style.display="";g.after_open(a)}):g.after_open(a),this.__callback({obj:a}),c&&c.call()):(a.children("a").addClass("jstree-loading"),this.load_node(a,function(){g.open_node(a,c,e)},c))},after_open:function(a){this.__callback({obj:a})},close_node:function(a,c){a=this._get_node(a);var e=c||b?0:this._get_settings().core.animation,
d=this;if(!a.length||!a.hasClass("jstree-open"))return!1;e&&a.children("ul").attr("style","display:block !important");a.removeClass("jstree-open").addClass("jstree-closed");e?a.children("ul").stop(!0,!0).slideUp(e,function(){this.style.display="";d.after_close(a)}):d.after_close(a);this.__callback({obj:a})},after_close:function(a){this.__callback({obj:a})},toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},
open_all:function(a,c,b){(a=a?this._get_node(a):-1)&&-1!==a||(a=this.get_container_ul());b?a=a.find("li.jstree-closed"):(b=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").andSelf():a.find("li.jstree-closed"));var e=this;a.each(function(){var a=this;e._is_loaded(this)?e.open_node(this,!1,!c):e.open_node(this,function(){e.open_all(a,c,b)},!c)});0===b.find("li.jstree-closed").length&&this.__callback({obj:b})},close_all:function(a,c){var b=this;(a=a?this._get_node(a):this.get_container())&&-1!==
a||(a=this.get_container_ul());a.find("li.jstree-open").andSelf().each(function(){b.close_node(this,!c)});this.__callback({obj:a})},clean_node:function(a){a=a&&-1!=a?c(a):this.get_container_ul();a=a.is("li")?a.find("li").andSelf():a.find("li");a.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");a.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();
this.__callback({obj:a})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,c){this.get_container().empty().append(a);this.data=c;this.__callback()},load_node:function(a,c,b){this.__callback({obj:a})},_is_loaded:function(a){return!0},create_node:function(a,b,e,d,g){a=this._get_node(a);b="undefined"===typeof b?"last":b;var f=c("<li />"),h=this._get_settings().core,q;if(-1!==a&&!a.length)return!1;
if(!g&&!this._is_loaded(a))return this.load_node(a,function(){this.create_node(a,b,e,d,!0)}),!1;this.__rollback();"string"===typeof e&&(e={data:e});e||(e={});e.attr&&f.attr(e.attr);e.metadata&&f.data(e.metadata);e.state&&f.addClass("jstree-"+e.state);e.data||(e.data=this._get_string("new_node"));c.isArray(e.data)||(q=e.data,e.data=[],e.data.push(q));c.each(e.data,function(a,b){q=c("<a />");c.isFunction(b)&&(b=b.call(this,e));if("string"==typeof b)q.attr("href","#")[h.html_titles?"html":"text"](b);
else b.attr||(b.attr={}),b.attr.href||(b.attr.href="#"),q.attr(b.attr)[h.html_titles?"html":"text"](b.title),b.language&&q.addClass(b.language);q.prepend("<ins class='jstree-icon'>&#160;</ins>");!b.icon&&e.icon&&(b.icon=e.icon);b.icon&&(-1===b.icon.indexOf("/")?q.children("ins").addClass(b.icon):q.children("ins").css("background","url('"+b.icon+"') center center no-repeat"));f.append(q)});f.prepend("<ins class='jstree-icon'>&#160;</ins>");-1===a&&(a=this.get_container(),"before"===b&&(b="first"),
"after"===b&&(b="last"));switch(b){case "before":a.before(f);q=this._get_parent(a);break;case "after":a.after(f);q=this._get_parent(a);break;case "inside":case "first":a.children("ul").length||a.append("<ul />");a.children("ul").prepend(f);q=a;break;case "last":a.children("ul").length||a.append("<ul />");a.children("ul").append(f);q=a;break;default:a.children("ul").length||a.append("<ul />"),b||(b=0),q=a.children("ul").children("li").eq(b),q.length?q.before(f):a.children("ul").append(f),q=a}if(-1===
q||q.get(0)===this.get_container().get(0))q=-1;this.clean_node(q);this.__callback({obj:f,parent:q});d&&d.call(this,f);return f},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var c=this._get_settings().core.html_titles;a=a.children("a:eq(0)");if(c)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,c){a=this._get_node(a);if(!a.length)return!1;a=a.children("a:eq(0)");if(this._get_settings().core.html_titles){var b=
a.children("INS").clone();a.html(c).prepend(b);this.__callback({obj:a,name:c});return!0}a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:c});return a.nodeValue=c},rename_node:function(a,c){a=this._get_node(a);this.__rollback();a&&a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:a,name:c})},delete_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.__rollback();var b=this._get_parent(a),e=c([]),d=this;
a.each(function(){e=e.add(d._get_prev(this))});a=a.detach();-1!==b&&0===b.find("> ul > li").length&&b.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(b);this.__callback({obj:a,prev:e,parent:b});return a},prepare_move:function(a,b,e,d,g){var f={};f.ot=c.jstree._reference(a)||this;f.o=f.ot._get_node(a);f.r=-1===b?-1:this._get_node(b);f.p="undefined"===typeof e||!1===e?"last":e;if(g||!h.o||h.o[0]!==f.o[0]||h.r[0]!==f.r[0]||h.p!==f.p){f.ot=c.jstree._reference(f.o)||this;
f.rt=c.jstree._reference(f.r)||this;if(-1!==f.r&&f.r){if(!/^(before|after)$/.test(f.p)&&!this._is_loaded(f.r))return this.load_node(f.r,function(){this.prepare_move(a,b,e,d,!0)});switch(f.p){case "before":f.cp=f.r.index();f.cr=f.rt._get_parent(f.r);break;case "after":f.cp=f.r.index()+1;f.cr=f.rt._get_parent(f.r);break;case "first":f.cp=0;f.cr=f.r;break;case "inside":case "last":f.cp=f.r.find(" > ul > li").length;f.cr=f.r;break;default:f.cp=f.p,f.cr=f.r}}else switch(f.cr=-1,f.p){case "first":case "before":case "inside":f.cp=
0;break;case "after":case "last":f.cp=f.rt.get_container().find(" > ul > li").length;break;default:f.cp=f.p}f.np=-1==f.cr?f.rt.get_container():f.cr;f.op=f.ot._get_parent(f.o);f.cop=f.o.index();-1===f.op&&(f.op=f.ot?f.ot.get_container():this.get_container());!/^(before|after)$/.test(f.p)&&f.op&&f.np&&f.op[0]===f.np[0]&&f.o.index()<f.cp&&f.cp++;f.or=f.np.find(" > ul > li:nth-child("+(f.cp+1)+")");h=f}this.__callback(h);d&&d.call(this,h)},check_move:function(){var a=h,c=!0,b=-1===a.r?this.get_container():
a.r;if(!a||!a.o||a.or[0]===a.o[0]||a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(-1!==b.parentsUntil(".jstree","li").andSelf().index(this))return c=!1});return c},move_node:function(a,b,e,d,g,f){if(!g)return this.prepare_move(a,b,e,function(a){this.move_node(a,!1,!1,d,!0,f)});d&&(h.cy=!0);if(!f&&!this.check_move())return!1;this.__rollback();b=!1;d?(b=a.o.clone(!0),b.find("*[id]").andSelf().each(function(){this.id&&(this.id="copy_"+this.id)})):b=a.o;a.or.length?
a.or.before(b):(a.np.children("ul").length||c("<ul />").appendTo(a.np),a.np.children("ul:eq(0)").append(b));try{a.ot.clean_node(a.op),a.rt.clean_node(a.np),a.op.find("> ul > li").length||a.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(r){}d&&(h.cy=!0,h.oc=b);this.__callback(h);return h},_get_move:function(){return h}}})})(jQuery);(function(c){var a,b,d;c(function(){/msie/.test(navigator.userAgent.toLowerCase())?(b=c('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",
top:-1E3,left:0}).appendTo("body"),d=c('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),a=b.width()-d.width(),b.add(d).remove()):(b=c("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),a=100-b.width(),b.parent().remove())});c.jstree.plugin("ui",{__init:function(){this.data.ui.selected=c();this.data.ui.last_selected=
!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",c.proxy(function(a){a.preventDefault();a.currentTarget.blur();c(a.currentTarget).hasClass("jstree-loading")||this.select_node(a.currentTarget,!0,a)},this)).delegate("a","mouseenter.jstree",c.proxy(function(a){c(a.currentTarget).hasClass("jstree-loading")||this.hover_node(a.target)},this)).delegate("a","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).hasClass("jstree-loading")||
this.dehover_node(a.target)},this)).bind("reopen.jstree",c.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",c.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",c.proxy(function(){this.reselect()},this)).bind("close_node.jstree",c.proxy(function(a,b){var e=this._get_settings().ui,d=this._get_node(b.rslt.obj),g=d&&d.length?d.children("ul").find("a.jstree-clicked"):c(),f=this;!1!==e.selected_parent_close&&g.length&&g.each(function(){f.deselect_node(this);
"select_parent"===e.selected_parent_close&&f.select_node(d)})},this)).bind("delete_node.jstree",c.proxy(function(a,c){var b=this._get_settings().ui.select_prev_on_delete,e=this._get_node(c.rslt.obj),e=e&&e.length?e.find("a.jstree-clicked"):[],d=this;e.each(function(){d.deselect_node(this)});b&&e.length&&c.rslt.prev.each(function(){if(this.parentNode)return d.select_node(this),!1})},this)).bind("move_node.jstree",c.proxy(function(a,c){c.rslt.cy&&c.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},
this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(a,b){if("undefined"===typeof a||null===a)return b?this.data.ui.selected:this.data.ui.last_selected;var e=c(a,this.get_container());if(e.is(".jstree")||-1==a)return-1;e=e.closest("li",this.get_container());return e.length?e:!1},_ui_notify:function(a,
c){c.selected&&this.select_node(a,!1)},save_selected:function(){var a=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&a.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},reselect:function(){var a=this,b=this.data.ui.to_select,b=c.map(c.makeArray(b),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,
"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});c.each(b,function(c,b){b&&"#"!==b&&a.select_node(b)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(a){this.save_selected();return this.__call_old()},hover_node:function(a){a=this._get_node(a);if(!a.length)return!1;a.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=a.children("a").addClass("jstree-hovered").parent();
this._fix_scroll(a);this.__callback({obj:a})},dehover_node:function(){var a=this.data.ui.hovered,c;if(!a||!a.length)return!1;c=a.children("a").removeClass("jstree-hovered").parent();this.data.ui.hovered[0]===c[0]&&(this.data.ui.hovered=null);this.__callback({obj:a})},select_node:function(a,c,b){a=this._get_node(a);if(-1==a||!a||!a.length)return!1;var e=this._get_settings().ui,d="on"==e.select_multiple_modifier||!1!==e.select_multiple_modifier&&b&&b[e.select_multiple_modifier+"Key"],g=!1!==e.select_range_modifier&&
b&&b[e.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==a[0]&&this.data.ui.last_selected.parent()[0]===a.parent()[0],f=this.is_selected(a),r=!0,q=this;if(c){if(e.disable_selecting_children&&d&&(a.parentsUntil(".jstree","li").children("a.jstree-clicked").length||a.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;r=!1;switch(!0){case g:this.data.ui.last_selected.addClass("jstree-last-selected");a=a[a.index()<this.data.ui.last_selected.index()?"nextUntil":
"prevUntil"](".jstree-last-selected").andSelf();-1==e.select_limit||a.length<e.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==q.data.ui.last_selected[0]&&q.deselect_node(this)}),f=!1,r=!0):r=!1;break;case f&&!d:this.deselect_all();f=!1;r=!0;break;case !f&&!d:if(-1==e.select_limit||0<e.select_limit)this.deselect_all(),r=!0;break;case f&&d:this.deselect_node(a);break;case !f&&d:if(-1==e.select_limit||this.data.ui.selected.length+
1<=e.select_limit)r=!0}}r&&!f&&(g||(this.data.ui.last_selected=a),a.children("a").addClass("jstree-clicked"),e.selected_parent_open&&a.parents(".jstree-closed").each(function(){q.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(a),this._fix_scroll(a.eq(0)),this.__callback({obj:a,e:b}))},_fix_scroll:function(c){var b=this.get_container()[0];b.scrollHeight>b.offsetHeight&&(c=this._get_node(c))&&-1!==c&&c.length&&c.is(":visible")&&(c=c.offset().top-this.get_container().offset().top,
0>c&&(b.scrollTop=b.scrollTop+c-1),c+this.data.core.li_height+(b.scrollWidth>b.offsetWidth?a:0)>b.offsetHeight&&(b.scrollTop+=c-b.offsetHeight+this.data.core.li_height+1+(b.scrollWidth>b.offsetWidth?a:0)))},deselect_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)&&(a.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(a),this.data.ui.last_selected.get(0)===a.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:a}))},
toggle_select:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)?this.deselect_node(a):this.select_node(a)},is_selected:function(a){return 0<=this.data.ui.selected.index(this._get_node(a))},get_selected:function(a){return a?c(a).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(a){a=a?c(a).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();a.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=
c([]);this.data.ui.last_selected=!1;this.__callback({obj:a})}}});c.jstree.defaults.plugins.push("ui")})(jQuery);(function(c){c.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",c.proxy(function(a,c){if(this._get_settings().crrm.move.open_onmove){var b=this;c.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){b.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",
check_move:function(a){return!0}}},_fn:{_show_input:function(a,b){a=this._get_node(a);var d=this._get_settings().core.rtl,f=this._get_settings().crrm.input_width_limit,k=a.children("ins").width(),l=a.find("> a:visible > ins").width()*a.find("> a:visible > ins").length,m=this.get_text(a),n=c("<div />",{css:{position:"absolute",top:"-200px",left:d?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),p=a.css("position","relative").append(c("<input />",{value:m,"class":"jstree-rename-input",css:{padding:"0",
border:"1px solid silver",position:"absolute",left:d?"auto":k+l+4+"px",right:d?k+l+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:c.proxy(function(){var c=a.children(".jstree-rename-input"),d=c.val();""===d&&(d=m);n.remove();c.remove();this.set_text(a,m);this.rename_node(a,d);b.call(this,a,d,m);a.css("position","")},this),keyup:function(a){a=a.keyCode||a.which;27==a?(this.value=m,this.blur()):13==a?this.blur():p.width(Math.min(n.text("pW"+
this.value).width(),f))},keypress:function(a){if(13==(a.keyCode||a.which))return!1}})).children(".jstree-rename-input");this.set_text(a,"");n.css({fontFamily:p.css("fontFamily")||"",fontSize:p.css("fontSize")||"",fontWeight:p.css("fontWeight")||"",fontStyle:p.css("fontStyle")||"",fontStretch:p.css("fontStretch")||"",fontVariant:p.css("fontVariant")||"",letterSpacing:p.css("letterSpacing")||"",wordSpacing:p.css("wordSpacing")||""});p.width(Math.min(n.text("pW"+p[0].value).width(),f))[0].select()},
rename:function(a){a=this._get_node(a);this.__rollback();var c=this.__callback;this._show_input(a,function(a,b,d){c.call(this,{obj:a,new_name:b,old_name:d})})},create:function(a,b,d,f,k){var l=this;(a=this._get_node(a))||(a=-1);this.__rollback();return this.create_node(a,b,d,function(a){var b=this._get_parent(a),e=c(a).index();f&&f.call(this,a);b.length&&b.hasClass("jstree-closed")&&this.open_node(b,!1,!0);k?l.__callback({obj:a,name:this.get_text(a),parent:b,position:e}):this._show_input(a,function(a,
c,d){l.__callback({obj:a,name:c,parent:b,position:e})})})},remove:function(a){a=this._get_node(a,!0);var c=this._get_parent(a),b=this._get_prev(a);this.__rollback();a=this.delete_node(a);!1!==a&&this.__callback({obj:a,prev:b,parent:c})},check_move:function(){return this.__call_old()&&this._get_settings().crrm.move.check_move.call(this,this._get_move())?!0:!1},move_node:function(a,c,b,d,f,l){var m=this._get_settings().crrm.move;if(!f)return"undefined"===typeof b&&(b=m.default_position),"inside"!==
b||m.default_position.match(/^(before|after)$/)||(b=m.default_position),this.__call_old(!0,a,c,b,d,!1,l);if(!0===m.always_copy||"multitree"===m.always_copy&&a.rt.get_index()!==a.ot.get_index())d=!0;this.__call_old(!0,a,c,b,d,!0,l)},cut:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},
paste:function(a){a=this._get_node(a);if(!a||!a.length)return!1;var c=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,a),this.data.crrm.ct_nodes=!1);this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,!1,!0);this.__callback({obj:a,nodes:c})}}})})(jQuery);(function(c){var a=[];c.jstree._themes=!1;c.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",
c.proxy(function(){var a=this._get_settings().themes;this.data.themes.dots=a.dots;this.data.themes.icons=a.icons;this.set_theme(a.theme,a.url)},this)).bind("loaded.jstree",c.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(b,d){if(!b)return!1;d||(d=c.jstree._themes+b+"/style.css");-1==c.inArray(d,a)&&(c.vakata.css.add_sheet({url:d}),
a.push(d));this.data.themes.theme!=b&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=b);this.get_container().addClass("jstree-"+b);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=
!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});c(function(){!1===c.jstree._themes&&c("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return c.jstree._themes=
this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});!1===c.jstree._themes&&(c.jstree._themes="themes/")});c.jstree.defaults.plugins.push("themes")})(jQuery);(function(c){var a=[];c.jstree.plugin("hotkeys",{__init:function(){if("undefined"===typeof c.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";c.each(this._get_settings().hotkeys,function(b,d){!1!==d&&-1==c.inArray(b,a)&&(c(document).bind("keydown",
b,function(a){a:{var d=c.jstree._focused(),g;if(d&&d.data&&d.data.hotkeys&&d.data.hotkeys.enabled&&(g=d._get_settings().hotkeys[b])){a=g.call(d,a);break a}a=void 0}return a}),a.push(b))});this.get_container().bind("lock.jstree",c.proxy(function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",c.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||
this.data.ui.last_selected||-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},
"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},left:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"ctrl+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"shift+left":function(){var a=this.data.ui.hovered||
this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},right:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"ctrl+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"shift+right":function(){var a=
this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();return!1},"ctrl+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},"shift+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},
f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled||(this.data.hotkeys.enabled=!0)},disable_hotkeys:function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1)}}})})(jQuery);(function(c){c.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(a,
c){c.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(a,c,b){var d=this;this.load_node_json(a,function(){d.__callback({obj:d._get_node(a)});c.call(this)},b)},_is_loaded:function(a){var b=this._get_settings().json_data;a=this._get_node(a);return-1==a||!a||!b.ajax&&!b.progressive_render&&!c.isFunction(b.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").length},refresh:function(a){a=
this._get_node(a);var b=this._get_settings().json_data;a&&-1!==a&&b.progressive_unload&&(c.isFunction(b.data)||b.ajax)&&a.removeData("jstree_children");return this.__call_old()},load_node_json:function(a,b,d){var f=this.get_settings().json_data,k,l=function(){};k=function(){};if((a=this._get_node(a))&&-1!==a&&(f.progressive_render||f.progressive_unload)&&!a.is(".jstree-open, .jstree-leaf")&&0===a.children("ul").children("li").length&&a.data("jstree_children")){if(k=this._parse_json(a.data("jstree_children"),
a))a.append(k),f.progressive_unload||a.removeData("jstree_children");this.clean_node(a);b&&b.call(this)}else{if(a&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !f.data&&!f.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(f.data):f.data.call(this,a,c.proxy(function(c){(c=this._parse_json(c,a))?(-1!==a&&a?(a.append(c).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(c.children()),
this.clean_node(a),b&&b.call(this)):(-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),f.correct_state&&this.correct_state(a)):f.correct_state&&this.get_container().children("ul").empty(),d&&d.call(this))},this));break;case !!f.data&&!f.ajax||!!f.data&&!!f.ajax&&(!a||-1===a):a&&-1!=a||((k=this._parse_json(f.data,a))?(this.get_container().children("ul").empty().append(k.children()),this.clean_node()):f.correct_state&&this.get_container().children("ul").empty());
b&&b.call(this);break;case !f.data&&!!f.ajax||!!f.data&&!!f.ajax&&a&&-1!==a:l=function(c,b,e){var k=this.get_settings().json_data.ajax.error;k&&k.call(this,c,b,e);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===b&&f.correct_state&&this.correct_state(a)):"success"===b&&f.correct_state&&this.get_container().children("ul").empty();d&&d.call(this)},k=function(d,g,k){var s=this.get_settings().json_data.ajax.success;s&&(d=s.call(this,
d,g,k)||d);if(""===d||d&&d.toString&&""===d.toString().replace(/^[\s\n]+$/,"")||!c.isArray(d)&&!c.isPlainObject(d))return l.call(this,k,g,"");(d=this._parse_json(d,a))?(-1!==a&&a?(a.append(d).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(d.children()),this.clean_node(a),b&&b.call(this)):-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),f.correct_state&&
(this.correct_state(a),b&&b.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),b&&b.call(this))},f.ajax.context=this,f.ajax.error=l,f.ajax.success=k,f.ajax.dataType||(f.ajax.dataType="json"),c.isFunction(f.ajax.url)&&(f.ajax.url=f.ajax.url.call(this,a)),c.isFunction(f.ajax.data)&&(f.ajax.data=f.ajax.data.call(this,a)),c.ajax(f.ajax)}}},_parse_json:function(a,b,d){var f=!1,k=this._get_settings(),l=k.json_data,m=k.core.html_titles,n;if(!a)return f;l.progressive_unload&&b&&-1!==
b&&b.data("jstree_children",f);if(c.isArray(a)){f=c();if(!a.length)return!1;k=0;for(l=a.length;k<l;k++)n=this._parse_json(a[k],b,!0),n.length&&(f=f.add(n))}else{"string"==typeof a&&(a={data:a});if(!a.data&&""!==a.data)return f;f=c("<li />");a.attr&&f.attr(a.attr);a.metadata&&f.data(a.metadata);a.state&&f.addClass("jstree-"+a.state);c.isArray(a.data)||(n=a.data,a.data=[],a.data.push(n));c.each(a.data,function(b,e){n=c("<a />");c.isFunction(e)&&(e=e.call(this,a));if("string"==typeof e)n.attr("href",
"#")[m?"html":"text"](e);else e.attr||(e.attr={}),e.attr.href||(e.attr.href="#"),n.attr(e.attr)[m?"html":"text"](e.title),e.language&&n.addClass(e.language);n.prepend("<ins class='jstree-icon'>&#160;</ins>");!e.icon&&a.icon&&(e.icon=a.icon);e.icon&&(-1===e.icon.indexOf("/")?n.children("ins").addClass(e.icon):n.children("ins").css("background","url('"+e.icon+"') center center no-repeat"));f.append(n)});f.prepend("<ins class='jstree-icon'>&#160;</ins>");a.children&&(l.progressive_render&&"open"!==a.state?
f.addClass("jstree-closed").data("jstree_children",a.children):(l.progressive_unload&&f.data("jstree_children",a.children),c.isArray(a.children)&&a.children.length&&(n=this._parse_json(a.children,b,!0),n.length&&(b=c("<ul />"),b.append(n),f.append(b)))))}d||(d=c("<ul />"),d.append(f),f=d);return f},get_json:function(a,b,d,f){var k=[],l=this._get_settings(),m=this,n,p,s,r,q,w;(a=this._get_node(a))&&-1!==a||(a=this.get_container().find("> ul > li"));b=c.isArray(b)?b:["id","class"];!f&&this.data.types&&
b.push(l.types.type_attr);d=c.isArray(d)?d:[];a.each(function(){s=c(this);n={data:[]};b.length&&(n.attr={});c.each(b,function(a,c){(p=s.attr(c))&&p.length&&p.replace(/jstree[^ ]*/ig,"").length&&(n.attr[c]=(" "+p).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))});s.hasClass("jstree-open")&&(n.state="open");s.hasClass("jstree-closed")&&(n.state="closed");s.data()&&(n.metadata=s.data());r=s.children("a");r.each(function(){q=c(this);d.length||-1!==c.inArray("languages",
l.plugins)||q.children("ins").get(0).style.backgroundImage.length||q.children("ins").get(0).className&&q.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(w=!1,-1!==c.inArray("languages",l.plugins)&&c.isArray(l.languages)&&l.languages.length&&c.each(l.languages,function(a,c){if(q.hasClass(c))return w=c,!1}),p={attr:{},title:m.get_text(q,w)},c.each(d,function(a,c){p.attr[c]=(" "+(q.attr(c)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}),
-1!==c.inArray("languages",l.plugins)&&c.isArray(l.languages)&&l.languages.length&&c.each(l.languages,function(a,c){if(q.hasClass(c))return p.language=c,!0}),q.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(p.icon=q.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")),q.children("ins").get(0).style.backgroundImage.length&&(p.icon=q.children("ins").get(0).style.backgroundImage.replace("url(",
"").replace(")",""))):p=m.get_text(q);1<r.length?n.data.push(p):n.data=p});s=s.find("> ul > li");s.length&&(n.children=m.get_json(s,b,d,!0));k.push(n)});return k}}})})(jQuery);(function(c){c.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(a){var b=this._get_settings().languages,d=!1,f=".jstree-"+this.get_index()+" a";if(!c.isArray(b)||0===b.length)return!1;if(-1==c.inArray(a,b))if(b[a])a=b[a];else return!1;if(a==this.data.languages.current_language)return!0;
d=c.vakata.css.get_css(f+"."+this.data.languages.current_language,!1,this.data.languages.language_css);!1!==d&&(d.style.display="none");d=c.vakata.css.get_css(f+"."+a,!1,this.data.languages.language_css);!1!==d&&(d.style.display="");this.data.languages.current_language=a;this.__callback(a);return!0},get_lang:function(){return this.data.languages.current_language},_get_string:function(a,b){var d=this._get_settings().languages,f=this._get_settings().core.strings;c.isArray(d)&&d.length&&(b=b&&-1!=c.inArray(b,
d)?b:this.data.languages.current_language);return f[b]&&f[b][a]?f[b][a]:f[a]?f[a]:a},get_text:function(a,b){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var d=this._get_settings().languages,f=this._get_settings().core.html_titles;c.isArray(d)&&d.length?(b=b&&-1!=c.inArray(b,d)?b:this.data.languages.current_language,a=a.children("a."+b)):a=a.children("a:eq(0)");if(f)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];
return a.nodeValue},set_text:function(a,b,d){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var f=this._get_settings().languages,k=this._get_settings().core.html_titles;c.isArray(f)&&f.length?(d=d&&-1!=c.inArray(d,f)?d:this.data.languages.current_language,a=a.children("a."+d)):a=a.children("a:eq(0)");if(k)return f=a.children("INS").clone(),a.html(b).prepend(f),this.__callback({obj:a,name:b,lang:d}),!0;a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,
name:b,lang:d});return a.nodeValue=b},_load_css:function(){var a=this._get_settings().languages,b="/* languages css */",d=".jstree-"+this.get_index()+" a",f;if(c.isArray(a)&&a.length){this.data.languages.current_language=a[0];for(f=0;f<a.length;f++)b+=d+"."+a[f]+" {",a[f]!=this.data.languages.current_language&&(b+=" display:none; "),b+=" } ";this.data.languages.language_css=c.vakata.css.add_sheet({str:b,title:"jstree-languages"})}},create_node:function(a,b,d,f){return this.__call_old(!0,a,b,d,function(a){var b=
this._get_settings().languages,e=a.children("a"),d;if(c.isArray(b)&&b.length){for(d=0;d<b.length;d++)e.is("."+b[d])||a.append(e.eq(0).clone().removeClass(b.join(" ")).addClass(b[d]));e.not("."+b.join(", .")).remove()}f&&f.call(this,a)})}}})})(jQuery);(function(c){c.jstree.plugin("cookies",{__init:function(){if("undefined"===typeof c.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";var a=this._get_settings().cookies,b;a.save_loaded&&(b=c.cookie(a.save_loaded))&&b.length&&(this.data.core.to_load=
b.split(","));a.save_opened&&(b=c.cookie(a.save_opened))&&b.length&&(this.data.core.to_open=b.split(","));a.save_selected&&(b=c.cookie(a.save_selected))&&b.length&&this.data.ui&&(this.data.ui.to_select=b.split(","));this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",c.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",c.proxy(function(a){this._get_settings().cookies.auto_save&&this.save_cookie((a.handleObj.namespace+
a.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(a){if(!this.data.core.refreshing){var b=this._get_settings().cookies;if(a)switch(a){case "open_node":case "close_node":b.save_opened&&(this.save_opened(),c.cookie(b.save_opened,this.data.core.to_open.join(","),b.cookie_options));b.save_loaded&&(this.save_loaded(),c.cookie(b.save_loaded,this.data.core.to_load.join(","),
b.cookie_options));break;case "select_node":case "deselect_node":b.save_selected&&this.data.ui&&(this.save_selected(),c.cookie(b.save_selected,this.data.ui.to_select.join(","),b.cookie_options))}else b.save_loaded&&(this.save_loaded(),c.cookie(b.save_loaded,this.data.core.to_load.join(","),b.cookie_options)),b.save_opened&&(this.save_opened(),c.cookie(b.save_opened,this.data.core.to_open.join(","),b.cookie_options)),b.save_selected&&this.data.ui&&(this.save_selected(),c.cookie(b.save_selected,this.data.ui.to_select.join(","),
b.cookie_options))}}}})})(jQuery);(function(c){c.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",c.proxy(function(a,c){var b=this._get_node(c.rslt.obj),b=-1===b?this.get_container().children("ul"):b.children("ul");this.sort(b)},this)).bind("rename_node.jstree create_node.jstree create.jstree",c.proxy(function(a,c){this.sort(c.rslt.obj.parent())},this)).bind("move_node.jstree",c.proxy(function(a,c){var b=-1==c.rslt.np?this.get_container():c.rslt.np;this.sort(b.children("ul"))},
this))},defaults:function(a,c){return this.get_text(a)>this.get_text(c)?1:-1},_fn:{sort:function(a){var b=this._get_settings().sort,d=this;a.append(c.makeArray(a.children("li")).sort(c.proxy(b,d)));a.find("> li > ul").each(function(){d.sort(c(this))});this.clean_node(a)}}})})(jQuery);(function(c){var a=!1,b=!1,d=!1,f=!1,k=!1,l=!1,m=!1,n=!1,p=!1;c.vakata.dnd={is_down:!1,is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(a,b,
e){c.vakata.dnd.is_drag&&c.vakata.dnd.drag_stop({});try{a.currentTarget.unselectable="on",a.currentTarget.onselectstart=function(){return!1},a.currentTarget.style&&(a.currentTarget.style.MozUserSelect="none")}catch(d){}c.vakata.dnd.init_x=a.pageX;c.vakata.dnd.init_y=a.pageY;c.vakata.dnd.user_data=b;c.vakata.dnd.is_down=!0;c.vakata.dnd.helper=c("<div id='vakata-dragged' />").html(e);c(document).bind("mousemove",c.vakata.dnd.drag);c(document).bind("mouseup",c.vakata.dnd.drag_stop);return!1},drag:function(a){if(c.vakata.dnd.is_down){if(!c.vakata.dnd.is_drag)if(5<
Math.abs(a.pageX-c.vakata.dnd.init_x)||5<Math.abs(a.pageY-c.vakata.dnd.init_y))c.vakata.dnd.helper.appendTo("body"),c.vakata.dnd.is_drag=!0,c(document).triggerHandler("drag_start.vakata",{event:a,data:c.vakata.dnd.user_data});else return;if("mousemove"===a.type){var b=c(document),e=c(window),d=b.scrollTop(),f=b.scrollLeft(),g=c.jstree._focused();null!=g&&(g=g._get_settings().dnd.scroll_parent)&&(b=e=g,d=f=0);20>a.pageY-d?(l&&"down"===m&&(clearInterval(l),l=!1),l||(m="up",l=setInterval(function(){b.scrollTop(b.scrollTop()-
c.vakata.dnd.scroll_spd)},150))):l&&"up"===m&&(clearInterval(l),l=!1);20>e.height()-(a.pageY-d)?(l&&"up"===m&&(clearInterval(l),l=!1),l||(m="down",l=setInterval(function(){b.scrollTop(b.scrollTop()+c.vakata.dnd.scroll_spd)},150))):l&&"down"===m&&(clearInterval(l),l=!1);20>a.pageX-f?(k&&"right"===n&&(clearInterval(k),k=!1),k||(n="left",k=setInterval(function(){b.scrollLeft(b.scrollLeft()-c.vakata.dnd.scroll_spd)},150))):k&&"left"===n&&(clearInterval(k),k=!1);20>e.width()-(a.pageX-f)?(k&&"left"===n&&
(clearInterval(k),k=!1),k||(n="right",k=setInterval(function(){b.scrollLeft(b.scrollLeft()+c.vakata.dnd.scroll_spd)},150))):k&&"right"===n&&(clearInterval(k),k=!1)}c.vakata.dnd.helper.css({left:a.pageX+c.vakata.dnd.helper_left+"px",top:a.pageY+c.vakata.dnd.helper_top+"px"});c(document).triggerHandler("drag.vakata",{event:a,data:c.vakata.dnd.user_data})}},drag_stop:function(a){k&&clearInterval(k);l&&clearInterval(l);c(document).unbind("mousemove",c.vakata.dnd.drag);c(document).unbind("mouseup",c.vakata.dnd.drag_stop);
c(document).triggerHandler("drag_stop.vakata",{event:a,data:c.vakata.dnd.user_data});c.vakata.dnd.helper.remove();c.vakata.dnd.init_x=0;c.vakata.dnd.init_y=0;c.vakata.dnd.user_data={};c.vakata.dnd.is_down=!1;c.vakata.dnd.is_drag=!1}};c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",title:"vakata"})});c.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,
after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",c.proxy(function(b){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(this.data.themes&&(d.attr("class","jstree-"+this.data.themes.theme),f&&f.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),b.currentTarget===b.target&&c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&
c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==b.target&&(b=c.jstree._reference(b.target),b.data.dnd.foreign?(b=b._get_settings().dnd.drag_check.call(this,{o:a,r:b.get_container(),is_root:!0}),!0!==b&&!0!==b.inside&&!0!==b.before&&!0!==b.after||c.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(b.prepare_move(a,b.get_container(),"last"),b.check_move()&&c.vakata.dnd.helper.children("ins").attr("class","jstree-ok"))))},this)).bind("mouseup.jstree",c.proxy(function(b){if(c.vakata.dnd.is_drag&&
c.vakata.dnd.user_data.jstree&&b.currentTarget===b.target&&c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==b.target){var e=c.jstree._reference(b.currentTarget);e.data.dnd.foreign?(b=e._get_settings().dnd.drag_check.call(this,{o:a,r:e.get_container(),is_root:!0}),!0!==b&&!0!==b.inside&&!0!==b.before&&!0!==b.after||e._get_settings().dnd.drag_finish.call(this,{o:a,r:e.get_container(),is_root:!0})):e.move_node(a,e.get_container(),
"last",b[e._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",c.proxy(function(a){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&
c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",c.proxy(function(a){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree){var b=this.get_container()[0];a.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(c.proxy(function(){this.scrollLeft+=c.vakata.dnd.scroll_spd},b),100)):a.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=
setInterval(c.proxy(function(){this.scrollLeft-=c.vakata.dnd.scroll_spd},b),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);a.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop+=c.vakata.dnd.scroll_spd},b),100)):a.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop-=c.vakata.dnd.scroll_spd},
b),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&d&&f&&(d.hide(),f.hide(),c(document).triggerHandler("dnd_hide.vakata",{inst:this}))},this)).delegate("a","mousedown.jstree",c.proxy(function(a){if(1===a.which)return this.start_drag(a.currentTarget,a),!1},this)).delegate("a","mouseenter.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&this.dnd_enter(a.currentTarget)},
this)).delegate("a","mousemove.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(b&&b.length&&b.children("a")[0]===a.currentTarget||this.dnd_enter(a.currentTarget),"undefined"===typeof this.data.dnd.off.top&&(this.data.dnd.off=c(a.target).offset()),this.data.dnd.w=(a.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,0>this.data.dnd.w&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",c.proxy(function(a){if(c.vakata.dnd.is_drag&&
c.vakata.dnd.user_data.jstree){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;d&&d.hide();f&&f.hide();c(document).triggerHandler("dnd_hide.vakata",{inst:this});this.data.dnd.mto=setTimeout(function(c){return function(){c.dnd_leave(a)}}(this),0)}},this)).delegate("a","mouseup.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&this.dnd_finish(a)},this));c(document).bind("drag_stop.vakata",c.proxy(function(){this.data.dnd.to1&&
clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);this.data.dnd.i1&&clearInterval(this.data.dnd.i1);this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;d&&d.css({top:"-2000px"});f&&f.css({top:"-2000px"})},
this)).bind("drag_start.vakata",c.proxy(function(a,b){if(b.data.jstree){var e=c(b.event.target);e.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(e)}},this));var k=this._get_settings().dnd;k.drag_target&&c(document).delegate(k.drag_target,"mousedown.jstree-"+this.get_index(),c.proxy(function(b){a=b.target;c.vakata.dnd.drag_start(b,{jstree:!0,obj:b.target},"<ins class='jstree-icon'></ins>"+c(b.target).text());this.data.themes&&(d&&d.attr("class","jstree-"+this.data.themes.theme),
f&&f.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var e=this.get_container();this.data.dnd.cof=e.offset();this.data.dnd.cw=parseInt(e.width(),10);this.data.dnd.ch=parseInt(e.height(),10);this.data.dnd.foreign=!0;b.preventDefault()},this));k.drop_target&&c(document).delegate(k.drop_target,"mouseenter.jstree-"+this.get_index(),c.proxy(function(b){this.data.dnd.active&&
this._get_settings().dnd.drop_check.call(this,{o:a,r:c(b.target),e:b})&&c.vakata.dnd.helper.children("ins").attr("class","jstree-ok")},this)).delegate(k.drop_target,"mouseleave.jstree-"+this.get_index(),c.proxy(function(a){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(k.drop_target,"mouseup.jstree-"+this.get_index(),c.proxy(function(b){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,
{o:a,r:c(b.target),e:b})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(a){return!0},drop_finish:c.noop,drag_target:".jstree-draggable",drag_finish:c.noop,drag_check:function(a){return{after:!1,before:!1,inside:!0}},scroll_parent:!1},_fn:{dnd_prepare:function(){if(b&&b.length){this.data.dnd.off=b.offset();this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+b.width());if(this.data.dnd.foreign){var c=
this._get_settings().dnd.drag_check.call(this,{o:a,r:b});this.data.dnd.after=c.after;this.data.dnd.before=c.before;this.data.dnd.inside=c.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(a,b,"before");this.data.dnd.before=this.check_move();this.prepare_move(a,b,"after");this.data.dnd.after=this.check_move();this._is_loaded(b)?(this.prepare_move(a,b,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=!0;return this.dnd_show()}},
dnd_show:function(){if(this.data.dnd.prepared){var a=["before","inside","after"],b=!1,e=this._get_settings().core.rtl,a=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];c.each(a,c.proxy(function(a,e){if(this.data.dnd[e])return c.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),b=e,!1},this));!1===
b&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");a=e?this.data.dnd.off.right-18:this.data.dnd.off.left+10;switch(b){case "before":d.css({left:a+"px",top:this.data.dnd.off.top-6+"px"}).show();f&&f.css({left:a+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":d.css({left:a+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();f&&f.css({left:a+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":d.css({left:a+
(e?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();f&&f.hide();break;default:d.hide(),f&&f.hide()}c(document).triggerHandler("dnd_show.vakata",{data:this._get_move(),position:b,inst:this});return p=b}},dnd_open:function(){this.data.dnd.to2=!1;this.open_node(b,c.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(k){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:a,r:b,p:p}):
(this.dnd_prepare(),this.move_node(a,b,p,k[this._get_settings().dnd.copy_modifier+"Key"]));b=a=!1;d.hide();f&&f.hide();c(document).triggerHandler("dnd_hide.vakata",{inst:this})},dnd_enter:function(a){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=!1);var d=this._get_settings().dnd;this.data.dnd.prepared=!1;b=this._get_node(a);d.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(c.proxy(this.dnd_prepare,this),d.check_timeout)):this.dnd_prepare();
d.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),b&&b.length&&b.hasClass("jstree-closed")&&(this.data.dnd.to2=setTimeout(c.proxy(this.dnd_open,this),d.open_timeout))):b&&b.length&&b.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(a){this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");d.hide();f&&f.hide();c(document).triggerHandler("dnd_hide.vakata",{inst:this});b&&b[0]===a.target.parentNode&&
(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(b,e){a=this._get_node(b);this.data.ui&&this.is_selected(a)&&(a=this._get_node(null,!0));var k=1<a.length?this._get_string("multiple_selection"):this.get_text(a),l=this.get_container();this._get_settings().core.html_titles||(k=k.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"));c.vakata.dnd.drag_start(e,{jstree:!0,obj:a},"<ins class='jstree-icon'></ins>"+
k);this.data.themes&&(d&&d.attr("class","jstree-"+this.data.themes.theme),f&&f.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=l.offset();this.data.dnd.cw=parseInt(l.width(),10);this.data.dnd.ch=parseInt(l.height(),10);this.data.dnd.active=!0}}});c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});d=c("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(a){d.hide();f.hide();a.preventDefault();a.stopImmediatePropagation();return!1}).appendTo("body");f=c("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(a){if(b&&b.length)return b.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",function(a){var k=c(a.relatedTarget);if((k.is(".jstree")||0===k.closest(".jstree").length)&&
b&&b.length)return b.children("a").trigger(a),d.hide(),f.hide(),a.preventDefault(),a.stopImmediatePropagation(),!1}).appendTo("body");c(document).bind("drag_start.vakata",function(a,c){c.data.jstree&&(d.show(),f&&f.show())});c(document).bind("drag_stop.vakata",function(a,c){c.data.jstree&&(d.hide(),f&&f.hide())})})})(jQuery);(function(c){c.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;this.data.ui&&this.data.checkbox.noui&&(this.select_node=
this.deselect_node=this.deselect_all=c.noop,this.get_selected=this.get_checked);this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",c.proxy(function(a,c){this._prepare_checkboxes(c.rslt.obj)},this)).bind("loaded.jstree",c.proxy(function(a){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",c.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return a.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(1E4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,c){c.checked&&this.check_node(a,!1)},_prepare_checkboxes:function(a){a=a&&-1!=a?this._get_node(a):this.get_container().find("> ul > li");if(!1!==a){var b,d=this,f,k=this._get_settings().checkbox.two_state,l=this._get_settings().checkbox.real_checkboxes,m=this._get_settings().checkbox.real_checkboxes_names;a.each(function(){f=c(this);b=f.is("li")&&(f.hasClass("jstree-checked")||l&&f.children(":checked").length)?"jstree-checked":"jstree-unchecked";f.find("li").andSelf().each(function(){var a=
c(this),f;a.children("a"+(d.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(k?"jstree-unchecked":b);l&&(a.children(":checkbox").length?a.children(":checkbox").addClass("jstree-real-checkbox"):(f=m.call(d,a),a.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+f[0]+"' name='"+f[0]+"' value='"+f[1]+"' />")));k?(a.hasClass("jstree-checked")||a.children(":checked").length)&&
a.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===b||a.hasClass("jstree-checked")||a.children(":checked").length)&&a.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})});k||a.find(".jstree-checked").parent().parent().each(function(){d._repair_state(this)})}},change_state:function(a,b){a=this._get_node(a);var d=!1,f=this._get_settings().checkbox.real_checkboxes;if(!a||-1===a)return!1;b=!1===b||!0===b?b:a.hasClass("jstree-checked");
if(this._get_settings().checkbox.two_state)b?(a.removeClass("jstree-checked").addClass("jstree-unchecked"),f&&a.children(":checkbox").prop("checked",!1)):(a.removeClass("jstree-unchecked").addClass("jstree-checked"),f&&a.children(":checkbox").prop("checked",!0));else{if(b){d=a.find("li").andSelf();if(!d.filter(".jstree-checked, .jstree-undetermined").length)return!1;d.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");f&&d.children(":checkbox").prop("checked",!1)}else{d=
a.find("li").andSelf();if(!d.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;d.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");f&&d.children(":checkbox").prop("checked",!0);this.data.ui&&(this.data.ui.last_selected=a);this.data.checkbox.last_selected=a}a.parentsUntil(".jstree","li").each(function(){var a=c(this);if(b){if(a.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
f&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;a.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");f&&a.children(":checkbox").prop("checked",!1)}else{if(a.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),f&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",
!1),!1;a.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");f&&a.children(":checkbox").prop("checked",!0)}})}this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked());this.__callback(a);return!0},check_node:function(a){if(this.change_state(a,!1)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var c=this;a.parents(".jstree-closed").each(function(){c.open_node(this,!1,!0)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,
!0)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!1)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!0)});this.__callback()},is_checked:function(a){a=this._get_node(a);
return a.length?a.is(".jstree-checked"):!1},get_checked:function(a,c){a=a&&-1!==a?this._get_node(a):this.get_container();return c||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(a,c){a=a&&-1!==a?this._get_node(a):this.get_container();return c||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length)if(this._get_settings().checkbox.two_state)a.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var c=this._get_settings().checkbox.real_checkboxes,
b=a.find("> ul > .jstree-checked").length,d=a.find("> ul > .jstree-undetermined").length,f=a.find("> ul > li").length;0===f?a.hasClass("jstree-undetermined")&&this.change_state(a,!1):0===b&&0===d?this.change_state(a,!0):b===f?this.change_state(a,!1):(a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),c&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var a=
this,b=this.data.ui.to_select,b=c.map(c.makeArray(b),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();c.each(b,function(c,b){a.check_node(b)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+this.id)})}}});
c(function(){c.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(c){c.vakata.xslt=function(a,b,e){var d="",f;if(document.recalc)return f=document.createElement("xml"),d=document.createElement("xml"),f.innerHTML=a,d.innerHTML=b,c("body").append(f).append(d),setTimeout(function(a,b,e){return function(){e.call(null,a.transformNode(b.XMLDocument));setTimeout(function(a,b){return function(){c(a).remove();c(b).remove()}}(a,b),200)}}(f,d,
e),100),!0;"undefined"!==typeof window.DOMParser&&"undefined"!==typeof window.XMLHttpRequest&&"undefined"===typeof window.XSLTProcessor&&(a=(new DOMParser).parseFromString(a,"text/xml"),b=(new DOMParser).parseFromString(b,"text/xml"));if("undefined"!==typeof window.DOMParser&&"undefined"!==typeof window.XMLHttpRequest&&"undefined"!==typeof window.XSLTProcessor){f=new XSLTProcessor;d=c.isFunction(f.transformDocument)?"undefined"!==typeof window.XMLSerializer:!0;if(!d)return!1;a=(new DOMParser).parseFromString(a,
"text/xml");b=(new DOMParser).parseFromString(b,"text/xml");c.isFunction(f.transformDocument)?(d=document.implementation.createDocument("","",null),f.transformDocument(a,b,d,null),e.call(null,(new XMLSerializer).serializeToString(d))):(f.importStylesheet(b),d=f.transformToFragment(a,document),e.call(null,c("<div />").append(d).html()));return!0}return!1};var a={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',
flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},
b=function(a){return a.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};c.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(a,c,b){var e=this;this.load_node_xml(a,function(){e.__callback({obj:e._get_node(a)});c.call(this)},b)},_is_loaded:function(a){var b=this._get_settings().xml_data;a=this._get_node(a);return-1==a||
!a||!b.ajax&&!c.isFunction(b.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_xml:function(a,b,e){var d=this.get_settings().xml_data,f=function(){},n=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !d.data&&!d.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(d.data):d.data.call(this,a,c.proxy(function(e){this.parse_xml(e,c.proxy(function(e){e&&(e=
e.replace(/ ?xmlns="[^"]*"/ig,""),10<e.length?(e=c(e),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(e),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()),d.clean_node&&this.clean_node(a),b&&b.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),d.correct_state&&(this.correct_state(a),b&&b.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),
b&&b.call(this)))},this))},this));break;case !!d.data&&!d.ajax||!!d.data&&!!d.ajax&&(!a||-1===a):a&&-1!=a||this.parse_xml(d.data,c.proxy(function(e){e?(e=e.replace(/ ?xmlns="[^"]*"/ig,""),10<e.length&&(e=c(e),this.get_container().children("ul").empty().append(e.children()),d.clean_node&&this.clean_node(a),b&&b.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),b&&b.call(this))},this));break;case !d.data&&!!d.ajax||!!d.data&&!!d.ajax&&a&&-1!==a:f=function(c,b,f){var h=this.get_settings().xml_data.ajax.error;
h&&h.call(this,c,b,f);-1!==a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===b&&d.correct_state&&this.correct_state(a)):"success"===b&&d.correct_state&&this.get_container().children("ul").empty();e&&e.call(this)},n=function(e,k,n){e=n.responseText;var q=this.get_settings().xml_data.ajax.success;q&&(e=q.call(this,e,k,n)||e);if(""===e||e&&e.toString&&""===e.toString().replace(/^[\s\n]+$/,""))return f.call(this,n,k,"");this.parse_xml(e,
c.proxy(function(e){e&&(e=e.replace(/ ?xmlns="[^"]*"/ig,""),10<e.length?(e=c(e),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(e),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()),d.clean_node&&this.clean_node(a),b&&b.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),d.correct_state&&(this.correct_state(a),b&&b.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),
b&&b.call(this)))},this))},d.ajax.context=this,d.ajax.error=f,d.ajax.success=n,d.ajax.dataType||(d.ajax.dataType="xml"),c.isFunction(d.ajax.url)&&(d.ajax.url=d.ajax.url.call(this,a)),c.isFunction(d.ajax.data)&&(d.ajax.data=d.ajax.data.call(this,a)),c.ajax(d.ajax)}},parse_xml:function(b,e){var d=this._get_settings().xml_data;c.vakata.xslt(b,a[d.xsl],e)},get_xml:function(a,d,f,l,m){var n="",p=this._get_settings(),s=this,r,q,w,v,u;a||(a="flat");m||(m=0);(d=this._get_node(d))&&-1!==d||(d=this.get_container().find("> ul > li"));
f=c.isArray(f)?f:["id","class"];!m&&this.data.types&&-1===c.inArray(p.types.type_attr,f)&&f.push(p.types.type_attr);l=c.isArray(l)?l:[];m||(p.xml_data.get_include_preamble&&(n+='<?xml version="1.0" encoding="UTF-8"?>'),n+="<root>");d.each(function(){n+="<item";w=c(this);c.each(f,function(a,c){var d=w.attr(c);p.xml_data.get_skip_empty&&"undefined"===typeof d||(n+=" "+c+'="'+b((" "+(d||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"')});w.hasClass("jstree-open")&&
(n+=' state="open"');w.hasClass("jstree-closed")&&(n+=' state="closed"');"flat"===a&&(n+=' parent_id="'+b(m)+'"');n+=">";n+="<content>";v=w.children("a");v.each(function(){r=c(this);u=!1;n+="<name";-1!==c.inArray("languages",p.plugins)&&c.each(p.languages,function(a,c){if(r.hasClass(c))return n+=' lang="'+b(c)+'"',u=c,!1});l.length&&c.each(l,function(a,c){var d=r.attr(c);p.xml_data.get_skip_empty&&"undefined"===typeof d||(n+=" "+c+'="'+b((" "+d||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,
"").replace(/ $/,""))+'"')});r.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(n+=' icon="'+b(r.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');r.children("ins").get(0).style.backgroundImage.length&&(n+=' icon="'+b(r.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"');n+=">";n+="<![CDATA["+s.get_text(r,u)+"]]\x3e";
n+="</name>"});n+="</content>";q=w[0].id||!0;w=w.find("> ul > li");q=w.length?s.get_xml(a,w,f,l,q):"";"nest"==a&&(n+=q);n+="</item>";"flat"==a&&(n+=q)});m||(n+="</root>");return n}}})})(jQuery);(function(c){c.expr[":"].jstree_contains=function(a,c,b){return 0<=(a.textContent||a.innerText||"").toLowerCase().indexOf(b[3].toLowerCase())};c.expr[":"].jstree_title_contains=function(a,c,b){return 0<=(a.getAttribute("title")||"").toLowerCase().indexOf(b[3].toLowerCase())};c.jstree.plugin("search",{__init:function(){this.data.search.str=
"";this.data.search.result=c();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(a,b){c(this).children("ul").find("li").hide().removeClass("jstree-last");b.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){c(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){c(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",
show_only_matches:!1},_fn:{search:function(a,b){if(""===c.trim(a))this.clear_search();else{var d=this.get_settings().search,f=this,k=function(){};this.data.search.str=a;if(!b&&!1!==d.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length){this.search.supress_callback=!0;k=function(a,c,b){var e=this.get_settings().search.ajax.success;e&&(a=e.call(this,a,c,b)||a);this.data.search.to_open=a;this._search_open()};d.ajax.context=this;d.ajax.error=function(){};d.ajax.success=
k;c.isFunction(d.ajax.url)&&(d.ajax.url=d.ajax.url.call(this,a));c.isFunction(d.ajax.data)&&(d.ajax.data=d.ajax.data.call(this,a));d.ajax.data||(d.ajax.data={search_string:a});if(!d.ajax.dataType||/^json/.exec(d.ajax.dataType))d.ajax.dataType="json";c.ajax(d.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+d.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){f.open_node(this,
!1,!0)}),this.__callback({nodes:this.data.search.result,str:a})}},clear_search:function(a){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=c()},_search_open:function(a){var b=this;a=!0;var d=[],f=[];this.data.search.to_open.length&&(c.each(this.data.search.to_open,function(a,b){if("#"==b)return!0;c(b).length&&c(b).is(".jstree-closed")?d.push(b):f.push(b)}),d.length&&(this.data.search.to_open=f,c.each(d,function(a,c){b.open_node(c,
function(){b._search_open(!0)})}),a=!1));a&&this.search(this.data.search.str,!0)}}})})(jQuery);(function(c){c.vakata.context={hide_on_mouseleave:!1,cnt:c("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(a,b,d,f,k,l,m){c.vakata.context.rtl=!!m;if(a=c.vakata.context.parse(a)){c.vakata.context.vis=!0;c.vakata.context.tgt=b;c.vakata.context.par=l||b||null;c.vakata.context.data=k||null;c.vakata.context.cnt.html(a).css({visibility:"hidden",display:"block",left:0,
top:0});if(c.vakata.context.hide_on_mouseleave)c.vakata.context.cnt.one("mouseleave",function(a){c.vakata.context.hide()});k=c.vakata.context.cnt.height();l=c.vakata.context.cnt.width();d+l>c(document).width()&&(d=c(document).width()-(l+5),c.vakata.context.cnt.find("li > ul").addClass("right"));f+k>c(document).height()&&(f-=k+b[0].offsetHeight,c.vakata.context.cnt.find("li > ul").addClass("bottom"));c.vakata.context.cnt.css({left:d,top:f}).find("li:has(ul)").bind("mouseenter",function(a){a=c(document).width();
var b=c(document).height(),e=c(this).children("ul").show();a!==c(document).width()&&e.toggleClass("right");b!==c(document).height()&&e.toggleClass("bottom")}).bind("mouseleave",function(a){c(this).children("ul").hide()}).end().css({visibility:"visible"}).show();c(document).triggerHandler("context_show.vakata")}},hide:function(){c.vakata.context.vis=!1;c.vakata.context.cnt.attr("class","").css({visibility:"hidden"});c(document).triggerHandler("context_hide.vakata")},parse:function(a,b){if(!a)return!1;
var d="",f=!1,k=!0;b||(c.vakata.context.func={});d+="<ul>";c.each(a,function(a,b){if(!b)return!0;c.vakata.context.func[a]=b.action;!k&&b.separator_before&&(d+="<li class='vakata-separator vakata-separator-before'></li>");k=!1;d+="<li class='"+(b._class||"")+(b._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";b.icon&&-1===b.icon.indexOf("/")&&(d+=" class='"+b.icon+"' ");b.icon&&-1!==b.icon.indexOf("/")&&(d+=" style='background:url("+b.icon+") center center no-repeat;' ");d+=">&#160;</ins><a href='#' rel='"+
a+"'>";b.submenu&&(d+="<span style='float:"+(c.vakata.context.rtl?"left":"right")+";'>&raquo;</span>");d+=b.label+"</a>";b.submenu&&(f=c.vakata.context.parse(b.submenu,!0))&&(d+=f);d+="</li>";b.separator_after&&(d+="<li class='vakata-separator vakata-separator-after'></li>",k=!0)});d=d.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");d+="</ul>";c(document).triggerHandler("context_parse.vakata");return 10<d.length?d:!1},exec:function(a){return c.isFunction(c.vakata.context.func[a])?
(c.vakata.context.func[a].call(c.vakata.context.data,c.vakata.context.par),!0):!1}};c(function(){c.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; } #vakata-contextmenu ul { min-width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});c.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(a){!c(this).parent().hasClass("jstree-contextmenu-disabled")&&c.vakata.context.exec(c(this).attr("rel"))?c.vakata.context.hide():c(this).blur()}).delegate("a","mouseover",function(){c.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");c(document).bind("mousedown",function(a){c.vakata.context.vis&&!c.contains(c.vakata.context.cnt[0],a.target)&&
c.vakata.context.hide()});"undefined"!==typeof c.hotkeys&&c(document).bind("keydown","up",function(a){if(c.vakata.context.vis){var b=c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();b.length||(b=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());b.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","down",function(a){if(c.vakata.context.vis){var b=
c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();b.length||(b=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());b.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","right",function(a){c.vakata.context.vis&&(c.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","left",function(a){c.vakata.context.vis&&(c.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","esc",function(a){c.vakata.context.hide();a.preventDefault()}).bind("keydown","space",function(a){("input"!==a.target.tagName.toLowerCase()||"checkbox"!==a.target.type.toLowerCase()&&"search"!==a.target.type.toLowerCase())&&
a.preventDefault()})});c.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",c.proxy(function(a){a.preventDefault();c(a.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(a.currentTarget,a.pageX,a.pageY)},this)).delegate("a","click.jstree",c.proxy(function(a){this.data.contextmenu&&c.vakata.context.hide()},this)).bind("destroy.jstree",c.proxy(function(){this.data.contextmenu&&c.vakata.context.hide()},this));c(document).bind("context_hide.vakata",
c.proxy(function(){this.data.contextmenu=!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",
action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(a,b,d){a=this._get_node(a);var f=this.get_settings().contextmenu,k=a.children("a:visible:eq(0)"),l=!1,l=!1;f.select_node&&this.data.ui&&!this.is_selected(a)&&
(this.deselect_all(),this.select_node(a,!0));if(f.show_at_node||"undefined"===typeof b||"undefined"===typeof d)l=k.offset(),b=l.left,d=l.top+this.data.core.li_height;l=a.data("jstree")&&a.data("jstree").contextmenu?a.data("jstree").contextmenu:f.items;c.isFunction(l)&&(l=l.call(this,a));this.data.contextmenu=!0;c.vakata.context.show(l,k,b,d,this,a,this._get_settings().core.rtl);this.data.themes&&c.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(c){c.jstree.plugin("types",
{__init:function(){var a=this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",c.proxy(function(){var b=a.type_attr,d="",f=this;c.each(a.types,function(a,l){c.each(l,function(a,c){/^(max_depth|max_children|icon|valid_children)$/.test(a)||f.data.types.attach_to.push(a)});if(!l.icon)return!0;if(l.icon.image||l.icon.position)d="default"==a?d+(".jstree-"+f.get_index()+" a > .jstree-icon { "):d+(".jstree-"+f.get_index()+" li["+b+'="'+a+'"] > a > .jstree-icon { '),
l.icon.image&&(d+=" background-image:url("+l.icon.image+"); "),d=l.icon.position?d+(" background-position:"+l.icon.position+"; "):d+" background-position:0 0; ",d+="} "});""!==d&&c.vakata.css.add_sheet({str:d,title:"jstree-types"})},this)).bind("before.jstree",c.proxy(function(a,b){var d,f;if((d=(d=this._get_settings().types.use_data?this._get_node(b.args[0]):!1)&&-1!==d&&d.length?d.data("jstree"):!1)&&d.types&&!1===d.types[b.func]||-1!==c.inArray(b.func,this.data.types.attach_to)&&b.args[0]&&(b.args[0].tagName||
b.args[0].jquery)&&(d=this._get_settings().types.types,f=this._get_type(b.args[0]),(d[f]&&"undefined"!==typeof d[f][b.func]||d["default"]&&"undefined"!==typeof d["default"][b.func])&&!1===this._check(b.func,b.args[0])))return a.stopImmediatePropagation(),!1},this));b&&this.get_container().bind("load_node.jstree set_type.jstree",c.proxy(function(a,b){var d=b&&b.rslt&&b.rslt.obj&&-1!==b.rslt.obj?this._get_node(b.rslt.obj).parent():this.get_container_ul(),f=!1,l=this._get_settings().types;c.each(l.types,
function(a,c){c.icon&&(c.icon.image||c.icon.position)&&(f="default"===a?d.find("li > a > .jstree-icon"):d.find("li["+l.type_attr+"='"+a+"'] > a > .jstree-icon"),c.icon.image&&f.css("backgroundImage","url("+c.icon.image+")"),f.css("backgroundPosition",c.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,c){c.type&&this._get_settings().types.use_data&&
this.set_type(c.type,a)},_get_type:function(a){return(a=this._get_node(a))&&a.length?a.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(a,c){c=this._get_node(c);var b=c.length&&a?c.attr(this._get_settings().types.type_attr,a):!1;b&&this.__callback({obj:c,type:a});return b},_check:function(a,b,d){b=this._get_node(b);var f=!1,k=this._get_type(b),l=0,m=this,n=this._get_settings().types,p=!1;if(-1===b)if(n[a])f=n[a];else return;else{if(!1===k)return;(p=n.use_data?b.data("jstree"):
!1)&&p.types&&"undefined"!==typeof p.types[a]?f=p.types[a]:n.types[k]&&"undefined"!==typeof n.types[k][a]?f=n.types[k][a]:n.types["default"]&&"undefined"!==typeof n.types["default"][a]&&(f=n.types["default"][a])}c.isFunction(f)&&(f=f.call(this,b));"max_depth"===a&&-1!==b&&!1!==d&&-2!==n.max_depth&&0!==f&&b.children("a:eq(0)").parentsUntil(".jstree","li").each(function(c){if(-1!==n.max_depth&&0>=n.max_depth-(c+1))return f=0,!1;l=0===c?f:m._check(a,this,!1);if(-1!==l&&0>=l-(c+1))return f=0,!1;0<=l&&
(l-(c+1)<f||0>f)&&(f=l-(c+1));0<=n.max_depth&&(n.max_depth-(c+1)<f||0>f)&&(f=n.max_depth-(c+1))});return f},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),b=a.rt._get_settings().types,d=a.rt._check("max_children",a.cr),f=a.rt._check("max_depth",a.cr),k=a.rt._check("valid_children",a.cr),l=0,m=1;if("none"===k||c.isArray(k)&&a.ot&&a.ot._get_type&&(a.o.each(function(){if(-1===c.inArray(a.ot._get_type(this),k))return m=!1}),!1===m)||-2!==b.max_children&&-1!==d&&(l=-1===a.cr?
this.get_container().find("> ul > li").not(a.o).length:a.cr.find("> ul > li").not(a.o).length,l+a.o.length>d))return!1;if(-2!==b.max_depth&&-1!==f){m=0;if(0===f)return!1;if("undefined"===typeof a.o.d){for(b=a.o;0<b.length;)b=b.find("> ul > li"),m++;a.o.d=m}if(0>f-a.o.d)return!1}return!0},create_node:function(a,b,d,f,k,l){if(!l&&(k||this._is_loaded(a))){var m="string"==typeof b&&b.match(/^before|after$/i)&&-1!==a?this._get_parent(a):this._get_node(a),n=this._get_settings().types,p=this._check("max_children",
m),s=this._check("max_depth",m),r=this._check("valid_children",m);"string"===typeof d&&(d={data:d});d||(d={});if("none"===r)return!1;if(c.isArray(r))if(!d.attr||!d.attr[n.type_attr])d.attr||(d.attr={}),d.attr[n.type_attr]=r[0];else if(-1===c.inArray(d.attr[n.type_attr],r))return!1;if(-2!==n.max_children&&-1!==p&&(m=-1===m?this.get_container().find("> ul > li").length:m.find("> ul > li").length,m+1>p)||-2!==n.max_depth&&-1!==s&&0>s-1)return!1}return this.__call_old(!0,a,b,d,f,k,l)}}})})(jQuery);(function(c){c.jstree.plugin("html_data",
{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0);this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(a,c,b){var d=this;this.load_node_html(a,function(){d.__callback({obj:d._get_node(a)});c.call(this)},b)},_is_loaded:function(a){a=this._get_node(a);return-1==a||!a||!this._get_settings().html_data.ajax&&
!c.isFunction(this._get_settings().html_data.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_html:function(a,b,d){var f,k=this.get_settings().html_data,l=function(){};f=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case c.isFunction(k.data):k.data.call(this,a,c.proxy(function(d){d&&""!==d&&d.toString&&""!==d.toString().replace(/^[\s\n]+$/,"")?(d=c(d),d.is("ul")||(d=c("<ul />").append(d)),
-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(d).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return!this.firstChild||
!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(a),b&&b.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),k.correct_state&&(this.correct_state(a),b&&b.call(this))):k.correct_state&&(this.get_container().children("ul").empty(),b&&b.call(this))},this));break;case !k.data&&
!k.ajax:a&&-1!=a||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node());b&&b.call(this);break;case !!k.data&&!k.ajax||!!k.data&&!!k.ajax&&(!a||-1===a):a&&-1!=a||(f=c(k.data),f.is("ul")||
(f=c("<ul />").append(f)),this.get_container().children("ul").empty().append(f.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node());b&&b.call(this);break;case !k.data&&!!k.ajax||!!k.data&&!!k.ajax&&a&&-1!==a:a=this._get_node(a),l=function(c,b,e){var f=this.get_settings().html_data.ajax.error;
f&&f.call(this,c,b,e);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===b&&k.correct_state&&this.correct_state(a)):"success"===b&&k.correct_state&&this.get_container().children("ul").empty();d&&d.call(this)},f=function(d,f,g){var h=this.get_settings().html_data.ajax.success;h&&(d=h.call(this,d,f,g)||d);if(""===d||d&&d.toString&&""===d.toString().replace(/^[\s\n]+$/,"")||""===d.toString().replace(/["']/g,""))return l.call(this,
g,f,"");d?(d=c(d),d.is("ul")||(d=c("<ul />").append(d)),-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(d).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return!this.firstChild||
!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(a),b&&b.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),k.correct_state&&(this.correct_state(a),b&&b.call(this))):k.correct_state&&(this.get_container().children("ul").empty(),b&&b.call(this))},k.ajax.context=this,k.ajax.error=
l,k.ajax.success=f,k.ajax.dataType||(k.ajax.dataType="html"),c.isFunction(k.ajax.url)&&(k.ajax.url=k.ajax.url.call(this,a)),c.isFunction(k.ajax.data)&&(k.ajax.data=k.ajax.data.call(this,a)),c.ajax(k.ajax)}}}});c.jstree.defaults.plugins.push("html_data")})(jQuery);(function(c){c.jstree.plugin("themeroller",{__init:function(){var a=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(b){c(b.currentTarget).hasClass("jstree-loading")||
c(this).addClass(a.item_h)}).delegate("a","mouseleave.jstree",function(){c(this).removeClass(a.item_h)}).bind("init.jstree",c.proxy(function(a,c){c.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(c.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",c.proxy(function(a){this._themeroller()},this)).bind("close_node.jstree",
c.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("delete_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.parent)},this)).bind("correct_state.jstree",c.proxy(function(c,b){b.rslt.obj.children("ins.jstree-icon").removeClass(a.opened+" "+a.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===this.className.toString().replace(a.item_clsd,"").replace(a.item_open,"").replace(a.item_leaf,"").indexOf("ui-icon-")}).removeClass(a.item_open+" "+a.item_clsd).addClass(a.item_leaf||
"jstree-no-icon")},this)).bind("select_node.jstree",c.proxy(function(c,b){b.rslt.obj.children("a").addClass(a.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",c.proxy(function(c,b){this.get_container().find("a."+a.item_a).removeClass(a.item_a).end().find("a.jstree-clicked").addClass(a.item_a)},this)).bind("dehover_node.jstree",c.proxy(function(c,b){b.rslt.obj.children("a").removeClass(a.item_h)},this)).bind("hover_node.jstree",c.proxy(function(c,b){this.get_container().find("a."+a.item_h).not(b.rslt.obj).removeClass(a.item_h);
b.rslt.obj.children("a").addClass(a.item_h)},this)).bind("move_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.o);this._themeroller(c.rslt.op)},this))},__destroy:function(){var a=this._get_settings().themeroller,b=["ui-icon"];c.each(a,function(a,c){c=c.split(" ");c.length&&(b=b.concat(c))});this.get_container().removeClass("ui-widget-content").find("."+b.join(", .")).removeClass(b.join(" "))},_fn:{_themeroller:function(a){var c=this._get_settings().themeroller;a=a&&-1!=a?this._get_node(a).parent():
this.get_container_ul();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(c.opened).addClass("ui-icon "+c.closed).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_leaf+" "+c.item_open).addClass(c.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(c.closed).addClass("ui-icon "+
c.opened).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_leaf+" "+c.item_clsd).addClass(c.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(c.closed+" ui-icon "+c.opened).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===
this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_clsd+" "+c.item_open).addClass(c.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});c(function(){c.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",
title:"jstree"})})})(jQuery);(function(c){c.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",c.proxy(function(a,b){var d=[],f=!0,k;"move_node"==b.func&&!0===b.args[4]&&b.args[0].o&&b.args[0].o.length&&(b.args[0].o.children("a").each(function(){d.push(c(this).text().replace(/^\s+/g,""))}),f=this._check_unique(d,b.args[0].np.find("> ul > li").not(b.args[0].o),"move_node"));"create_node"==b.func&&(b.args[4]||this._is_loaded(b.args[0]))&&(f=this._get_node(b.args[0]),
!b.args[1]||"before"!==b.args[1]&&"after"!==b.args[1]||(f=this._get_parent(b.args[0]))&&-1!==f||(f=this.get_container()),"string"===typeof b.args[2]?d.push(b.args[2]):b.args[2]&&b.args[2].data?d.push(b.args[2].data):d.push(this._get_string("new_node")),f=this._check_unique(d,f.find("> ul > li"),"create_node"));"rename_node"==b.func&&(d.push(b.args[1]),k=this._get_node(b.args[0]),(f=this._get_parent(k))&&-1!==f||(f=this.get_container()),f=this._check_unique(d,f.find("> ul > li").not(k),"rename_node"));
if(!f)return a.stopPropagation(),!1},this))},defaults:{error_callback:c.noop},_fn:{_check_unique:function(a,b,d){var f=[];b.children("a").each(function(){f.push(c(this).text().replace(/^\s+/g,""))});if(!f.length||!a.length)return!0;f=f.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");return f.length+a.length!=f.concat(a).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length?
(this._get_settings().unique.error_callback.call(null,a,b,d),!1):!0},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),b=[];return a.o&&a.o.length?(a.o.children("a").each(function(){b.push(c(this).text().replace(/^\s+/g,""))}),this._check_unique(b,a.np.find("> ul > li").not(a.o),"check_move")):!0}}})})(jQuery);(function(c){c.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=
!1;this.get_container().bind("init.jstree",c.proxy(function(a,c){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",c.proxy(function(a,c){this._prepare_wholerow_span(c&&c.rslt&&c.rslt.obj?c.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",c.proxy(function(a,c){this.data.to&&clearTimeout(this.data.to);this.data.to=
setTimeout(function(a,c){return function(){a._prepare_wholerow_ul(c)}}(this,c&&c.rslt&&c.rslt.obj?c.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",c.proxy(function(a,c){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",c.proxy(function(a,b){b.rslt.obj.each(function(){b.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((c(this).offset().top-b.inst.get_container().offset().top+b.inst.get_container()[0].scrollTop)/b.inst.data.core.li_height,10)+")").children("a").attr("class",b.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",c.proxy(function(a,c){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));"hover_node"===a.type&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((c.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",c.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(a){var b=c(a.currentTarget);"A"===a.target.tagName||"INS"===a.target.tagName&&b.closest("li").is(".jstree-open, .jstree-closed")||(b.closest("li").children("a:visible:eq(0)").click(),a.stopImmediatePropagation())}).delegate("li",
"mouseover.jstree",c.proxy(function(a){a.stopImmediatePropagation();if(c(a.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;this.hover_node(a.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(a.currentTarget)},this));(d||b)&&c.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();
this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(a){a=a&&-1!=a?this._get_node(a):this.get_container().find("> ul > li");!1!==a&&a.each(function(){c(this).find("li").andSelf().each(function(){var a=c(this);if(a.children(".jstree-wholerow-span").length)return!0;a.prepend("<span class='jstree-wholerow-span' style='width:"+18*a.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var a=this.get_container().children("ul").eq(0),
c=a.html();a.addClass("jstree-wholerow-real");this.data.wholerow.last_html!==c&&(this.data.wholerow.last_html=c,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(a.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(a.parent()[0].scrollWidth).css("top",-1*(a.height()+(d?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}});c(function(){var a=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
f&&(a+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(d||b)a+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";c.vakata.css.add_sheet({str:a,title:"jstree"})})})(jQuery);(function(c){var a=
["getChildren","getChildrenCount","getAttr","getName","getProps"],b=function(a,b){var d=!0;a=a||{};b=[].concat(b);c.each(b,function(b,e){if(!c.isFunction(a[e]))return d=!1});return d};c.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(d,f){var k=-1==d?this._get_settings().model.object:d.data("jstree_model");if(!b(k,a))return f.call(null,!1);this._get_settings().model.async?k.getChildren(c.proxy(function(a){this.model_done(a,
f)},this)):this.model_done(k.getChildren(),f)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(a,b){var d=[],e=this._get_settings(),f=this;c.isArray(a)||(a=[a]);c.each(a,function(a,b){var g=b.getProps()||{};g.attr=b.getAttr()||{};b.getChildrenCount()&&(g.state="closed");g.data=b.getName();c.isArray(g.data)||(g.data=[g.data]);f.data.types&&c.isFunction(b.getType)&&(g.attr[e.types.type_attr]=b.getType());g.attr.id&&e.model.id_prefix&&(g.attr.id=e.model.id_prefix+g.attr.id);g.metadata||
(g.metadata={});g.metadata.jstree_model=b;d.push(g)});b.call(null,d)}}})})(jQuery)}})();
(function(b,d){function f(a){b.extend(!0,Na,a)}function c(c,f,l){function m(){c.addClass("fc");f.isRTL?c.addClass("fc-rtl"):c.addClass("fc-ltr");f.theme&&c.addClass("ui-widget");ha=b("<div class='fc-content' style='position:relative'/>").prependTo(c);la=new a(N,f);(ma=la.render())&&c.prepend(ma);r(f.defaultView);f.handleWindowResize&&"listWeek"!=F.name&&(b(window).resize(R),qa=b(document).width(),setTimeout(function(){qa!=b(document).width()&&(qa=b(document).width(),R())},200));b("body").is(":visible")||
n()}function n(){setTimeout(function(){!F.start&&b("body").is(":visible")&&t()},0)}function s(){return c.is(":visible")}function r(a){F&&a==F.name||(U++,F&&(A("viewDestroy",F,F,F.element),y(),F.triggerEventDestroy(),B(),F.element.remove(),la.deactivateButton(F.name)),la.activateButton(a),F=new ba[a](b("<div class='fc-view fc-view-"+a+"' style='position:relative'/>").appendTo(ha),N),t(),Ya(),U--,A("viewChange",N,a))}function t(a){(!F.start||a||aa<F.start||aa>=F.end)&&s()&&v(a)}function v(a){U++;F.start&&
(A("viewDestroy",F,F,F.element),y(),ca());B();F.render(aa,a||0);z();Ya();(F.afterRender||P)();la.updateTitle(F.title);a=new Date;(a=a>=F.start&&a<F.end)?la.disableButton("today"):la.enableButton("today");A("updateTodayButton",ua,!a);A("viewRender",F,F,F.element);F.trigger("viewDisplay",ua);U--;!f.lazyFetching||E(F.visStart,F.visEnd)?Pa(F.visStart,F.visEnd):G()}function u(){s()&&(y(),ca(),w(),z(),G())}function w(){K=f.contentHeight?f.contentHeight:f.height?f.height-(ma?ma.height():0)-O(ha):Math.round(ha.width()/
Math.max(f.aspectRatio,.5))}function z(){K===d&&w();U++;F.setHeight(K);F.setWidth(ha.width());U--;ia=c.outerWidth()}function R(){if(!U)if(F.start){var a=++fa;setTimeout(function(){a==fa&&!U&&s()&&ia!=(ia=c.outerWidth())&&(U++,u(),F.trigger("windowResize",ua),U--)},200)}else n()}function H(a){ca();G(a)}function G(a){var c=[];if(s()){var d=b(document).height()>b(window).height();F.setEventData(S);c=F.renderEvents(S,a);null!=navigator.userAgent.match(/iPod|iPhone|iPad/i)&&b("div.fc-event").trigger("mouseover");
F.trigger("eventAfterAllRender");b(document).height()>b(window).height()!=d&&u()}return c}function ca(){F.triggerEventDestroy();F.clearEvents();F.clearEventData()}function y(){F&&F.unselect()}function B(){ha.css({width:"100%",height:ha.height(),overflow:"hidden"})}function Ya(){ha.css({width:"",height:"",overflow:""})}function A(a,c){if(f[a])return f[a].apply(c||ua,Array.prototype.slice.call(arguments,2))}var N=this;N.options=f;N.render=function(a){ha?s()&&(w(),v(a)):m()};N.destroy=function(){F&&
(A("viewDestroy",F,F,F.element),F.triggerEventDestroy());b(window).unbind("resize",R);la.destroy();ha.remove();c.removeClass("fc fc-rtl ui-widget")};N.refetchEvents=function(){ca();Pa(F.visStart,F.visEnd)};N.reportEvents=function(a){S=a;Y=G()};N.reportEventChange=function(a){H(a)};N.rerenderEvents=H;N.changeView=r;N.select=function(a,c,b){F.select(a,c,b===d?!0:b)};N.unselect=y;N.prev=function(){t(-1)};N.next=function(){t(1)};N.prevYear=function(){g(aa,-1);t()};N.nextYear=function(){g(aa,1);t()};N.today=
function(){aa=new Date;t()};N.gotoDate=function(a,c,b){a instanceof Date?aa=p(a):q(aa,a,c,b);t()};N.incrementDate=function(a,c,b){a!==d&&g(aa,a);c!==d&&h(aa,c);b!==d&&k(aa,b);t()};N.formatDate=function(a,c){return C(a,c,f)};N.formatDates=function(a,c,b){return D(a,c,b,f)};N.getDate=function(){return p(aa)};N.getView=function(){return F};N.option=function(a,c){if(c===d)return f[a];if("height"==a||"contentHeight"==a||"aspectRatio"==a)f[a]=c,u()};N.trigger=A;N.calcSize=w;N.setSize=z;N.refetchSource=
function(a){M(F.visStart,F.visEnd,a)};N.getSegmentsByRowAndColumn=function(a,c){for(var b=[],d=0;d<Y.length;d++)Y[d].row==a&&Y[d].leftCol<=c&&c<=Y[d].rightCol&&b.push(Y[d]);return b};e.call(N,f,l);var E=N.isFetchNeeded,Pa=N.fetchEvents,M=N.refetchEventSource,ua=c[0],la,ma,ha,F,ia,K,fa=0,U=0,aa=new Date,S=[],Y=[],I,qa;q(aa,f.year,f.month,f.date);f.droppable&&b(document).bind("dragstart",function(a,c){var d=a.target,e=b(d);if(!e.parents(".fc").length){var g=f.dropAccept;if(b.isFunction(g)?g.call(d,
e):e.is(g))I=d,F.dragStart(I,a,c)}}).bind("dragstop",function(a,c){I&&(F.dragStop(I,a,c),I=null)})}function a(a,c){function d(e){var g=b("<td class='fc-header-"+e+"'/>");(e=c.header[e])&&b.each(e.split(" "),function(d){0<d&&g.append("<span class='fc-header-space'/>");var e;b.each(this.split(","),function(d,h){if("title"==h)g.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),e&&e.addClass(f+"-corner-right"),e=null;else{var k;a[h]?k=a[h]:ba[h]&&(k=function(){n.removeClass(f+"-state-hover");
a.changeView(h)});if(k){var l=c.theme?Da(c.buttonIcons,h):null,m=Da(c.buttonText,h),n=b("<span class='fc-button fc-button-"+h+" "+f+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/></span>":m)+"</span>").click(function(){n.hasClass(f+"-state-disabled")||k()}).mousedown(function(){n.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){n.removeClass(f+"-state-down")}).hover(function(){n.not("."+f+"-state-active").not("."+
f+"-state-disabled").addClass(f+"-state-hover")},function(){n.removeClass(f+"-state-hover").removeClass(f+"-state-down")}).appendTo(g);wa(n);e||n.addClass(f+"-corner-left");e=n}}});e&&e.addClass(f+"-corner-right")});return g}this.render=function(){f=c.theme?"ui":"fc";if(c.header)return e=b("<table class='fc-header' style='width:100%'/>").append(b("<tr/>").append(d("left")).append(d("center")).append(d("right")))};this.destroy=function(){e.remove()};this.updateTitle=function(a){b("#current-date-title").html(a)};
this.activateButton=function(a){e.find("span.fc-button-"+a).addClass(f+"-state-active")};this.deactivateButton=function(a){e.find("span.fc-button-"+a).removeClass(f+"-state-active")};this.disableButton=function(a){e.find("span.fc-button-"+a).addClass(f+"-state-disabled")};this.enableButton=function(a){e.find("span.fc-button-"+a).removeClass(f+"-state-disabled")};var e=b([]),f}function e(a,c){function e(c,d){f(c,function(e){if(d==H){if(e){a.eventDataTransform&&(e=b.map(e,a.eventDataTransform));c.eventDataTransform&&
(e=b.map(e,c.eventDataTransform));for(var f=0;f<e.length;f++)e[f].source=c,l(e[f]);A=A.concat(e)}y--;y||u(A)}})}function f(c,d){var e,g=X.sourceFetchers,l;for(e=0;e<g.length;e++){l=g[e](c,D,G,d);if(!0===l)return;if("object"==typeof l){f(l,d);return}}if(e=c.events)b.isFunction(e)?(h(),e(p(D),p(G),function(a){d(a);k()})):b.isArray(e)?d(e):d();else if(c.url){var m=c.success,n=c.error,s=c.complete;e=b.isFunction(c.data)?c.data():c.data;e=b.extend({},e||{});g=pa(c.startParam,a.startParam);l=pa(c.endParam,
a.endParam);g&&(e[g]=v(D));l&&(e[l]=v(G));h();b.ajax(b.extend({},nb,c,{data:e,success:function(a){a=a||[];var c=ya(m,this,arguments);b.isArray(c)&&(a=c);d(a)},error:function(){ya(n,this,arguments);d()},complete:function(){ya(s,this,arguments);k()}}))}else d()}function g(a){b.isFunction(a)||b.isArray(a)?a={events:a}:"string"==typeof a&&(a={url:a});if("object"==typeof a)return m(a),C.push(a),a}function h(){B++||r("loading",null,!0,t())}function k(){--B||r("loading",null,!1,t())}function l(c){var b=
c.source||{},e=pa(b.ignoreTimezone,a.ignoreTimezone);c._id=c._id||(c.id===d?"_fc"+fb++:c.id+"");c.date&&(c.start||(c.start=c.date),delete c.date);c._start=p(c.start=w(c.start,e));c.end=w(c.end,e);c.end&&c.end<=c.start&&(c.end=null);c._end=c.end?p(c.end):null;c.allDay===d&&(c.allDay=pa(b.allDayDefault,a.allDayDefault));c.className?"string"==typeof c.className&&(c.className=c.className.split(/\s+/)):c.className=[]}function m(a){a.className?"string"==typeof a.className&&(a.className=a.className.split(/\s+/)):
a.className=[];for(var c=X.sourceNormalizers,b=0;b<c.length;b++)c[b](a)}function n(a){b.isFunction(a)||b.isArray(a)?a={events:a}:"string"==typeof a&&(a={url:a});if("object"==typeof a)return m(a),a}function s(a,c){return a&&c&&q(a)==q(c)}function q(a){return("object"==typeof a?a.events||a.url:"")||a}this.isFetchNeeded=function(a,c){return!D||a<D||c>G};this.fetchEvents=function(a,c){D=a;G=c;A=[];var b=++H,d=C.length;y=d;for(var f=0;f<d;f++)e(C[f],b)};this.addEventSource=function(a){if(a=g(a))y++,e(a,
H)};this.removeEventSource=function(a){C=b.grep(C,function(c){return!s(c,a)});A=b.grep(A,function(c){return!s(c.source,a)});u(A)};this.updateEvent=function(a){var c,b=A.length,d,e=t().defaultEventEnd,f=a.start-a._start,g=a.end?a.end-(a._end||e(a)):0;for(c=0;c<b;c++)d=A[c],d._id==a._id&&d!=a&&(d.start=new Date(+d.start+f),d.end=a.end?d.end?new Date(+d.end+g):new Date(+e(d)+g):null,d.title=a.title,d.url=a.url,d.allDay=a.allDay,d.className=a.className,d.editable=a.editable,d.color=a.color,d.backgroundColor=
a.backgroundColor,d.borderColor=a.borderColor,d.textColor=a.textColor,l(d));l(a);u(A)};this.renderEvent=function(a,c){l(a);a.source||(c&&(z.events.push(a),a.source=z),A.push(a));u(A)};this.removeEvents=function(a){if(a){if(!b.isFunction(a)){var c=a+"";a=function(a){return a._id==c}}A=b.grep(A,a,!0);for(d=0;d<C.length;d++)b.isArray(C[d].events)&&(C[d].events=b.grep(C[d].events,a,!0))}else{A=[];for(var d=0;d<C.length;d++)b.isArray(C[d].events)&&(C[d].events=[])}u(A)};this.clientEvents=function(a){return b.isFunction(a)?
b.grep(A,a):a?(a+="",b.grep(A,function(c){return c._id==a})):A};this.normalizeEvent=l;this.refetchEventSource=function(a,c,d){if(d=n(d))D=a,G=c,A=b.grep(A,function(a){return!s(a.source,d)}),u(A),y++,e(d,H)};this.renderEventForSource=function(a,c){if(c=n(c))l(a),a.source=c,A.push(a);u(A)};for(var r=this.trigger,t=this.getView,u=this.reportEvents,z={events:[]},C=[z],D,G,H=0,y=0,B=0,A=[],E=0;E<c.length;E++)g(c[E])}function g(a,c,b){a.setFullYear(a.getFullYear()+c);b||n(a);return a}function h(a,c,b){if(+a){c=
a.getMonth()+c;var d=p(a);d.setDate(1);d.setMonth(c);a.setMonth(c);for(b||n(a);a.getMonth()!=d.getMonth();)a.setDate(a.getDate()+(a<d?1:-1))}return a}function k(a,c,b){if(+a){c=a.getDate()+c;var d=p(a);d.setHours(9);d.setDate(c);a.setDate(c);b||n(a);l(a,d)}return a}function l(a,c){if(+a)for(;a.getDate()!=c.getDate();)a.setTime(+a+(a<c?1:-1)*ob)}function m(a,c){a.setMinutes(a.getMinutes()+c);return a}function n(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function p(a,
c){return c?n(new Date(+a)):new Date(+a)}function s(){var a=0,c;do c=new Date(1970,a++,1);while(c.getHours());return c}function r(a,c){return Math.round((p(a,!0)-p(c,!0))/864E5)}function q(a,c,b,e){c!==d&&c!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(c));b!==d&&b!=a.getMonth()&&(a.setDate(1),a.setMonth(b));e!==d&&a.setDate(e)}function w(a,c){if("object"==typeof a)return a;if("number"==typeof a)return new Date(1E3*a);if("string"==typeof a){if(a.match(/^\d+(\.\d+)?$/))return new Date(1E3*
parseFloat(a));c===d&&(c=!0);return u(a,c)||(a?new Date(a):null)}return null}function v(a){a=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate());return Math.round(+a/1E3)}function u(a,c){var b=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!b)return null;var d=new Date(b[1],0,1);if(c||!b[13]){var e=new Date(b[1],0,1,9,0);b[3]&&(d.setMonth(b[3]-1),e.setMonth(b[3]-1));b[5]&&(d.setDate(b[5]),e.setDate(b[5]));
l(d,e);b[7]&&d.setHours(b[7]);b[8]&&d.setMinutes(b[8]);b[10]&&d.setSeconds(b[10]);b[12]&&d.setMilliseconds(1E3*Number("0."+b[12]));l(d,e)}else d.setUTCFullYear(b[1],b[3]?b[3]-1:0,b[5]||1),d.setUTCHours(b[7]||0,b[8]||0,b[10]||0,b[12]?1E3*Number("0."+b[12]):0),b[14]&&(e=60*Number(b[16])+(b[18]?Number(b[18]):0),e*="-"==b[15]?1:-1,d=new Date(+d+6E4*e));return d}function t(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var c=
parseInt(a[1],10);a[3]&&(c%=12,"p"==a[3].toLowerCase().charAt(0)&&(c+=12));return 60*c+(a[2]?parseInt(a[2],10):0)}}function C(a,c,b){return D(a,null,c,b)}function D(a,c,b,d){d=d||Na;var e=a,f=c,g,h=b.length,k,l,m,n="";for(g=0;g<h;g++)if(k=b.charAt(g),"'"==k)for(l=g+1;l<h;l++){if("'"==b.charAt(l)){e&&(n=l==g+1?n+"'":n+b.substring(g+1,l),g=l);break}}else if("("==k)for(l=g+1;l<h;l++){if(")"==b.charAt(l)){g=C(e,b.substring(g+1,l),d);parseInt(g.replace(/\D/,""),10)&&(n+=g);g=l;break}}else if("["==k)for(l=
g+1;l<h;l++){if("]"==b.charAt(l)){k=b.substring(g+1,l);g=C(e,k,d);g!=C(f,k,d)&&(n+=g);g=l;break}}else if("{"==k)e=c,f=a;else if("}"==k)e=a,f=c;else{for(l=h;l>g;l--)if(m=Ra[b.substring(g,l)]){e&&(n+=m(e,d));g=l-1;break}l==g&&e&&(n+=k)}return n}function z(a){if(a.end){var c=a.end;a=a.allDay;c=p(c);return a||c.getHours()||c.getMinutes()?k(c,1):n(c)}return k(p(a.start),1)}function H(a,c,e){a.unbind("mouseover").mouseover(function(a){for(var f=a.target,g;f!=this;)g=f,f=f.parentNode;(f=g._fci)!==d&&(g._fci=
d,g=c[f],e(g.event,g.element,g),b(a.target).trigger(a));a.stopPropagation()})}function G(a,c,d){for(var e=0,f;e<a.length;e++)f=b(a[e]),f.width(Math.max(0,c-M(f,d)))}function A(a,c,d){for(var e=0,f;e<a.length;e++)f=b(a[e]),f.height(Math.max(0,c-O(f,d)))}function M(a,c){var d=(parseFloat(b.css(a[0],"paddingLeft",!0))||0)+(parseFloat(b.css(a[0],"paddingRight",!0))||0),e;e=(parseFloat(b.css(a[0],"borderLeftWidth",!0))||0)+(parseFloat(b.css(a[0],"borderRightWidth",!0))||0);d+=e;e=c?(parseFloat(b.css(a[0],
"marginLeft",!0))||0)+(parseFloat(b.css(a[0],"marginRight",!0))||0):0;return d+e}function O(a,c){var d=(parseFloat(b.css(a[0],"paddingTop",!0))||0)+(parseFloat(b.css(a[0],"paddingBottom",!0))||0),e;e=(parseFloat(b.css(a[0],"borderTopWidth",!0))||0)+(parseFloat(b.css(a[0],"borderBottomWidth",!0))||0);d+=e;e=c?(parseFloat(b.css(a[0],"marginTop",!0))||0)+(parseFloat(b.css(a[0],"marginBottom",!0))||0):0;return d+e}function P(){}function ra(a,c){return a-c}function Z(a){return Math.max.apply(Math,a)}function E(a){return(10>
a?"0":"")+a}function Da(a,c){if(a[c]!==d)return a[c];for(var b=c.split(/(?=[A-Z])/),e=b.length-1,f;0<=e;e--)if(f=a[b[e].toLowerCase()],f!==d)return f;return a[""]}function ja(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function wa(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function xa(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}
function Ia(a,c){var b=a.source||{},d=a.color,e=b.color,f=c("eventColor"),g=a.backgroundColor||d||b.backgroundColor||e||c("eventBackgroundColor")||f,d=a.borderColor||d||b.borderColor||e||c("eventBorderColor")||f,b=a.textColor||b.textColor||c("eventTextColor"),e=[];g&&e.push("background-color:"+g);d&&e.push("border-color:"+d);b&&e.push("color:"+b);return e.join(";")}function ya(a,c,d){b.isFunction(a)&&(a=[a]);if(a){var e,f;for(e=0;e<a.length;e++)f=a[e].apply(c,d)||f;return f}}function pa(){for(var a=
0;a<arguments.length;a++)if(arguments[a]!==d)return arguments[a]}function ea(a,c,d){var e=this;e.renderList=function(c,d,p){l=c;m=d;f("theme");f("columnFormat");f("weekNumbers");f("weekNumberShortTitle");f("weekNumberTitle");f("weekNumberCalculation");s=[];a.find(".fc-list-day").remove();c=b("<ul class='fc-list-day'></ul>").appendTo(a);d=n(new Date);for(p=0;p<m;p++){var q=h(0,p),r=b("<li class='fc-list-day-item' data-date='"+k(q,"yyyy-MM-dd")+"'></li>").appendTo(c);+q==+d?r.addClass("fc-today"):+q<
+d&&r.addClass("fc-past");r=b("<div class='fc-day-content'></div>").appendTo(r);g("dayRender",e,q,r);s.push(r)}};e.setHeight=function(a){};e.setWidth=function(a){};e.renderDayOverlay=function(a,c,b){};e.defaultSelectionEnd=function(a,c){};e.renderSelection=function(a,c,b){};e.clearSelection=function(){};e.reportDayClick=function(a,c,b){};e.dragStart=function(a,c,b){};e.dragStop=function(a,c,b){};e.defaultEventEnd=function(a){return p(a.start)};e.getHoverListener=function(){return hoverListener};e.colLeft=
function(a){return null};e.colRight=function(a){return null};e.colContentLeft=function(a){return null};e.colContentRight=function(a){return null};e.getIsCellAllDay=function(){return!0};e.allDayRow=function(a){return null};e.getRowCnt=function(){return l};e.getColCnt=function(){return m};e.getColWidth=function(){return colWidth};e.getDayItems=function(){return s};sa.call(e,a,c,d);Aa.call(e);Q.call(e);var f=e.opt,g=e.trigger,h=e.cellToDate,k=c.formatDate,l,m,s=[]}function Q(){var a=this;a.renderEvents=
function(c,d){for(var e=a.getColCnt(),f=a.getDayItems(),g=0;g<e;g++){for(var h=a.cellToDate(0,g),k=[],l=[],m=0;m<c.length;m++){var n=c[m];n.allDay||0!==r(h,n.start)||k.push(n);n.allDay&&(n.start<=h&&n.end>=h||0===r(h,n.start))&&l.push(n)}l.sort(ta);k.sort(ta);h=l.concat(k);k=f[g];k.find(".fc-list-event").remove();if(0<h.length)for(l=b("<ul class='fc-list-event'></ul>").appendTo(k),m=0;m<h.length;m++)n=b("<li/>").addClass("fc-list-event-item").append(b("<div class='fc-event-inner'></div>")),a.trigger("eventRender",
h[m],h[m],n),l.append(n),CommonFunctions.executeScripts(h[m].description);k.parents(".fc-list-day-item:first").toggleClass("fc-day-empty",0===h.length)}};a.clearEvents=function(){}}function Wa(a,c,d){function e(){var c=f(),d;B&&B.remove();B=b(c).appendTo(a);A=B.find("thead");E=A.find(".fc-day-header");M=B.find("tbody");I=M.find("tr");la=M.find(".fc-day");ma=I.find("td:first-child");Oa=M.find(".fc-week-number-link");ha=I.eq(0).find(".fc-day > div");F=I.eq(0).find(".fc-day-content > div");xa(A.add(A.find("tr")));
xa(I);I.eq(0).addClass("fc-first");I.filter(":last").addClass("fc-last");la.each(function(a,c){var e=D(Math.floor(a/Y),a%Y);d=b(c);t("dayRender",q,e,d);d.find(".fc-day-number:first").mousedown(h)});Oa.click(l);la.click(g).mousedown(C)}function f(){var a=Ba+"-widget-header",c,b,d;c="<thead><tr>";va&&(c+="<th class='fc-week-number "+a+"'>"+ja(Fa)+"</th>");for(b=0;b<Y;b++)d=D(0,b),c+="<th class='fc-day-header fc-"+$a[d.getDay()]+" "+a+"'>"+ja(y(d,Ua))+"</th>";a="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+
(c+"</tr></thead>");c=Ba+"-widget-content";var e,g;e="<tbody>";for(b=0;b<S;b++){e+="<tr class='fc-week'>";va&&(d=g=D(b,0),d.getFullYear()<q.start.getFullYear()&&(d=new Date(q.start.getFullYear(),0,1)),d.getMonth()<q.start.getMonth()&&(d=new Date(q.start.getFullYear(),q.start.getMonth(),1)),e+="<td class='fc-week-number "+c+"'><div><a class='fc-week-number-link' href='javascript:void(0);' data-date='"+y(d,"yyyy-MM-dd")+"'>"+ja(y(g,gb))+"</a></div></td>");for(d=0;d<Y;d++){g=D(b,d);var h=Ba+"-widget-content",
k=q.start.getMonth(),l=n(new Date),m="",h=["fc-day","fc-"+$a[g.getDay()],h];g.getMonth()!=k&&h.push("fc-other-month");+g==+l?h.push("fc-today",Ba+"-state-highlight"):g<l?h.push("fc-past"):h.push("fc-future");m+="<td class='"+h.join(" ")+"' data-date='"+y(g,"yyyy-MM-dd")+"'><div>";P&&(m+="<a class='fc-day-number' href='javascript:void(0);'>"+g.getDate()+"</a>");m+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";e+=m}e+="</tr>"}return a+(e+"</tbody>")+"</table>"}
function g(a){if(!r("selectable")){var c=u(b(this).data("date"));t("dayClick",this,c,!0,a)}}function h(){var a=b(this).parents(".fc-day:first").data("date");c.gotoDate(u(a));c.changeView("agendaDay")}function l(){var a=b(this).data("date");c.gotoDate(u(a));c.changeView("agendaWeek")}function m(a,c,b){b&&qa.build();a=H(a,c);for(c=0;c<a.length;c++)b=a[c],s(b.row,b.leftCol,b.row,b.rightCol).click(g).mousedown(C)}function s(c,b,d,e){c=qa.rect(c,b,d,e,a);return v(c,a)}var q=this;q.renderBasic=function(c,
d,f){S=c;Y=d;P=f;Ba=r("theme")?"ui":"fc";Ua=r("columnFormat");va=r("weekNumbers");Fa=r("weekNumberShortTitle");r("weekNumberTitle");gb="iso"!=r("weekNumberCalculation")?"w":"W";M||(ia=b("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a));e()};q.setHeight=function(a){fa=a;a=fa-A.height();var c,d,e;"variable"==r("weekMode")?c=d=Math.floor(a/(1==S?2:6)):(c=Math.floor(a/S),d=a-c*(S-1));ma.each(function(a,f){a<S&&(e=b(f),e.find("> div").css("min-height",(a==
S-1?d:c)-O(e)))})};q.setWidth=function(a){K=a;T.clear();Ca.clear();aa=0;va&&(aa=A.find("th.fc-week-number").outerWidth());U=Math.floor((K-aa)/Y);G(E.slice(0,-1),U)};q.renderDayOverlay=m;q.defaultSelectionEnd=function(a,c){return p(a)};q.renderSelection=function(a,c,b){m(a,k(p(c),1),!0)};q.clearSelection=function(){w()};q.reportDayClick=function(a,c,b){var d=z(a);t("dayClick",la[d.row*Y+d.col],a,c,b)};q.dragStart=function(a,c,b){ga.start(function(a){w();a&&s(a.row,a.col,a.row,a.col)},c)};q.dragStop=
function(a,c,b){var d=ga.stop();w();d&&(d=D(d),t("drop",a,d,!0,c,b))};q.defaultEventEnd=function(a){return p(a.start)};q.getHoverListener=function(){return ga};q.colLeft=function(a){return T.left(a)};q.colRight=function(a){return T.right(a)};q.colContentLeft=function(a){return Ca.left(a)};q.colContentRight=function(a){return Ca.right(a)};q.getIsCellAllDay=function(){return!0};q.allDayRow=function(a){return I.eq(a)};q.getRowCnt=function(){return S};q.getColCnt=function(){return Y};q.getColWidth=function(){return U};
q.getDaySegmentContainer=function(){return ia};sa.call(q,a,c,d);Xa.call(q);Aa.call(q);V.call(q);var r=q.opt,t=q.trigger,v=q.renderOverlay,w=q.clearOverlays,C=q.daySelectionMousedown,D=q.cellToDate,z=q.dateToCell,H=q.rangeToSegments,y=c.formatDate,B,A,E,M,I,la,ma,ha,F,ia,K,fa,U,aa,S,Y,P,qa,ga,T,Ca,Ba,Ua,va,Fa,gb,Oa;wa(a.addClass("fc-grid"));qa=new Ta(function(a,c){var d,e,f;E.each(function(a,g){d=b(g);e=d.offset().left;a&&(f[1]=e);f=[e];c[a]=f});f[1]=e+d.outerWidth();I.each(function(c,g){c<S&&(d=b(g),
e=d.offset().top,c&&(f[1]=e),f=[e],a[c]=f)});f[1]=e+d.outerHeight()});ga=new Sa(qa);T=new Ma(function(a){return ha.eq(a)});Ca=new Ma(function(a){return F.eq(a)})}function V(){var a=this;a.renderEvents=function(c,b){return a.renderDayEvents(c,b)};a.clearEvents=function(){a.getDaySegmentContainer().empty()};za.call(a)}function y(a,c,e){function f(){var c;c=ba+"-widget-header";var d,e="",g,h=n(new Date),e=e+"<thead><tr>";ya?(d=ma(0,0),d=ia(d,za),d=oa?d+ta:ta+" "+d,e+="<th class='fc-agenda-axis fc-week-number "+
c+"'>"+ja(d)+"</th>"):e+="<th class='fc-agenda-axis "+c+"'>&nbsp;</th>";var k=1<Qa;for(g=0;g<Qa;g++){d=ma(0,g);var m=+d==+h;m&&k&&(e+="<th style='width: 1px; position: relative; z-index: 3;' class='fc-state-hightlight-border'></th>");e+="<th class='fc-"+$a[d.getDay()]+" fc-col"+g+" "+c;m&&k&&(e+=" "+ba+"-state-highlight fc-today");e+="'>";e=k?e+("<a class='fc-day-number' href='javascript:void(0);' data-date='"+ia(d,"yyyy-MM-dd")+"'>"+ja(ia(d,pa))+"</a>"):e+ja(ia(d,pa));e+="</th>";m&&k&&(e+="<th style='width: 1px; position: relative; z-index: 3;' class='fc-state-hightlight-border'></th>")}c=
"<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+(e+("<th class='fc-agenda-gutter "+c+"'>&nbsp;</th></tr></thead>"));d=ba+"-widget-header";var e=ba+"-widget-content",p,h=n(new Date),q,k=""+("<tbody><tr><th class='fc-agenda-axis "+d+"'>&nbsp;</th>");g="";m=1<Qa;for(d=0;d<Qa;d++){p=ma(0,d);var s=+p==+h;q=["fc-col"+d,"fc-"+$a[p.getDay()],e];s&&m?q.push(ba+"-state-highlight","fc-today"):p<h?q.push("fc-past"):q.push("fc-future");p="<td class='"+q.join(" ")+"'";s&&
m&&(p+="style='border-width: 0px !important; border-bottom-width: 1px !important;'");p+=" ><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";s&&m&&(p="<td style='position: relative; z-index: 3; width: 1px;' class='fc-state-hightlight-border'></td>"+p+"<td style='position: relative; z-index: 3; width: 1px;' class='fc-state-hightlight-border'></td>");g+=p}k=k+g+("<td class='fc-agenda-gutter "+e+"'>&nbsp;</td></tr></tbody>");c=c+k+"</table>";K&&K.remove();
K=b(c).appendTo(a);fa=K.find("thead");U=fa.find("th:not(.fc-state-hightlight-border)").slice(1,-1);aa=K.find("tbody");S=aa.find("td:not(.fc-state-hightlight-border)").slice(0,-1);Y=S.find("> div");X=S.find(".fc-day-content > div");qa=S.eq(0);ga=Y.eq(0);xa(fa.add(fa.find("tr")));xa(aa.add(aa.find("tr")));U.find(".fc-day-number").click(l)}function g(){function a(){va.scrollTop(d)}var c=s(),b=p(c);b.setHours(E("firstHour"));var d=D(c,b)+1;a();setTimeout(a,0)}function h(a){if(!E("selectable")){var c=
Math.min(Qa-1,Math.floor((a.pageX-K.offset().left-db)/kb)),b=ma(0,c),d=this.parentNode.className.match(/fc-slot(\d+)/);d?(d=parseInt(d[1])*E("slotMinutes"),b.setHours(Math.floor(d/60)),b.setMinutes(d%60+ea),M("dayClick",S[c],b,!1,a)):M("dayClick",S[c],b,!0,a)}}function l(){var a=b(this).data("date");c.gotoDate(u(a));c.changeView("agendaDay")}function q(a,c,b){b&&Za.build();a=F(a,c);for(c=0;c<a.length;c++)b=a[c],r(b.row,b.leftCol,b.row,b.rightCol).click(h).mousedown(ua)}function r(a,c,b,d){a=Za.rect(a,
c,b,d,T);return N(a,T)}function v(a,c){for(var b=0;b<Qa;b++){var d=ma(0,b),e=k(p(d),1),f=new Date(Math.max(d,a)),g=new Date(Math.min(e,c));f<g&&(e=Za.rect(0,b,0,b,Fa),f=D(d,f),d=D(d,g),e.top=f,e.height=d-f,N(e,Fa).click(h).mousedown(y))}}function w(a){return E("allDaySlot")&&!a.row}function C(a){var c=ma(0,a.col);a=a.row;E("allDaySlot")&&a--;m(c,60*J.minVisibleHour);0<=a&&m(c,a*eb);return c}function D(a,c){a=p(a,!0);if(c<m(p(a),ea))return 0;if(c>=m(p(a),60*(J.maxVisibleHour+1)))return Oa.height();
var b=E("slotMinutes"),e=60*c.getHours()+c.getMinutes()-ea,f=Math.floor(e/b),g=ka[f];g===d&&(g=ka[f]=Oa.find("tr").eq(f).find("td div")[0].offsetTop);return Math.max(0,Math.round(g-1+e%b/b*qb))}function z(a,c){var d=E("selectHelper");Za.build();if(d){var e=ha(a).col;if(0<=e&&e<Qa){var e=Za.rect(0,e,0,e,Fa),f=D(a,a),g=D(a,c);if(g>f){e.top=f;e.height=g-f;e.left+=2;e.width-=5;if(b.isFunction(d)){if(d=d(a,c))e.position="absolute",Ka=b(d).css(e).appendTo(Fa)}else e.isStart=!0,e.isEnd=!0,Ka=b(la({title:"",
start:a,end:c,className:["fc-select-helper"],editable:!1},e)),Ka.css("opacity",E("dragOpacity"));Ka&&(Ka.click(h).mousedown(y),Fa.append(Ka),G(Ka,e.width,!0),A(Ka,e.height,!0))}}}else v(a,c)}function H(){I();Ka&&(Ka.remove(),Ka=null)}function y(a){if(1==a.which&&E("selectable")){Z(a);var c;W.start(function(a,b){H();if(a&&a.col==b.col&&!w(a)){var d=C(b),e=C(a);c=[d,m(p(d),eb),e,m(p(e),eb)].sort(ra);z(c[0],c[3])}else c=null},a);b(document).one("mouseup",function(a){W.stop();c&&(+c[0]==+c[1]&&B(c[0],
!1,a),P(c[0],c[3],!1,a))})}}function B(a,c,b){M("dayClick",S[ha(a).col],a,c,b)}var J=this;J.renderAgenda=function(c){Qa=c;ba=E("theme")?"ui":"fc";oa=E("isRTL");ea=t(E("minTime"));na=t(E("maxTime"));pa=E("columnFormat");ya=E("weekNumbers");ta=E("weekNumberTitle");E("weekNumberShortTitle");za="iso"!=E("weekNumberCalculation")?"w":"W";eb=E("snapMinutes")||E("slotMinutes");if(K)f();else{c=ba+"-widget-header";var d=ba+"-widget-content",e,g,k,l,n,q=0==E("slotMinutes")%15;f();T=b("<div style='position:absolute; left:0; width:100%'/>").appendTo(a);
E("allDaySlot")?(Ca=b("<div class='fc-event-container' style='position:absolute; z-index:8; top:0; left:0'/>").appendTo(T),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+c+" fc-agenda-axis'>"+E("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+c+" fc-agenda-gutter'>&nbsp;</th></tr></table>",Ba=b(e).appendTo(T),Ua=Ba.find("tr"),Ua.find("td").click(h).mousedown(ua),T.append("<div class='fc-agenda-divider "+
c+"'><div class='fc-agenda-divider-inner'/></div>")):Ca=b([]);va=b("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(T);Fa=b("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(va);gb=b("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(Fa);e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";g=s();l=m(p(g),na);m(g,ea);for(k=sb=0;g<l;k++)n=g.getMinutes(),e+="<tr class='fc-slot"+
k+" "+(n?"fc-minor":"")+"'><th class='fc-agenda-axis "+c+"'>"+(q&&n?"&nbsp;":ia(g,E("axisFormat")))+"</th><td class='"+d+"'><div style='position:relative'>&nbsp;</div></td></tr>",m(g,E("slotMinutes")),sb++;Oa=b(e+"</tbody></table>").appendTo(Fa);Oa.find("td").click(h).mousedown(y)}};J.setWidth=function(a){V.clear();Q.clear();a=fa.find("th:first");Ba&&(a=a.add(Ba.find("th:first")));a=a.add(Oa.find("th").filter(":visible:first"));db=0;G(a.width("").each(function(a,c){db=Math.max(db,b(c).outerWidth())}),
db);a=K.find(".fc-agenda-gutter");Ba&&(a=a.add(Ba.find("th.fc-agenda-gutter")));var c=va[0].clientWidth;(vb=va.width()-c)?(G(a,vb),a.show().prev().removeClass("fc-last")):a.hide().prev().addClass("fc-last");kb=Math.floor((c-db)/Qa);G(U.slice(0,-1),kb)};J.setHeight=function(a){a===d&&(a=ub);ub=a;ka={};var c=aa.position().top,b=va.position().top;a=Math.min(a-c,Oa.height()+b+1);ga.height(a-O(qa));T.css("top",c);va.height(a-b-1);qb=Oa.find("tr:visible:first").height();pb=E("slotMinutes")/eb;mb=qb/pb};
J.afterRender=function(){g()};J.defaultEventEnd=function(a){var c=p(a.start);return a.allDay?c:m(c,E("defaultEventMinutes"))};J.timePosition=D;J.getIsCellAllDay=w;J.allDayRow=function(a){return Ua};J.getCoordinateGrid=function(){return Za};J.getHoverListener=function(){return W};J.colLeft=function(a){return V.left(a)};J.colRight=function(a){return V.right(a)};J.colContentLeft=function(a){return Q.left(a)};J.colContentRight=function(a){return Q.right(a)};J.getDaySegmentContainer=function(){return Ca};
J.getSlotSegmentContainer=function(){return gb};J.getMinMinute=function(){return ea};J.getMaxMinute=function(){return na};J.getSlotContainer=function(){return Fa};J.getRowCnt=function(){return 1};J.getColCnt=function(){return Qa};J.getColWidth=function(){return kb};J.getSnapHeight=function(){return mb};J.getSnapMinutes=function(){return eb};J.defaultSelectionEnd=function(a,c){return c?p(a):m(p(a),E("slotMinutes"))};J.renderDayOverlay=q;J.renderSelection=function(a,c,b){b?E("allDaySlot")&&q(a,k(p(c),
1),!0):z(a,c)};J.clearSelection=H;J.reportDayClick=B;J.dragStart=function(a,c,b){W.start(function(a){I();if(a)if(w(a))r(a.row,a.col,a.row,a.col);else{a=C(a);var c=m(p(a),E("defaultEventMinutes"));v(a,c)}},c)};J.dragStop=function(a,c,b){var d=W.stop();I();d&&M("drop",a,C(d),w(d),c,b)};sa.call(J,a,c,e);Xa.call(J);Aa.call(J);da.call(J);var E=J.opt,M=J.trigger,N=J.renderOverlay,I=J.clearOverlays,P=J.reportSelection,Z=J.unselect,ua=J.daySelectionMousedown,la=J.slotSegHtml,ma=J.cellToDate,ha=J.dateToCell,
F=J.rangeToSegments,ia=c.formatDate,K,fa,U,aa,S,Y,X,qa,ga,T,Ca,Ba,Ua,va,Fa,gb,Oa,Ka,ub,db,kb,vb,qb,eb,pb,mb,Qa,sb,Za,W,V,Q,ka={},ba,oa,ea,na,pa,ya,ta,za;wa(a.addClass("fc-agenda"));Za=new Ta(function(a,c){var d,e,f;U.each(function(a,g){d=b(g);e=d.offset().left;a&&(f[1]=e);f=[e];c[a]=f});f[1]=e+d.outerWidth();E("allDaySlot")&&(d=Ua,e=d.offset().top,a[0]=[e,e+d.outerHeight()]);for(var g=Fa.offset().top,h=va.offset().top,k=h+va.outerHeight(),l=0;l<sb*pb;l++)a.push([Math.max(h,Math.min(k,g+mb*l)),Math.max(h,
Math.min(k,g+mb*(l+1)))])});W=new Sa(Za);V=new Ma(function(a){return Y.eq(a)});Q=new Ma(function(a){return X.eq(a)})}function da(){function a(c){var d=n("minDefaultDayStartHour"),e=n("maxDefaultDayEndHour");c&&b.each(c,function(a,c){var b=c.start.getHours(),f=c.end.getHours();d>b&&(d=b);e<f&&(e=f)});l.minVisibleHour=d;l.maxVisibleHour=e;c="";for(var f=0;f<2*d;f++)c.length&&(c+=", "),c+="tr.fc-slot"+f;for(f=2*e+2;48>f;f++)c.length&&(c+=", "),c+="tr.fc-slot"+f;b(".fc-agenda-slots tr").show();b(c).hide();
qa.calcSize();qa.setSize()}function c(a){return a.end?p(a.end):m(p(a.start),n("defaultEventMinutes"))}function e(a,c){var b="<",d=a.url,f=Ia(a,n),g=["fc-event","fc-event-vert"];s(a)&&g.push("fc-event-draggable");c.isStart&&g.push("fc-event-start");c.isEnd&&g.push("fc-event-end");g=g.concat(a.className);a.source&&(g=g.concat(a.source.className||[]));var b=d?b+("a href='"+ja(a.url)+"'"):b+"div",h=n("timeFormat");"agendaWeek"===qa.getView().name&&(h=qa.option("timeFormat")[""]);b+=" class='"+g.join(" ")+
"' style='position:absolute;top:"+c.top+"px;left:"+c.left+"px;"+f+"'><div class='fc-event-inner'><span class='fc-event-time'>"+ja(T(a.start,a.end,h))+"</span><span class='fc-event-title'>"+ja(a.title||"")+"</span></div><div class='fc-event-bg'></div>";c.isEnd&&t(a)&&(b+="<div class='ui-resizable-handle ui-resizable-s'>=</div>");return b+("</"+(d?"a":"div")+">")}function f(a,c,b){var d=c.find("div.fc-event-time");s(a)&&g(a,c,d);b.isEnd&&t(a)&&h(a,c,d);u(a,c)}function g(a,c,b){function d(){Y();if(w)if(H&&
D)b.hide(),c.draggable("option","grid",null),S(k(p(a.start),y),k(z(a),y));else{var e=Ga,f=m(p(a.start),e),g;a.end&&(g=m(p(a.end),e));b.text(T(f,g,n("timeFormat")));b.css("display","");c.draggable("option","grid",[h,s])}}var e=l.getCoordinateGrid(),f=ua(),h=la(),s=ma(),t=ha(),v,u,w,C,D,ab,La,ia,y,Ga,G,H=n("dragBetweenAllDayAndSlots");c.draggable({scroll:!1,grid:[h,s],axis:1==f?"y":!1,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(b,d){q("eventDragStart",c,a,b,d);fa(a,
c);e.build();v=c.position();u=e.cell(b.pageX,b.pageY);w=C=!0;D=ab=N(u);Ga=G=y=La=ia=0},drag:function(a,b){var g=e.cell(a.pageX,a.pageY);if(w=!!g){D=N(g);if(H||!D){if(La=Math.round((b.position.left-v.left)/h),La!=ia){var g=Q(0,u.col),k=u.col+La,k=Math.max(0,k),k=Math.min(f-1,k),k=Q(0,k);y=r(k,g)}}else w=!1;D||(Ga=Math.round((b.position.top-v.top)/s)*t)}if(w!=C||D!=ab||La!=ia||Ga!=G)d(),C=w,ab=D,ia=La,G=Ga;c.draggable("option","revert",!w)},stop:function(b,e){Y();q("eventDragStop",c,a,b,e);w&&(D||y||
Ga)?U(this,a,y,D?0:Ga,D,b,e):(w=!0,D=!1,Ga=y=La=0,d(),c.css("filter",""),c.css(v),K(a,c))}})}function h(a,c,b){var d,e,f=ma(),g=ha();c.resizable({minHeight:f*n("minHeightInSlots"),handles:{s:".ui-resizable-handle"},grid:f,start:function(b,f){d=e=0;fa(a,c);q("eventResizeStart",this,a,b,f)},resize:function(h,k){d=Math.round((Math.max(f,c.height())-k.originalSize.height)/f);d!=e&&(b.text(T(a.start,d||a.end?m(v(a),g*d):null,n("timeFormat"))),e=d)},stop:function(b,e){q("eventResizeStop",this,a,b,e);d?
aa(this,a,0,g*d,b,e):K(a,c)}})}var l=this;l.renderEvents=function(g,h){var k,s=g.length,r=[],t=[],v=b(".fc-agenda-allday, .fc-agenda-divider.fc-widget-header");for(k=0;k<s;k++){var u=g[k];u.allDay?(u.start>=l.start&&u.start<=l.end||u.end>=l.start&&u.end<=l.end||u.start<l.start&&u.end>l.end)&&r.push(u):t.push(u)}n("allDaySlot")&&(0<r.length?(v.show(),X(r,h)):(X(r,h),v.hide()),w());var s=ua(),r=E(),v=G(),C,u=b.map(t,c),z,y,K,A;k=[];for(z=0;z<s;z++){C=Q(0,z);m(C,r);y=t;K=u;A=C;C=m(p(C),v-r);for(var R=
[],L=void 0,F=y.length,Ea=void 0,fa=void 0,U=void 0,N=U=fa=void 0,Ha=void 0,L=0;L<F;L++)Ea=y[L],fa=Ea.start,U=K[L],U>A&&fa<C&&(fa<A?(fa=p(A),N=!1):N=!0,U>C?(U=p(C),Ha=!1):Ha=!0,R.push({event:Ea,start:fa,end:U,isStart:N,isEnd:Ha,title:Ea.title,sortKey:Ea.sortKey}));K=A=R.sort(ta);y=void 0;y=[];R=C=A=void 0;for(A=0;A<K.length;A++){C=K[A];for(R=0;R<y.length&&I(C,y[R]).length;R++);(y[R]||(y[R]=[])).push(C)}K=y[0];F=L=R=C=A=A=void 0;for(A=0;A<y.length;A++)for(C=y[A],R=0;R<C.length;R++)for(L=C[R],L.forwardSegs=
[],F=A+1;F<y.length;F++)I(L,y[F],L.forwardSegs);if(K){for(A=0;A<K.length;A++)B(K[A]);for(A=0;A<K.length;A++)W(K[A],0,0)}K=[];R=C=A=void 0;for(A=0;A<y.length;A++)for(C=y[A],R=0;R<C.length;R++)K.push(C[R]);A=K;for(y=0;y<A.length;y++)K=A[y],K.col=z,k.push(K)}a(k);s=k.length;z="";u=D();y=n("isRTL");for(t=0;t<s;t++)r=k[t],v=r.event,K=m(p(r.start),n("minHeightInSlots")*n("slotMinutes")),r.end<K&&(r.end=K),K=P(r.start,r.start),A=P(r.start,r.end),C=Z(r.col),R=V(r.col),F=R-C,R-=.025*F,F=R-C,L=F*(r.forwardCoord-
r.backwardCoord),n("slotEventOverlap")&&(L=Math.max(2*(L-10),L)),y?(Ea=R-r.backwardCoord*F,F=Ea-L):(F=C+r.backwardCoord*F,Ea=F+L),F=Math.max(F,C),Ea=Math.min(Ea,R),L=Ea-F,r.top=K,r.left=F,r.outerWidth=L,r.outerHeight=A-K,z+=e(v,r);u[0].innerHTML=z;y=u.children();for(t=0;t<s;t++)r=k[t],v=r.event,z=b(y[t]),K=q("eventRender",v,v,z),!1===K?z.remove():(K&&!0!==K&&(z.remove(),z=b(K).css({position:"absolute",top:r.top,left:r.left}).appendTo(u)),r.element=z,v._id===h?f(v,z,r):z[0]._fci=t,ia(v,z));H(u,k,f);
for(t=0;t<s;t++)if(r=k[t],z=r.element)r.vsides=O(z,!0),r.hsides=M(z,!0),v=z.find(".fc-event-title"),v.length&&(r.contentTop=v[0].offsetTop);for(t=0;t<s;t++)if(r=k[t],z=r.element)z[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px",u=Math.max(0,r.outerHeight-r.vsides),z[0].style.height=u+"px",v=r.event,r.contentTop!==d&&10>u-r.contentTop&&(z.find("div.fc-event-time").text(ga(v.start,n("timeFormat"))+" - "+v.title),z.find("div.fc-event-title").remove()),q("eventAfterRender",v,v,z)};l.clearEvents=
function(){C().empty();D().empty()};l.slotSegHtml=e;za.call(l);var n=l.opt,q=l.trigger,s=l.isEventDraggable,t=l.isEventResizable,v=l.eventEnd,u=l.eventElementHandlers,w=l.setHeight,C=l.getDaySegmentContainer,D=l.getSlotSegmentContainer,y=l.getHoverListener,G=l.getMaxMinute,E=l.getMinMinute,P=l.timePosition,N=l.getIsCellAllDay,Z=l.colContentLeft,V=l.colContentRight,Q=l.cellToDate,ua=l.getColCnt,la=l.getColWidth,ma=l.getSnapHeight,ha=l.getSnapMinutes,F=l.getSlotContainer,ia=l.reportEventElement,K=l.showEvents,
fa=l.hideEvents,U=l.eventDrop,aa=l.eventResize,S=l.renderDayOverlay,Y=l.clearOverlays,X=l.renderDayEvents,qa=l.calendar,ga=qa.formatDate,T=qa.formatDates;l.draggableDayEvent=function(a,c,b){function d(){h||(c.width(f).height("").draggable("option","grid",null),h=!0)}var e=b.isStart,f,g,h=!0,l,m=y(),s=la(),t=ma(),v=ha(),u=E(),w=n("dragBetweenAllDayAndSlots");c.draggable({opacity:n("dragOpacity","month"),revertDuration:n("dragRevertDuration"),start:function(b,u){q("eventDragStart",c,a,b,u);fa(a,c);
f=c.width();m.start(function(b,f){Y();if(b){g=!1;var m=Q(0,f.col),q=Q(0,b.col);l=r(q,m);b.row?w&&e?h&&(c.width(s-10),A(c,t*Math.round((a.end?(a.end-a.start)/6E4:n("defaultEventMinutes"))/v)),c.draggable("option","grid",[s,1]),h=!1):g=!0:(S(k(p(a.start),l),k(z(a),l)),d());g=g||h&&!l}else d(),g=!0;c.draggable("option","revert",g)},b,"drag")},stop:function(b,e){m.stop();Y();q("eventDragStop",c,a,b,e);if(g)d(),c.css("filter",""),K(a,c);else{var f=0;w&&!h&&(f=Math.round((c.offset().top-F().offset().top)/
t)*v+u-(60*a.start.getHours()+a.start.getMinutes()));U(this,a,l,f,h,b,e)}}})}}function B(a){var c=a.forwardSegs,b=0,e,f;if(a.forwardPressure===d){for(e=0;e<c.length;e++)f=c[e],B(f),b=Math.max(b,1+f.forwardPressure);a.forwardPressure=b}}function W(a,c,b){var e=a.forwardSegs;if(a.forwardCoord===d)for(e.length?(e.sort(na),W(e[0],c+1,b),a.forwardCoord=e[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-b)/(c+1),c=0;c<e.length;c++)W(e[c],0,a.forwardCoord)}function I(a,c,
b){b=b||[];for(var d=0;d<c.length;d++){var e=c[d];a.end>e.start&&a.start<e.end&&b.push(c[d])}return b}function na(a,c){return c.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(c.backwardCoord||0)||ta(a,c)}function ta(a,c){return a.start-c.start||(a.sortKey||0)-(c.sortKey||0)||c.end-c.start-(a.end-a.start)||(a.title||"").localeCompare(c.title)}function sa(a,c,e){function f(a,c){var d=E[a];return b.isPlainObject(d)?Da(d,c||e):d}function g(a,b){return c.trigger.apply(c,[a,b||z].concat(Array.prototype.slice.call(arguments,
2),[z]))}function h(a){return a.end?p(a.end):D(a)}function l(a,c,b){a=H[a._id];var d,e=a.length;for(d=0;d<e;d++)if(!c||a[d][0]!=c[0])a[d][b]()}function n(a,c,b,e){b=b||0;for(var f,g=a.length,h=0;h<g;h++)f=a[h],e!==d&&(f.allDay=e),m(k(f.start,c,!0),b),f.end&&(f.end=m(k(f.end,c,!0),b)),y(f,E)}function q(a,c,b){b=b||0;for(var d,e=a.length,f=0;f<e;f++)d=a[f],d.end=m(k(h(d),c,!0),b),y(d,E)}function s(a,c){var b=z.getColCnt(),d=F?-1:1,e=F?b-1:0;"object"==typeof a&&(c=a.col,a=a.row);return a*b+(c*d+e)}function t(a){var c=
z.visStart.getDay();a+=P[c];return 7*Math.floor(a/O)+Q[(a%O+O)%O]-c}function v(a){var c=p(z.visStart);k(c,a);return c}function u(a){return r(a,z.visStart)}function w(a){var c=z.visStart.getDay();a+=c;return Math.floor(a/7)*O+P[(a%7+7)%7]-P[c]}function C(a){var c=z.getColCnt();return{row:Math.floor(a/c),col:(a%c+c)%c*(F?-1:1)+(F?c-1:0)}}var z=this;z.element=a;z.calendar=c;z.name=e;z.opt=f;z.trigger=g;z.isEventDraggable=function(a){var c=a.source||{};return pa(a.startEditable,c.startEditable,f("eventStartEditable"),
a.editable,c.editable,f("editable"))&&!f("disableDragging")};z.isEventResizable=function(a){var c=a.source||{};return pa(a.durationEditable,c.durationEditable,f("eventDurationEditable"),a.editable,c.editable,f("editable"))&&!f("disableResizing")};z.setEventData=function(a){G={};var c,b=a.length,d;for(c=0;c<b;c++)d=a[c],G[d._id]?G[d._id].push(d):G[d._id]=[d]};z.clearEventData=function(){G={};H={};B=[]};z.eventEnd=h;z.reportEventElement=function(a,c){B.push({event:a,element:c});H[a._id]?H[a._id].push(c):
H[a._id]=[c]};z.triggerEventDestroy=function(){b.each(B,function(a,c){z.trigger("eventDestroy",c.event,c.event,c.element)})};z.eventElementHandlers=function(a,c){c.on("click",function(b){if(!c.hasClass("ui-draggable-dragging")&&!c.hasClass("ui-resizable-resizing"))return g("eventClick",this,a,b)}).hover(function(c){g("eventMouseover",this,a,c)},function(c){g("eventMouseout",this,a,c)})};z.showEvents=function(a,c){l(a,c,"show")};z.hideEvents=function(a,c){l(a,c,"hide")};z.eventDrop=function(a,c,b,
d,e,f,h){var k=c.allDay,l=c._id;n(G[l],b,d,e);g("eventDrop",a,c,b,d,e,function(){n(G[l],-b,-d,k);A(l)},f,h);A(l)};z.eventResize=function(a,c,b,d,e,f){var h=c._id,k=c._start,l=c._end;q(G[h],b,d);g("eventResize",a,c,b,d,function(){c.start=k;c.end=l;y(c);A(h)},e,f);A(h)};var D=z.defaultEventEnd,y=c.normalizeEvent,A=c.reportEventChange,G={},H={},B=[],E=c.options;z.isHiddenDay=function(a){"object"==typeof a&&(a=a.getDay());return I[a]};z.skipHiddenDays=function(a,c,b){for(c=c||1;I[(a.getDay()+(b?c:0)+
7)%7];)k(a,c)};z.getCellsPerWeek=function(){return O};z.dateToCell=function(a){a=u(a);a=w(a);return C(a)};z.dateToDayOffset=u;z.dayOffsetToCellOffset=w;z.cellOffsetToCell=C;z.cellToDate=function(){var a=s.apply(null,arguments),a=t(a);return v(a)};z.cellToCellOffset=s;z.cellOffsetToDayOffset=t;z.dayOffsetToDate=v;z.rangeToSegments=function(a,c){for(var b=z.getRowCnt(),d=z.getColCnt(),e=[],f=u(a),g=u(c),h=w(f),k=w(g)-1,l=0;l<b;l++){var m=l*d,n=m+d-1,m=Math.max(h,m),n=Math.min(k,n);if(m<=n){var p=C(m),
q=C(n),p=[p.col,q.col].sort(),m=t(m)==f,n=t(n)+1==g;e.push({row:l,leftCol:p[0],rightCol:p[1],isStart:m,isEnd:n})}}return e};var M=f("hiddenDays")||[],I=[],O,P=[],Q=[],F=f("isRTL");(function(){!1===f("weekends")&&M.push(0,6);for(var a=0,c=0;7>a;a++)P[a]=c,I[a]=-1!=b.inArray(a,M),I[a]||(Q[c]=a,c++);O=c;if(!O)throw"invalid hiddenDays";})()}function za(){function a(b,d,e){b=c([b],!0,!1);var f=[];oa(b,function(a,c){a.row===d&&c.css("top",e);f.push(c[0])});return f}function c(a,k,l){var m=V(),n=k?b("<div/>"):
m;a=d(a);var p;e(a);p=f(a);n[0].innerHTML=p;n=n.children();k&&m.append(n);g(a,n);oa(a,function(a,c){a.hsides=M(c,!0)});oa(a,function(a,c){c.width(Math.max(0,a.outerWidth-a.hsides))});oa(a,function(a,c){a.outerHeight=c.outerHeight(!0)});h(a,l);return a}function d(a){for(var c=[],b=0;b<a.length;b++){for(var e=a[b],f=e.start,g=z(e),f=da(f,g),g=0;g<f.length;g++)f[g].event=e;c.push.apply(c,f)}return c}function e(a){for(var c=v("isRTL"),b=0;b<a.length;b++){var d=a[b],f=(c?d.isStart:d.isEnd)?K:F,g=((c?d.isEnd:
d.isStart)?X:W)(d.leftCol),f=f(d.rightCol);d.left=g;d.outerWidth=f-g}}function f(a){for(var c="",b=0;b<a.length;b++){var d=a[b],e="",g=v("isRTL"),h=d.event,k=h.url,l=["fc-event","fc-event-hori"];w(h)&&l.push("fc-event-draggable");d.isStart&&l.push("fc-event-start");d.isEnd&&l.push("fc-event-end");l=l.concat(h.className);h.source&&(l=l.concat(h.source.className||[]));var m=Ia(h,v),e=k?e+("<a href='"+ja(k)+"'"):e+"<div",e=e+(" class='"+l.join(" ")+"' style='position:absolute;left:"+d.left+"px;"+m+"'><div class='fc-event-inner'>");
if(h.allDay||d.isStart)e+="<span class='fc-event-time'>"+ja(U(h.start,h.end,h.allDay&&"month"!=t.name?v("timeFormat","allDay"):v("timeFormat")))+"</span>";e+="<span class='fc-event-title'>"+ja(h.title||"")+"</span></div>";d.isEnd&&C(h)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(g?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>");e+="</"+(k?"a":"div")+">";c+=e}return c}function g(a,c){for(var d=0;d<a.length;d++){var e=a[d],f=e.event,h=c.eq(d),f=u("eventRender",f,f,h);!1===f?h.remove():(f&&!0!==f&&
(f=b(f).css({position:"absolute",left:e.left}),h.replaceWith(f),h=f),e.element=h)}}function h(a,c){var d=l(a),e=n(),f=[],g=P();if(c)for(var k=0;k<e.length;k++){e[k].height(Z(d[k].map(function(a){return a.columnHeight})));for(var m=0;m<g;m++)if(b(e[k][m]).nextAll().remove(),0<d[k][m].hiddenSegmentsCount){var p=b("<a class='fc-show-more-link' href='#'>+"+d[k][m].hiddenSegmentsCount+" "+t.calendar.options.eventLimitText+"</a>");p.data("row",k);p.data("column",m);b(e[k][m]).after(p);p.mousedown(function(a){var c=
p.data("row"),b=p.data("column"),c=t.calendar.getSegmentsByRowAndColumn(c,b);u("showMoreMousedown",a,a,c)})}}for(k=0;k<e.length;k++)f.push(e[k].position().top);oa(a,function(a,c){c.css("top",f[a.row]+a.top)})}function l(a){var c=t.calendar.options.eventLimit&&"number"!==typeof t.calendar.options.eventLimitt?t.calendar.options.eventLimit:!1;t.calendar.options.hiddenElements=[];var d=O(),e=P(),f=[];a=m(a);for(var g=0;g<d;g++){var h=a[g];f[g]=[];for(q=0;q<e;q++)f[g][q]={columnHeight:0,popupHeight:0,
segmentsCount:0,hiddenSegmentsCount:0};for(q=0;q<h.length;q++){var k=h[q];k.top=Z(f[g].map(function(a){return a.popupHeight}).slice(k.leftCol,k.rightCol+1));for(var n=k.top+k.outerHeight,p=k.leftCol;p<=k.rightCol;p++)f[g][p].popupHeight=n,f[g][p].segmentsCount++,c&&f[g][k.leftCol].segmentsCount>=c||(f[g][p].columnHeight=n);c&&f[g][k.leftCol].segmentsCount>=c&&(k.element.hide(),f[g][k.leftCol].hiddenSegmentsCount++,t.calendar.options.hiddenElements[g]||(t.calendar.options.hiddenElements[g]=[]),t.calendar.options.hiddenElements[g][k.leftCol]||
(t.calendar.options.hiddenElements[g][k.leftCol]=[]),t.calendar.options.hiddenElements[g][k.leftCol].push(k.element.get(0)))}}for(g=0;g<d;g++)for(var q=0;q<e;q++)c&&f[g][q].segmentsCount==c&&b(t.calendar.options.hiddenElements[g][q]).show();return f}function m(a){var c=O(),b=[],d,e,f;for(d=0;d<a.length;d++)e=a[d],f=e.row,e.element&&(b[f]?b[f].push(e):b[f]=[e]);for(f=0;f<c;f++){a=f;var g=b[f]||[];d=[];g.sort(ka);e=[];for(var h=0;h<g.length;h++){for(var k=g[h],l=0;l<e.length;l++){var n;a:{n=e[l];for(var p=
0;p<n.length;p++){var q=n[p];if(q.leftCol<=k.rightCol&&q.rightCol>=k.leftCol){n=!0;break a}}n=!1}if(!n)break}e[l]?e[l].push(k):e[l]=[k]}for(g=0;g<e.length;g++)d.push.apply(d,e[g]);b[a]=d}return b}function n(){var a,c=O(),b=[];for(a=0;a<c;a++)b[a]=Q(a).find("div.fc-day-content > div");return b}function q(a,c){var b=V();oa(a,function(a,b,d){var e=a.event;e._id===c?s(e,b,a):b[0]._fci=d});H(b,a,s)}function s(a,c,b){w(a)&&t.draggableDayEvent(a,c,b);b.isEnd&&C(a)&&t.resizableDayEvent(a,c,b);A(a,c)}var t=
this;t.renderDayEvents=function(a,b){var d=c(a,!1,!0);oa(d,function(a,c){y(a.event,c)});q(d,b);oa(d,function(a,c){u("eventAfterRender",a.event,a.event,c)});return d};t.draggableDayEvent=function(a,c){var b=ba(),d;c.draggable({delay:50,opacity:v("dragOpacity"),revertDuration:v("dragRevertDuration"),start:function(e,f){u("eventDragStart",c,a,e,f);B(a,c);b.start(function(b,e,f,g){c.draggable("option","revert",!b||!f&&!g);S();b?(e=ga(e),b=ga(b),d=r(b,e),aa(k(p(a.start),d),k(z(a),d))):d=0},e,"drag")},
stop:function(e,f){b.stop();S();u("eventDragStop",c,a,e,f);d?E(this,a,d,0,a.allDay,e,f):(c.css("filter",""),G(a,c))}})};t.resizableDayEvent=function(c,d,e){var f=v("isRTL")?"w":"e",g=d.find(".ui-resizable-"+f),h=!1;wa(d);d.mousedown(function(a){a.preventDefault()}).click(function(a){h&&(a.preventDefault(),a.stopImmediatePropagation())});g.mousedown(function(g){function l(a){u("eventResizeStop",this,c,a);b("body").css("cursor","");m.stop();S();p&&I(this,c,p,0,a);setTimeout(function(){h=!1},0)}if(1==
g.which){h=!0;var m=ba();O();P();var n=d.css("top"),p,q,t=b.extend({},c),s=ra(na(c.start));Y();b("body").css("cursor",f+"-resize").one("mouseup",l);u("eventResizeStart",this,c,g);m.start(function(d,g){if(d){var h=T(g),l=T(d),l=Math.max(l,s);(p=ea(l)-ea(h))?(t.end=k(D(c),p,!0),h=q,q=a(t,e.row,n),q=b(q),q.find("*").css("cursor",f+"-resize"),h&&h.remove(),B(c)):q&&(G(c),q.remove(),q=null);S();aa(c.start,k(z(c),p))}},g)}})};var v=t.opt,u=t.trigger,w=t.isEventDraggable,C=t.isEventResizable,D=t.eventEnd,
y=t.reportEventElement,A=t.eventElementHandlers,G=t.showEvents,B=t.hideEvents,E=t.eventDrop,I=t.eventResize,O=t.getRowCnt,P=t.getColCnt,Q=t.allDayRow,W=t.colLeft,F=t.colRight,X=t.colContentLeft,K=t.colContentRight,V=t.getDaySegmentContainer,U=t.calendar.formatDates,aa=t.renderDayOverlay,S=t.clearOverlays,Y=t.clearSelection,ba=t.getHoverListener,da=t.rangeToSegments,ga=t.cellToDate,T=t.cellToCellOffset,ea=t.cellOffsetToDayOffset,na=t.dateToDayOffset,ra=t.dayOffsetToCellOffset}function oa(a,c){for(var b=
0;b<a.length;b++){var d=a[b],e=d.element;e&&c(d,e,b)}}function ka(a,c){return c.rightCol-c.leftCol-(a.rightCol-a.leftCol)||c.event.allDay-a.event.allDay||a.event.start-c.event.start||(a.event.sortKey||0)-(c.event.sortKey||0)||(a.event.title||"").localeCompare(c.event.title)}function Aa(){function a(c){l&&(l=!1,k(),f("unselect",null,c))}function c(a,b,d,e){l=!0;f("select",null,a,b,d,e)}var d=this;d.select=function(b,d,e){a();d||(d=g(b,e));h(b,d,e);c(b,d,e)};d.unselect=a;d.reportSelection=c;d.daySelectionMousedown=
function(f){var g=d.cellToDate,l=d.getIsCellAllDay,m=d.getHoverListener(),n=d.reportDayClick;if(1==f.which&&e("selectable")){a(f);var p;m.start(function(a,c){k();a&&l(a)?(p=[g(c),g(a)].sort(ra),h(p[0],p[1],!0)):p=null},f);b(document).one("mouseup",function(a){m.stop();p&&(+p[0]==+p[1]&&n(p[0],!0,a),c(p[0],p[1],!0,a))})}};var e=d.opt,f=d.trigger,g=d.defaultSelectionEnd,h=d.renderSelection,k=d.clearSelection,l=!1;e("selectable")&&e("unselectAuto")&&b(document).mousedown(function(c){var d=e("unselectCancel");
d&&b(c.target).closest(d).length||a(c)})}function Xa(){this.renderOverlay=function(d,e){var f=c.shift();f||(f=b("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));f[0].parentNode!=e[0]&&f.appendTo(e);a.push(f.css(d).show());return f};this.clearOverlays=function(){for(var b;b=a.shift();)c.push(b.hide().unbind())};var a=[],c=[]}function Ta(a){var c,b;this.build=function(){c=[];b=[];a(c,b)};this.cell=function(a,d){var e=c.length,f=b.length,g,h=-1,k=-1;for(g=0;g<e;g++)if(d>=c[g][0]&&
d<c[g][1]){h=g;break}for(g=0;g<f;g++)if(a>=b[g][0]&&a<b[g][1]){k=g;break}return 0<=h&&0<=k?{row:h,col:k}:null};this.rect=function(a,d,e,f,g){g=g.offset();return{top:c[a][0]-g.top,left:b[d][0]-g.left,width:b[f][1]-b[d][0],height:c[e][1]-c[a][0]}}}function Sa(a){function c(b){b.pageX===d&&(b.pageX=b.originalEvent.pageX,b.pageY=b.originalEvent.pageY);b=a.cell(b.pageX,b.pageY);if(!b!=!h||b&&(b.row!=h.row||b.col!=h.col))b?(g||(g=b),f(b,g,b.row-g.row,b.col-g.col)):f(b,g),h=b}var e,f,g,h;this.start=function(d,
k,l){f=d;g=h=null;a.build();c(k);e=l||"mousemove";b(document).bind(e,c)};this.stop=function(){b(document).unbind(e,c);return h}}function Ma(a){var c=this,b={},e={},f={};c.left=function(c){return e[c]=e[c]===d?(b[c]=b[c]||a(c)).position().left:e[c]};c.right=function(e){return f[e]=f[e]===d?c.left(e)+(b[e]=b[e]||a(e)).width():f[e]};c.clear=function(){b={};e={};f={}}}var Na={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",
weekNumberShortTitle:"W",weekNumberTitle:"Week",allDayDefault:!0,ignoreTimezone:!0,dragBetweenAllDayAndSlots:!0,minHeightInSlots:1,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",
handleWindowResize:!0,eventLimit:!1,eventLimitText:"more"},Ja={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},X=b.fullCalendar={version:"1.6.4"},ba=X.views={};b.fn.fullCalendar=function(a){if("string"==typeof a){var e=
Array.prototype.slice.call(arguments,1),f;this.each(function(){var c=b.data(this,"fullCalendar");c&&b.isFunction(c[a])&&(c=c[a].apply(c,e),f===d&&(f=c),"destroy"==a&&b.removeData(this,"fullCalendar"))});return f!==d?f:this}a=a||{};var g=a.eventSources||[];delete a.eventSources;a.events&&(g.push(a.events),delete a.events);a=b.extend(!0,{},Na,a.isRTL||a.isRTL===d&&Na.isRTL?Ja:{},a);this.each(function(d,e){var f=b(e),h=new c(f,a,g);f.data("fullCalendar",h);h.render()});return this};X.sourceNormalizers=
[];X.sourceFetchers=[];var nb={dataType:"json",cache:!1},fb=1;X.addDays=k;X.cloneDate=p;X.parseDate=w;X.parseISO8601=u;X.parseTime=t;X.formatDate=C;X.formatDates=D;X.clearTime=n;var $a="sun mon tue wed thu fri sat".split(" "),ob=36E5,Ra={s:function(a){return a.getSeconds()},ss:function(a){return E(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return E(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return E(a.getHours()%12||12)},H:function(a){return a.getHours()},
HH:function(a){return E(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return E(a.getDate())},ddd:function(a,c){return c.dayNamesShort[a.getDay()]},dddd:function(a,c){return c.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return E(a.getMonth()+1)},MMM:function(a,c){return c.monthNamesShort[a.getMonth()]},MMMM:function(a,c){return c.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},
t:function(a){return 12>a.getHours()?"a":"p"},tt:function(a){return 12>a.getHours()?"am":"pm"},T:function(a){return 12>a.getHours()?"A":"P"},TT:function(a){return 12>a.getHours()?"AM":"PM"},u:function(a){return C(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return 10<a&&20>a?"th":["st","nd","rd"][a%10-1]||"th"},w:function(a,c){return c.weekNumberCalculation(a)},W:function(a){var c=new Date(a.getTime());c.setDate(c.getDate()+4-(c.getDay()||7));a=c.getTime();c.setMonth(0);c.setDate(1);
return Math.floor(Math.round((a-c)/864E5)/7)+1}};X.dateFormatters=Ra;X.applyAll=ya;ba.month=function(a,c){var b=this;b.render=function(a,c){c&&(h(a,c),a.setDate(1));var m=d("firstDay"),n=p(a,!0);n.setDate(1);var q=h(p(n),1),t=p(n);k(t,-((t.getDay()-m+7)%7));f(t);var s=p(q);k(s,(7-s.getDay()+m)%7);f(s,-1,!0);var m=g(),v=Math.round(r(s,t)/7);"fixed"==d("weekMode")&&(k(s,7*(6-v)),v=6);b.title=l(n,d("titleFormat"));b.start=n;b.end=q;b.visStart=t;b.visEnd=s;e(v,m,!0)};Wa.call(b,a,c,"month");var d=b.opt,
e=b.renderBasic,f=b.skipHiddenDays,g=b.getCellsPerWeek,l=c.formatDate};ba.basicWeek=function(a,c){var b=this;b.render=function(a,c){c&&k(a,7*c);var l=k(p(a),-((a.getDay()-d("firstDay")+7)%7)),m=k(p(l),7),n=p(l);f(n);var q=p(m);f(q,-1,!0);var t=g();b.start=l;b.end=m;b.visStart=n;b.visEnd=q;b.title=h(n,k(p(q),-1),d("titleFormat"));e(1,t,!1)};Wa.call(b,a,c,"basicWeek");var d=b.opt,e=b.renderBasic,f=b.skipHiddenDays,g=b.getCellsPerWeek,h=c.formatDates};ba.listWeek=function(a,c){var b=this;b.render=function(a,
c){c&&k(a,7*c);var l=k(p(a),-((a.getDay()-d("firstDay")+7)%7)),m=k(p(l),7),n=p(l);f(n);var q=p(m);f(q,-1,!0);var t=g();b.start=l;b.end=m;b.visStart=n;b.visEnd=q;b.title=h(n,k(p(q),-1),d("titleFormat"));e(1,t,!1)};ea.call(b,a,c,"listWeek");var d=b.opt,e=b.renderList,f=b.skipHiddenDays,g=b.getCellsPerWeek,h=c.formatDates};ba.basicDay=function(a,c){var b=this;b.render=function(a,c){c&&k(a,c);f(a,0>c?-1:1);var h=p(a,!0),l=k(p(h),1);b.title=g(a,d("titleFormat"));b.start=b.visStart=h;b.end=b.visEnd=l;e(1,
1,!1)};Wa.call(b,a,c,"basicDay");var d=b.opt,e=b.renderBasic,f=b.skipHiddenDays,g=c.formatDate};f({weekMode:"fixed"});ba.agendaWeek=function(a,c){var b=this;b.render=function(a,c){c&&k(a,7*c);var l=k(p(a),-((a.getDay()-d("firstDay")+7)%7)),m=k(p(l),7),n=p(l);f(n);var q=p(m);f(q,-1,!0);var t=g();b.title=h(n,k(p(q),-1),d("titleFormat"));b.start=l;b.end=m;b.visStart=n;b.visEnd=q;e(t)};y.call(b,a,c,"agendaWeek");var d=b.opt,e=b.renderAgenda,f=b.skipHiddenDays,g=b.getCellsPerWeek,h=c.formatDates};ba.agendaWeekFive=
function(a,c){var b=this;b.render=function(a,c){c&&k(a,7*c);var h=k(p(a),-((a.getDay()-d("firstDay")+7)%7)),l=k(p(h),7),m=p(h);f(m);var n=p(l);f(n,-1,!0);b.title=g(m,k(p(n),-1),d("titleFormat"));b.start=h;b.end=l;b.visStart=m;b.visEnd=n;e(5)};y.call(b,a,c,"agendaWeekFive");var d=b.opt,e=b.renderAgenda,f=b.skipHiddenDays,g=c.formatDates};ba.agendaDay=function(a,c){var b=this;b.render=function(a,c){c&&k(a,c);f(a,0>c?-1:1);var h=p(a,!0),l=k(p(h),1);b.title=g(a,d("titleFormat"));b.start=b.visStart=h;
b.end=b.visEnd=l;e(1)};y.call(b,a,c,"agendaDay");var d=b.opt,e=b.renderAgenda,f=b.skipHiddenDays,g=c.formatDate};f({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,minDefaultDayStartHour:0,maxDefaultDayStartHour:24,slotEventOverlap:!0})})(jQuery);
(function(b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define([],b):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).SmartBanner=b()})(function(){return function d(f,c,a){function e(h,l){if(!c[h]){if(!f[h]){var m="function"==typeof require&&require;if(!l&&m)return m(h,!0);if(g)return g(h,!0);m=Error("Cannot find module '"+h+"'");throw m.code="MODULE_NOT_FOUND",m;}m=c[h]=
{exports:{}};f[h][0].call(m.exports,function(a){var c=f[h][1][a];return e(c?c:a)},m,m.exports,d,f,c,a)}return c[h].exports}for(var g="function"==typeof require&&require,h=0;h<a.length;h++)e(a[h]);return e}({1:[function(d,f,c){var a=d("xtend/mutable"),e=d("component-query"),g=d("get-doc"),h=d("cookie-cutter"),k=d("ua-parser-js"),l=(navigator.language||navigator.userLanguage||navigator.browserLanguage).slice(-2)||"us",m=g&&g.documentElement,n={ios:{appMeta:"apple-itunes-app",iconRels:["apple-touch-icon-precomposed",
"apple-touch-icon"],getStoreLink:function(){return"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id"+this.appId}},android:{appMeta:"google-play-app",iconRels:["android-touch-icon","apple-touch-icon-precomposed","apple-touch-icon"],getStoreLink:function(){return"http://play.google.com/store/apps/details?id="+this.appId}},windows:{appMeta:"msApplication-ID",iconRels:["windows-touch-icon","apple-touch-icon-precomposed","apple-touch-icon"],getStoreLink:function(){return"http://www.windowsphone.com/s?appid="+
this.appId}}};d=function(c){var d=k(navigator.userAgent);this.options=a({},{daysHidden:15,daysReminder:90,appStoreLanguage:l,button:"OPEN",store:{ios:"On the App Store",android:"In Google Play",windows:"In the Windows Store"},price:{ios:"FREE",android:"FREE",windows:"FREE"},theme:"",icon:"",force:""},c||{});this.options.force?this.type=this.options.force:"Windows Phone"===d.os.name||"Windows Mobile"===d.os.name?this.type="windows":"iOS"===d.os.name?this.type="ios":"Android"===d.os.name&&(this.type=
"android");c=!this.type;var d="ios"===this.type&&"Mobile Safari"===d.browser.name&&6<=parseInt(d.os.version),e=navigator.standalone,f=h.get("smartbanner-closed"),g=h.get("smartbanner-installed");c||d||e||f||g||(a(this,n[this.type]),this.parseAppId()&&(this.create(),this.show()))};d.prototype={constructor:d,create:function(){var a=this.getStoreLink(),c=this.options.price[this.type]+" - "+this.options.store[this.type],d;if(this.options.icon)d=this.options.icon;else for(var f=0;f<this.iconRels.length;f++){var h=
e('link[rel="'+this.iconRels[f]+'"]');if(h){d=h.getAttribute("href");break}}var k=g.createElement("div");k.className="smartbanner smartbanner-"+(this.options.theme||this.type);k.innerHTML='<div class="smartbanner-container"><a href="javascript:void(0);" class="smartbanner-close">&times;</a><span class="smartbanner-icon" style="background-image: url('+d+')"></span><div class="smartbanner-info"><div class="smartbanner-title">'+this.options.title+"</div><div>"+this.options.author+"</div><span>"+c+'</span></div><a href="'+
a+'" class="smartbanner-button"><span class="smartbanner-button-text">'+this.options.button+"</span></a></div>";g.body?g.body.appendChild(k):g&&g.addEventListener("DOMContentLoaded",function(){g.body.appendChild(k)});e(".smartbanner-button",k).addEventListener("click",this.install.bind(this),!1);e(".smartbanner-close",k).addEventListener("click",this.close.bind(this),!1)},hide:function(){m.classList.remove("smartbanner-show")},show:function(){m.classList.add("smartbanner-show")},close:function(){this.hide();
h.set("smartbanner-closed","true",{path:"/",expires:new Date(Number(new Date)+864E5*this.options.daysHidden)})},install:function(){this.hide();h.set("smartbanner-installed","true",{path:"/",expires:new Date(Number(new Date)+864E5*this.options.daysReminder)})},parseAppId:function(){var a=e('meta[name="'+this.appMeta+'"]');if(a)return this.appId="windows"===this.type?a.getAttribute("content"):/app-id=([^\s,]+)/.exec(a.getAttribute("content"))[1]}};f.exports=d},{"component-query":2,"cookie-cutter":3,
"get-doc":4,"ua-parser-js":6,"xtend/mutable":7}],2:[function(d,f,c){function a(a,c){return c.querySelector(a)}c=f.exports=function(c,d){d=d||document;return a(c,d)};c.all=function(a,c){c=c||document;return c.querySelectorAll(a)};c.engine=function(d){if(!d.one)throw Error(".one callback required");if(!d.all)throw Error(".all callback required");a=d.one;c.all=d.all;return c}},{}],3:[function(d,f,c){c=f.exports=function(a){a||(a={});"string"===typeof a&&(a={cookie:a});void 0===a.cookie&&(a.cookie="");
return{get:function(c){for(var d=a.cookie.split(/;\s*/),f=0;f<d.length;f++){var k=d[f].split("=");if(unescape(k[0])===c)return unescape(k[1])}},set:function(c,d,f){f||(f={});c=escape(c)+"="+escape(d);f.expires&&(c+="; expires="+f.expires);f.path&&(c+="; path="+escape(f.path));return a.cookie=c}}};"undefined"!==typeof document&&(d=c(document),c.get=d.get,c.set=d.set)},{}],4:[function(d,f,c){d=d("has-dom");f.exports=d()?document:null},{"has-dom":5}],5:[function(d,f,c){f.exports=function(){return"undefined"!==
typeof window&&"undefined"!==typeof document&&"function"===typeof document.createElement}},{}],6:[function(d,f,c){(function(a,d){var g={extend:function(a,c){var d={},e;for(e in a)d[e]=c[e]&&0===c[e].length%2?c[e].concat(a[e]):a[e];return d},has:function(a,c){return"string"===typeof a?-1!==c.toLowerCase().indexOf(a.toLowerCase()):!1},lowerize:function(a){return a.toLowerCase()},major:function(a){return"string"===typeof a?a.split(".")[0]:d},trim:function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
"")}},h=function(){for(var a,c=0,f,g,h,k,l,m,n=arguments;c<n.length&&!l;){var p=n[c],s=n[c+1];if("undefined"===typeof a)for(h in a={},s)s.hasOwnProperty(h)&&(k=s[h],"object"===typeof k?a[k[0]]=d:a[k]=d);for(f=g=0;f<p.length&&!l;)if(l=p[f++].exec(this.getUA()))for(h=0;h<s.length;h++)m=l[++g],k=s[h],"object"===typeof k&&0<k.length?2==k.length?a[k[0]]="function"==typeof k[1]?k[1].call(this,m):k[1]:3==k.length?a[k[0]]="function"!==typeof k[1]||k[1].exec&&k[1].test?m?m.replace(k[1],k[2]):d:m?k[1].call(this,
m,k[2]):d:4==k.length&&(a[k[0]]=m?k[3].call(this,m.replace(k[1],k[2])):d):a[k]=m?m:d;c+=2}return a},k=function(a,c){for(var f in c)if("object"===typeof c[f]&&0<c[f].length)for(var h=0;h<c[f].length;h++){if(g.has(c[f][h],a))return"?"===f?d:f}else if(g.has(c[f],a))return"?"===f?d:f;return a},l={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2E3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},m={browser:[[/(opera\smini)\/([\w\.-]+)/i,
/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],["name","version"],[/(OPiOS)[\/\s]+([\w\.]+)/i],[["name","Opera Mini"],"version"],[/\s(opr)\/([\w\.]+)/i],[["name","Opera"],"version"],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],
["name","version"],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[["name","IE"],"version"],[/(edge)\/((\d+)?[\w\.]+)/i],["name","version"],[/(yabrowser)\/([\w\.]+)/i],[["name","Yandex"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],["name","version"],[/(MicroMessenger)\/([\w\.]+)/i],[["name","WeChat"],"version"],[/(qqbrowser)[\/\s]?([\w\.]+)/i],["name","version"],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,
/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[["name","UCBrowser"],"version"],[/(dolfin)\/([\w\.]+)/i],[["name","Dolphin"],"version"],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[["name","Chrome"],"version"],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],["version",["name","Android Browser"]],[/FBAV\/([\w\.]+);/i],["version",["name","Facebook"]],[/fxios\/([\w\.-]+)/i],["version",["name","Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],
["version",["name","Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],["version","name"],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],["name",["version",k,{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape)\/([\w\.-]+)/i],[["name","Netscape"],"version"],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,
/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],["name","version"]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",g.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture",
"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",g.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",g.lowerize]]],device:[[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[["vendor",g.trim],["model",g.trim],["type","smarttv"]],[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],
["model","vendor",["type","tablet"]],[/applecoremedia\/[\w\.]+ \((ipad)/],["model",["vendor","Apple"],["type","tablet"]],[/(apple\s{0,1}tv)/i],[["model","Apple TV"],["vendor","Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],["vendor","model",["type","tablet"]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],["model",["vendor","Amazon"],["type","tablet"]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],
[["model",k,{"Fire Phone":["SD","KF"]}],["vendor","Amazon"],["type","mobile"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],["model","vendor",["type","mobile"]],[/\((ip[honed|\s\w*]+);/i],["model",["vendor","Apple"],["type","mobile"]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],["vendor","model",["type","mobile"]],[/\(bb10;\s(\w+)/i],["model",["vendor","BlackBerry"],["type","mobile"]],
[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],["model",["vendor","Asus"],["type","tablet"]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[["vendor","Sony"],["model","Xperia Tablet"],["type","tablet"]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[["vendor","Sony"],["model","Xperia Phone"],["type","mobile"]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],["vendor","model",["type","console"]],[/android.+;\s(shield)\sbuild/i],["model",["vendor","Nvidia"],
["type","console"]],[/(playstation\s[34portablevi]+)/i],["model",["vendor","Sony"],["type","console"]],[/(sprint\s(\w+))/i],[["vendor",k,{HTC:"APA",Sprint:"Sprint"}],["model",k,{"Evo Shift 4G":"7373KT"}],["type","mobile"]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],["vendor","model",["type","tablet"]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],["vendor",["model",/_/g," "],["type","mobile"]],[/(nexus\s9)/i],
["model",["vendor","HTC"],["type","tablet"]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],["model",["vendor","Microsoft"],["type","console"]],[/(kin\.[onetw]{3})/i],[["model",/\./g," "],["vendor","Microsoft"],["type","mobile"]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],["model",["vendor","Motorola"],["type","mobile"]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],["model",["vendor","Motorola"],["type","tablet"]],
[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[["vendor","Samsung"],"model",["type","tablet"]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[["vendor","Samsung"],"model",["type","mobile"]],[/hbbtv.+maple;(\d+)/i],[["model",/^/,"SmartTV"],["vendor","Samsung"],["type","smarttv"]],[/\(dtv[\);].+(aquos)/i],["model",["vendor","Sharp"],["type","smarttv"]],[/sie-(\w+)*/i],["model",["vendor",
"Siemens"],["type","mobile"]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[["vendor","Nokia"],"model",["type","mobile"]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],["model",["vendor","Acer"],["type","tablet"]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[["vendor","LG"],"model",["type","tablet"]],[/(lg) netcast\.tv/i],["vendor","model",["type","smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],["model",["vendor","LG"],["type","mobile"]],[/android.+(ideatab[a-z0-9\-\s]+)/i],
["model",["vendor","Lenovo"],["type","tablet"]],[/linux;.+((jolla));/i],["vendor","model",["type","mobile"]],[/((pebble))app\/[\d\.]+\s/i],["vendor","model",["type","wearable"]],[/android.+;\s(glass)\s\d/i],["model",["vendor","Google"],["type","wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","mobile"]],[/\s(tablet)[;\/]/i,/\s(mobile)[;\/]/i],
[["type",g.lowerize],"vendor","model"]],engine:[[/windows.+\sedge\/([\w\.]+)/i],["version",["name","EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],["name","version"],[/rv\:([\w\.]+).*(gecko)/i],["version","name"]],os:[[/microsoft\s(windows)\s(vista|xp)/i],["name","version"],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],
["name",["version",k,l]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[["name","Windows"],["version",k,l]],[/\((bb)(10);/i],[["name","BlackBerry"],"version"],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],["name","version"],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[["name","Symbian"],"version"],[/\((series40);/i],["name"],[/mozilla.+\(mobile;.+gecko.+firefox/i],[["name",
"Firefox OS"],"version"],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],["name","version"],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(sunos)\s?([\w\.]+\d)*/i],[["name","Solaris"],"version"],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],
["name","version"],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[["name","iOS"],["version",/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[["name","Mac OS"],["version",/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],["name","version"]]},n=function(c,d){if(!(this instanceof n))return(new n(c,d)).getResult();var e=
c||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),f=d?g.extend(m,d):m;this.getBrowser=function(){var a=h.apply(this,f.browser);a.major=g.major(a.version);return a};this.getCPU=function(){return h.apply(this,f.cpu)};this.getDevice=function(){return h.apply(this,f.device)};this.getEngine=function(){return h.apply(this,f.engine)};this.getOS=function(){return h.apply(this,f.os)};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),
device:this.getDevice(),cpu:this.getCPU()}};this.getUA=function(){return e};this.setUA=function(a){e=a;return this};return this};n.VERSION="0.7.11";n.BROWSER={NAME:"name",MAJOR:"major",VERSION:"version"};n.CPU={ARCHITECTURE:"architecture"};n.DEVICE={MODEL:"model",VENDOR:"vendor",TYPE:"type",CONSOLE:"console",MOBILE:"mobile",SMARTTV:"smarttv",TABLET:"tablet",WEARABLE:"wearable",EMBEDDED:"embedded"};n.ENGINE={NAME:"name",VERSION:"version"};n.OS={NAME:"name",VERSION:"version"};"undefined"!==typeof c?
("undefined"!==typeof f&&f.exports&&(c=f.exports=n),c.UAParser=n):a.UAParser=n;var p=a.jQuery||a.Zepto;if("undefined"!==typeof p){var s=new n;p.ua=s.getResult();p.ua.get=function(){return s.getUA()};p.ua.set=function(a){s.setUA(a);a=s.getResult();for(var c in a)p.ua[c]=a[c]}}})("object"===typeof window?window:this)},{}],7:[function(d,f,c){f.exports=function(c){for(var d=1;d<arguments.length;d++){var f=arguments[d],k;for(k in f)a.call(f,k)&&(c[k]=f[k])}return c};var a=Object.prototype.hasOwnProperty},
{}]},{},[1])(1)});
(function(b){var d=function(){function d(c,a){var e=this;this.yOffset=0;this.maskId="alternativeChoiceMask";this.dialogMargin=this.triangleSize=10;window[c]=this;this.clientInstanceName=c;this.settings=a;$(function(){e.$dialog=$("#"+e.settings.DialogId);e.$triangle=e.$dialog.find("."+e.settings.Css.Triangle);var a=e.$dialog.find("."+e.settings.Css.Column);e.$firstColumn=a.first();e.$secondColumn=a.eq(1);a=e.$dialog.find("."+e.settings.Css.MobileHeaderLink);e.$firstColumnTitleLink=a.first();e.$secondColumnTitleLink=
a.eq(1);e.$firstColumnTitleLink.click(function(){return e.toggleMobileColumnVisibility(!0)});e.$secondColumnTitleLink.click(function(){return e.toggleMobileColumnVisibility(!1)});e.$closeButton=e.$dialog.find("."+e.settings.Css.CloseButton);e.$mobileCancelButton=e.$dialog.find("."+e.settings.Css.CancelButton);e.$closeButton.click(function(){return e.closeDialog()});e.$mobileCancelButton.click(function(){return e.closeDialog()});e.$dialog.get(0).addEventListener("blur",function(a){a=b.CommonFunctions.isIe()?
$(document.activeElement):$(a.relatedTarget);e.isOpened&&0===a.closest(e.$dialog).length&&e.closeDialog()},!0);var c=new b.CallbackDebouncer(function(){e.isOpened&&e.updatePosition()});$(window).resize(function(){c.invokeCallback(void 0,100)});a=new b.WindowResizeHandler;$(a).on(b.WindowResizeHandler.mediaChangedEventName,function(a,c){e.isOpened&&(e.toggleMobileDesktopView(c),e.updatePosition())})})}d.prototype.openDialog=function(c,a){"undefined"===typeof a&&(a=0);this.isOpened=!0;this.$dialog.toggle(!0);
this.toggleMobileDesktopView(b.CommonFunctions.isPhoneScreenSize());this.$triggerElement=c;this.yOffset=a;this.updatePosition();this.$closeButton.focus();b.AlternativeChoiceManager.setOpenedDialogClientInstanceName(this.clientInstanceName)};d.prototype.closeDialog=function(){this.isOpened=!1;this.$dialog.toggle(!1);$("#"+this.maskId).remove();b.AlternativeChoiceManager.setOpenedDialogClientInstanceName("");return!1};d.prototype.getFirstColumn=function(){return this.$firstColumn};d.prototype.getSecondColumn=
function(){return this.$secondColumn};d.prototype.toggleMobileColumnVisibility=function(c){this.$firstColumnTitleLink.toggleClass(this.settings.Css.MobileHeaderLinkActive,c);this.$secondColumnTitleLink.toggleClass(this.settings.Css.MobileHeaderLinkActive,!c);this.$firstColumn.toggle(c);this.$secondColumn.toggle(!c)};d.prototype.updatePosition=function(){if(this.$triggerElement&&this.isOpened){var c,a;if(b.CommonFunctions.isPhoneScreenSize())$("#"+this.maskId).remove(),c=parseInt(this.$dialog.css("z-index"),
10),$(b.CommonFunctions.formatString("<div id='{0}' class='{1}'></div>",this.maskId,this.settings.Css.Mask)).css({opacity:"0.5",filter:"alpha(opacity=0)","z-index":c-1}).appendTo("body"),c=($(window).height()-this.$dialog.outerHeight())/2,a=($(window).width()-this.$dialog.outerWidth())/2;else{var d=this.$triggerElement.offset();a=d.left+this.$triggerElement.outerWidth()/2-this.$dialog.outerWidth()/2;a+this.$dialog.outerWidth()>$(window).width()?a=$(window).width()-this.$dialog.outerWidth()-this.dialogMargin:
0>a&&(a=this.dialogMargin);1===this.settings.OpenDirection?(c=d.top+this.$triggerElement.outerHeight()/2-this.triangleSize+this.yOffset-this.$dialog.outerHeight(),0>c?(c=d.top+this.$triggerElement.outerHeight()/2+this.triangleSize-this.yOffset,this.setOpenDirection(!1)):this.setOpenDirection(!0)):(c=d.top+this.$triggerElement.outerHeight()/2+this.triangleSize+this.yOffset,this.setOpenDirection(!1));this.$triangle.css({left:d.left+this.$triggerElement.outerWidth()/2-a-this.triangleSize})}this.$dialog.css({top:c,
left:a})}};d.prototype.setOpenDirection=function(c){this.$dialog.toggleClass(this.settings.Css.AboveTargetElement,c).toggleClass(this.settings.Css.BelowTargetElement,!c)};d.prototype.toggleMobileDesktopView=function(c){c?this.toggleMobileColumnVisibility(!0):(this.$firstColumn.toggle(!0),this.$secondColumn.toggle(!0))};return d}();b.AlternativeChoice=d})(CCL||(CCL={}));
(function(b){var d=function(){function b(){}b.setOpenedDialogClientInstanceName=function(c){if(c&&0!==c.length){if(b.openedDialogClientInstanceName&&b.openedDialogClientInstanceName!==c){var a=window[b.openedDialogClientInstanceName];a&&a.closeDialog()}b.openedDialogClientInstanceName=c}else b.openedDialogClientInstanceName=void 0};b.getOpenedDialog=function(){return window[b.openedDialogClientInstanceName]};return b}();b.AlternativeChoiceManager=d})(CCL||(CCL={}));
(function(b){var d=function(){function b(c){this.timeoutId=0;this.throttledCallback=c}b.prototype.invokeCallback=function(c,a){var b=this;0===this.timeoutId&&(this.timeoutId=setTimeout(function(){b.timeoutId=0;b.throttledCallback(c)},a))};return b}();b.CallbackThrottler=d})(CCL||(CCL={}));
(function(b){var d=function(){function d(c){var a=this;this.$container=$("#"+c.Controls.Container);this.$selectionList=$("#"+c.Controls.SelectionList);this.$switcher=$("#"+c.Controls.Switcher);this.$values=$("#"+c.Controls.ValuesHidden);this.$checkboxes=this.$selectionList.find("input:checkbox");this.$selectAll=this.$selectionList.find("input:checkbox[value='"+d.commonSettings.SelectAllValue+"']");this.intitalValues=this.$values.val();this.autoPostback=c.AutoPostback;$(document).on(b.CommonFunctions.isIosDevice()?
"touchend":"click",function(c){a.showHideSelectionList(c)});this.$checkboxes.change(function(c){c=$(c.target);var b=c.prop("checked");c=c.val();c===d.commonSettings.SelectAllValue?(c=b,a.$checkboxes.each(function(c,e){$(e).val()!==d.commonSettings.SelectAllValue&&($(e).prop("checked",b),a.addRemoveSelectedValue($(e).val(),b))})):(a.addRemoveSelectedValue(c,b),c=a.isAllChecked(),a.$selectAll.prop("checked",c));a.$container.toggleClass(d.commonSettings.CssClasses.FilterApplied,!c)})}d.prototype.addRemoveSelectedValue=
function(c,a){a?b.CommonFunctions.addIdToHidden(this.$values,c):b.CommonFunctions.removeIdFromHidden(this.$values,c)};d.prototype.ajustListPosition=function(){var c=this.$switcher.position().left;this.$selectionList.css({left:(0>c?0:c+5)+"px",top:this.$switcher.position().top+this.$switcher.outerHeight()+"px"})};d.prototype.showHideSelectionList=function(c){c.target===this.$switcher[0]||1===this.$switcher.find(c.target).length?this.$selectionList.is(":visible")?this.hideSelectionList():this.showSelectionList():
c.target!==this.$selectionList[0]&&1!==this.$selectionList.find(c.target).length&&this.$selectionList.is(":visible")&&this.hideSelectionList()};d.prototype.showSelectionList=function(){this.ajustListPosition();this.$selectionList.show()};d.prototype.hideSelectionList=function(){this.$selectionList.hide();this.intitalValues!==this.$values.val()&&(this.autoPostback?this.raisePostback():(this.$container.trigger(d.commonSettings.SelectionChangedEventName,[this.getSelectedValues()]),this.intitalValues=
this.$values.val()))};d.prototype.isAllChecked=function(){var c=0===this.$selectAll.length||this.$selectAll.is(":checked");return this.$selectionList.find("input:checked").length===this.$checkboxes.length-(c?0:1)};d.prototype.getSelectedValues=function(){return this.$values.val().split(d.commonSettings.Separator)};d.prototype.raisePostback=function(){alert("raisePostback is not defined (method should be overridden).")};return d}();b.CheckBoxSelector=d})(CCL||(CCL={}));
(function(b){var d=function(){function d(c){var a=this;this.settings=c;this.dialogResultDeferred=null;this.isInMobileMode=!1;this.maskNavigationBarMessage=new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.maskNavigationBar);this.unmaskNavigationBarMessage=new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.unmaskNavigationBar);this.expandContentIframeMessage=new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.expandContentAreaFrame);
this.shrinkContentIframeMessage=new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.collapseContentAreaFrame);this.isDialogVisible=function(){return null!==a.dialogResultDeferred};this.enterMobileModeIfNeeded=function(){window.matchMedia("only screen and (max-width: 568px)").matches&&a.enterMobileMode()};this.leaveMobileModeIfNeeded=function(){a.isInMobileMode&&a.leaveMobileMode()};this.enterMobileMode=function(){b.CommonFunctions.makePostMessageCall(window.parent,a.expandContentIframeMessage);
IframeResizer.reportSetIframeDefaultHeight();a.isInMobileMode=!0};this.leaveMobileMode=function(){b.CommonFunctions.makePostMessageCall(window.parent,a.shrinkContentIframeMessage);IframeResizer.reportSetIframeDefaultHeight();a.isInMobileMode=!1};window[c.ConfirmDialogId]=this;this.$confirmDialog=$("#"+c.ConfirmDialogId);this.attachClickHandlers(c);this.cleanupEnvironmentOnUnload()}d.prototype.attachClickHandlers=function(c){var a=this;if(c.ConfirmButtonId)$("#"+c.ConfirmButtonId).on("click",function(){return a.onButtonClick(0)});
if(c.CancelButtonId)$("#"+c.CancelButtonId).on("click",function(){return a.onButtonClick(1)});if(c.AlternativeButtonId)$("#"+c.AlternativeButtonId).on("click",function(){return a.onButtonClick(2)})};d.prototype.cleanupEnvironmentOnUnload=function(){var c=this;$(window).on("unload",function(){c.isDialogVisible()&&(b.CommonFunctions.makePostMessageCall(window.parent,c.unmaskNavigationBarMessage),c.leaveMobileModeIfNeeded())})};d.prototype.onButtonClick=function(c){if(!this.isDialogVisible())return!1;
this.leaveMobileModeIfNeeded();b.CommonFunctions.makePostMessageCall(window.parent,this.unmaskNavigationBarMessage);this.$confirmDialog.hide();this.markDialogAsClosed();this.dialogResultDeferred.resolve(c);this.dialogResultDeferred=null;return!1};d.prototype.show=function(){this.dialogResultDeferred=$.Deferred();b.CommonFunctions.makePostMessageCall(window.parent,this.maskNavigationBarMessage);this.enterMobileModeIfNeeded();this.markDialogAsOpen();this.$confirmDialog.show();return this.dialogResultDeferred.promise()};
d.prototype.showMessage=function(c,a){this.$confirmDialog.find(".ccl-confirm-dialog-header-and-content > h2")[0].innerHTML=c;this.$confirmDialog.find(".ccl-confirm-dialog-header-and-content > p")[0].innerHTML=a;return this.show()};d.prototype.markDialogAsClosed=function(){$("html").removeClass("ccl-confirm-dialog-open")};d.prototype.markDialogAsOpen=function(){$("html").addClass("ccl-confirm-dialog-open")};return d}();b.ConfirmDialog=d;(function(b){b[b.Confirm=0]="Confirm";b[b.Cancel=1]="Cancel";
b[b.Alternative=2]="Alternative"})(b.ConfirmDialogResult||(b.ConfirmDialogResult={}))})(CCL||(CCL={}));
(function(b){var d=function(){return function(){this.aligns=0}}();b.BlinkingDotContext=d;(function(a){a[a.None=0]="None";a[a.WidthCenter=1]="WidthCenter"})(b.BlinkingDotHorizontalAlign||(b.BlinkingDotHorizontalAlign={}));var f=new d;f.containerCssClass="ccl-blinkingdot-container";f.dotCssClass="ccl-blinkingdot-dot";f.pulseCssClass="ccl-blinkingdot-pulse";var c=function(){function a(a){var c=this;this.visible=!0;this.context=this.extendContext(f,a);window[this.context.id]=this;this.$pulseHolder=$("<div />");
this.$pulseHolder.prop("id",this.context.id);this.$pulseHolder.addClass(this.context.containerCssClass);this.context.containerCssExtraClasses&&0<this.context.containerCssExtraClasses.length&&this.$pulseHolder.addClass(this.context.containerCssExtraClasses);this.context.containerCss&&this.$pulseHolder.css(this.context.containerCss);this.context.$targetControl.append(this.$pulseHolder);this.initAlign();this.context.isInitialStateHidden?this.hide():this.show();a=$("<div />");a.addClass(this.context.dotCssClass);
this.context.dotCssExtraClasses&&0<this.context.dotCssExtraClasses.length&&a.addClass(this.context.dotCssExtraClasses);this.context.dotCss&&a.css(this.context.dotCss);this.$pulseHolder.append(a);this.getSupportedTransform()?(a=this.getPulse(),this.$pulseHolder.append(a)):this.timerId=setInterval(this.addCircle.bind(this),1500);this.$pulseHolder.on("click",function(a){return c.onClickHandler(a)})}a.prototype.isVisible=function(){return this.visible};a.prototype.getSupportedTransform=function(){var a;
a=(document.body||document.documentElement).style;return void 0!==a.transition||void 0!==a.WebkitTransition||void 0!==a.MozTransition||void 0!==a.MsTransition};a.prototype.getPulse=function(){var a=$("<div />");a.addClass(this.context.pulseCssClass);this.context.pulseCssExtraClasses&&0<this.context.pulseCssExtraClasses.length&&a.addClass(this.context.pulseCssExtraClasses);this.context.pulseCss&&a.css(this.context.pulseCss);return a};a.prototype.show=function(){this.visible||(this.$pulseHolder.show(),
this.timerId||this.getSupportedTransform()||(this.timerId=setInterval(this.addCircle.bind(this),1500)),this.visible=!0)};a.prototype.hide=function(){this.visible&&(this.$pulseHolder.hide(),clearInterval(this.timerId),this.timerId=null,this.visible=!1)};a.prototype.onClickHandler=function(a){this.context.onClickAction&&(this.context.onClickAction(a),a.stopPropagation())};a.prototype.addCircle=function(){var a=this.getPulse(),c=this.$pulseHolder.outerHeight(),b=this.$pulseHolder.offset(),d=1.1*c;a.css({left:c/
2-2+b.left+"px",top:c/2-2+b.top+"px",width:"0px",height:"0px","margin-top":"0px","margin-left":"0px",opacity:1,position:"fixed"});a.animate({width:d+"px",height:d+"px","margin-top":-d/2+"px","margin-left":-d/2+"px",opacity:"0"},3E3,"easeOutCirc");this.$pulseHolder.append(a);setTimeout(function(){a.remove()},2800)};a.prototype.initAlign=function(){this.context.aligns&&1==this.context.aligns&&this.moveToWidthCenter()};a.prototype.moveToWidthCenter=function(){var a=Math.round(this.context.$targetControl.width()/
2),c=Math.round(this.$pulseHolder.outerWidth()/2),b=parseInt(this.context.$targetControl.css("margin-left"));isNaN(b)&&(b=0);this.$pulseHolder.css("margin-left",a-c+b)};a.prototype.extendContext=function(a,c){var b=new d,b=$.extend(b,a),f=Object.keys(c),l;for(l in f){var m=f[l];c[m]&&(b[m]=c[m])}return b};return a}();b.BlinkingDot=c})(CCL||(CCL={}));
(function(b){var d=function(){function b(){}b.ErrorFeedback={Container:"ccl-error-feedback",Message:"ccl-error-feedback-message",RetryButton:"ccl-error-feedback-retry",SecondButton:"ccl-error-feedback-secondary",CancelButton:"ccl-error-feedback-cancel",IsVisible:"ccl-error-feedback-is-visible",CloseButton:"ccl-error-feedback-close",DismissButton:"ccl-error-feedback-dismiss"};b.InformationFeedback={Container:"ccl-info-feedback",Message:"ccl-info-feedback-message",CloseButton:"ccl-info-feedback-closebutton",
ExtraButton:"ccl-info-feedback-extrabutton",DismissButton:"ccl-info-feedback-dismiss",IsVisible:"ccl-info-feedback-is-visible",ButtonContainer:"ccl-info-feedback-buttons"};return b}();b.CommonCssClasses=d})(CCL||(CCL={}));
(function(b){var d=function(){function c(){}c.ShowFeedbackMessage="ShowErrorFeedbackMessage";c.HideFeedbackMessage="HideErrorFeedbackMessage";return c}();b.ErrorFeedbackEvent=d;var f=function(){function c(a,c){var f=this;this.settings=c;this.mode=c.Mode;this.$feedback=a;this.$retryButton=this.$feedback.find("."+b.CommonCssClasses.ErrorFeedback.RetryButton);this.$secondButton=this.$feedback.find("."+b.CommonCssClasses.ErrorFeedback.SecondButton);this.$cancelButton=this.$feedback.find("."+b.CommonCssClasses.ErrorFeedback.CancelButton);
this.$closeButton=this.$feedback.find("."+b.CommonCssClasses.ErrorFeedback.CloseButton);this.$dismissButton=this.$feedback.find("."+b.CommonCssClasses.ErrorFeedback.DismissButton);var h=$("#"+c.MainContainerClientId);h.on(d.ShowFeedbackMessage,function(a,c,b,d,e,h){a.stopPropagation();f.showFeedbackMessage(c,b,d,e,h)});h.on(d.HideFeedbackMessage,function(a,c){a.stopPropagation();f.hideFeedbackMessage(c)});this.$cancelButton.on("click",function(){return f.hideFeedbackMessage(!0)})}c.showFeedback=function(a,
c,b,f){"undefined"===typeof f&&(f=!1);a.trigger(d.ShowFeedbackMessage,[c,b,null,null,f])};c.showFeedbackWithSecondButton=function(a,c,b,f,k,l){"undefined"===typeof l&&(l=!1);a.trigger(d.ShowFeedbackMessage,[c,b,f,k,l])};c.hideFeedback=function(a,c){"undefined"===typeof c&&(c=!0);a.trigger(d.HideFeedbackMessage,c)};c.prototype.showFeedbackMessage=function(a,c,d,f,k){var l=this;this.$feedback.find("."+b.CommonCssClasses.ErrorFeedback.Message).html(a);this.$secondButton.hide();this.$retryButton.hide();
0===this.mode?(this.$retryButton.off("click"),c&&(this.$retryButton.on("click",c),this.$retryButton.show())):1===this.mode&&(b.CommonFunctions.isMobileDevice()?(this.$dismissButton.on("click",function(){return l.hideDismissFeedback(c,!0)}),this.$dismissButton.show()):(this.$closeButton.on("click",function(){return l.hideDismissFeedback(c,!0)}),this.$closeButton.show()));this.$secondButton.off("click");d&&f&&(this.$secondButton.text(d),this.$secondButton.on("click",f),this.$secondButton.show());this.$cancelButton.toggle(k);
$("body").addClass(b.CommonCssClasses.ErrorFeedback.IsVisible);this.$feedback.stop(!0,!0).show()};c.prototype.hideDismissFeedback=function(a,c){"undefined"===typeof c&&(c=!0);this.hideFeedbackMessage(c).then(function(){a&&a()})};c.prototype.hideFeedbackMessage=function(a){"undefined"===typeof a&&(a=!0);var c=$.Deferred();$("body").removeClass(b.CommonCssClasses.ErrorFeedback.IsVisible);a?this.$feedback.stop(!0,!0).fadeOut(500,function(){c.resolve()}):(this.$feedback.hide(),c.resolve());return c.promise()};
return c}();b.ErrorFeedback=f})(CCL||(CCL={}));
(function(b){var d=function(){function b(){}b.prototype.enable=function(){-1===b.instances.indexOf(this)&&b.instances.push(this)};b.prototype.disable=function(){var c=b.instances.indexOf(this);-1<c&&b.instances.splice(c,1)};b.allowDialogWithId=function(c){b.isAllowed(c)||b.allowDialogIds.push(c)};b.isDialogAllowed=function(c){var a={isAllowed:!0,deniedByInstances:[]};b.isAllowed(c)||b.instances.forEach(function(c){a.isAllowed=!1;a.deniedByInstances.push(c);!a.confirmationMessage&&c.confirmationMessage&&
0<c.confirmationMessage.length&&(a.confirmationMessage=c.confirmationMessage)});return a};b.isAllowed=function(c){return-1<b.allowDialogIds.indexOf(c)};b.instances=[];b.allowDialogIds=[];return b}();b.DialogWhiteList=d})(CCL||(CCL={}));var __extends=this.__extends||function(b,d){function f(){this.constructor=b}for(var c in d)d.hasOwnProperty(c)&&(b[c]=d[c]);f.prototype=d.prototype;b.prototype=new f};
(function(b){(function(c){var a=function(){function a(){}a.backspace=8;a.tab=9;a.enter=13;a.escape=27;a.space=32;a.end=35;a.home=36;a.arrowLeft=37;a.arrowUp=38;a.arrowRight=39;a.arrowDown=40;a.del=46;a.key0=48;a.key9=57;a.keyA=65;a.keyZ=90;a.numpad0=96;a.numpad9=105;a.decimalPoint=110;a.comma=188;a.period=190;return a}();c.keyCodes=a;a=function(){function a(){}a.mobile=568;a.iPadPortraitMode=768;a.iPadLandscapeMode=1024;return a}();c.mediaScreenSizes=a;a=function(){function a(){}a.ok=200;a.badRequest=
400;a.unauthorized=401;a.methodNotAllowed=405;a.internalServerError=500;return a}();c.httpStatusCodes=a;c.onePixelTransparentImageSource="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCB1jYAAAAAIAAc/INeUAAAAASUVORK5CYII="})(b.CommonConstants||(b.CommonConstants={}));var d=b.CommonConstants;(function(c){function a(a){for(var c=[],b=0;b<arguments.length-1;b++)c[b]=arguments[b+1];var d=Array.prototype.slice.call(c,0);return a.replace(s,
function(a,c){return c in d?d[c]:a})}function e(){return/(iPod|iPhone|iPad)/i.test(navigator.userAgent)}function f(){return/(Android)/i.test(navigator.userAgent)}function h(){return-1!==navigator.userAgent.indexOf("Chrome")}function k(){var a=navigator.userAgent.match(/(?:\b(MS)?IE\s+|\bTrident\/7\.0;.*\s+rv:)(\d+)/);if(!a||3!==a.length)return 1;a=parseInt(a[2],10);if(isNaN(a))return 1;if(0!=a){if(11>a)return 4;if(12>a)return 8}return 1}function l(){return c.checkScreenSize(d.mediaScreenSizes.mobile,
!1)}function m(){return c.checkScreenSize(d.mediaScreenSizes.iPadPortraitMode+1,!0)}function n(a,c){var b=parseInt(a.css(c));return isNaN(b)?0:b}function p(a,c,b){c=b+c.height();var d=a.offset().top;return d+a.height()<=c&&d>=b}var s=/\{(\d+)\}/g,r=/\r?\n/g,q=/<br\s*\/>/g,w=/\r/g,v=/\n/g,u=/\r\n/g;c.base64Encode=function(a){var c="",b,d,e,f,g,h,k=0;a=a.replace(u,"\n");d="";for(e=0;e<a.length;e++)f=a.charCodeAt(e),128>f?d+=String.fromCharCode(f):(127<f&&2048>f?d+=String.fromCharCode(f>>6|192):(d+=
String.fromCharCode(f>>12|224),d+=String.fromCharCode(f>>6&63|128)),d+=String.fromCharCode(f&63|128));for(a=d;k<a.length;)b=a.charCodeAt(k++),d=a.charCodeAt(k++),e=a.charCodeAt(k++),f=b>>2,b=(b&3)<<4|d>>4,g=(d&15)<<2|e>>6,h=e&63,isNaN(d)?g=h=64:isNaN(e)&&(h=64),c=c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h);
return c};c.formatString=a;c.replaceLineBreaksWithBrTags=function(a){return a.replace(r,"<br />")};c.replaceBrTagsWithLineBreaks=function(a){return a.replace(q,"\n")};c.encodeLineBreaks=function(a){a=a.replace(w,"&#13;");return a=a.replace(v,"&#10;")};c.decodeLineBreaks=function(a){a=a.replace("&#13;","\r");return a=a.replace("&#10;","\n")};c.htmlEncode=function(a){return void 0===a?"":$("<div/>").text(a).html()};c.htmlDecode=function(a){return void 0===a?"":$("<div/>").html(a).text()};c.addIdToHidden=
function(a,c,b){"undefined"===typeof b&&(b=",");0<a.length&&c&&(a=a.get(0),0<=a.value.split(b).indexOf(c)||(0<a.value.length&&-1===a.value.indexOf(b,a.value.length-b.length)&&(a.value+=b),a.value+=c+b))};c.removeIdFromHidden=function(a,c,b){"undefined"===typeof b&&(b=",");if(0<a.length&&c&&(a=a.get(0))&&a.value){for(var d=a.value.split(b),e="",f=0;f<d.length;f++)c!==d[f]&&0<d[f].length&&(e+=d[f]+b);a.value=e}};c.isIosDevice=e;c.isIphone=function(){return/iPhone/i.test(navigator.userAgent)};c.isAndroidDevice=
f;c.isMobileDevice=function(){return e()||f()};c.isMobileSizedDevice=function(){return 768>window.innerWidth};c.isChrome=h;c.isIe=function(){return-1!==navigator.userAgent.indexOf("MSIE")||/rv:11.0/i.test(navigator.userAgent)};c.isEdge=function(){return-1!==navigator.userAgent.indexOf("Edge")};c.isFirefox=function(){return-1!==navigator.userAgent.indexOf("Firefox")};c.isSafari=function(){return!h()&&-1!==navigator.userAgent.indexOf("Safari")};c.getIosVersion=function(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
if(void 0===a||null===a)return Number.NaN;a=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||"0",10)];return parseFloat(a.join("."))};c.iPhoneVersion=function(){var a=window.screen.height,c=window.screen.width;return 320===c&&480===a?"4":375===c&&667===a?"6":414===c&&736===a?"6+":320===c&&568===a?"5":480>=a?"2-3":"none"};(function(a){a[a.NonIe=1]="NonIe";a[a.Ie10=4]="Ie10";a[a.Ie11=8]="Ie11";a[a.Ie=a.Ie10|a.Ie11]="Ie";a[a.IeBelow11=a.Ie10]="IeBelow11"})(c.IeVersion||(c.IeVersion={}));c.getIeVersion=
k;c.isIeBelow11=function(){return 4===k()};c.makePostMessageCall=function(a,c){a.postMessage(JSON.stringify(c),"*")};c.makePostMessageCallWithData=function(a,c,b){a.postMessage(JSON.stringify($.extend(c,b)),"*")};c.attachPostMessageEventListener=function(a,c,b){a.on("message",function(a){var d,e=a.originalEvent.source;try{a.originalEvent.data&&(d=JSON.parse(a.originalEvent.data))&&d.messageName&&("string"===typeof c?d.messageName===c:-1!=c.indexOf(d.messageName))&&b(d,e)}catch(f){}})};c.checkScreenSize=
function(c,b){return window.matchMedia&&window.matchMedia(a("({0}-width: {1}px)",b?"min":"max",c)).matches};c.isPhoneScreenSize=l;c.isDesktopScreenSize=m;c.isTabletScreenSize=function(){return!m()&&!l()};c.executeScripts=function(a){if(null!==a){var c=[],b=a.match(/<script[^>]*?>/g);if(null!==b){var d=0,e=0,f,g=a.toLowerCase();for(f=0;f<b.length;f++)d=a.indexOf(b[f],e)+b[f].length,e=g.indexOf("\x3c/script>",d),d=a.substring(d,e),c.push(d);for(f=0;f<c.length;f++)(new Function(c[f]))()}}};c.safeParseCssValue=
n;c.calculateBottomOffset=function(a){var c=0;a.parentsUntil("html").each(function(a,b){var d=$(b);c+=n(d,"padding-bottom")+n(d,"margin-bottom")+n(d,"border-bottom-width")});return c};c.alertAjaxError=function(a,c,d){a.status>=b.CommonConstants.httpStatusCodes.badRequest&&a.responseText&&alert($("<div/>").html(a.responseText).text())};c.jAlertAjaxError=function(a,c,b){var d=null;b&&(d=function(){window.location=window.location});jAlert($("<div/>").html(a).text(),$("<div/>").html(c).text(),d)};c.printAndCloseCurrentPage=
function(){function a(){b--;setTimeout(function(){0===c||0===b?(window.print(),window.close()):a()},1E3)}var c=$("iframe").length,b=c+1;$("iframe").load(function(){c--});a()};c.safeParseJson=function(a){try{return JSON.parse(a)}catch(c){return!1}};c.isOnScreen=function(a,c,b,d){"undefined"===typeof c&&(c=1);"undefined"===typeof b&&(b=1);"undefined"===typeof d&&(d=null);var f=a.outerHeight(),g=a.outerWidth();if(!g||!f)return!1;var h=d?$(d):e()?$(window.parent):$(window),k=h.scrollTop(),l=h.scrollLeft();
d=l+h.width();h=k+h.height();a=a.offset();var m=a.left+g,n=a.top+f;if(d<a.left||l>m||h<a.top||k>n)return!1;k=Math.min(1,(n-k)/f);f=Math.min(1,(h-a.top)/f);l=Math.min(1,(m-l)/g);g=Math.min(1,(d-a.left)/g);return l*g>=c&&k*f>=b};c.measureKpi=function(a,c,b,d){"undefined"===typeof d&&(d=null);try{$.ajax({type:"POST",url:a,data:{measureSection:c,measurement:b,measureContext:d}})}catch(e){}};c.kpiAjax=function(a,b,d){b||(b={});if(d&&!b.crossDomain){var e=b.beforeSend;b.beforeSend=function(a,c){e&&e(a,
c);$.each(d,function(c,b){a.setRequestHeader("X-Kpi-"+c,b)})}}if(d&&b.crossDomain){var f="";$.each(d,function(a,b){f+=c.formatString("&{0}{1}={2}","X-Kpi-",a,b)});f=f.substring(1);a+=-1<a.indexOf("?")?"&":"?";a+=f}return $.ajax(a,b)};c.getDataSelector=function(a,b){5<a.length&&"data-"===a.substring(0,5)&&(a=a.substring(5));return null!=b?c.formatString("[{0}{1}={2}]","data-",a,b):c.formatString("[{0}{1}]","data-",a)};c.isElementFullyShownInContainer=function(a,c){return p(a,c,c.offset().top)};c.isElementFullyShownInWindow=
function(a){var c=$(window);return p(a,c,c.scrollTop())}})(b.CommonFunctions||(b.CommonFunctions={}));(function(c){function a(a){return 621355968E9+1E4*a.getTime()}function b(a){return new Date(1970,0,1,0,0,0,(a-621355968E9)/1E4)}function d(a,c){var f=b(a+6E8*c);return new Date(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0)}c.convertToTicks=a;c.convertTicksStringToDate=function(a,c){var b=parseInt(a);return d(b,c)};c.convertTicksToDateExact=b;c.convertUtcTicksToLocalClientDate=function(a){return new Date((a-
621355968E9)/1E4)};c.convertLocalProfileDateToEndOfDayUtcTicks=function(c,b){var d=new Date(Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),23,59,59));return a(d)+-6E8*b};c.convertUtcTicksToLocalProfileDate=d;c.getItslNow=function(a){var c=new Date,b=6E4*c.getTimezoneOffset();return new Date(c.getTime()+b+1E3*a)}})(b.DateFunctions||(b.DateFunctions={}));(function(c){var a=function(){function a(){}a.maskNavigationBar="maskNavigationBar";a.unmaskNavigationBar="unmaskNavigationBar";a.registerExtraNavBar=
"registerExtraNavBar";a.unregisterExtraNavBar="unregisterExtraNavBar";a.collapseContentAreaFrame="collapseContentAreaFrame";a.expandContentAreaFrame="expandContentAreaFrame";a.contentAreaFrameHasCollapsed="contentAreaFrameHasCollapsed";a.contentAreaFrameHasExpanded="contentAreaFrameHasExpanded";a.collapseExtensionIframe="collapseExtensionIframe";a.expandExtensionIframe="expandExtensionIframe";a.collapseLeftMenu="collapseLeftMenu";a.extensionContentSaved="extensionContentSaved";a.unreadNotificationCounterChanged=
"unreadNotificationCounterChanged";a.extensionContentChanged="extensionContentChanged";a.extensionAssignmentAnswerOpened="extensionAssignmentAnswerOpened";a.textEditorInteraction="textEditorInteraction";a.extensionCancelActionPerformed="extensionCancelActionPerformed";a.extensionContentViewed="extensionContentViewed";a.extensionContentOpened="extensionContentOpened";a.nestedCssModalDialogExpanded="nestedCssModalDialogExpanded";a.nestedCssModalDialogCollapsed="nestedCssModalDialogCollapsed";a.studentWasAssessed=
"studentWasAssessed";a.submitIframe="submitIframe";a.closeCssModalDialog="closeCssModalDialog";a.editEmbededContent="editEmbededContent";a.extensionPrintContentFrame="extensionPrintContentFrame";a.getEmbeddedContentData="getEmbeddedContentData";a.getEmbeddedContentSize="getEmbeddedContentSize";a.openPersonProfileCard="openPersonProfileCard";a.changePrintFeatureVisibility="changePrintFeatureVisibility";a.hideSettings="hideSettings";a.showSettings="showSettings";a.toggleBreadcrumbs="toggleBreadcrumbs";
a.suspendUpdateBreadCrumbsAndNavigation="suspendUpdateBreadCrumbsAndNavigation";a.suspendExpandCollaplseContentAreaFrame="suspendExpandCollaplseContentAreaFrame";a.extensionSettingsChanged="extensionSettingsChanged";a.showBottomNavigationBar="showBottomNavigationBar";a.hideBottomNavigationBar="hideBottomNavigationBar";a.iframeAutoHeight="iframeAutoHeight";a.reloadParentIframe="reloadParentIframe";a.assignmentShowManageRubric="showManageRubricDialog";a.dialogOrModalHasBeenOpened="dialogOrModalHasBeenOpened";
a.dialogOrModalHasBeenClosed="dialogOrModalHasBeenClosed";a.extensionOnboarding="extensionOnboarding";a.extensionReadyForTelemetryRequests="extensionReadyForTelemetryRequests";a.initialiseTelemetryCampaign="initialiseTelemetryCampaign";a.extensionTelemetryResultAnswer="extensionTelemetryResultAnswer";a.extensionTelemetryResultComment="extensionTelemetryResultComment";return a}();c.MessageNames=a;var b=function(){return function(a){this.messageName=a}}();c.GenericMessage=b;var d=function(a){function c(b,
d){a.call(this,b);this.extendedData=d}__extends(c,a);return c}(b);c.GenericMessageWithData=d;var f=function(c){function b(d,e,f){"undefined"===typeof e&&(e=!1);"undefined"===typeof f&&(f="");c.call(this,a.textEditorInteraction);this.interactionType=d;this.closeDialogAfterPerformingOperation=e;this.editorInstanceId=f}__extends(b,c);return b}(b);c.TextEditorBaseInteractionMessage=f;d=function(a){function c(b,d,e,f){"undefined"===typeof e&&(e=!1);"undefined"===typeof f&&(f="");a.call(this,b,e,f);this.extendedData=
d}__extends(c,a);return c}(f);c.TextEditorBaseInteractionWithDataMessage=d;var k=function(a){function c(){a.call(this,0,!0)}__extends(c,a);return c}(f);c.TextEditorCloseDialogMessage=k;k=function(a){function c(b,d,e,f){"undefined"===typeof d&&(d=!1);"undefined"===typeof e&&(e="");"undefined"===typeof f&&(f=!1);a.call(this,1,d);this.htmlContent=b;this.editorInstanceId=e;this.isEmbeddedImage=f}__extends(c,a);return c}(f);c.TextEditorInsertHtmlMessage=k;k=function(a){function c(b,d,e){"undefined"===
typeof e&&(e=!1);a.call(this,2,e);this.linkUrl=b;this.linkName=d}__extends(c,a);return c}(f);c.TextEditorInsertLinkToFileMessage=k;f=function(a){function c(b){a.call(this,3,!0);this.pluginId=b}__extends(c,a);return c}(f);c.TextEditorUpdateItslPluginListMessage=f;f=function(a){function c(b){a.call(this,4,b)}__extends(c,a);return c}(d);c.TextEditorSendImageSettingsMessage=f;d=function(a){function c(b){a.call(this,5,b,!0)}__extends(c,a);return c}(d);c.TextEditorInsertImageToSlideshow=d;b=function(a){function c(b){a.call(this,
b)}__extends(c,a);return c}(b);c.EmbedContentBaseMessage=b;d=function(c){function b(){c.call(this,a.getEmbeddedContentData)}__extends(b,c);return b}(b);c.EmbeddedContentDataMessage=d;b=function(c){function b(){c.call(this,a.getEmbeddedContentSize)}__extends(b,c);return b}(b);c.EmbeddedContentSizeMessage=b;(function(a){a[a.CloseDialog=0]="CloseDialog";a[a.InsertHtml=1]="InsertHtml";a[a.InsertLinkToFile=2]="InsertLinkToFile";a[a.UpdateItslPluginsList=3]="UpdateItslPluginsList";a[a.SendImageSettingsToImagePropertiesDialog=
4]="SendImageSettingsToImagePropertiesDialog";a[a.InsertImageToSlideshow=5]="InsertImageToSlideshow"})(c.TextEditorInteractionType||(c.TextEditorInteractionType={}))})(b.CommonWindowMessages||(b.CommonWindowMessages={}));(function(c){c.clickInInnerFrame="clickInInnerFrame";c.touchstartInInnerFrame="touchstartInInnerFrame"})(b.CommonTriggers||(b.CommonTriggers={}));var f=function(){function c(a){var c=this;this.trackFocusHandler=function(a){if(a.keyCode===$.ui.keyCode.TAB&&!a.isDefaultPrevented()){var b=
c.$container.find(":tabbable"),d=b.filter(":first"),f=b.filter(":last");a.target!==f[0]&&a.target!==c.$container||a.shiftKey?a.target!==d[0]&&a.target!==c.$container||!a.shiftKey||(setTimeout(function(){f.trigger("focus")},100),a.preventDefault()):(setTimeout(function(){d.trigger("focus")},100),a.preventDefault())}};this.$container=a}c.prototype.startTrackFocus=function(){this.isFocusTracked()||this.$container.keydown(this.trackFocusHandler)};c.prototype.stopTrackFocus=function(){this.isFocusTracked()&&
this.$container.off("keydown",this.trackFocusHandler)};c.prototype.isFocusTracked=function(){var a=this;if(!this.$container.data("events"))return!1;var c=this.$container.data("events").keydown;if(!c)return!1;var b=!1;$.each(c,function(c,d){if(d.handler===a.trackFocusHandler)return b=!0,!1});return b};return c}();b.FocusTracker=f})(CCL||(CCL={}));
(function(b){var d=function(){function d(){var c=this;this.contentHeight=0;this.reportContentHeightIfChanged();var a=new b.CallbackDebouncer(function(){return c.reportContentHeight(c.calculateDocumentHeight())});$(window).on("resize",function(){a.invokeCallback(void 0,250)});$(document).on("cssmodal:show",function(){c.reportContentHeight(d.useDefaultHeight)})}d.prototype.calculateDocumentHeight=function(){var c=$(document.body),a=$(document.documentElement),b=d.calculateSelectorsHeight();return Math.max(c.outerHeight(),
a.outerHeight(),b)};d.calculateSelectorsHeight=function(){var c=0;this.selectorsToListenHeight.forEach(function(a){$(a+":not(:hidden)").each(function(a,b){var d=$(b).offset().top+$(b).outerHeight(!0);d>c&&(c=d)})});return c};d.addSelectorToListenHeight=function(c){this.selectorsToListenHeight.push(c);return this};d.prototype.reportContentHeight=function(c){b.CommonFunctions.makePostMessageCall(window.parent,new b.CommonWindowMessages.GenericMessageWithData(b.CommonWindowMessages.MessageNames.extensionContentOpened,
{iframeHeight:c}))};d.prototype.reportContentHeightIfChanged=function(){this.contentHeight!==this.calculateDocumentHeight()&&(this.contentHeight=this.calculateDocumentHeight(),this.reportContentHeight(this.contentHeight))};d.prototype.setUpMutationObserver=function(){var c=this;(new MutationObserver(function(a){0<a.length&&(new b.CallbackDebouncer(function(){return c.reportContentHeightIfChanged()})).invokeCallback(void 0,100)})).observe(document.body,{childList:!0,attributes:!0,attributeFilter:["style",
"src","height","width","class"],characterData:!0,subtree:!0})};d.prototype.setUpTimerObserver=function(){var c=this;this.reportContentHeightIfChanged();this.onContentHeightChangeTimer&&clearTimeout(this.onContentHeightChangeTimer);this.onContentHeightChangeTimer=setTimeout(function(){return c.setUpTimerObserver()},200)};d.prototype.setUpChangeObservation=function(){"MutationObserver"in window?this.setUpMutationObserver():this.setUpTimerObserver()};d.setUpIframeContentHeightReporter=function(){(new d).setUpChangeObservation()};
d.attachExtensionContentOpenedListenerForIframe=function(c){$(function(){var a=!1;b.CommonFunctions.attachPostMessageEventListener($(window),b.CommonWindowMessages.MessageNames.extensionContentOpened,function(e){var g=$("#"+c);e=e.extendedData.iframeHeight;var h=b.CommonFunctions.calculateBottomOffset(g),h=IframeResizer.getFixedIframeDefaultHeight($(window),g,h);g.height(e===d.useDefaultHeight?h:Math.max(e,h));a||(g.attr("scrolling","no"),a=!0)})})};d.useDefaultHeight=-1;d.selectorsToListenHeight=
[];return d}();b.IframeContentHeightReporter=d})(CCL||(CCL={}));
(function(b){var d=function(){function c(){}c.ShowFeedbackMessage="ShowInformationFeedbackMessage";c.HideFeedbackMessage="HideInformationFeedbackMessage";return c}();b.InformationFeedbackEvent=d;var f=function(){function c(a,c){var f=this;this.settings=c;this.$feedback=a;this.$closeButton=this.$feedback.find("."+b.CommonCssClasses.InformationFeedback.CloseButton);this.$dismissButton=this.$feedback.find("."+b.CommonCssClasses.InformationFeedback.DismissButton);this.$extraButton=this.$feedback.find("."+
b.CommonCssClasses.InformationFeedback.ExtraButton);this.$buttonContainer=this.$feedback.find("."+b.CommonCssClasses.InformationFeedback.ButtonContainer);this.$closeButton.on("click",function(){f.hideFeedbackMessage()});this.$dismissButton.on("click",function(){f.hideFeedbackMessage()});this.$buttonContainer.hide();var h=$("#"+c.MainContainerClientId);h.on(d.ShowFeedbackMessage,function(a,c,b,d,e){a.stopPropagation();f.showFeedbackMessage(c,b,d,e)});h.on(d.HideFeedbackMessage,function(a,c){a.stopPropagation();
f.hideFeedbackMessage(c)})}c.prototype.showFeedbackMessage=function(a,c,d,f){var k=this;clearTimeout(this.hidingAnimation);this.$feedback.find("."+b.CommonCssClasses.InformationFeedback.Message).html(a);a=!1;this.$extraButton.off("click");c&&d?(this.$extraButton.text(c),this.$extraButton.removeAttr("disabled"),this.$extraButton.on("click",function(){clearTimeout(k.hidingAnimation);k.$extraButton.attr("disabled","disabled");d()}),this.$extraButton.show(),a=!0):(this.$extraButton.hide(),a=!1);this.settings.HideDismissButton||
a?(this.$dismissButton.hide(),this.$closeButton.show()):(this.$dismissButton.show(),this.$closeButton.hide());this.$buttonContainer.toggle(a||!this.settings.HideDismissButton);$("body").addClass(b.CommonCssClasses.InformationFeedback.IsVisible);this.$feedback.stop(!0,!0).show();f||(this.hidingAnimation=setTimeout(function(){return k.hideFeedbackMessage()},15E3))};c.prototype.hideFeedbackMessage=function(a){"undefined"===typeof a&&(a=!0);clearTimeout(this.hidingAnimation);$("body").removeClass(b.CommonCssClasses.InformationFeedback.IsVisible);
this.$feedback.stop(!0,!0);a?this.$feedback.fadeOut():this.$feedback.hide()};c.showFeedback=function(a,c,b){"undefined"===typeof b&&(b={});a.trigger(d.ShowFeedbackMessage,[c,b.extraButtonName,b.extraButtonCallback,b.disableAutomaticHiding])};c.showFeedbackWithextraButton=function(a,c,b,f){a.trigger(d.ShowFeedbackMessage,[c,b,f,!1])};c.hideFeedback=function(a,c){"undefined"===typeof c&&(c=!0);a.trigger(d.HideFeedbackMessage,c)};return c}();b.InformationFeedback=f})(CCL||(CCL={}));
(function(b){var d=function(){function d(c){var a=this;this.settings=c;c=this.settings.ContentSelector+" a"+b.CommonFunctions.getDataSelector(d.dataAttributes.expanderLink);this.visibleTextLengthCalculator=new b.VisibleTextLengthCalculator(this.settings.NumberOfCharactersToShow,this.settings.NumberOfLineBreaks,b.CommonFunctions.isEdge());$(document).on("click",c,function(c){var g=$(c.currentTarget);a.setExpanderLinkState(g,!g.data(d.dataAttributes.textIsExpanded));g=g.parent();g.find("."+d.commonSettings.CssClasses.VisibleText).toggleClass(d.commonSettings.CssClasses.ShowEllipsis);
g=g.find("."+d.commonSettings.CssClasses.HiddenText).toggle();b.CommonFunctions.isFirefox()&&"block"===g.css("display")&&g.css("display","inline");c.preventDefault()});this.settings.RunScanningDocumentAfterInitialization&&this.scanDocumentAndAppend()}d.prototype.scanDocumentAndAppend=function(){var c=this;$(this.settings.ContentSelector+":not([data-"+d.dataAttributes.processedIndicator+"])").each(function(a,b){c.scanItemAndAppend($(b))})};d.prototype.scanItemAndAppend=function(c){var a=$.trim(c.html());
if(this.visibleTextLengthCalculator.shouldCalculateRealLength(c[0])){var b=this.visibleTextLengthCalculator.calculateRealLength(c[0]);if(0!==b&&b<a.length){var g=a.substr(0,b),a=a.substr(b);c.empty().attr("data-"+d.dataAttributes.processedIndicator,"").append($("<span>").addClass(d.commonSettings.CssClasses.VisibleText).addClass(d.commonSettings.CssClasses.ShowEllipsis).html(g)).append($("<span>").addClass(d.commonSettings.CssClasses.HiddenText).html(a).hide()).append(this.setExpanderLinkState($("<a>").prop("href",
"#").addClass(d.commonSettings.CssClasses.ExpanderLink).attr("data-"+d.dataAttributes.expanderLink,"")))}}};d.prototype.setExpanderLinkState=function(c,a){"undefined"===typeof a&&(a=!1);return c.text(a?this.settings.Resources.ShowLess:this.settings.Resources.ShowMore).data(d.dataAttributes.textIsExpanded,a)};d.dataAttributes={processedIndicator:"inline-text-expander-processed",textIsExpanded:"inlinetextexpander-expanded",expanderLink:"inlinetextexpander-show-more-link"};return d}();b.InlineTextExpander=
d})(CCL||(CCL={}));
(function(b){var d=function(){function b(){this.skipUrls=[]}b.prototype.getFirstLink=function(c){c=this.parseFirstLink(this.getTextWithoutSkippedUrls(this.getEmbedCodeWithoutStyles(c)));return""===c?"":b.ensureUrlScheme(c)};b.prototype.getDomain=function(c){var a=document.createElement("a");a.href=c;return a.hostname};b.prototype.skipUrl=function(c){this.skipUrls.push(c)};b.prototype.removeFromSkipUrl=function(c){c=this.skipUrls.indexOf(c);-1<c&&this.skipUrls.splice(c,1)};b.prototype.isEmail=function(c){for(var a=
c.length-1;0<=a&&!c.charAt(a).match(b.lettersRegex);)a--;return null!==c.substr(0,a+1).match(b.emailRegex)};b.ensureUrlScheme=function(c){b.urlWithFirstAtSignRegex.test(c)&&(c=c.substr(c.indexOf("@")+1));return b.schemeDefinedUrlRegex.test(c)?c:b.protocolRelativeUrlRegex.test(c)?"http:"+c:"http://"+c};b.prototype.getEmbedCodeWithoutStyles=function(c){return c.replace(b.stylesRegex,"")};b.prototype.getTextWithoutSkippedUrls=function(c){var a=this;return this.skipUrls.reduce(function(c,d){var h=a.parseFirstLink(c);
return b.ensureUrlScheme(h)===d?c.replace(h," "):c},c)};b.prototype.parseFirstLink=function(c){for(var a=c.match(b.urlRegex);""!==c&&null!==a&&(this.isEmail(a[0])||0===a[0].trim().indexOf("@"));)c=c.replace(a[0]," ").trim(),a=c.match(b.urlRegex);return null===a?"":a[0]};b.wholeUrlRegex=/^(https?:\/\/)?((((?!-))(xn--)?[a-z0-9-_@]{0,61}[a-z0-9]{1,1}\.)*(xn--)?([a-z0-9\-@]{1,61}|[a-z0-9-]{1,30}\.[a-z]{2,})\.)([a-zZ-Z0-9\.\-\/\\_%,!:\+@=]{2,})(\?([^#\s\>\"]*))?(#(\S*))?$/i;b.urlRegex=/(https?:\/\/)?((((?!-))(xn--)?[a-z0-9-_@]{0,61}[a-z0-9]{1,1}\.)*(xn--)?([a-z0-9\-@]{1,61}|[a-z0-9-]{1,30}\.[a-z]{2,})\.)([a-zZ-Z0-9\.\-\/\\_%,!:\+@=]{2,})(\?([^#\s\>\"]*))?(#(\S*))?/i;
b.emailRegex=/(mailto:([^\?]*))?([a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$)/i;b.schemeDefinedUrlRegex=/^(https?:\/\/)/i;b.protocolRelativeUrlRegex=/^(\/\/)/;b.urlWithFirstAtSignRegex=/^((https?:)?\/\/)?@/i;b.lettersRegex=/^[a-z]$/i;b.stylesRegex=/(style\s*=\s*)(?:(?:[^>']([^>"]*))|(?:[^>"]([^>']*)))/ig;return b}();b.LinkParser=d})(CCL||(CCL={}));
(function(b){var d=function(){function b(c,a,d){"undefined"===typeof d&&(d=!1);this.maxLength=c;this.maxLineBreaks=a;this.isEdge=d;this.anchorTagName="A";this.breakLineTagName="BR"}b.prototype.shouldCalculateRealLength=function(c){return c.getElementsByTagName(this.breakLineTagName).length>=this.maxLineBreaks||c.innerHTML.trim().length>this.maxLength};b.prototype.calculateRealLength=function(c){for(var a=this.maxLength,b=0,d=0,f,k=0;f=c.childNodes[d];){var l=f.length||f.outerHTML.length;if(b+l>a){f.nodeType===
Node.ELEMENT_NODE&&(l=this.isEdge?l+1:l,a=f.tagName===this.anchorTagName?b+l:b);break}if(f.nodeType===Node.ELEMENT_NODE&&f.tagName===this.breakLineTagName&&(k++,k===this.maxLineBreaks)){a=b;break}b+=l;d++}return a};return b}();b.VisibleTextLengthCalculator=d})(CCL||(CCL={}));
(function(b){(function(d){d.makeCopy=function(d){var c=new b.MapHelper;d.forEach(function(a,b){c.set(a,b)});return c};d.reduce=function(b,c,a){var d=a;b.forEach(function(a,b){d=c(d,a,b)});return d}})(b.MapUtils||(b.MapUtils={}))})(CCL||(CCL={}));
(function(b){var d=function(){function b(c,a){this.cssClasses=c;this.dataAttributes=a}b.prototype.toggleTextError=function(c,a,b){c=c.find("."+this.cssClasses.EditorTextarea);c.find("[data-"+this.dataAttributes.TextValidationErrorMessage+"]").text(b?a:"").toggle(b);c.toggleClass(this.cssClasses.TextIsValid,!b)};b.prototype.getErrorAppendTarget=function(){return $("<span data-"+this.dataAttributes.TextValidationErrorMessage+">").hide()};return b}();b.ModernInput=d})(CCL||(CCL={}));
(function(b){var d=function(){function d(c,a){window[c]=this;this._settings=a;this._container=$("#"+this._settings.Container);this.initialize()}d.prototype.activateItem=function(c){var a=this._container.find("."+this._settings.ButtonCssClass);c=this._container.find("."+this._settings.ButtonCssClass+"[data-"+this._settings.KeyDataName+'= "'+c+'"]');a.removeClass(this._settings.ActiveCssClass);c.addClass(this._settings.ActiveCssClass)};d.prototype.toggleEnableSwitcher=function(c){this._container.find("."+
this._settings.ButtonCssClass).toggleClass(this._settings.DisabledCssClass,!c)};d.prototype.initialize=function(){var c=this,a=$("#"+this._settings.Container).find("."+this._settings.ButtonCssClass);a.each(function(d,f){var h=$(f);h.click(function(){if(h.hasClass(c._settings.DisabledCssClass))return!1;var d=h.data(c._settings.KeyDataName).toString(),e;$.each(c._settings.ItemSettings,function(a,c){return d===c.Key?(e=c,!1):!0});b.CommonFunctions.makePostMessageCall(window,new b.CommonWindowMessages.GenericMessageWithData(b.MultipleSwitcher.onClickEventName,
e));a.removeClass(c._settings.ActiveCssClass);h.addClass(c._settings.ActiveCssClass);return!1})})};d.onClickEventName="MultipleSwitcher:onclick";return d}();b.MultipleSwitcher=d})(CCL||(CCL={}));
(function(b){var d=function(){function b(c,a){this.settings=c;this.controls=a}b.prototype.validate=function(c,a){var b=$("#"+this.controls.id).val();if(""!==b){var d=this.settings.delimiter;"."===d&&(d="\\.");(new RegExp("^\\d+("+d+"\\d+)?$")).test(b)?(b=b.replace(d,"."),parseFloat(b)>this.settings.maxValue&&(a.IsValid=!1)):a.IsValid=!1}};return b}();b.FloatNumberValidator=d})(CCL||(CCL={}));
(function(b){b=b.FeedbackType||(b.FeedbackType={});b[b.Information=0]="Information";b[b.Error=1]="Error";b[b.Warning=2]="Warning";b[b.Tip=3]="Tip";b[b.Functionality=4]="Functionality"})(CCL||(CCL={}));
(function(b){var d=function(){function b(){this.data=[]}b.prototype.set=function(c,a){this["delete"](c);this.data.push({key:c,value:a})};b.prototype.get=function(c){return(c=this.getArrayItem(c))?c.value:void 0};b.prototype["delete"]=function(c){(c=this.getArrayItem(c))&&this.data.splice(this.data.indexOf(c),1)};b.prototype.forEach=function(c){this.data.forEach(function(a,b,d){c(a.key,a.value)})};b.prototype.has=function(c){return void 0!==this.get(c)};b.prototype.getArrayItem=function(c){var a;this.data.some(function(b,
d,f){return b.key===c?(a=b,!0):!1});return a};return b}();b.MapHelper=d})(CCL||(CCL={}));
(function(b){var d=function(){function b(c){this.ogpImageMaxWidthForCompactView=150;this.ogpImageMaxHeight=200;this.ogpImageMaxHeightForCompactView=350;this.settings=c}b.prototype.loadImage=function(c,a,b,d){var f=this;a&&b&&c&&d||(c=$("#"+this.settings.PlaceholderId),a=c.find("."+this.settings.CssClasses.EmbedOgpContainer),b=a.find("."+this.settings.CssClasses.EmbedOgpImagePreview),d=b.find("img"));if(0!==d.length){d.removeAttr("width height");var k=new Image;$(k).one("load",function(){var c=k.width,
l=k.height,p=l>f.ogpImageMaxHeight?c*f.ogpImageMaxHeight/l:c,s=Math.min(l,f.ogpImageMaxHeight);f.settings.IgnoreImageDimensions&&p<s||p<=f.ogpImageMaxWidthForCompactView?(c=f.calculateSize(c,l,f.ogpImageMaxWidthForCompactView,f.ogpImageMaxHeightForCompactView),l=c.height+"px",b.css({width:c.width+"px",height:l,position:"absolute"}).addClass(f.settings.CssClasses.AlignVertically),a.find("."+f.settings.CssClasses.EmbedOgpTextContainer).css("margin-left",c.width+10+"px"),a.css({position:"relative","min-height":l})):
(b.css({height:"auto","max-height":f.ogpImageMaxHeight+"px"}),d.css({"max-height":f.ogpImageMaxHeight+"px"}));d.addClass(f.settings.CssClasses.EmbedOgpImage)});var l=function(){d.on("load",function(){k.src=d.prop("src")})};d.attr("src")?$("<img/>").on("load",function(){k.src=d.prop("src")}).on("error",function(){l()}).attr("src",d.attr("src")):l()}};b.prototype.calculateSize=function(c,a,b,d){if(c<=b&&a<=d)return{width:c,height:a};c*=d;a*=b;var f=Math.max(c,a);return{width:Math.max(1,Math.min(b,Math.floor(c*
b/f))),height:Math.max(1,Math.min(d,Math.floor(a*d/f)))}};return b}();b.OgpImageLoader=d})(CCL||(CCL={}));
(function(b){var d=function(){function c(){}c.auto=0;c.centerBottom=1;c.centerCenter=2;c.rightBottom=3;c.rightCenter=4;c.bottomLeft=5;c.leftTop=6;return c}(),f=function(){function c(a,c){var b=this;this.blockHighlightZone=this.closedThroughX=this.gotItClicked=!1;this.resizeHandler=function(){b.isOpen&&b.$mask&&b.isMobileView()&&(b.removeMask(),$(b.onboardingDialog.mainContainer).fadeTo(500,0,function(){b.closeContainer()}),$(window).off("resize",b.resizeHandler))};this.clickOutsideHandler=function(a){0===
$(a.target).closest("."+b.settings.DialogCssClass).length&&b.closeDialog(!1,!1)};this.$container=a;this.settings=c;window[this.settings.DialogClientId]=this;this.addGotItClickHandler(a.find("."+c.CloseButtonCssClass));this.onboardingDialog=new ContextDialog("#"+this.$container[0].id,{footerContent:this.settings.FooterClientId,closeWithOutsideClick:!1,allowAccessToParentWindow:!1,showArrow:this.settings.ShowArrow,cssClass:this.settings.DialogCssClass,zIndex:this.settings.ZIndex,closeCssClass:this.settings.CloseLinkCssClass,
marginTop:0,marginBottom:0,marginLeft:0,marginRight:0});this.onboardingDialog.toggleCloseLink(this.settings.ShowCloseLink);this.onboardingDialog.hideHeader();this.closeContainer=this.onboardingDialog.closeDialog;this.onboardingDialog.setCloseFunction(function(){b.closeDialog(!1)});this.onboardingDialog.setCloseLinkFunction(function(){b.closeDialog(!0)});this.onboardingDialog.onEscape=function(){};this.settings.StartOpened&&this.openDialog()}c.prototype.openDialog=function(a){var c=this;"undefined"===
typeof a&&(a=null);if(this.settings.AllowMobileView||!this.isMobileView())if(this._closeCallback=a,!this.isOpen){var f=$(this.settings.TargetSelector);if(f[0]){this.isOpen=!0;this.settings.ShowMask&&(this.createMask(),$(window).on("resize",this.resizeHandler));if(this.settings.CloseAfterClickOutside)$(document).on("click "+b.CommonTriggers.clickInInnerFrame,this.clickOutsideHandler);this.closedThroughX=this.gotItClicked=!1;this.settings.PutAfterElementInDomSelector&&(a=$(this.settings.PutAfterElementInDomSelector),
a[0]&&$(a[0]).after(this.onboardingDialog.mainContainer));this.onboardingDialog.openDialogAt(0,0);$(this.onboardingDialog.mainContainer).removeAttr("style").css("opacity",0).css("display","block").css("z-index",this.settings.ZIndex).css("max-width",this.settings.MaxWidth);this.settings.Alignment===d.centerBottom?($(this.onboardingDialog.mainContainer).addClass("bottom"),this.positionMainContainer(f,"center top+15","center bottom","fit"),this.positionArrowContainer(f,"center top","center top")):this.settings.Alignment===
d.rightCenter?($(this.onboardingDialog.mainContainer).addClass("right"),this.positionMainContainer(f,"left+15 top","right top")):this.settings.Alignment===d.centerCenter?this.positionMainContainer(f,"center center","center center"):this.settings.Alignment===d.rightBottom?($(this.onboardingDialog.mainContainer).addClass("bottom"),this.positionMainContainer(f,"right top+15","right bottom","fit",function(a){$(c.onboardingDialog.mainContainer).css("top",a.top).css("left","auto").css("right",0)}),this.positionArrowContainer(f,
"center top","center top")):this.settings.Alignment===d.bottomLeft?($(this.onboardingDialog.mainContainer).addClass("bottom"),this.positionMainContainer(f,"left top+20","left bottom"),this.positionArrowContainer($(this.onboardingDialog.mainContainer),"center","center")):this.settings.Alignment===d.leftTop&&($(this.onboardingDialog.mainContainer).addClass("left"),this.positionMainContainer(f,"right-15 top","left top"));$(this.onboardingDialog.mainContainer).fadeTo(500,1);this.settings.ScrollIntoViewOnShow&&
$(this.onboardingDialog.mainContainer).get(0).scrollIntoView(!1);if(this.settings.RepositionArrowOnResize){var h=new b.CallbackThrottler(function(){c.positionArrowContainer(f,"center top","center top")});this.repositionArrowCallback=function(){h.invokeCallback(null,100)};$(window).resize(this.repositionArrowCallback)}this.settings.ExtraGotItSelector&&this.addGotItClickHandler($(this.settings.ExtraGotItSelector));$("body").keyup(this,this.onKeyup)}}};c.prototype.positionMainContainer=function(a,c,
b,d,f){"undefined"===typeof d&&(d="none");"undefined"===typeof f&&(f=null);$(this.onboardingDialog.mainContainer).position({of:a,my:c,at:b,collision:d,using:f})};c.prototype.positionArrowContainer=function(a,c,d){(b.CommonFunctions.isIosDevice()||b.CommonFunctions.isSafari())&&$(this.onboardingDialog.arrowContainer).css("left","1px");$(this.onboardingDialog.arrowContainer).position({of:a,my:c,at:d,collision:"none"})};c.prototype.closeDialog=function(a,c){var d=this;"undefined"===typeof a&&(a=!1);
"undefined"===typeof c&&(c=!0);$(window).off("resize",this.resizeHandler);this.settings.CloseAfterClickOutside&&$(document).off("click "+b.CommonTriggers.clickInInnerFrame,this.clickOutsideHandler);this.isOpen&&(this.isOpen=!1,a&&(this.closedThroughX=!0),this.settings.RegisterOnboardingCompletion&&c&&this.registerOnboardingCompletion(),this.settings.RepositionArrowOnResize&&$(window).off("resize",this.repositionArrowCallback),$("body").off("keyup",this.onKeyup),$(this.onboardingDialog.mainContainer).fadeTo(500,
0,function(){d.closeContainer()}),this.removeMask(),this._closeCallback&&this._closeCallback(a))};c.prototype.registerOnboardingCompletion=function(){var a=this.settings.OnboardingServiceUrl,a=a.replace("{featureId}",this.settings.OnboardingFeatureId.toString());$.ajax({url:a,type:"PUT"})};c.prototype.onKeyup=function(a){if(a.data.isOpen)switch(a.which){case b.CommonConstants.keyCodes.escape:a.stopImmediatePropagation(),a.data.closeDialog()}};c.prototype.addGotItClickHandler=function(a){var c=this;
a.on("click",function(){c.closeDialog();c.gotItClicked=!0})};c.prototype.createMask=function(){this.settings.HighlightInMaskSelector&&($(this.settings.HighlightInMaskSelector).css("z-index",this.settings.ZIndex),!0===this.blockHighlightZone?($(this.settings.HighlightInMaskSelector).css("pointer-events","none"),$(this.settings.HighlightInMaskSelector).addClass("ccl-onboarding-highlight-in-mask__clean-border")):$(this.settings.HighlightInMaskSelector).addClass("ccl-onboarding-highlight-in-mask"));var a=
$("body");this.settings.AppendMaskToSelector&&(a=$(this.settings.AppendMaskToSelector),a.css("overflow-y","hidden"));this.$mask=$("<div></div>").appendTo(a).addClass("ccl-onboarding-dialog-mask").css({opacity:"0",filter:"alpha(opacity=0)","z-index":this.settings.ZIndex-1});this.settings.AllowMobileView&&this.$mask.addClass("ccl-onboarding-dialog-mobile");this.$mask.fadeTo(400,1);a.addClass("il-has-onboarding-mask");b.CommonFunctions.makePostMessageCall(window.top,new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.registerExtraNavBar));
b.CommonFunctions.makePostMessageCall(window.top,new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.maskNavigationBar))};c.prototype.removeMask=function(){var a=this;this.$mask&&(this.settings.HighlightInMaskSelector&&($(this.settings.HighlightInMaskSelector).removeClass("ccl-onboarding-highlight-in-mask"),$(this.settings.HighlightInMaskSelector).css("z-index","")),!0===this.blockHighlightZone&&($(".ccl-onboarding-highlight-in-mask__clean-border").css("pointer-events",""),
$(this.settings.HighlightInMaskSelector).removeClass("ccl-onboarding-highlight-in-mask__clean-border")),this.settings.AppendMaskToSelector&&$(this.settings.AppendMaskToSelector).css("overflow-y",""),this.$mask.fadeTo(400,0,function(){a.$mask.parent().removeClass("il-has-onboarding-mask");a.$mask.remove();a.$mask=null}),b.CommonFunctions.makePostMessageCall(window.top,new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.unregisterExtraNavBar)),b.CommonFunctions.makePostMessageCall(window.top,
new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.unmaskNavigationBar)))};c.prototype.isMobileView=function(){return!b.CommonFunctions.checkScreenSize(b.CommonConstants.mediaScreenSizes.iPadPortraitMode,!0)};return c}();b.OnboardingDialog=f})(CCL||(CCL={}));
(function(b){(function(d){(function(d){var c=function(){function a(a,c,b,d){var f=this;this.handleFeatureState=function(a){if(1===a.type&&a.featureId===f.featureId)!0===a.IsCompleted?f.completedHandler():f.notCompletedHandler();else throw Error("Can't handle onboarding post message. Check correctness featureId and MessageType");};this.completedHandler=b;this.notCompletedHandler=d;this.listenPostMessageFrom=$(window);this.featureId=a;this.nextFeatureId=c;this.attachMessageHandlers()}a.prototype.attachMessageHandlers=
function(){b.CommonFunctions.attachPostMessageEventListener(this.listenPostMessageFrom,b.CommonWindowMessages.MessageNames.extensionOnboarding,this.handleFeatureState)};a.prototype.next=function(){var a=new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.extensionOnboarding);b.CommonFunctions.makePostMessageCallWithData(window.parent,a,{featureId:this.nextFeatureId,type:2})};a.prototype.complete=function(a){"undefined"===typeof a&&(a=null);var c=new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.extensionOnboarding),
d={type:3,features:[]};d.features.push(this.featureId);a&&Array.prototype.push.apply(d.features,a);b.CommonFunctions.makePostMessageCallWithData(window.parent,c,d)};a.prototype.start=function(){var a=new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.extensionOnboarding);b.CommonFunctions.makePostMessageCallWithData(window.parent,a,{featureId:this.featureId,type:0})};a.prototype.overlay=function(a){a={type:a?4:5};var c=new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.extensionOnboarding);
b.CommonFunctions.makePostMessageCallWithData(window.parent,c,a)};return a}();d.OnboardingPostMessageController=c})(d.Extensions||(d.Extensions={}))})(b.Onboarding||(b.Onboarding={}))})(CCL||(CCL={}));
(function(b){b=b.Onboarding||(b.Onboarding={});b=b.Extensions||(b.Extensions={});b=b.MessageType||(b.MessageType={});b[b.RequestFeatureState=0]="RequestFeatureState";b[b.ReceiveFeatureState=1]="ReceiveFeatureState";b[b.TriggerOnboardingFeature=2]="TriggerOnboardingFeature";b[b.CompleteFeature=3]="CompleteFeature";b[b.ShowOverlay=4]="ShowOverlay";b[b.HideOverlay=5]="HideOverlay"})(CCL||(CCL={}));
(function(b){b=b.Onboarding||(b.Onboarding={});b=b.Extensions||(b.Extensions={});b=b.OnboardingFeatures||(b.OnboardingFeatures={});b[b.AddElementToLibraryFromCourse=23]="AddElementToLibraryFromCourse";b[b.AssignmentEdit=27]="AssignmentEdit";b[b.AssignmentLearningToolOptions=28]="AssignmentLearningToolOptions";b[b.AssignmentReminders=29]="AssignmentReminders";b[b.AssignmentAddNote=34]="AssignmentAddNote";b[b.AssignmentGetStarted=35]="AssignmentGetStarted";b[b.AssignmentAnnotateAnswerFiles=36]="AssignmentAnnotateAnswerFiles"})(CCL||
(CCL={}));(function(b){var d={},f=function(){function c(a,c){"undefined"===typeof c&&(c="");this._elem=$("#"+a);this._eventsPrefix=c;d[a]=this}c.GetInstanceForElement=function(a){return d[a]};c.prototype.Trigger=function(a){for(var c=[],b=0;b<arguments.length-1;b++)c[b]=arguments[b+1];this._elem.trigger(this._eventsPrefix+a,c)};return c}();b.DomElementClass=f})(CCL||(CCL={}));
(function(b){b.PickerEvent={Initialized:"PickerInitialized",Added:"PickerFilesAdded",Started:"PickerUploadStarted",Stopped:"PickerUploadStopped",ResultsChanged:"PickerResultsChanged",LoadingDependencyFailed:"LoadingDependencyFailed"};b.PickerDependencyLoadTimeoutInMs=3E4;var d=function(b){function c(a,c){b.call(this,a);this._settings=c}__extends(c,b);c.prototype.ToggleOkButton=function(a){$(".ccl-button-ok, .ccl-button-pause").each(function(){var c={},c=$(this);a?(void 0===this.previouslyDisabled&&
(c.attr("disabled")?this.previouslyDisabled=!0:this.previouslyDisabled=!1),c.prop("disabled",a)):c.prop("disabled",this.previouslyDisabled)})};c.prototype.ClearResults=function(a){};c.prototype.AllowHide=function(){};c.prototype.isSecure=function(){return"https:"==window.location.protocol};c.prototype.trimStart=function(a,c){if(!a||0==a.length)return a;c=c?c:" ";for(var b=0;b<a.length&&a.charAt(b)==c;b++);return a.substring(b)};c.prototype.trimEnd=function(a,c){if(!a||0==a.length)return a;c=c?c:" ";
for(var b=a.length-1;0<=b&&a.charAt(b)==c;b--);return a.substring(0,b+1)};c.prototype.trim=function(a,c){return a&&0!=a.length?this.trimEnd(this.trimStart(a,c),c):a};return c}(b.DomElementClass);b.ItemPickerBase=d})(CCL||(CCL={}));
(function(b){var d=function(d){function c(a,c){d.call(this,a,c);this._stateHidden=$("#"+this._settings.StateHiddenFieldClientId);this._resultsTable=$("#"+this._settings.FileListTableClientId);this._fileListItemTemplate=$("#"+this._settings.FileListItemTemplateId).html();this.Init();this.Trigger(b.PickerEvent.Initialized);0<this.GetFiles().length&&this.Trigger(b.PickerEvent.ResultsChanged,{results:this.GetFiles()})}__extends(c,d);c.prototype.Init=function(){};c.prototype.getParameterValue=function(a,
c){for(var b=[],d,f=a.slice(a.indexOf("?")+1).split("&"),l=0;l<f.length;l++)d=f[l].split("="),b.push(d[0]),b[d[0]]=d[1];return b[c]};c.prototype.removeParameter=function(a,c){var b=a.split("#"),d=b[0].split("?");if(2<=d.length){for(var f=d.shift(),l=d.join("?"),d=encodeURIComponent(c)+"=",l=l.split(/[&;]/g),m=l.length;0<m--;)-1!==l[m].lastIndexOf(d,0)&&l.splice(m,1);a=f+"?"+l.join("&");b[1]&&(a+="#"+b[1])}return a};c.prototype.ReplaceUrlToken=function(a,c,b){var d="{"+c+"}";null!=b&&""!=b?-1!=a.indexOf(d)&&
(a=a.replace(d,b)):a=this.removeParameter(a,c);return a};c.prototype.ReplaceUrlTokens=function(a,c,b){a=this.ReplaceUrlToken(a,this._settings.FileRepoFileNameToken,encodeURIComponent(c));return a=this.ReplaceUrlToken(a,this._settings.FileRepoFileIdToken,encodeURIComponent(b))};c.prototype.GetFullFileRepoUrl=function(){return this.trimEnd(this._settings.FileRepoProxy,"/")};c.prototype.ProcessFileName=function(a){if(/^\.([^\.]+)$/.test(a)){var c=new Date,b=c.getFullYear(),d=c.getMonth()+1,d=10>d?"0"+
d.toString():d.toString(),c=c.getDate();a=b+"-"+d+"-"+(10>c?"0"+c.toString():c.toString())+a}return a};c.prototype.GetFileRepoUrlForFileName=function(a){a=this.ReplaceUrlTokens(this.GetFullFileRepoUrl(),a,"");a+=-1<a.indexOf("?")?"&":"?";return a+="ts="+(new Date).getTime()};c.prototype.GetFileRepoUrl=function(a){a=this.ReplaceUrlTokens(this.GetFullFileRepoUrl(),"",a);a+=-1<a.indexOf("?")?"&":"?";return a+="ts="+(new Date).getTime()};c.prototype.ValidateSelectedFiles=function(a,c){for(var b=a.length-
1;0<=b;b--)null!=c&&0<c.length&&(-1===a[b].name.indexOf(".")||-1===$.inArray(a[b].name.split(".").pop().toLowerCase(),c))&&(a[b].error=this._settings.ErrorTextNotAllowedFileType),a[b].error||(0<this._settings.MaxNumberOfFiles&&b>=this._settings.MaxNumberOfFiles?a[b].error=this._settings.MaxNumberOfFilesExceededText:a[b].size>this._settings.MaxFileSize?a[b].error=this._settings.FileSizeExceededText:a[b].size<this._settings.MinFileSize&&(a[b].error=this._settings.FileSizeTooSmallText));this.SetFiles(a);
return a};c.prototype.SetFiles=function(a){this._stateHidden.val(JSON.stringify(a))};c.prototype.GetFiles=function(){return JSON.parse(this._stateHidden.val()||"[]")};c.prototype.UpdateFileList=function(a){var c=this;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);0===a.find(".error").length&&a.remove()});if(a.length){this._settings.ReadOnly||this._chooseButton.hide();for(var d=0;d<a.length;d++){var f=a[d],k=this._fileListItemTemplate.replace("{file.name}",b.CommonFunctions.htmlEncode(f.name)).replace("{file.bytes}",
b.Utils.FormatFileSize(f.size||0,this._settings.KbText,this._settings.MbText)),k=$(k),l=k.find("td.preview img");k.find("td.delete button").click(function(a){a=$(a.target).closest("tr");var b=a.find("td.name > span").text();c.RemoveFile(b,a);return!1});f.thumbnailUrl?l.attr("src",f.thumbnailUrl):l.attr("src",f.icon).attr("height","24").attr("width","24");this._resultsTable.append(k)}}else this._settings.ReadOnly||this._resultsTable.find("tbody").find("tr").length||this._chooseButton.show()};c.prototype.GetSelectedFile=
function(a){if(this._selectedFiles)for(var c=this._selectedFiles.length;c--;)if(this._selectedFiles[c].name===a)return this._selectedFiles[c]};c.prototype.GetSelectedFileByFileId=function(a){if(this._selectedFiles)for(var c=this._selectedFiles.length;c--;)if(this._selectedFiles[c].fileId===a)return this._selectedFiles[c]};c.prototype.RemoveSelectedFile=function(a){if(this._selectedFiles)for(var c=this._selectedFiles.length;c--;)if(this._selectedFiles[c].name===a)return this._selectedFiles.splice(c,
1)[0]};c.prototype.RemoveSelectedFileByFileId=function(a){if(this._selectedFiles)for(var c=this._selectedFiles.length;c--;)if(this._selectedFiles[c].id===a)return this._selectedFiles.splice(c,1)[0]};c.prototype.RemoveFile=function(a,c){for(var d=this.GetFiles(),f=0===c.siblings().length,k=d.length;k--;)if(d[k].name===a){d[k].deleteUrl&&$.ajax({url:d[k].deleteUrl+"&"+this._settings.MethodOverrideQueryStringParam+"=delete",type:"GET",xhrFields:{withCredentials:!0}});d.splice(k,1);break}d=this.ValidateSelectedFiles(d,
null);c.remove();this.RemoveSelectedFile(a);this.Trigger(b.PickerEvent.ResultsChanged,{results:d});d=!d.length&&!this._settings.MultiselectAllowed;f=f&&this._settings.MultiselectAllowed&&this.AllUploadsFinished();if(d||f)this._settings.ReadOnly||this._chooseButton.show(),this.HandleStopped({results:[]})};c.prototype.AllUploadsFinished=function(){var a=!0;this._selectedFiles&&this._selectedFiles.forEach(function(c){c.error||(a=!1)});return a};c.prototype.HandleStopped=function(a){this.stopPolling();
this.Trigger(b.PickerEvent.Stopped,a);this.ToggleOkButton(!1)};c.prototype.SetFileErrorText=function(a,c){a.error=c;this.SetFileStatusText(a,c);this.GetRowInResultsTableByText(a.name).find("td.status").addClass("error");this.GetRowInResultsTableByText(a.name).find("td.status span").addClass("label").addClass("label-important")};c.prototype.SetFileStatusText=function(a,c){this.GetRowInResultsTableByText(a.name).find("td.status > span").text(c)};c.prototype.UpdateFileSize=function(a){this.GetRowInResultsTableByText(a.name).find("td.size").text(b.Utils.FormatFileSize(a.size||
0,this._settings.KbText,this._settings.MbText))};c.prototype.UpdateFileName=function(a,c){for(var b=this.GetFiles(),d=b.length;d--;)if(b[d].name===c){b[d].name=a.name;break}this.SetFiles(b);this.GetFileNameElement(c).text(a.name)};c.prototype.GetRowInResultsTableByText=function(a){return this.GetFileNameElement(a).closest("tr")};c.prototype.GetFileNameElement=function(a){return this._resultsTable.find("td.name > span").filter(function(){return $(this).text()===a})};c.prototype.HandleRequestError=
function(){var a=this;this.stopPolling();this._selectedFiles.forEach(function(c){a.SetFileErrorText(c,a._settings.UploadErrorText)});this.HandleStopped({results:this._uploadedFiles})};c.prototype.HandleError=function(a){this.SetFileErrorText(a,this._settings.UploadErrorText);this.AllUploadsFinished()&&0<this._uploadedFiles.length&&this.HandleStopped({results:this._uploadedFiles})};c.prototype.CheckFileDownloadsComplete=function(){var a=this;if(!this._isPolling){this._isPolling=!0;var c=[],b=0;this._selectedFiles.forEach(function(a){!a.error&&
a.signedId&&a.isNew&&(c.push(a.signedId),b++)});var d,f;1===c.length?f=this.GetFileRepoUrl(c[0]):1<=c.length?(f=this.GetFileRepoUrl("batch"),d=c.join()):this.CompleteFileDownloads();if(f){var l={};d&&(l[this._settings.FileRepoHeaderFileBatch]=d);$.ajax({url:f+"&"+this._settings.FileRepoInfoParam+"=true",type:"get",dataType:"json",headers:l,xhrFields:{withCredentials:!0},success:function(c){var b=!1;c?(c=[].concat(c),c.forEach(function(c){if(c&&c.status)if("DownloadCompleted"===c.status||"Available"===
c.status){var d=a.RemoveSelectedFileByFileId(c.fileId);d&&(d.id=c.fileId,d.signedId=c.signature,d.name=c.fileName,d.type=c.mimeType,d.size=c.fileSize,d.fileUrl=a.GetFileRepoUrl(c.signature),d.deleteUrl=a.GetFileRepoUrl(c.signature),a._uploadedFiles.push(d),a.SetFileStatusText(d,""))}else"Error"===c.status?(d=a.RemoveSelectedFileByFileId(c.fileId),a.SetFileErrorText(d,c.statusMessage)):"Downloading"===c.status&&(d=a.GetSelectedFile(c.fileName),a.SetFileStatusText(d,a._settings.FileIsBeingDownloadedText+
" "+c.statusProgress+"%"));else b=!0})):b=!0;b?a.HandleRequestError():a.AllUploadsFinished()?a.CompleteFileDownloads():a._checkFileDownloadsCompleteTask=setTimeout(function(){a._isPolling=!1;a.CheckFileDownloadsComplete()},1E3)},error:function(){a.HandleRequestError()}})}}};c.prototype.CompleteFileDownloads=function(){this.stopPolling();var a=this.ValidateSelectedFiles(this._uploadedFiles,null);this.UpdateFileList(a);this.Trigger(b.PickerEvent.ResultsChanged,{results:a});this.HandleStopped({results:a});
this._resultsTable.find("tbody").find("tr").length&&this._settings.MultiselectAllowed&&this.Trigger(b.PickerEvent.ResultsChanged,{results:[{}]})};c.prototype.StartUploadFiles=function(a){var c=this;this.ToggleOkButton(!0);this.Trigger(b.PickerEvent.Started);this.Trigger(b.PickerEvent.Added,{files:a});this._selectedFiles=a;this._uploadedFiles=[];var d=!1;this._selectedFiles.forEach(function(a){if(a.error)c.SetFileErrorText(a,a.error);else if(a.fileUrl){c.SetFileStatusText(a,c._settings.FileIsBeingDownloadedText+
" 0%");var b=c.GetFileRepoUrlForFileName(a.name),b=b+("&"+c._settings.FileRepoHeaderDownloadFrom+"=1"),f=c.buildDownloadRequestData(a);d=!0;$.ajax({url:b,type:"post",dataType:"json",data:f,xhrFields:{withCredentials:!0},success:function(b){b&&b.fileId&&b.signature?(a.id=b.fileId,a.signedId=b.signature,a.isNew=!0,c.CheckFileDownloadsComplete()):c.HandleError(a)},error:function(){c.HandleError(a)}})}});a&&a.length&&!d&&this._settings.MultiselectAllowed&&(this.SetFiles([]),this.HandleStopped({results:[]}),
this.Trigger(b.PickerEvent.ResultsChanged,{results:[{}]}))};c.prototype.buildDownloadRequestData=function(a){};c.prototype.AddAdditionalHeadersToDownloadFile=function(a,c){};c.prototype.ClearResults=function(a){if(a){var c=this.GetFiles();a.forEach(function(a){for(var b=c.length;b--;)if(c[b].id===a.id){c.splice(b,1);break}});this.SetFiles(c)}};c.prototype.stopPolling=function(){this._checkFileDownloadsCompleteTask&&clearTimeout(this._checkFileDownloadsCompleteTask);this._checkFileDownloadsCompleteTask=
null;this._isPolling=!1};return c}(b.ItemPickerBase);b.FilePickerBase=d})(CCL||(CCL={}));(function(b){var d=function(){function b(){}b.FormatFileSize=function(c,a,b){return 1048576<=c?(c/1048576).toFixed(2)+" "+b:(c/1024).toFixed(2)+" "+a};return b}();b.Utils=d})(CCL||(CCL={}));var Utils;
(function(b){var d=function(){return function(){this.newGuid=function(){function b(c){var a=(Math.random().toString(16)+"000000000").substr(2,8);return c?"-"+a.substr(0,4)+"-"+a.substr(4,4):a}return b()+b(!0)+b(!0)+b()}}}();b.GuidFactory=d;d=function(){return function(b){var c=this;this.value=b;this.getParamValue=function(a){for(var b=[],d=c.value.slice(c.value.indexOf("?")+1).split("&"),f=0;f<d.length;f++){var k=d[f].split("=");b.push(k[0]);b[k[0]]=k[1]}return b[a]};this.appendOrUpdateParam=function(a,
b){var d=new RegExp("([?&])"+a+"=.*?(&|$)","i"),f=-1!==c.value.indexOf("?")?"&":"?";c.value.match(d)?c.value=c.value.replace(d,"$1"+a+"="+b+"$2"):c.value=c.value+f+a+"="+b}}}();b.Url=d})(Utils||(Utils={}));var UrlUtilities=Utils;
(function(b){var d=function(d){function c(a,c){d.call(this,a,c);this.uploaderWindowWidth=660;this.uploaderWindowHeight=552;this.pickerWindow=null;this.oneDrivePickerActions={fileSelected:0}}__extends(c,d);c.prototype.Init=function(){var a=this;this._settings.ReadOnly||(window.addEventListener("message",function(c){if(c.origin===a._settings.PickerDomain&&c.data.isOneDriveForBusinessPickerResult&&c.data.action===a.oneDrivePickerActions.fileSelected)a.onFileSelected(c.data)}),this._chooseButton=$("#"+
this._settings.ButtonId),this._chooseButton.on("click",function(){a.pickerWindowIsAlreadyOpened()?a.pickerWindow.focus():a.pickerWindow=window.open(a.getPickerUrl(),"OneDrivePicker",a.getOnedriveFilePickerWindowSettings())}),this._elem.append(this._chooseButton));this.UpdateFileList(this.GetFiles())};c.prototype.getPickerUrl=function(){var a=new UrlUtilities.Url(this._settings.PickerUrl);a.appendOrUpdateParam("mode",encodeURIComponent(JSON.stringify({allowToSelectMultipleFiles:this._settings.MultiselectAllowed})));
return a.value};c.prototype.onFileSelected=function(a){if(!(this._elem.hasClass("disabled")||0<this._resultsTable.find("tr").length)){a=this.ConvertSelectedFiles(a);for(var c=a.length-1;0<=c;c--)a[c].name=this.ProcessFileName(a[c].name);this.ValidateSelectedFiles(a,null);this.UpdateFileList(a);0<a.length&&this.StartUploadFiles(a)}};c.prototype.getWindowLeftCoordinate=function(){return window.screenX+(window.outerWidth-this.uploaderWindowWidth)/2};c.prototype.getWindowTopCoordinate=function(){return(window.screenY+
window.outerHeight-this.uploaderWindowHeight)/2};c.prototype.getWindowPositionAndSizeSettingString=function(a,c){var b=this.getWindowLeftCoordinate(),d=this.getWindowTopCoordinate();return"width = "+a+", height = "+c+", left = "+b+", top = "+d};c.prototype.getOnedriveFilePickerWindowSettings=function(){return this.getWindowPositionAndSizeSettingString(this.uploaderWindowWidth,this.uploaderWindowHeight)+", toolbar = no, scrollbars = no, status = no, menubars = no, resizable = yes"};c.prototype.pickerWindowIsAlreadyOpened=
function(){return this.pickerWindow&&!this.pickerWindow.closed};c.prototype.ConvertSelectedFiles=function(a){var c=this,b=a.files;return b?$.map(b,function(b,d){return{name:b.name,size:b.size,thumbnailUrl:c._settings.DefaultThumbnailUrl,fileUrl:b.url,icon:c._settings.DefaultThumbnailUrl,authToken:a.authToken}}):[]};c.prototype.ClearResults=function(a){var c=!0;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);a.hasClass("clearme")||0===a.find(".error").length?a.remove():(c=
!1,a.addClass("clearme"))});c&&this._chooseButton.show();d.prototype.ClearResults.call(this,a);this.Trigger(b.PickerEvent.ResultsChanged,{results:[]})};c.prototype.AllowHide=function(){return 0===this._resultsTable.find("tbody").find("tr .error").length};c.prototype.buildDownloadRequestData=function(a){return this._settings.FileRepoHeaderDownloadFrom+"="+encodeURIComponent(a.fileUrl)+"&"+this._settings.FileRepoHeaderSourceType+"="+this._settings.SourceType+"&"+this._settings.FileRepoFileSizeParam+
"="+a.size};return c}(b.FilePickerBase);b.OneDrivePicker=d})(CCL||(CCL={}));
(function(b){var d=function(){return function(){}}();b.OptionCheckboxState=d;d=function(){function b(c,a){var d=this;this.temprorarySuppressCheckboxEvents=!1;window[c]=this;this._settings=a;$(document).ready(function(){d._settings.ContainerId&&(d.$container=$("#"+d._settings.ContainerId));d.$checkbox=$("#"+d._settings.CheckboxId);d.$checkbox.iCheck({checkboxClass:d._settings.CheckboxCssClass});d.$checkbox.on("ifChanged",function(c){d.temprorarySuppressCheckboxEvents||d.$checkbox.trigger(a.StateChangedEventName,
d.getState())})})}b.prototype.toggle=function(c){this.$checkbox.prop("checked")&&c||this.$checkbox.iCheck(c?"check":"uncheck")};b.prototype.toggleWithSuppressEvents=function(c){this.temprorarySuppressCheckboxEvents=!0;this.toggle(c);this.temprorarySuppressCheckboxEvents=!1};b.prototype.enable=function(c){this.$checkbox.iCheck(c?"enable":"disable")};b.prototype.getState=function(){var c={};c.Checked=this.$checkbox.prop("checked");c.Enabled=!this.$checkbox.prop("disabled");return c};b.prototype.isChecked=
function(){return this.$checkbox.prop("checked")};b.prototype.onchange=function(c){this.$checkbox.on(this._settings.StateChangedEventName,c)};b.prototype.show=function(){this.$container&&this.$container.show()};b.prototype.hide=function(){this.$container&&this.$container.hide()};b.prototype.isVisible=function(){return this.$container.is(":visible")};b.prototype.isEnabled=function(){return this.$checkbox.getIfHyperLinkEnabled()};return b}();b.OptionCheckbox=d})(CCL||(CCL={}));
(function(b){var d=function(){function a(){}a.show="overlayModal:show";a.hide="overlayModal:hide";return a}();b.OverlayModalEvents=d;var f=function(){return function(){}}();b.OverlayModalCloseContext=f;var c=function(){function c(a,b,d){this.id=a;this.controls=d;this._$document=$(document);this._$window=$(window);this.Params={};a=d.container.data(c.settingsAttribute)||{IsIos:!1,ResizeTimeoutInMilliseconds:10};"string"===typeof b?this._settings={}:$.extend(a,b);this._settings=a;this.Params.Url=this._settings.Url;
this._contentLoader=this.GetContentLoader(this._settings.Mode);this.initialize(d);this._activeElement=d.container.get(0);this._settings.PreferredWidth=this._settings.PreferredWidth||800;this.renderHeader();d.container.data(c.settingsAttribute,this._settings)}c.prototype.renderHeader=function(){if(this._settings.Title){this.controls.container.find("."+b.OverlayModal.CssClasses.Header).length||(this._titleTemplate="<div class='"+b.OverlayModal.CssClasses.Header+"'><h2>"+(this._settings.Title||"")+'</h2><a class="'+
b.OverlayModal.CssClasses.Close+'">Close</a></div>',this.controls.contentContainer.before($(this._titleTemplate)));var a=this.controls.container.find("."+b.OverlayModal.CssClasses.Close);a.off("click");a.click(function(){this.close(1)}.bind(this))}};c.prototype.setParams=function(a){a&&$.extend(this.Params,a)};c.prototype.setContentMinSize=function(a,c){this._settings.MinContentWidth=a;this._settings.MinContentHeight=c;this.adjustWindowSize()};c.prototype.setPreferredSize=function(a,c){0<a&&(this._settings.PreferredWidth=
a);0<c&&(this._settings.PreferredHeight=c);this.adjustWindowSize()};c.prototype.clearContent=function(){this.controls.contentContainer.empty()};c.prototype.getId=function(){return this.id};c.prototype.onModalKeyUp=function(a){a.which===b.CommonConstants.keyCodes.escape&&b.OverlayModal.instance&&b.OverlayModal.instance.close(2)};c.prototype.initialize=function(a){this._$document.on("keyup",this.onModalKeyUp);this._$window.on("resize",this.adjustWindowSizeWithTimeout.bind(this));this._activeElement=
this.controls.container.get(0);if(this._contentLoader)this._contentLoader.onInit(this.controls.contentContainer,this.adjustWindowSize.bind(this),this.Params);null==navigator.userAgent.match(/iPod/)&&$(this.controls.contentContainer).perfectScrollbar({suppressScrollX:!0})};c.prototype.getIsOpened=function(){return this._isOpened};c.prototype.adjustWindowSizeWithTimeout=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=setTimeout(this.adjustWindowSize.bind(this),this._settings.ResizeTimeoutInMilliseconds)};
c.prototype.adjustWindowSize=function(){var a=this._settings,c=this.controls;this.controls.wrapperContainer.removeAttr("style");this.controls.contentContainer.removeAttr("style");var d=0;c.wrapperContainer.children().not(c.contentContainer).each(function(){d+=$(this).outerHeight()});if(this._$window.width()>b.CommonConstants.mediaScreenSizes.mobile){a.PreferredWidth&&0<a.PreferredWidth&&c.wrapperContainer.width(Math.min(a.PreferredWidth,this._$window.width()-40));var e=c.contentContainer.outerHeight(!0)-
c.contentContainer.height();if(a.PreferredHeight&&0<a.PreferredHeight){var f=c.wrapperContainer.outerHeight()-c.contentContainer.height();c.contentContainer.outerHeight(a.PreferredHeight-f+e,!0)}else c.contentContainer.height(c.wrapperContainer.outerHeight()-d-e);c.contentContainer.css({width:a.MinContentWidth&&0<a.MinContentWidth?a.MinContentWidth:void 0,minWidth:a.MinContentWidth&&0<a.MinContentWidth?a.MinContentWidth:void 0,minHeight:a.MinContentHeight&&0<a.MinContentHeight?a.MinContentHeight:
void 0});a=c.wrapperContainer.outerHeight()-c.headerContainer.outerHeight();c.contentContainer.outerHeight()-1>a&&c.contentContainer.outerHeight(a);a=c.wrapperContainer.height()/2;e=c.wrapperContainer.width()/2;c.wrapperContainer.css({left:"50%","margin-left":-1*e,"margin-top":-1*a,top:"50%"})}else c.contentContainer.outerHeight(c.wrapperContainer.height()-d);null==navigator.userAgent.match(/iPod/)&&$(c.contentContainer).perfectScrollbar("update")};c.prototype.toggleContentAreaFrame=function(a){b.CommonFunctions.makePostMessageCall(window.top,
new b.CommonWindowMessages.GenericMessage(a?b.CommonWindowMessages.MessageNames.expandContentAreaFrame:b.CommonWindowMessages.MessageNames.collapseContentAreaFrame));IframeResizer.reportSetIframeDefaultHeight()};c.prototype.open=function(){c.instance=this;this.toggleContentAreaFrame(!0);!this._isOpened&&this._settings.IsTopFrame&&(this.adjustWindowSize(),this.openModal())};c.prototype.openModal=function(){var a=this.controls;this._activeElement&&$(this._activeElement).removeClass(b.OverlayModal.CssClasses.IsActive);
if(this._contentLoader)this._contentLoader.onOpen(this.controls.contentContainer,this.adjustWindowSize.bind(this),this.Params);else this.adjustWindowSizeWithTimeout();this._lastWindowScroll=this._$window.scrollTop();$("html").addClass(b.OverlayModal.CssClasses.Overlay);this.controls.container.addClass(b.OverlayModal.CssClasses.IsActive);this.setFocus();this._$document.trigger(b.OverlayModalEvents.show,[this._activeElement,this.id]);a.contentContainer.toggleClass(b.OverlayModal.CssClasses.WebkitOverflow)};
c.prototype.close=function(a){if(c.instance){a||(a=0);c.instance=null;this.controls.contentContainer.removeClass(b.OverlayModal.CssClasses.WebkitOverflow);this._$window.scrollTop(this._lastWindowScroll);$("html").removeClass(b.OverlayModal.CssClasses.Overlay);if(this._activeElement){$(this._activeElement).removeClass(b.OverlayModal.CssClasses.IsActive);var d=new f;d.closeType=a;d.activeElement=this._activeElement;d.id=this.id;this._$document.trigger(b.OverlayModalEvents.hide,d);this._activeElement=
null}this.toggleContentAreaFrame(!1);this.removeFocus();this._$document.off("keyup",this.onModalKeyUp)}};c.prototype.setFocus=function(){this._activeElement&&(this._lastActive=document.activeElement,this._activeElement.focus())};c.prototype.removeFocus=function(){this._lastActive&&this._lastActive.focus()};c.prototype.GetContentLoader=function(c){var b;1==c&&(b=new a);return b};c.settingsAttribute="settings";c.CssClasses={Container:"ccl-overlay-modal",IsActive:"is-active",WebkitOverflow:"ccl-modal-webkit-overflow",
Content:"ccl-overlay-modal-content",Wrapper:"ccl-overlay-modal-wrapper",Overlay:"ccl-overlay-modal-has-overlay",OverlayIos:"ccl-overlay-modal-has-overlay-ios",Close:"ccl-overlay-modal-close",Header:"ccl-overlay-modal-header"};return c}();b.OverlayModal=c;d=function(){function a(){}a.prototype.onInit=function(a,c,b){};a.prototype.onOpen=function(a,c,b){};return a}();b.BaseContentLoader=d;var a=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.onInit=function(a,c,b){b&&b.Url&&
$.ajax({type:"POST",url:b.Url,data:b,success:function(b){a.html($(b).text());c()},error:function(a,c,b){alert(b)}})};return c}(d);b.StaticAjaxContentLoader=a;(function(a){a[a.FunctionExecuted=0]="FunctionExecuted";a[a.CloseButtonClicked=1]="CloseButtonClicked";a[a.EscapeKeyPressed=2]="EscapeKeyPressed"})(b.OverlayModalCloseType||(b.OverlayModalCloseType={}));d=function(){function a(){b.CommonFunctions.attachPostMessageEventListener($(window),[b.CommonWindowMessages.MessageNames.contentAreaFrameHasExpanded],
function(a){b.OverlayModal.instance&&!b.OverlayModal.instance.getIsOpened()&&setTimeout(b.OverlayModal.instance.openModal(),20)})}a._initEventListener=new a;return a}();b.OverlayModalListener=d;(function(a){a.fn.overlayModal=function(b,d){var f={container:this,contentContainer:this.find("."+c.CssClasses.Content),wrapperContainer:this.find("."+c.CssClasses.Wrapper),headerContainer:this.find("."+c.CssClasses.Header)};b instanceof Object&&a.extend(void 0,b);f=new c(f.container.get(0).id,b,f);f.Params=
d;switch(b){case "open":f.open();break;case "close":f.close()}return this}})(jQuery)})(CCL||(CCL={}));var PopupInitFailureReason;(function(b){b[b.BrowserNotSupported=1]="BrowserNotSupported";b[b.ExternalServiceNotAvailable=2]="ExternalServiceNotAvailable"})(PopupInitFailureReason||(PopupInitFailureReason={}));
var PopupInitFailureEventArgs=function(){return function(b,d){this.failureReason=b;this.translation=d}}(),PopupCallback=function(){return function(b,d){this.onMessageReceived=b;this.onPopupClosed=d}}(),Popup=function(){function b(d,f){var c=this;this.settings=d;this.browserSniffer=f;this.popupWidth=660;this.popupHeight=552;this.popupWindow=null;this.subscriberCallbacks=[];this.windowOpenCheckIntervalInMilliseconds=1E3;this.open=function(){c.popupWindowIsAlreadyOpened()?c.popupWindow.focus():(c.popupWindow=
window.open(c.getPopupUrlWithTarget(),c.getInitialPopupTitle(),c.getPopupWindowSettings()),c.timerForCheckingOpenWindow=setInterval(c.notifyIfWindowWasClosed,c.windowOpenCheckIntervalInMilliseconds))};this.subscribe=function(a){c.subscriberCallbacks.push(a)};this.popupWindowIsAlreadyOpened=function(){return c.popupWindow&&!c.popupWindow.closed};this.getPopupUrlWithTarget=function(){var a=new Utils.Url(c.getPopupUrl());if(a.getParamValue(b.target))throw"You cannot set query parameter: ["+b.target+
"] in popupUrl.";a.appendOrUpdateParam(b.target,encodeURI(c.popupIdentifier));return a.value};this.listenForPostMessages=function(){window.addEventListener("message",c.onPostMessageReceived)};this.getPopupWindowSettings=function(){var a=c.getPopupCoordinates();return"width="+a[0]+", height="+a[1]+", left="+a[2]+", top="+a[3]+", toolbar = no, scrollbars = no, status = no, menubars = no, resizable = yes"};this.getPopupCoordinates=function(){return[c.popupWidth,c.popupHeight,c.getWindowLeftCoordinate(),
c.getWindowTopCoordinate()]};this.getWindowLeftCoordinate=function(){return window.screenX+(window.outerWidth-c.popupWidth)/2};this.getWindowTopCoordinate=function(){return(window.screenY+window.outerHeight-c.popupHeight)/2};this.isProxyIframeRequired=function(){return c.settings.crossCommunicationProxyUrl&&c.browserSniffer.isInternetExplorerAnyVersion()};this.ensureProxyIframeIsRendered=function(){if(!document.getElementById("cross_communication_proxy")){var a=c.prepareIframe("cross_communication_proxy");
document.body.appendChild(a)}};this.prepareIframe=function(a){var b=document.createElement("iframe");b.id=a;b.style.display="none";b.src=c.settings.crossCommunicationProxyUrl;return b};this.notifyIfWindowWasClosed=function(){c.popupWindow&&c.popupWindow.closed&&(c.timerForCheckingOpenWindow=clearInterval(c.timerForCheckingOpenWindow),c.popupWindow=null,c.notifyAboutClosing())};this.notifyAboutClosing=function(){for(var a=0;a<c.subscriberCallbacks.length;a++){var b=c.subscriberCallbacks[a];if(b.onPopupClosed)b.onPopupClosed()}};
this.onPostMessageReceived=function(a){c.isPostMessageForUs(a)&&c.processPostMessage(a)};this.isPostMessageForUs=function(a){return a&&a.origin===c.settings.popupDomain&&a.data&&a.data[b.target]===c.popupIdentifier};this.popupIdentifier=(new Utils.GuidFactory).newGuid();if(objectState.isNullOrUndefined(this.settings))throw"Popup requires settings to be passed. Please provide them.";if(objectState.isNullOrUndefined(this.browserSniffer))throw"Popup requires browserSniffer to be passed. Please provide it.";
this.isProxyIframeRequired()&&this.ensureProxyIframeIsRendered();this.listenForPostMessages()}b.prototype.getPopupUrl=function(){return this.settings.popupUrl};b.prototype.getInitialPopupTitle=function(){return"Title"};b.prototype.processPostMessage=function(b){for(var f=0;f<this.subscriberCallbacks.length;f++){var c=this.subscriberCallbacks[f];if(c.onMessageReceived)c.onMessageReceived(b.data)}};b.target="target";return b}();
(function(b){var d=function(){function b(){this.lastPromise=$.Deferred().resolve()}b.prototype.enqueue=function(c){var a=$.Deferred();this.lastPromise.always(function(){c().always(function(){a.resolve()})});this.lastPromise=a};return b}();b.PromiseQueue=d})(CCL||(CCL={}));
(function(b){(function(b){b.toDate=function(b){return b?new Date(b.Year,b.Month-1,b.Day,b.Hour,b.Minute):void 0};b.toDateWithSeconds=function(b){return b?new Date(b.Year,b.Month-1,b.Day,b.Hour,b.Minute,b.Second):void 0};b.fromDate=function(b){return b?{Year:b.getFullYear(),Month:b.getMonth()+1,Day:b.getDate(),Hour:b.getHours(),Minute:b.getMinutes()}:void 0};b.fromDateWithSeconds=function(b){return b?{Year:b.getFullYear(),Month:b.getMonth()+1,Day:b.getDate(),Hour:b.getHours(),Minute:b.getMinutes(),
Second:b.getSeconds()}:void 0}})(b.SerializableDateTimeConverter||(b.SerializableDateTimeConverter={}))})(CCL||(CCL={}));
(function(b){var d=function(){function d(c,a){this._id=c;this._settings=a}d.prototype.toggleContentAreaFrame=function(c){b.CommonFunctions.makePostMessageCall(window.top,new b.CommonWindowMessages.GenericMessage(c?b.CommonWindowMessages.MessageNames.expandContentAreaFrame:b.CommonWindowMessages.MessageNames.collapseContentAreaFrame));IframeResizer.reportSetIframeDefaultHeight()};d.prototype.init=function(){this._settings.OpenOnClick&&this.fancyboxInit();this.imageClickInit();this.slideshowInit()};
d.prototype.fancyboxInit=function(){var c=this;$("#ad-gallery_"+c._id).on("click",".ad-image",function(){var a=$(this).find("img").attr("src"),b=null,d=null;a.split("/");if($(this).parent().find(".ad-image-description")){var b=$(this).parent().find(".ad-description-title"),f=b.text();b&&(b=b.html());""!=f&&(b="<big>"+b+"</big>");var d=$(this).parent().find(".ad-image-description span"),k=d.text();d&&(d=d.html());d&&0<=d.indexOf("IMAGE_LINK_")&&(k=d="");""!=k&&(""!=f&&(b+="<br>"),d="<i>"+d+"</i>")}$.fancybox.open({href:a,
beforeLoad:function(){c.toggleContentAreaFrame(!0);this.title=c._settings.ShowTitle?(b||"")+(d||""):""},beforeClose:function(){c.toggleContentAreaFrame(!1)},lang:{error_request_cannot_be_loaded:c._settings.Terms.FancyboxErrorRequestCannotBeLoaded,error_try_again_later:c._settings.Terms.FancyboxErrorTryAgainLater,close:c._settings.Terms.FancyboxClose,next:c._settings.Terms.FancyboxNext,previous:c._settings.Terms.FancyboxPrevious,start_slideshow:c._settings.Terms.FancyboxStartSlideshow,toggle_size:c._settings.Terms.FancyboxToggleSize,
pause_slideshow:c._settings.Terms.FancyboxPauseSlideshow}})})};d.prototype.imageClickInit=function(){$("#ad-gallery_"+this._id).on("click",".ad-image",function(){$(this).find("img").attr("src");var c=null,c=null;if($(this).find(".ad-image-description")&&((c=$(this).find(".ad-description-title"))&&c.text(),(c=$(this).find("span"))&&(c=c.text()),""!=c)){var a=window.location.href.trim();0<=c.indexOf("IMAGE_LINK_TAB:")?(c=c.substring(15).trim(),a!=c&&window.open(c,"_blank")):0<=c.indexOf("IMAGE_LINK_PAR:")&&
(c=c.substring(15).trim(),a!=c&&window.open(c,"_self"))}})};d.prototype.slideshowInit=function(){$("#ad-gallery_"+this._id).adGallery({loader_image:this._settings.LoaderImageUrl,width:this._settings.Width,height:this._settings.Hight,start_at_index:this._settings.StartAtIndex,animation_speed:this._settings.AnimationSpeed,update_window_hash:this._settings.UpdateWindowHash,hooks:{displayDescription:this._settings.ShowTitle?null:function(c){c.css("display","none")}},effect:this._settings.TransitionType,
slideshow:{enable:this._settings.Enable,autostart:this._settings.Autostart,start_label:this._settings.Terms.StartLabel,stop_label:this._settings.Terms.StopLabel,speed:this._settings.Speed}})};return d}();b.Slideshow=d})(CCL||(CCL={}));
(function(b){var d=function(d){function c(a,c){d.call(this,a);this.collapsedDataAttribute="data-collapsed";this.scrollTopAnimationTimeMilliseconds=200;this.settings=c}__extends(c,d);c.prototype.renderShowMoreTextSection=function(a,c,d,f){var k=this;0<this.settings.MaxTextHeight&&0<this.settings.CollapsedTextHeight&&setTimeout(function(){var l=k.settings.CollapsedTextHeight;if(k.hasEnoughHeightForRenderingShowMore(d)){a.addClass(k.settings.CssClasses.Container).empty();k.addLineToShowMoreTextSection(a);
var m=$('<a href="#">').click(function(f){k.expandText({clickablePlaceholder:a,link:m,collapsibleContainer:c,collapseHeight:l,collapse:!k.isCollapsed(a),contentPanel:d});b.CommonFunctions.isOnScreen(c,1,1)||(k.settings.EnableAnimation?$("html, body").animate({scrollTop:c.offset().top},k.scrollTopAnimationTimeMilliseconds):$("html, body").scrollTop(c.offset().top));f.preventDefault()}).appendTo(a);k.expandText({clickablePlaceholder:a,link:m,collapsibleContainer:c,collapseHeight:l,collapse:!f,contentPanel:d});
a.show()}else a.hide(),c.css("max-height","");d.show()})};c.prototype.hasEnoughHeightForRenderingShowMore=function(a){return a.height()>this.settings.MaxTextHeight};c.prototype.expand=function(a,c){a.css("max-height","");c.removeAttr(this.collapsedDataAttribute);c.find("a").text(this.settings.Resources.ShowLess)};c.prototype.isCollapsed=function(a){return!!a.attr(this.collapsedDataAttribute)};c.prototype.addLineToShowMoreTextSection=function(a){a.append($("<span>").addClass(this.settings.CssClasses.Line)).append($("<span>").addClass(this.settings.CssClasses.Line)).append($("<div>").addClass(this.settings.CssClasses.ClearFix))};
c.prototype.expandText=function(a){a.collapse?(a.clickablePlaceholder.attr(this.collapsedDataAttribute,1),a.link.text(this.settings.Resources.ShowMore)):(a.clickablePlaceholder.removeAttr(this.collapsedDataAttribute),a.link.text(this.settings.Resources.ShowLess));this.settings.EnableAnimation?a.collapsibleContainer.animate({"max-height":(a.collapse?a.collapseHeight:a.contentPanel.outerHeight())+"px"},{duration:this.scrollTopAnimationTimeMilliseconds,complete:a.collapse?void 0:function(){return a.collapsibleContainer.css("max-height",
"")}}):a.collapsibleContainer.css("max-height",a.collapse?a.collapseHeight+"px":"")};return c}(b.DomElementClass);b.TextExpander=d})(CCL||(CCL={}));
(function(b){var d=function(){function b(c,a){this._controls={link:$(),label:$(),hidden:$()};this._settings=c;this._controls.link=$("#"+c.LinkClientId);this._controls.label=this._controls.link.prev();this._controls.hidden=this._controls.link.next();this.changeStateFunction=a;this._isActive=c.IsInitiallyActive;var d=this;this._controls.link.click(function(a){d._controls.link.getIfHyperLinkEnabled()&&(d.changeStateFunction?(d._controls.link.toggleHyperlink(!1),d.changeStateFunction({isActive:!d._isActive,
changeSuccess:!0},function(a){a.changeSuccess&&(d._isActive=a.isActive,d.applyState(d._isActive));d._controls.link.toggleHyperlink(!0)})):(d._isActive=!d._isActive,d.applyState(d._isActive)));a.preventDefault()})}b.prototype.applyState=function(c){var a=c?this._settings.ActiveState:this._settings.InactiveState;this._controls.link.text(a.ActionText);this._controls.label.removeClass().addClass(a.CssClass).text(a.Title);this._controls.hidden.val(c?"1":"0")};return b}();b.ToggleActivation=d})(CCL||(CCL=
{}));(function(b){var d=function(){function b(){}b.GetFunctionByName=function(c,a){if(void 0!==c&&null!==c){if(void 0===a||null===a)a=window;for(var b=c.split("."),d=b.pop(),f=0;f<b.length;f++)a=a[b[f]];return a[d]}};return b}();b.Callbacks=d})(CCL||(CCL={}));(function(b){var d=function(){function d(c){this.settings=c;this.inlineTextExpander=new b.InlineTextExpander(this.settings.InlineTextExpanderSettings)}d.prototype.init=function(){};return d}();b.CommentModuleManager=d})(CCL||(CCL={}));
(function(b){var d=function(d){function c(a){d.call(this,a.DomElementClientId);this._stringToDateRegex=/-?\d+/;this._addCommentInputArea=$();this._furtherCommentsAreDisabledInfoPanel=$();this._animationSpeed=200;this._wasControlsCreated=this._wasDataSourceFetchedAtLeastOnce=!1;this._settings=a;this._userData=this._settings.UserData;this._initData=this._settings.DataSource;this._cmm=window[this._settings.CommentModuleManagerName];this._oldestCommentId=this._newestCommentId=-1;this._sending=!1;this._elem.data("CommentModule",
this)}__extends(c,d);c.prototype.initCallbacks=function(a,c,b,d,f){this._onAddCommentFunction=a;this._onEditCommentFunction=c;this._onDeleteCommentFunction=b;this._onLoadOldCommentsFunction=d;this._onDeleteConfirmationFunction=f};c.prototype.createControls=function(a){"undefined"===typeof a&&(a=!1);this._wasControlsCreated||!this._settings.IsInitiallyVisible&&!a||(this._wasControlsCreated=!0,this._elem.empty().append(this.createLoadMoreLink()).append(this.createCommentList(this._initData.Items)),
this._elem.append(this._addCommentInputArea=this.createInputArea().hide()),this._cmm.settings.Resources.FurtherCommentsAreDisabled&&(this._elem.after(this._furtherCommentsAreDisabledInfoPanel=$("<div>").addClass(this._cmm.settings.CssClasses.Inactive).text(this._cmm.settings.Resources.FurtherCommentsAreDisabled).hide()),this._furtherCommentsAreDisabledInfoPanel.addClass(this._cmm.settings.CssClasses.FurtherCommentsDisabled)),0<this._initData.Items.length&&(this._wasDataSourceFetchedAtLeastOnce=!0),
this._settings.IsInitiallyVisible&&this.updateLoadMoreLink(this,this._initData.VirtualCount-this._initData.Items.length),this.setVisibility())};c.prototype.show=function(){var a=this;this._elem.slideDown(this._animationSpeed,function(){0===a.getCommentsCount()&&a._settings.SetFocusOnShow&&a.focusInputArea()})};c.prototype.loadAndShow=function(){var a=this;this.createControls(!0);this.loadOldComments(function(){return a.show()})};c.prototype.isDataSourceFetchedAtLeastOnce=function(){return this._wasDataSourceFetchedAtLeastOnce};
c.prototype.isVisible=function(){return this._elem.is(":visible")};c.prototype.hide=function(){this._elem.slideUp(this._animationSpeed)};c.prototype.getCommentsCount=function(){return this._list.children(":data(commentId)").length};c.prototype.getCommentsCountWithoutDeleted=function(){return this._list.children(":data(commentId):visible").length};c.prototype.loadOldComments=function(a){var c=this;"undefined"===typeof a&&(a=function(){});if(this._onLoadOldCommentsFunction){var b=this._wasDataSourceFetchedAtLeastOnce?
0:this._settings.NumberOfPreviouslyReadItemsToDisplay;this._wasDataSourceFetchedAtLeastOnce=!0;this._onLoadOldCommentsFunction(this,this._userData,this._oldestCommentId,this._settings.PageSize,b,this._settings.UsePersonNameFormatLastFirst,function(b,d){c.loadOldCommentsSuccess(b,d);a()},this.loadOldCommentsFault)}};c.prototype.togglePossibilityToAddComments=function(a){this._settings.AllowAddComments=a;this.setVisibility()};c.prototype.setVisibility=function(){var a=0<this.getCommentsCount()||this._loadMoreLinkContainer.is(":visible");
this._elem.toggle(this._settings.AllowAddComments||a);this._addCommentInputArea.toggle(this._settings.AllowAddComments);this._furtherCommentsAreDisabledInfoPanel.toggle(!this._settings.AllowAddComments&&a)};c.prototype.createLoadMoreLink=function(){var a=this;this._loadMoreLinkContainer=$("<div>").addClass(this._cmm.settings.CssClasses.LoadMoreCommentsLink).hide();this._loadMoreLink=$('<a href="#">').click(function(c){a._loadMoreLink.getIfHyperLinkEnabled()&&(a._loadMoreLink.toggleHyperlink(!1),a.loadOldComments(function(){return a._loadMoreLink.toggleHyperlink(!0)}));
c.preventDefault()}).appendTo(this._loadMoreLinkContainer);this._pageInfoLabel=this._settings.ShowPageInfoLabel?$("<span>").addClass(this._cmm.settings.CssClasses.PageInfoLabel).appendTo(this._loadMoreLinkContainer).hide():$();return this._loadMoreLinkContainer};c.prototype.createCommentList=function(a){this._list=$("<ul>").addClass(this._cmm.settings.CssClasses.CommentList);this.fillCommentList(a,!0);return this._list};c.prototype.fillCommentList=function(a,c){var b=this;a&&(c||(a=a.reverse()),$.each(a,
function(a,d){b.renderComment(d,c,!1);if(-1===b._newestCommentId||d.Id>b._newestCommentId)b._newestCommentId=d.Id;if(-1===b._oldestCommentId||d.Id<b._oldestCommentId)b._oldestCommentId=d.Id}));this._list.toggle(!this._list.is(":empty"))};c.prototype.renderComment=function(a,c,d){var f=this,k=$("<li>"),l=$("<div>"),m=$("<img>"),n=$("<div>"),p=$("<div>"),s=$(a.ProfileHyperlinkControl?a.ProfileHyperlinkControl:b.CommonFunctions.formatString("<span>{0}</span>",a.UserName)),r=$("<span>"),q=$("<div>"),
w=$("<span>"),v=$("<textarea>"),u=$("<div>"),t=$("<span>"),C=a.PictureUrl&&0<a.PictureUrl.length;this._settings.HidePersonPictures||k.append(l.append(m));k.append(n,q,w).data("commentId",a.Id);this._settings.HidePersonPictures?k.addClass(this._cmm.settings.CssClasses.CommentListItemNoPersonPicture):k.addClass(this._cmm.settings.CssClasses.CommentListItem);(this._settings.AllowDeleteComments&&a.AllowDeleteComment||this._settings.AllowEditComments&&a.AllowEditComment)&&this.renderCommentMenu(a,k,v,
u,r,q);a.IsRead||k.addClass(this._cmm.settings.CssClasses.UnreadItem);n.append(p).addClass(this._cmm.settings.CssClasses.CommentContent);p.append(s,$("<span>:</span>").addClass(this._cmm.settings.CssClasses.MarginRight5).addClass(this._cmm.settings.CssClasses.ColonAfterPersonName),r);var D=this.encodeText(a.CommentText);this._settings.HidePersonPictures||(l.addClass(this._cmm.settings.CssClasses.PersonImgWrapper),m.addClass(this._cmm.settings.CssClasses.PersonImg).prop("src",C?a.PictureUrl:this._cmm.settings.DefaultPersonImageUrl).prop("alt",
"").prop("width",this._cmm.settings.ImageWidth).prop("height",this._cmm.settings.ImageHeight));s.addClass(this._cmm.settings.CssClasses.PersonName);r.addClass(this._cmm.settings.CssClasses.CommentText).data("originalText",D).html(D).linkify();q.addClass(this._cmm.settings.CssClasses.ShowMoreTextContainer);p.hide();this._cmm.inlineTextExpander.scanItemAndAppend(r);n.find("div").first().show();w.addClass(this._cmm.settings.CssClasses.CommentDate).text(a.DateTimeString);a.DateTimeTooltip&&0<a.DateTimeTooltip.length&&
w.prop("title",a.DateTimeTooltip);this._settings.AllowEditComments&&a.AllowEditComment&&(v.data("originalText",a.CommentText).attr("aria-label",this._cmm.settings.Resources.PostCommentTextAreaWatermark).val(a.CommentText).keydown(function(a){a.which===b.CommonConstants.keyCodes.escape&&(v.val(v.data("originalText")).trigger("input"),f.toggleEditing(!1,v,u,r,q));return!0}).on("input paste",function(){f.validateTextArea(v,t,k)}).hide(),this.makeTextAreaAutoResizable(v),this.updatePlaceholder(v),this.renderPostOrEditButtonPanel(u,
!1,t,function(){f.tryEditComment(a.Id,v,t,u,r,q)}).hide(),t.hide().addClass(this._cmm.settings.CssClasses.ErrorText),k.append(v,u,t));d?this.getCommentPnlById(this._list,a.Id).replaceWith(k):c?this._list.append(k):this._list.prepend(k);return k};c.prototype.tryEditComment=function(a,c,b,d,f,l){var m;!b.is(":visible")&&0<(m=c.val()).trim().length&&(m!==c.data("originalText")&&this._onEditCommentFunction?this._sending?alert(this._cmm.settings.Resources.TooManyRequestError):(this._sending=!0,this._onEditCommentFunction(this,
this._userData,a,m,this._settings.UsePersonNameFormatLastFirst,this.editCommentSuccess,this.editCommentFault)):this.toggleEditing(!1,c,d,f,l))};c.prototype.renderCommentMenu=function(a,c,b,d,f,l){var m=$('<a href="#">').addClass(this._cmm.settings.CssClasses.ShowMenuLink).attr("aria-label",this._cmm.settings.Resources.ShowMenuLinkAccessibilityText).click(function(a){a.preventDefault()}).appendTo(c);this.renderMenuItems(a,c,m,b,d,f,l)};c.prototype.renderMenuItems=function(a,c,b,d,f,l,m){var n=$("<div>").addClass(this._cmm.settings.CssClasses.Menu).hide().appendTo(c),
p=$("<ul>").appendTo(n);this._settings.AllowEditComments&&a.AllowEditComment&&this.renderCommentEditButton(d,f,l,m).appendTo(p);this._settings.AllowDeleteComments&&a.AllowDeleteComment&&this.renderCommentDeleteButton(a,c).appendTo(p);this.createDropDownMenu(a,b,n)};c.prototype.createDropDownMenu=function(a,c,b){a=new DropDownMenu("CommentMenu"+a.Id,!1);a.settings={showMenuOnHover:this._settings.ShowMenuOnHover,isIos:this._cmm.settings.IsIos,closeMenuWhenClickingOnLink:!0,closeMenuWhenClickingInside:!0,
appendToBody:!1,selectedHolderCssClass:"",useTargetPosition:!0,setMinWidthByTarget:!1,horizontalPosition:this._cmm.settings.DropDownMenuPosition,useFixedPosition:!1,zIndex:1E3,autofitHeight:!1};a.initializeControls(b,c,c)};c.prototype.renderCommentEditButton=function(a,c,d,f){var k=this,l=$("<li>");$('<a href="#">').addClass(this._cmm.settings.CssClasses.MenuItemLink).click(function(b){k.toggleEditing(!0,a,c,d,f);b.preventDefault()}).append($("<img>").prop("src",b.CommonConstants.onePixelTransparentImageSource).prop("alt",
"").addClass(this._cmm.settings.CssClasses.EditButton)).append($("<span>").text(this._cmm.settings.Resources.EditComment)).appendTo(l);return l};c.prototype.toggleEditing=function(a,c,b,d,f){c.add(b).toggle(a);d.toggle(!a);a&&c.focus().trigger("input");f.children().toggle(!a)};c.prototype.renderCommentDeleteButton=function(a,c){var d=this,f=$("<li>");$('<a href="#">').addClass(this._cmm.settings.CssClasses.MenuItemLink).click(function(b){d.deleteComment(a.Id,c);b.preventDefault()}).append($("<img>").prop("src",
b.CommonConstants.onePixelTransparentImageSource).prop("alt","").addClass(this._cmm.settings.CssClasses.DeleteButton)).append($("<span>").text(this._cmm.settings.Resources.DeleteComment)).appendTo(f);return f};c.prototype.createInputArea=function(){var a=this,c=$("<div>");this._settings.HidePersonPictures?c.addClass(this._cmm.settings.CssClasses.InputAreaNoPersonPicture):c.addClass(this._cmm.settings.CssClasses.InputArea);c.addClass(this._cmm.settings.CssClasses.InputArea);var d=this._cmm.settings.CurrentPersonImageUrl&&
0<this._cmm.settings.CurrentPersonImageUrl.length,f=null;this._settings.HidePersonPictures||(f=$("<img>").addClass(this._cmm.settings.CssClasses.PersonImg).prop("src",d?this._cmm.settings.CurrentPersonImageUrl:this._cmm.settings.DefaultPersonImageUrl).prop("alt",b.CommonFunctions.formatString(this._settings.UsePersonNameFormatLastFirst?"{1}, {0}":"{0} {1}",this._cmm.settings.CurrentPersonFirstName,this._cmm.settings.CurrentPersonLastName)).prop("width",this._cmm.settings.ImageWidth).prop("height",
this._cmm.settings.ImageHeight));var k=$("<span>").hide().addClass(this._cmm.settings.CssClasses.ErrorText);this._addCommentTextArea=$("<textarea>").prop("rows",1).attr("aria-label",this._cmm.settings.Resources.PostCommentTextAreaWatermark).on("input paste",function(){a.validateTextArea(a._addCommentTextArea,k,c)});this.makeTextAreaAutoResizable(this._addCommentTextArea);this.updatePlaceholder(this._addCommentTextArea);d=this.renderPostOrEditButtonPanel($("<div>"),!0,k,function(){a.tryAddNewComment(k)});
this._settings.HidePersonPictures||c.append(f);c.append(this._addCommentTextArea,d,k);return c};c.prototype.renderPostOrEditButtonPanel=function(a,c,b,d){return a.addClass(this._cmm.settings.CssClasses.PostButtonPanel).toggle(!this._settings.HidePostButtonWhileEmpty).append($("<input />").prop("type","submit").addClass(this._cmm.settings.CssClasses.PostButton).val(c?this._cmm.settings.Resources.PostCommentButtonText:this._cmm.settings.Resources.EditCommentButtonText).click(function(a){d();a.preventDefault()}))};
c.prototype.tryAddNewComment=function(a){a.is(":visible")||(a=this._addCommentTextArea.val(),0<a.trim().length&&(this.addNewComment(a),this._addCommentTextArea.val("").trigger("change"),this._settings.HidePostButtonWhileEmpty&&this.getPostButtonPanelForTextArea(this._addCommentTextArea).hide()))};c.prototype.validateTextArea=function(a,c,d){var f=a.val().length;f>this._cmm.settings.CommentMaxLength?(c.text(b.CommonFunctions.formatString(this._cmm.settings.Resources.TextTooLongError,this._cmm.settings.CommentMaxLength,
f)),c.show(),d.addClass(this._cmm.settings.CssClasses.ErrorArea)):(this._settings.HidePostButtonWhileEmpty&&this.getPostButtonPanelForTextArea(a).toggle(0<f),d.removeClass(this._cmm.settings.CssClasses.ErrorArea),c.hide())};c.prototype.getPostButtonPanelForTextArea=function(a){return a.next("."+this._cmm.settings.CssClasses.PostButtonPanel.replace(" ","."))};c.prototype.focusInputArea=function(){this._addCommentTextArea&&this._addCommentTextArea.focus()};c.prototype.updateLoadMoreLink=function(a,
c){if(0<c){var d,f=a._settings.ShowPageInfoLabel;!a._settings.PageSize||0>=a._settings.PageSize||(a._wasDataSourceFetchedAtLeastOnce||0===a._settings.NumberOfPreviouslyReadItemsToDisplay?a._settings.PageSize:Math.min(a._settings.NumberOfPreviouslyReadItemsToDisplay,a._settings.PageSize))>=c?(d=1===c?a._cmm.settings.Resources.ShowOneMoreComment:b.CommonFunctions.formatString(a._cmm.settings.Resources.ShowXMoreComments,c),f=!1):d=a._cmm.settings.Resources.ShowMoreComments;a._loadMoreLink.text(d);f?
(d=this.getCommentsCount(),a._pageInfoLabel.text(b.CommonFunctions.formatString(a._cmm.settings.Resources.ViewingXofYCommentsFormat,d,c+d))):a._pageInfoLabel.text("");a._pageInfoLabel.toggle(f);a._loadMoreLinkContainer.show()}};c.prototype.addNewComment=function(a){this._onAddCommentFunction&&(this._sending?alert(this._cmm.settings.Resources.TooManyRequestError):(this._sending=!0,this._onAddCommentFunction(this,this._userData,a,this._newestCommentId,this._settings.UsePersonNameFormatLastFirst,this.addNewCommentSuccess,
this.addNewCommentFault)))};c.prototype.addNewCommentSuccess=function(a,c){a._sending=!1;c&&a.fillCommentList(c.Items,!0)};c.prototype.addNewCommentFault=function(a,c){a._sending=!1;alert(a._cmm.settings.Resources.AddCommentError)};c.prototype.editCommentSuccess=function(a,c){a._sending=!1;c&&a.renderComment(c,!1,!0)};c.prototype.editCommentFault=function(a,c,b){a._sending=!1;alert(a._cmm.settings.Resources.EditCommentError);c&&(c=a.getCommentPnlById(a._list,c))&&(a=c.find("."+a._cmm.settings.CssClasses.CommentText),
a.html(a.data("originalText")),a=c.find("textarea"),a.val(a.data("originalText")))};c.prototype.deleteComment=function(a,c){var b=this,d=function(){b._onDeleteCommentFunction&&(b._sending?alert(b._cmm.settings.Resources.TooManyRequestError):(b._sending=!0,b._onDeleteCommentFunction(b,b._userData,a,b.deleteCommentSuccess,b.deleteCommentFault),c.hide()))};this._onDeleteConfirmationFunction?this._onDeleteConfirmationFunction(this,this._userData,a,this._cmm.settings.Resources.DeleteConfirmation,d):confirm(this._cmm.settings.Resources.DeleteConfirmation)&&
d()};c.prototype.deleteCommentSuccess=function(a,c,b){a._sending=!1;c&&(c=a.getCommentPnlById(a._list,c))&&(c.remove(),a._list.toggle(!a._list.is(":empty")),a.setVisibility())};c.prototype.deleteCommentFault=function(a,c,b){a._sending=!1;alert(a._cmm.settings.Resources.DeleteCommentError);c&&(a=a.getCommentPnlById(a._list,c))&&a.show()};c.prototype.loadOldCommentsSuccess=function(a,c){c&&(a.fillCommentList(c.Items,!1),a._loadMoreLinkContainer.hide(),a.updateLoadMoreLink(a,c.VirtualCount-c.Items.length))};
c.prototype.loadOldCommentsFault=function(a,c){a._sending=!1};c.prototype.makeTextAreaAutoResizable=function(a){setTimeout(function(){a.autogrow()},0)};c.prototype.updatePlaceholder=function(a){var c=this;setTimeout(function(){a.prop("placeholder",c._cmm.settings.Resources.PostCommentTextAreaWatermark)},0)};c.prototype.stringToDate=function(a){return new Date(parseInt(this._stringToDateRegex.exec(a)[0]))};c.prototype.encodeText=function(a){return b.CommonFunctions.replaceLineBreaksWithBrTags(b.CommonFunctions.htmlEncode(a))};
c.prototype.getCommentPnlById=function(a,c){var b=null;a.children(":data(commentId)").each(function(a,d){var f=$(d);if(f.data("commentId")==c)return b=f,!1});return b};return c}(b.DomElementClass);b.CommentModule=d})(CCL||(CCL={}));jQuery.fn.extend({getCommentModuleObject:function(){return this.data("CommentModule")}});
(function(b){var d=function(){function d(){this.managedContainers=new b.MapHelper;this.temporaryUnmanagedMenus=new b.MapHelper}d.getInstance=function(){void 0===d.instance&&(d.instance=new d);return d.instance};d.prototype.registerContainer=function(c,a){if(!this.managedContainers.has(c)){var d=new b.DropDownMenuManagedContainer(a);this.managedContainers.set(c,d);this.putUnmanagedMenusToContainer(c,d)}};d.prototype.containerAddOrReplaceInstance=function(c,a){this.managedContainers.has(c)?this.managedContainers.get(c).addOrReplaceInstance(a):
this.addInstanceToTemporaryUnmanagedMenus(c,a)};d.prototype.addInstanceToTemporaryUnmanagedMenus=function(c,a){this.temporaryUnmanagedMenus.has(c)||this.temporaryUnmanagedMenus.set(c,[]);this.temporaryUnmanagedMenus.get(c).push(a)};d.prototype.putUnmanagedMenusToContainer=function(c,a){this.temporaryUnmanagedMenus.has(c)&&(this.temporaryUnmanagedMenus.get(c).forEach(function(c){return a.addOrReplaceInstance(c)}),this.temporaryUnmanagedMenus["delete"](c))};return d}();b.DropDownMenuManager=d})(CCL||
(CCL={}));
(function(b){var d=function(){function d(c){var a=this;this.dropDownMenuList=[];this.settings=c;this.$window=$(window);$(document).on((this.settings.IsIos?"touchend":"click")+" "+b.CommonTriggers.clickInInnerFrame,function(c){c=$(c.target).closest("["+a.settings.TargetLinkDataAttributeName+"]");if(0<c.length){var b=window[c.attr(a.settings.TargetLinkDataAttributeName)];b.toggleManagedMenu();a.startTrackingResize(b);a.dropDownMenuList.forEach(function(c){c!==b&&(c.hideMenu(),a.stopTrackingResize(c))})}else a.dropDownMenuList.forEach(function(a){return a.hideMenu()})})}d.prototype.addOrReplaceInstance=
function(c){var a=this.dropDownMenuList.filter(function(a){return a.name!==c.name});a.push(c);this.dropDownMenuList=a};d.prototype.startTrackingResize=function(c){var a=this;if(void 0===c.onResizeHandler){var b=function(){a.stopTrackingResize(c);c.hideMenu()};this.$window.resize(b);c.onResizeHandler=b}};d.prototype.stopTrackingResize=function(c){void 0!==c.onResizeHandler&&(this.$window.off("resize",c.onResizeHandler),c.onResizeHandler=void 0)};return d}();b.DropDownMenuManagedContainer=d})(CCL||
(CCL={}));
(function(b){var d=function(d){function c(a,c){this._scope=c.Scope;this._clientId=c.ClientId;this._applicationKey=c.ApplicationKey;this._multiselectAllowed=c.MultiselectAllowed;this._allowedFileTypeExtensions=c.AllowedFileTypeExtensions;this._interFrameMessageName=c.InterFrameMessageName;this._downloadUrlTemplate="https://www.googleapis.com/drive/v2/files/{fileid}?key={appkey}";this.googleSheetMimeType="application/vnd.google-apps.spreadsheet";this._language=c.Language;d.call(this,a,c)}__extends(c,
d);c.prototype.Init=function(){var a=this;this._settings.ReadOnly||(this._chooseButton=this._loader=this._elem.children("."+this._settings.LoaderCssClass),$(window).load(function(){return a.initializeDependencies()}));this.UpdateFileList(this.GetFiles())};c.prototype.initializeDependencies=function(){var a=this;this._settings.UseProxyIframe&&$("."+this._settings.PickerControlCssClass).attr("src",this._settings.ProxyIframeSrc);asyncDependenciesResolver.loadScriptAsync({url:a._settings.ApiScriptUrl,
timeoutInMilliseconds:b.PickerDependencyLoadTimeoutInMs}).pipe(function(){return asyncDependenciesResolver.loadScriptAsync({url:a._settings.ClientScriptUrl,timeoutInMilliseconds:b.PickerDependencyLoadTimeoutInMs})}).always(function(){a._loader.remove()}).done(function(){a._chooseButton=$("."+a._settings.PickerControlCssClass);"none"!==a._loader.css("display")&&a._chooseButton.show();a._settings.UseProxyIframe?a.listenToProxyPickerFileSelected():a.displayRegularPickerOnButtonClick()}).fail(function(){a._settings.ReadOnly=
!0;a._chooseButton=$();a.Trigger(b.PickerEvent.LoadingDependencyFailed)})};c.prototype.listenToProxyPickerFileSelected=function(){var a=this;$(document).on(this._settings.ProxyUploadFilesSelectedEventName,function(c,b){var d=b.files;d.forEach(function(a){a.fileUrl=a.url;a.isNew=!0});a._selectedFiles=d;a.UpdateFileList(a._selectedFiles);a.ValidateSelectedFiles(a._selectedFiles,a._allowedFileTypeExtensions);a.StartUploadFiles(a._selectedFiles)})};c.prototype.displayRegularPickerOnButtonClick=function(){var a=
this;this._chooseButton.on("click",function(c){gapi.auth.getToken()?a.showPicker():a.doAuth(!1,function(c){a.showPicker()}.bind(a))});this._chooseButton.on("keydown",function(c){if(13===c.which||32===c.which)c.preventDefault(),a._chooseButton.click()});b.CommonFunctions.attachPostMessageEventListener($(window),this._interFrameMessageName,function(c,b){window!=b||c.origin?(a._origin=c.origin,a._chooseButton.prop("disabled",!1)):a._origin=window.location.protocol+"//"+window.location.host}.bind(this));
gapi.load("picker",{callback:function(){c.prototype.pickerApiLoad.call(this)}.bind(this)})};c.prototype.pickerApiLoad=function(){this.doAuth(!0,function(){b.CommonFunctions.makePostMessageCall(window.top,{messageName:this._interFrameMessageName.toString()})}.bind(this))};c.prototype.doAuth=function(a,c){gapi.auth.authorize({client_id:this._clientId,scope:this._scope,immediate:a},c)};c.prototype.showPicker=function(){var a=gapi.auth.getToken().access_token,a=(new google.picker.PickerBuilder).addViewGroup((new google.picker.ViewGroup(this.preparePickerView(google.picker.ViewId.DOCS))).addView(this.preparePickerView(google.picker.ViewId.DOCS_IMAGES)).addView(this.preparePickerView(google.picker.ViewId.DOCS_VIDEOS)).addView(this.preparePickerView(google.picker.ViewId.DOCUMENTS)).addView(this.preparePickerView(google.picker.ViewId.DRAWINGS)).addView(this.preparePickerView(google.picker.ViewId.FOLDERS)).addView(this.preparePickerView(google.picker.ViewId.PDFS)).addView(this.preparePickerView(google.picker.ViewId.PHOTOS)).addView(this.preparePickerView(google.picker.ViewId.PRESENTATIONS)).addView(this.preparePickerView(google.picker.ViewId.SPREADSHEETS))).setOAuthToken(a).setDeveloperKey(this._applicationKey).setOrigin(this._origin).setCallback(function(a){this.pickerCallback(a)}.bind(this)).setLocale(this._language);
this._multiselectAllowed&&a.enableFeature(google.picker.Feature.MULTISELECT_ENABLED);a.build().setVisible(!0)};c.prototype.preparePickerView=function(a){a=new google.picker.DocsView(a);a.setIncludeFolders(!0);a.setParent("root");return a};c.prototype.pickerCallback=function(a){var c=this;if(a[google.picker.Response.ACTION]==google.picker.Action.PICKED){this._selectedFiles=this.ConvertSelectedFiles(a[google.picker.Response.DOCUMENTS]);for(a=this._selectedFiles.length-1;0<=a;a--)this._selectedFiles[a].name=
this.ProcessFileName(this._selectedFiles[a].name);this.UpdateFileList(this._selectedFiles);var b=[];if(0<this._selectedFiles.length){var d={};d.Authorization="Bearer "+gapi.auth.getToken().access_token;this._selectedFiles.forEach(function(a){var f=c.ComposeDownloadUrl(a.fileId);$.support.cors||(f=c._settings.GoogleDriveProxy+encodeURIComponent(f));b.push($.ajax({url:f,type:"GET",data:"",headers:d,success:function(b){var d=!1;if(b.downloadUrl)a.fileUrl=b.downloadUrl+"&"+c._settings.TokenPlaceholderInQuerystring+
"="+gapi.auth.getToken().access_token;else if(b.exportLinks&&b.exportLinks[Object.keys(b.exportLinks)[0]]){d=a.type===c.googleSheetMimeType;a.type=b.exportLinks["application/vnd.openxmlformats-officedocument.wordprocessingml.document"]?"application/vnd.openxmlformats-officedocument.wordprocessingml.document":b.exportLinks["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":b.exportLinks["image/png"]?"image/png":b.exportLinks["application/vnd.openxmlformats-officedocument.presentationml.presentation"]?
"application/vnd.openxmlformats-officedocument.presentationml.presentation":b.exportLinks["application/pdf"]?"application/pdf":Object.keys(b.exportLinks)[0];a.fileUrl=b.exportLinks[a.type]+"&"+c._settings.TokenPlaceholderInQuerystring+"="+gapi.auth.getToken().access_token;var f=c.getParameterValue(a.fileUrl,"exportFormat");if(f){var g=a.name,f="."+f;a.name.substr(-f.length)!==f&&(a.name+=f);c.UpdateFileName(a,g)}}else a.error=c._settings.UnsupportedDownloadTypeErrorText;a.thumbnailUrl=b.thumbnailLink;
c.checkFileSize(a,d)},error:function(){a.error=c._settings.UploadErrorText}}))});$.when.apply($,b).done(function(){c.ValidateSelectedFiles(c._selectedFiles,c._allowedFileTypeExtensions);c.StartUploadFiles(c._selectedFiles)})}}};c.prototype.checkFileSize=function(a,c){0==a.size&&(a.size=this.getFileSize(a,c),this.UpdateFileSize(a))};c.prototype.getFileSize=function(a,c){var b=0,d=this.getFileUrl(a.fileUrl,c);try{b=this.getContentLength(d)}catch(f){a.error=this._settings.UploadErrorText}return b};c.prototype.getFileUrl=
function(a,c){return c?this._settings.GoogleDriveProxy+encodeURIComponent(a):a};c.prototype.getContentLength=function(a){var c=0,d=new XMLHttpRequest;d.open("HEAD",a,!1);d.send();d.status==b.CommonConstants.httpStatusCodes.ok&&(c=parseInt(d.getResponseHeader("Content-Length")));return c};c.prototype.buildDownloadRequestData=function(a){return this._settings.FileRepoHeaderDownloadFrom+"="+a.fileUrl+"&"+this._settings.FileRepoFileSizeParam+"="+a.size};c.prototype.AddAdditionalHeadersToDownloadFile=
function(a,c){a[this._settings.FileRepoHeaderGoogleDriveFileSize]=c.size};c.prototype.ConvertSelectedFiles=function(a){return a?$.map(a,function(a,c){return{fileId:a[google.picker.Document.ID],name:a[google.picker.Document.NAME],type:a[google.picker.Document.MIME_TYPE],icon:a[google.picker.Document.ICON_URL],size:a.sizeBytes}}):[]};c.prototype.ComposeDownloadUrl=function(a){return this._downloadUrlTemplate.replace("{fileid}",a).replace("{appkey}",this._applicationKey)};c.prototype.ClearResults=function(a){var c=
!0;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);a.hasClass("clearme")||0===a.find(".error").length?a.remove():(c=!1,a.addClass("clearme"))});c&&this._chooseButton.show();d.prototype.ClearResults.call(this,a);this.Trigger(b.PickerEvent.ResultsChanged,{results:[]})};c.prototype.AllowHide=function(){return 0===this._resultsTable.find("tbody").find("tr .error").length};c.prototype.HandleStopped=function(a){d.prototype.HandleStopped.call(this,a);this._settings.UseProxyIframe&&
$(document).trigger(this._settings.ProxyUploadFinishedEventName)};return c}(b.FilePickerBase);b.GoogleDrivePicker=d})(CCL||(CCL={}));
(function(b){b.ControlTabsEvent={Initialized:"ControlTabsInitialized",TabIndexChanged:"ControlTabsSelectedIndexChanged"};var d=function(d){function c(a,c){d.call(this,a);this._settings=c;this.InitControls();this.RunControlInitializationCallback()}__extends(c,d);c.prototype.SetCurrentTab=function(a){this.GetCurrentTab()!==a&&$(this._tabItemLinks[a]).click()};c.prototype.GetCurrentTab=function(){return parseInt(this._selectedTabIndexHolder.val())};c.prototype.GetTabsCount=function(){return this._tabItemLinks.length};
c.prototype.SetTabEnabled=function(a,c){(a=a&&this.IsTabAvailable(c))?($(this._tabItemLinks[c]).removeClass("disabled"),$(this._mobileSelect.find("> option")[c]).prop("disabled",!1)):($(this._tabItemLinks[c]).addClass("disabled"),$(this._mobileSelect.find("> option")[c]).prop("disabled",!0))};c.prototype.SetTabNotAvailable=function(a){$(this._tabItemLinks[a]).addClass("tabIsNotAvailable");this.SetTabEnabled(!1,a)};c.prototype.UpdateTabImageUrl=function(a,c){$(this._tabItemLinks[a]).find("img").attr("src",
c)};c.prototype.IsTabAvailable=function(a){return!$(this._tabItemLinks[a]).hasClass("tabIsNotAvailable")};c.prototype.SetTabToolTip=function(a,c){$(this._tabs[a]).attr("title",c)};c.prototype.InitControls=function(){var a=this;this._tabsList=this._elem.find("ul."+this._settings.TabsCssClass);this._mobileSelect=this._elem.find("select."+this._settings.TabsCssClass);this._selectedTabIndexHolder=this._elem.find("#"+this._settings.TabIndexHolderClientId);this._tabs=this._elem.find("ul > li > h2");this._tabItemLinks=
this._elem.find("ul > li > h2 > a");this._tabItemLinks.each(function(c,b){a.InitTabItem(c,b)});$(this._tabItemLinks[this._settings.CurrentlySelectedTabIndex]).click();this.Trigger(b.ControlTabsEvent.Initialized)};c.prototype.RunControlInitializationCallback=function(){var a=b.Callbacks.GetFunctionByName(this._settings.OnControlInitialization,null);void 0!==a&&null!==a&&a(this)};c.prototype.InitTabItem=function(a,c){var b=this,d=$(c);$(d.data("contentid")).addClass(this._settings.TabContentCssClass).addClass(this._settings.ClearLeftCssClass).hide();
d.on("click",function(a){b.OnTabChanged(a)})};c.prototype.OnTabChanged=function(a){a=$(a.currentTarget);if(a.hasClass("disabled"))return!1;var c=a.closest("li"),d=$(a.data("contentid"));a=c.data("tabitemindex");this._tabsList.find("> li").removeClass(this._settings.ActiveTabCssClass);c.addClass(this._settings.ActiveTabCssClass);this._scrollPosition=$(window).scrollTop();this._tabItemLinks.each(function(a,c){$($(c).data("contentid")).hide()});d.show();$(window).scrollTop(this._scrollPosition);this._mobileSelect.prop("selectedIndex",
a);c=this._selectedTabIndexHolder.val();this._selectedTabIndexHolder.val(a);d=this._selectedTabIndexHolder.val();this.Trigger(b.ControlTabsEvent.TabIndexChanged,{selectedTab:a,previousTabString:c,currentTabString:d});return!1};return c}(b.DomElementClass);b.ControlTabs=d})(CCL||(CCL={}));
(function(b){var d=function(d){function c(a,c){d.call(this,a,c)}__extends(c,d);c.prototype.Init=function(){var a=this;this._settings.ReadOnly||(this._chooseButton=this._loader=this._elem.children("."+this._settings.LoaderCssClass),$(window).load(function(){return a.initializeWithScripts()}));this.UpdateFileList(this.GetFiles())};c.prototype.initializeWithScripts=function(){var a=this;asyncDependenciesResolver.loadScriptAsync({url:a._settings.ScriptUrl,attributes:{"data-app-key":a._settings.ApplicationKey,
id:"dropboxjs"},timeoutInMilliseconds:b.PickerDependencyLoadTimeoutInMs}).always(function(){a._loader.remove()}).done(function(){a._chooseButton=$(Dropbox.createChooseButton({success:function(c){if(!(a._elem.hasClass("disabled")||0<a._resultsTable.find("tr").length)){c=a.ConvertSelectedFiles(c);for(var b=c.length-1;0<=b;b--)c[b].name=a.ProcessFileName(c[b].name);a.ValidateSelectedFiles(c,null);a.UpdateFileList(c);0<c.length&&a.StartUploadFiles(c)}},linkType:"direct",multiselect:a._settings.MultiselectAllowed,
extensions:a._settings.AllowedFileTypeExtensions}));a._chooseButton.attr("tabindex","0");"none"===a._loader.css("display")&&a._chooseButton.hide();a._elem.append(a._chooseButton)}).fail(function(){a._settings.ReadOnly=!0;a._chooseButton=$();a.Trigger(b.PickerEvent.LoadingDependencyFailed)})};c.prototype.ConvertSelectedFiles=function(a){return a?$.map(a,function(a,c){return{name:a.name,size:a.bytes,thumbnailUrl:a.thumbnailLink,fileUrl:a.link,icon:a.icon}}):[]};c.prototype.ClearResults=function(a){var c=
!0;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);a.hasClass("clearme")||0===a.find(".error").length?a.remove():(c=!1,a.addClass("clearme"))});c&&this._chooseButton.show();d.prototype.ClearResults.call(this,a);this.Trigger(b.PickerEvent.ResultsChanged,{results:[]})};c.prototype.AllowHide=function(){return 0===this._resultsTable.find("tbody").find("tr .error").length};c.prototype.buildDownloadRequestData=function(a){return this._settings.FileRepoHeaderDownloadFrom+"="+a.fileUrl};
return c}(b.FilePickerBase);b.DropboxPicker=d})(CCL||(CCL={}));
(function(b){var d=function(d){function c(a,b){this._chooseButton=$(".ccl-fileuploader-button").children("input");this.fileUploaderContainer=$(".ccl-fileuploader-container");c.confirmReplaceMessage=b.ConfirmReplaceMessageText;d.call(this,a,b)}__extends(c,d);c.ConfirmReplaceFile=function(){return confirm(c.confirmReplaceMessage)};c.prototype.Init=function(){var a=this;this._chooseButton.focusin(function(c){a._chooseButton.parent().toggleClass("ccl-button-color-green-highlight")}).focusout(function(c){a._chooseButton.parent().toggleClass("ccl-button-color-green-highlight")});this._elem.on("fileuploadstarted",
function(){a.ToggleOkButton(!0);a.Trigger(b.PickerEvent.Started)}).on("fileuploadadd",function(c){for(var d=[],f=0;f<arguments.length-1;f++)d[f]=arguments[f+1];a.Trigger(b.PickerEvent.Added,d[0])}).on("fileuploadstopped",function(c){for(var d=[],f=0;f<arguments.length-1;f++)d[f]=arguments[f+1];d[0].results=a.fileUploaderContainer.fileupload("getUploadedFiles");a.Trigger(b.PickerEvent.Stopped,d[0]);a.ToggleOkButton(!1)}).on("fileuploadresultschanged",function(c){for(var d=[],f=0;f<arguments.length-
1;f++)d[f]=arguments[f+1];a.Trigger(b.PickerEvent.ResultsChanged,d[0])}).on("fileuploadsubmit",function(c){for(var b=[],d=0;d<arguments.length-1;d++)b[d]=arguments[d+1];b=b[0];b.url=a.GetFileRepoUrlForFileName(a.ProcessFileName(b.files[0].name));b.xhrFields={withCredentials:!0}}).on("fileuploaddestroy",function(c){for(var b=[],d=0;d<arguments.length-1;d++)b[d]=arguments[d+1];b=b[0];b.url&&(b.url+="&"+a._settings.MethodOverrideQueryStringParam+"=delete");b.type="GET";b.xhrFields={withCredentials:!0}}).on("fileuploaddone",
function(c){for(var b=[],d=0;d<arguments.length-1;d++)b[d]=arguments[d+1];(b=b[0])&&b.result&&b.result.fileId&&b.result.signature&&(d={deleteUrl:a.GetFileRepoUrl(b.result.signature),fileUrl:a.GetFileRepoUrl(b.result.signature),id:b.result.fileId,signedId:b.result.signature,name:b.result.fileName,size:b.result.fileSize,type:b.result.mimeType,thumbnailUrl:a._settings.DefaultThumbnailUrl,isNew:!0},b.result.files=[d])})};c.prototype.ClearResults=function(){this.fileUploaderContainer.fileupload("clearResults")};
c.prototype.AllowHide=function(){return this.fileUploaderContainer.fileupload("allowHide")};return c}(b.FilePickerBase);b.FilePicker=d})(CCL||(CCL={}));var tmpl,FileRepoUploaderInstance;
(function(b){b.FileRepoUploaderEvent={PickerChanged:"FileRepoUploaderPickerChanged",ResultsChanged:"FileRepoUploaderResultsChanged"};var d=function(d){function c(a,c){var g=this;d.call(this,a);this._pickers=[];this._inlineModeFileList=[];this._inlineModeFileKeys={};this._removedFiles=[];this._changedFiles={};this._settings=c;this._currentTabIndex=-1;FileRepoUploaderInstance=this;$("#"+this._settings.ControlTabsClientId).on(b.ControlTabsEvent.TabIndexChanged,function(a){for(var c=[],d=0;d<arguments.length-
1;d++)c[d]=arguments[d+1];g._currentTabIndex!==c[0].selectedTab&&(g._currentTabIndex=c[0].selectedTab,(c=g._pickers[g._currentTabIndex])&&g.Trigger(b.FileRepoUploaderEvent.PickerChanged,{selectedPicker:c}))});this._elem.on(b.PickerEvent.Initialized,function(a){a=b.DomElementClass.GetInstanceForElement(a.target.id);g._pickers.push(a);1==g._pickers.length&&g._settings.IsEmpty&&g.Trigger(b.FileRepoUploaderEvent.PickerChanged,{selectedPicker:g._pickers[0]})});this._elem.on(b.PickerEvent.ResultsChanged,
function(a){for(var c=[],d=0;d<arguments.length-1;d++)c[d]=arguments[d+1];var d=b.DomElementClass.GetInstanceForElement(a.target.id),c=c[0].results,e=g._settings.ReadOnly?g.GetControlTabs().GetCurrentTab():g._pickers.indexOf(d);g.GetControlTabs().SetCurrentTab(e);g.HandleResultsChanges(c,e);g.Trigger(b.FileRepoUploaderEvent.ResultsChanged,{results:c,picker:d})});this._elem.on(b.PickerEvent.Started,function(a){for(var c=0;c<arguments.length-1;c++);c=b.DomElementClass.GetInstanceForElement(a.target.id);
c=g._settings.ReadOnly?g.GetControlTabs().GetCurrentTab():g._pickers.indexOf(c);g.HandleResultsChanges([{}],c)});if(c.InlineMode){this._elem.on(b.PickerEvent.Added,function(a){for(var b=[],d=0;d<arguments.length-1;d++)b[d]=arguments[d+1];(c.UniqueFileNamesOnly||g.CanCheckFileNames())&&b[0].files.forEach(function(a){c.UniqueFileNamesOnly&&g._filesContainer.find("td.name").toArray().forEach(function(b){if(b.innerText===a.name)if(confirm(c.FileAlreadyExistsDialogText.replace("{0}",a.name))){b=$(b).closest("."+
c.FileListRowCssClass);var d=b.find("a."+c.RemoveActionCssClass),d=$(d).data("filekey"),d=g.GetFileByKey(d);g.RemoveFile(d,b)}else a.error=c.FileAlreadyExistsErrorMessage});!a.error&&g.CanCheckFileNames()&&(a.error=g.GetFileNameValidation(a.name))})});this._elem.on(b.PickerEvent.Stopped,function(a){for(var c=[],d=0;d<arguments.length-1;d++)c[d]=arguments[d+1];g.UpdateFileList(c[0].results,!0,null);g.UpdateFileListState(g._inlineModeFileList);var d=c[0].results&&0<c[0].results.length&&g._expandableContainer.getIsExpandedState(),
e=b.DomElementClass.GetInstanceForElement(a.target.id);e.ClearResults(c[0].results);d&&e.AllowHide()&&g._expandableContainer.toggle()});this._elem.on("hybrideditoritemtextupdated",function(a){for(var d=[],f=0;f<arguments.length-1;f++)d[f]=arguments[f+1];var f=$(a.target).closest("."+c.FileListRowCssClass),h=f.find("a."+c.RemoveActionCssClass),h=$(h).data("filekey"),h=g.GetFileByKey(h),d=d[0].value;d||(d="(empty)",f.find("."+c.FileNameContainerCssClass).text(d));h.rawFilename=d;h.name=h.rawFilename;
h.extension&&(h.name+=h.extension);g._changedFiles[h.id]=h;g._changedFilesStateHidden.val(JSON.stringify(g._changedFiles));g.UpdateFileListState(g._inlineModeFileList);d=g._pickers[g.GetControlTabs().GetCurrentTab()];g.Trigger(b.FileRepoUploaderEvent.ResultsChanged,{results:g._inlineModeFileList,picker:d})});this._expandableContainer=new ExpandableContainer(this._elem,{expander:$("#"+this._settings.ExpandableHeaderClientId),target:$("#"+this._settings.ExpandableContentClientId)});this._filesContainer=
$("#"+c.FileListContainerId);this._filesContainer.on("click","."+this._settings.RemoveActionCssClass,function(a){var c=$(a.target).data("filekey"),c=g.GetFileByKey(c);a=$(a.target).closest("."+g._settings.FileListRowCssClass);g.RemoveFile(c,a)});this._filesContainer.on("click","."+this._settings.ViewActionCssClass,function(a){a=$(a.target).data("filekey");a=g.GetFileByKey(a);g.OpenFile(a,!0)});this._filesContainer.on("click","."+this._settings.EditActionCssClass,function(a){a=$(a.target).data("filekey");
a=g.GetFileByKey(a);g.OpenFile(a,!1)});this._filesContainer.on("click","."+this._settings.DownloadActionCssClass,function(a){a=$(a.target).data("filekey");a=g.GetFileByKey(a);g.DownloadFile(a)});$("#"+this._settings.ViewDialogId).on("click",".ccl-button-ok",function(a){g._openedForEditing&&(a=$(".ccl-cssmodal-modal-iframe").attr("src"),$(".ccl-cssmodal-modal-iframe").attr("src",a))});this._templatesContainer=document.createElement(this._filesContainer.prop("nodeName"));tmpl&&(this._fileListItemTemplate=
tmpl(c.FileListItemTemplateId));this._fileListStateHidden=$("#"+this._settings.FileListHiddenStateClientId);var h=this.ReadFileList();0<h.length&&this.UpdateFileList(h,!1,null);this._changedFilesStateHidden=$("#"+this._settings.ChangedFilesHiddenStateClientId);this._removedFilesStateHidden=$("#"+this._settings.RemovedFilesHiddenStateClientId)}else this._elem.on(b.PickerEvent.Added,function(a){for(var c=[],b=0;b<arguments.length-1;b++)c[b]=arguments[b+1];c=c[0];g.CanCheckFileNames()&&c.files.forEach(function(a){a.error||
(a.error=g.GetFileNameValidation(a.name))})})}__extends(c,d);c.prototype.CanCheckIllegalCharacters=function(){return this._settings.IllegalCharacters&&0<this._settings.IllegalCharacters.length?!0:!1};c.prototype.CanCheckIllegalFileNames=function(){return this._settings.IllegalFileNames&&0<this._settings.IllegalFileNames.length?!0:!1};c.prototype.CanCheckFileNames=function(){return this.CanCheckIllegalCharacters||this.CanCheckIllegalFileNames};c.prototype.GetFileNameValidation=function(a){var c=[];
if(this.CanCheckIllegalCharacters())for(var b=this._settings.IllegalCharacters.length,d=0;d<b;d++)this._settings.IllegalCharacters[d]&&-1<a.indexOf(this._settings.IllegalCharacters[d])&&c.push(this._settings.IllegalCharacters[d]);if(this.CanCheckIllegalFileNames())for(a=a.split(".")[0],b=this._settings.IllegalFileNames.length,d=0;d<b;d++)this._settings.IllegalFileNames[d]&&a.toUpperCase()===this._settings.IllegalFileNames[d].toUpperCase()&&c.push(this._settings.IllegalFileNames[d]);return 0<c.length?
(b=c.filter(function(a,b){return c.indexOf(a)==b}),this._settings.FileNameInvalidErrorMessage.replace("{0}",b.join(" "))):null};c.prototype.AddExternalFile=function(a){var c=[];c.push(JSON.parse(JSON.stringify(a)));this.UpdateFileList(c,!0,null);this.UpdateFileListState(this._inlineModeFileList)};c.prototype.ReplaceExternalFile=function(a,c){var b=[],d=JSON.parse(JSON.stringify(c));b.push(d);d=this._filesContainer.find("[id$="+a+"]").closest("."+this._settings.FileListRowCssClass);this.UpdateFileList(b,
!0,d);this.UpdateFileListState(this._inlineModeFileList);b=this.GetFileByKey(a);this.RemoveFile(b,d)};c.prototype.GetUploadResults=function(){return this._fileListStateHidden&&this._fileListStateHidden.val()?this._fileListStateHidden.val():""};c.prototype.RemoveFile=function(a,c){a.deleteUrl?$.ajax({url:a.deleteUrl+"&"+this._settings.MethodOverrideQueryStringParam+"=delete",type:"GET",xhrFields:{withCredentials:!0}}):(this._removedFiles.push(a.id),this._removedFilesStateHidden.val(JSON.stringify(this._removedFiles)));
this.RemoveFileFromList(a,c)};c.prototype.RemoveFileFromList=function(a,c){c.remove();this._changedFiles[a.id]&&(delete this._changedFiles[a.id],this._changedFilesStateHidden.val(JSON.stringify(this._changedFiles)));this._inlineModeFileList.splice(this._inlineModeFileList.indexOf(a),1);this.UpdateFileListState(this._inlineModeFileList);var d=this._pickers[this.GetControlTabs().GetCurrentTab()];this.Trigger(b.FileRepoUploaderEvent.ResultsChanged,{results:this._inlineModeFileList,picker:d})};c.prototype.OpenFile=
function(a,c){if(!c&&this.ShouldBeEditedUsingDirectEdit(a)){var b=this._settings.DirectEditUrl,b=b.replace("{fileName}",encodeURIComponent(a.name)),b=b.replace("{fileId}",encodeURIComponent(a.id));window.open(b,"","height = 300, width = 500, toolbar = no, scrollbars = no, status = no, menubars = no, resizable = yes")}else{var b=this._settings.ViewEditUrl,b=b.replace("{fileName}",encodeURIComponent(a.name)),b=b.replace("{viewOnly}",c.toString()),b=b.replace("{fileRepoId}",encodeURIComponent(a.signedId)),
d;d=a.modified?new Date(a.modified):new Date;this._openedForEditing=!c;b=b.replace("{uniqueId}",this.convertToTicks(d).toString());d=this.IsOwasFileType(a.type);var f=0,l=0;if(d){if(this._settings.UseModalForOWASFiles){this.OpenInModalDialog(f,l,a.name,b,d);return}}else if(this._settings.UseModalForFilesDifferentThanOWAS){this.isEmbeddedVideo(a.type)&&(f=400,l=300);this.OpenInModalDialog(f,l,a.name,b,!1);return}this.OpenInWindow(b)}};c.prototype.OpenInWindow=function(a){var c=window.open(a,"","width="+
.8*screen.width+", height="+.8*screen.height+",location = 0, directories = 0, toolbar = 0, scrollbars = 0, status = 0, menubars = 0, resizable = 1");this.CheckIfBrowserIsOldIE()&&this.AttachEventForOldIE(c,"onload",function(){$("head",c.document).append('<style type="text/css">html,body{height:100%}html{width:auto;margin-top:-8px;}</style>')})};c.prototype.CheckIfBrowserIsOldIE=function(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")?10>=parseInt(a.split("msie")[1])?!0:!1:!1};
c.prototype.AttachEventForOldIE=function(a,c,b){a.addEventListener?a.addEventListener(c,b,!1):a.attachEvent?a.attachEvent(c,b):a[c]=b};c.prototype.OpenInModalDialog=function(a,c,b,d,f){var l=this.GetDialog();l.setContentMinSize(a,c);l.setTitle(b);l.setAjaxUrl(d);l.openDialog(f)};c.prototype.IsOwasFileType=function(a){return 0<=this._settings.OWASMimeTypes.indexOf(a)};c.prototype.ShouldBeEditedUsingDirectEdit=function(a){return this._settings.UseDirectEdit&&!this.IsEditableOwasFile(a)};c.prototype.IsEditableOwasFile=
function(a){return 0<=this._settings.OWASMimeTypes.indexOf(a.type)&&0<=this._settings.EditableMimeTypes.indexOf(a.type)};c.prototype.convertToTicks=function(a){return 621355968E9+1E4*a.getTime()};c.prototype.DownloadFile=function(a){a=this._settings.DownloadRedirectUrl.replace(this._settings.FileRepoFileIdToken,encodeURIComponent(a.signedId));window.open(a)};c.prototype.IsViewSupported=function(a){return a?0<=this._settings.ViewMimeTypes.indexOf(a):!1};c.prototype.IsEditingAllowed=function(a){return a?
0<=this._settings.EditableMimeTypes.indexOf(a)&&this._settings.IsFileEditingAllowed:!1};c.prototype.isEmbeddedVideo=function(a){return a?0<=this._settings.EmbedVideoMimeTypes.indexOf(a):!1};c.prototype.GetDialog=function(){return window[this._settings.ViewDialogId]};c.prototype.HandleResultsChanges=function(a,c){for(var b=this.GetControlTabs(),d=b.GetTabsCount(),f=a&&0<a.length,l=0;l<d;l++){var m=b.IsTabAvailable(l);b.SetTabEnabled(f?l==c:m,l);b.SetTabToolTip(l,this.GetTooltipForTab(f?c:l,l))}};c.prototype.GetTooltipForTab=
function(a,c){return this._settings.DisabledTabTextForPickers.filter(function(c){return c.PickerIndex===a})[0].Tooltips.filter(function(a){return a.PickerIndex===c})[0].Tooltip};c.prototype.GetControlTabs=function(){this._controlTabsControl||(this._controlTabsControl=b.DomElementClass.GetInstanceForElement(this._settings.ControlTabsClientId));return this._controlTabsControl};c.prototype.ReadFileList=function(){return this._fileListStateHidden&&this._fileListStateHidden.val()?JSON.parse(this._fileListStateHidden.val()):
JSON.parse("[]")};c.prototype.GetRemovedFileIds=function(){return this._removedFilesStateHidden&&this._removedFilesStateHidden.val()?JSON.parse(this._removedFilesStateHidden.val()):JSON.parse("[]")};c.prototype.GetChangedFilesDictionary=function(){return this._changedFilesStateHidden&&this._changedFilesStateHidden.val()?JSON.parse(this._changedFilesStateHidden.val()):JSON.parse("{}")};c.prototype.UpdateFileListState=function(a){this._fileListStateHidden.val(JSON.stringify(a));this._fileListStateHidden.trigger("change")};
c.prototype.UpdateFileList=function(a,c,b){var d=this,f=this;a.forEach(function(a){a.thumbnailUrl=f.GetFileIcon(a.name);d._inlineModeFileList.push(a);d._inlineModeFileKeys[a.id]=a;var c=a.name.split(".");if(1<c.length){a.rawFilename=c[0];if(2<c.length)for(var b=1;b<=c.length-2;b++)a.rawFilename+="."+c[b];a.extension="."+c[c.length-1]}else a.rawFilename=a.name});a&&0<a.length&&(a=this.RenderTemplate(this._fileListItemTemplate,a,c),b&&0<b.length?b.after(a):a.appendTo(this._filesContainer),c&&DropDownMenu.initialize(),
a.find("."+this._settings.ViewActionCssClass).filter(function(){var a=f.GetFileByKey($(this).data("filekey"));return!f.IsViewSupported(a.type)}).closest("li").hide(),this._settings.UseDirectEdit||a.find("."+this._settings.EditActionCssClass).filter(function(){var a=f.GetFileByKey($(this).data("filekey"));return!f.IsEditingAllowed(a.type)}).closest("li").hide());var l=this;$(".ccl-hybrideditoritem").each(function(){l.fixSize($(this))})};c.prototype.fixSize=function(a){a.css("width","0px");setTimeout(function(){a.css("width",
"auto")},10)};c.prototype.RenderTemplate=function(a,c,b){if(!a)return $();a=a({files:c,delayMenuInit:b});return a instanceof $?a:$(this._templatesContainer).html(a).children()};c.prototype.GetFileIcon=function(a){a=this.GetFileExtension(a);if(this._settings.FileTypeIcons)return this._settings.FileTypeIcons[a]||this._settings.DefaultFileIcon};c.prototype.GetFileExtension=function(a){a=a.split(".");return 1>=a.length?"":a.pop().toLowerCase()};c.prototype.GetFileByKey=function(a){return this._inlineModeFileKeys[a]};
c.prototype.GetFilenameEditorItemSettings=function(){return{editModeEnabled:"inline",inlineEditorOptions:{blockedCharacters:this._settings.IllegalCharacters,editFieldAutoWidth:!1,editFieldDisplayInline:!0,editFieldCssClass:this._settings.FileNameEditorCssClass,forceContainerSize:!0,maxLength:255}}};return c}(b.DomElementClass);b.FileRepoUploader=d})(CCL||(CCL={}));
(function(b){var d=function(){function d(c,a,b){"undefined"===typeof b&&(b=null);this.form=c;this.warningMessage=a;this.options=b;this.textInputs=c.find("input[type=text], input[type=numeric],textarea");this.hybridEditors=c.find("div.ccl-hybrideditoritem > input[type=hidden]");this.checkboxesRadios=c.find("input[type=checkbox],input[type=radio]");this.selects=c.find("select");this.textInputs.each(function(a,c){var b=$(c);b.data(d.initialValueDataKey,b.val())});this.hybridEditors.each(function(a,c){var b=
$(c);b.data(d.initialValueDataKey,b.val())});this.checkboxesRadios.each(function(a,c){var b=$(c);b.data(d.initialValueDataKey,b.is(":checked"))});this.selects.each(function(a,c){var b=$(c);b.data(d.initialValueDataKey,b.find(":selected").val())});this.AttachHandler();c.submit($.proxy(this.DetachHandler,this));this.initOptions(a);d.instances.push(this)}d.prototype.initOptions=function(c){if(this.options){this.options.cancelButtonId&&$(document.getElementById(this.options.cancelButtonId)).click($.proxy(this.DetachHandler,
this));this.options.$cancelButtons&&this.options.$cancelButtons.length&&this.options.$cancelButtons.click($.proxy(this.DetachHandler,this));var a=this.options.whiteList;a&&a.enabled&&(this.dialogWhiteList=new b.DialogWhiteList,this.dialogWhiteList.clearStateCallback=a.clearStateCallback,this.dialogWhiteList.confirmationMessage=c)}};d.prototype.IsDirty=function(){return 1==this.form.data(d.dirtyFormDataKey)};d.prototype.SetDirty=function(c){var a=c?1:0;this.toggleWhiteListEnabled(c);this.form.data(d.dirtyFormDataKey,
a);this.form.trigger("dirtyChanged",a)};d.prototype.AttachHandler=function(){if(!this.isAttached){var c=$.proxy(this.onBeforeUnloadHandler,this);$(window).on(d.eventBeforeunload,c);this.isAttached=!0}};d.prototype.DetachHandler=function(){if(this.isAttached){var c=$.proxy(this.onBeforeUnloadHandler,this);$(window).off(d.eventBeforeunload,c);this.isAttached=!1}this.toggleWhiteListEnabled(!1)};d.manuallyRunBeforeUnloadHandler=function(){d.instances.forEach(function(c){c.onBeforeUnloadHandler()})};d.prototype.onBeforeUnloadHandler=
function(){var c=this.IsDirty();c||this.textInputs.each(function(a,b){var h=$(b);if(h.is(":visible")&&h.val()!=h.data(d.initialValueDataKey))return c=!0,!1});c||this.hybridEditors.each(function(a,b){var h=$(b);if(h.val()!=h.data(d.initialValueDataKey))return c=!0,!1});c||this.checkboxesRadios.each(function(a,b){var h=$(b);if(h.is(":visible")&&h.is(":checked")!=h.data(d.initialValueDataKey))return c=!0,!1});c||this.selects.each(function(a,b){var h=$(b);if(h.is(":visible")&&h.find(":selected").val()!=
h.data(d.initialValueDataKey))return c=!0,!1});if(!c&&window.CKEDITOR&&CKEDITOR.instances)for(var a in CKEDITOR.instances)if(isTextEditorDirty(a)){c=!0;break}this.options&&this.options.callback&&(c=this.options.callback());this.SetDirty(c);if(c)return this.warningMessage};d.prototype.toggleWhiteListEnabled=function(c){this.dialogWhiteList&&(c?this.dialogWhiteList.enable():this.dialogWhiteList.disable())};d.instances=[];d.eventBeforeunload="beforeunload";d.initialValueDataKey="InitialValue";d.dirtyFormDataKey=
"IsDirty";return d}();b.FormCheckBeforeUnload=d})(CCL||(CCL={}));
(function(b){var d=function(d){function c(a,c){var g=this;d.call(this,a,c);this._inputControl=$("#"+c.InputClientId);this._inputLabel=$("#"+c.LabelClientId);this._inputControl.on("keydown keyup change input propertychange",function(){g._inputControl.is(":visible")&&g.NotifyResultChanged()});this.determineVisibilityOfEmbedCheckbox(this.GetResults());this.Trigger(b.PickerEvent.Initialized);this.NotifyResultChanged()}__extends(c,d);c.prototype.GetResults=function(){return this._inputControl.val()||this._inputLabel.text()};
c.prototype.determineVisibilityOfEmbedCheckbox=function(a){a?this.isSecure?this.isUrlUnsecure(a)||8>=a.trim().length?$(".checkbox-embed-link-target").hide():$(".checkbox-embed-link-target").show():$(".checkbox-embed-link-target").show():$(".checkbox-embed-link-target").hide()};c.prototype.NotifyResultChanged=function(){var a=[],c=this.GetResults();this.determineVisibilityOfEmbedCheckbox(c);c&&a.push({fileUrl:c});this.Trigger(b.PickerEvent.ResultsChanged,{results:a})};c.prototype.isUrlUnsecure=function(a){a=
a.trim();var c=!0;8<a.length&&(a=this.parseUrl(a)[1],c=!a||"https:"!==a.toLowerCase());return c};c.prototype.parseUrl=function(a){return/^(?:(?:(?:([^:\/#\?]+:)?(?:(?:\/\/)((?:((?:[^:@\/#\?]+)(?:\:(?:[^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((?:\/?(?:[^\/\?#]+\/+)*)(?:[^\?#]*)))?(\?[^#]+)?)(#.*)?/.exec(a)};return c}(b.ItemPickerBase);b.LinkPicker=d})(CCL||(CCL={}));
(function(b){var d;(function(b){b[b.Horizontal=0]="Horizontal";b[b.Vertical=1]="Vertical"})(d||(d={}));d=function(){function b(c,a,d){this.settings=a;this.cssClasses=d;this.$mainContainer=this.settings.contentContainer.wrap("<div class='"+this.cssClasses.TooltipWrapper+"'></div>").parent();this.$arrowContainer=$("<div class='"+this.cssClasses.TooltipArrow+"'></div>").prependTo(this.$mainContainer);this.$mainContainer.data("CustomToolTip",this);$.ui.position[b.tooltipCollisionName]!==b.tooltipCollision&&
($.ui.position[b.tooltipCollisionName]=b.tooltipCollision)}b.prototype.openTooltip=function(c,a){var d=this;this.isOpened||(this.isOpened=!0,this.dialogArrow=a.arrow,this.$targetElement=c,this.$mainContainer.removeAttr("style"),this.clearArrowClassesFromMainContainer(),this.$mainContainer.css({display:"block","z-index":this.settings.zIndex}),this.$mainContainer.position({of:c,my:a.my,at:a.at,collision:b.tooltipCollisionName+" "+b.tooltipCollisionName,within:a.within}),this.setArrowPosition(),this.$mainContainer.fadeIn(250,
function(){d.$mainContainer.show()}))};b.prototype.closeTooltip=function(){this.$mainContainer.hide();this.isOpened=!1};b.prototype.isTooltipOpened=function(){return this.isOpened};b.prototype.setArrowPosition=function(){var c="",a="";switch(this.dialogArrow){case this.cssClasses.Bottom:a="center top";c="center bottom";break;case this.cssClasses.Top:a="center bottom";c="center top";break;case this.cssClasses.Left:a="right center";c="left center";break;case this.cssClasses.Right:a="left center",c=
"right center"}""!==c&&""!==a&&(this.clearArrowClassesFromMainContainer(),this.$mainContainer.addClass(this.dialogArrow),this.$arrowContainer.position({of:this.$targetElement,my:a,at:c,collision:"none none"}))};b.prototype.clearArrowClassesFromMainContainer=function(){this.$mainContainer.removeClass(this.cssClasses.Top+" "+this.cssClasses.Bottom+" "+this.cssClasses.Left+" "+this.cssClasses.Right)};b.prototype.invertArrow=function(c){switch(c){case 0:switch(this.dialogArrow){case this.cssClasses.Right:this.dialogArrow=
this.cssClasses.Left;break;case this.cssClasses.Left:this.dialogArrow=this.cssClasses.Right}break;case 1:switch(this.dialogArrow){case this.cssClasses.Bottom:this.dialogArrow=this.cssClasses.Top;break;case this.cssClasses.Top:this.dialogArrow=this.cssClasses.Bottom}}this.setArrowPosition()};b.tooltipCollisionName="flipWithArrow";b.tooltipCollision={left:function(c,a){var b=c.left;$.ui.position.flip.left(c,a);$.ui.position.fit.left(c,a);b!==c.left&&a.elem.data("CustomToolTip").invertArrow(0)},top:function(c,
a){var b=c.top;$.ui.position.flip.top(c,a);$.ui.position.fit.top(c,a);b!==c.top&&a.elem.data("CustomToolTip").invertArrow(1)}};return b}();b.CustomToolTip=d})(CCL||(CCL={}));
(function(b){var d=function(){function b(c,a,d,g){"undefined"===typeof d&&(d=null);"undefined"===typeof g&&(g=500);this.loadingIndicatorClass=a;this.$element=$(c);this.$elementsToDisable=d;this.timeout=g;var h=this;$(function(){h.$element.on("click",h.handler.bind(h)).each(function(){var a=$._data(this,"events").click,c=a.pop();a.unshift(c)}).on(b.eventRemoveLoadingIndicator,function(a,c){return h.removeLoadingIndicatorClass(c)})})}b.prototype.handler=function(){var c=this;this.timer=setTimeout(function(){c.$element.addClass(c.loadingIndicatorClass);
c.toggleDisabled(!0)},this.timeout)};b.prototype.removeLoadingIndicatorClass=function(c){"undefined"===typeof c&&(c=!1);clearTimeout(this.timer);this.$element.removeClass(this.loadingIndicatorClass);c||this.toggleDisabled()};b.prototype.toggleDisabled=function(c){"undefined"===typeof c&&(c=!1);this.$element.prop("disabled",c);void 0!==this.$elementsToDisable&&null!==this.$elementsToDisable&&$.each(this.$elementsToDisable,function(a,b){$(b).prop("disabled",c)})};b.eventRemoveLoadingIndicator="removeLoadingIndicator";
return b}();b.ButtonLoadingIndicator=d})(CCL||(CCL={}));(function(b){var d=function(){function b(c){this.delayedCallback=c}b.prototype.invokeCallback=function(c,a){var b=this;this.timeoutId&&clearTimeout(this.timeoutId);this.timeoutId=setTimeout(function(){b.delayedCallback(c)},a)};return b}();b.CallbackDebouncer=d})(CCL||(CCL={}));
(function(b){var d=function(){function d(){var c=this;this.lastState=b.CommonFunctions.isPhoneScreenSize();var a=new b.CallbackDebouncer(function(){var a=b.CommonFunctions.isPhoneScreenSize();a!==c.lastState&&($(c).trigger(d.mediaChangedEventName,a),c.lastState=a)});$(window).resize(function(){a.invokeCallback(void 0,200)})}d.mediaChangedEventName="mediaTypeChanged";return d}();b.WindowResizeHandler=d})(CCL||(CCL={}));
var __extends=this&&this.__extends||function(b,d){function f(){this.constructor=b}for(var c in d)d.hasOwnProperty(c)&&(b[c]=d[c]);b.prototype=null===d?Object.create(d):(f.prototype=d.prototype,new f)},PickerInitFailureReason;(function(b){b[b.BrowserNotSupported=1]="BrowserNotSupported";b[b.ExternalServiceNotAvailable=2]="ExternalServiceNotAvailable"})(PickerInitFailureReason||(PickerInitFailureReason={}));
var PickerInitFailureEventArgs=function(){return function(b,d,f){this.failureReason=b;this.failureMessage=d;this.pickerName=f}}(),PickerCallback=function(){return function(b,d,f,c){this.onPickerInitSuccess=b;this.onPickerInitFailure=d;this.onFileSelected=f;this.onFileSelectionCanceled=c}}(),SourceType;
(function(b){b[b.Dropbox=1]="Dropbox";b[b.Google=2]="Google";b[b.OneDriveForBusiness=3]="OneDriveForBusiness";b[b.Local=4]="Local";b[b.OneDrivePersonal=5]="OneDrivePersonal"})(SourceType||(SourceType={}));(function(b){b.isOneDrive=function(d){return d===b.OneDrivePersonal||d===b.OneDriveForBusiness}})(SourceType||(SourceType={}));var Uploaders;
(function(b){(function(b){(function(b){var c=function(){return function(a){this.buttonComponents=a}}();b.CollaborationViewModel=c})(b.Components||(b.Components={}))})(b.Collaboration||(b.Collaboration={}))})(Uploaders||(Uploaders={}));
(function(b){(function(b){(function(b){var c=function(){return function(a){this.buttonComponents=a;this.name="collaboration-control";this.viewModel={instance:new b.CollaborationViewModel(this.buttonComponents)};this.template='\n\x3c!-- ko foreach: buttonComponents --\x3e\n<div data-bind="component: {name: name}"></div>\n\x3c!-- /ko --\x3e\n<file-list-collaboration></file-list-collaboration>\n'}}();b.CollaborationComponent=c})(b.Components||(b.Components={}))})(b.Collaboration||(b.Collaboration={}))})(Uploaders||
(Uploaders={}));
(function(b){(function(b){(function(b){var c=function(){function a(a,c,b){contract.require(!objectState.isNullOrUndefined(a),"This class requires 'name' to be passed. Please, provide it.");-1===a.lastIndexOf(".")||void 0!==c||b?(this._name=a,this._extension=objectState.isNullOrUndefined(c)?null:c):(this._name=a.substring(0,a.lastIndexOf(".")+1),this._extension=a.substring(a.lastIndexOf(".")+1))}a.prototype.getName=function(){return this._name};a.prototype.getExtension=function(){return this._extension};return a}();
b.FileName=c})(b.Model||(b.Model={}))})(b.FileList||(b.FileList={}))})(Uploaders||(Uploaders={}));
var LocalFileInputHandle=function(){function b(b){this.fileInput=b}b.prototype.get=function(){return this.fileInput};return b}(),LocalFileHandle=function(){function b(b){this.file=b}b.prototype.get=function(){return this.file};return b}(),ExternalSourceFileHandle=function(){function b(b,f){this.url=b;this.id=f}b.prototype.get=function(){return objectState.isNullOrUndefined(this.id)?this.url:{url:this.url,id:this.id}};return b}(),PickerFileResult=function(){function b(b,f,c,a,e,g){this.fileHandle=
b;this.name=f;this.size=c;this.sourceType=a;this.relativePath=e;this.mimeType=g}b.prototype.getFileHandle=function(){return this.fileHandle.get()};b.createExternalSourcePickerFileResult=function(d,f,c,a,e,g){return new b(new ExternalSourceFileHandle(d,g),f,c,a,null,e)};b.createLocalPickerFileResultWithInput=function(d,f){return new b(new LocalFileInputHandle(d),f,null,SourceType.Local)};b.createLocalPickerFileResult=function(d){return new b(new LocalFileHandle(d),d.name,d.size,SourceType.Local)};
b.createFolderPickerFileResultWithRelativePath=function(d,f){return new b(new LocalFileHandle(d),d.name,d.size,SourceType.Local,f)};return b}(),UploadMetadata=function(){function b(b,f,c,a){this.id=b;this.name=f;this.sourceType=c;this.signature=a}b.create=function(d,f){var c=d.name,a=d.sourceType,e=null,g=null;f&&(f.fileGuid&&(e=f.fileGuid),f.signedGuid&&(g=f.signedGuid));return new b(e,c,a,g)};return b}(),FileInCloudMetadata=function(){function b(b,f,c,a){this.name=b;this.sourceType=f;this.viewUrl=
c;this.mimeType=a}b.clone=function(d){var f=new b(d.name,d.sourceType,d.viewUrl,d.mimeType);f.id=d.id;f.oAuthContext=d.oAuthContext;return f};b.create=function(d,f){var c=d.name,a=d.sourceType,e=b.getViewUrl(d),c=new b(c,a,e,d.mimeType);c.oAuthContext=f;c.id=b.getId(d);return c};b.getViewUrl=function(b){b=b.getFileHandle();var f=null;return f="string"===typeof b||b instanceof String?b:b.url};b.getId=function(d){d=d.getFileHandle();return b.isIdAvailable(d)?d.id:null};b.isIdAvailable=function(b){return!objectState.isNullOrUndefined(b)&&
!objectState.isNullOrUndefined(b.id)};return b}(),UploadControlTranslation=function(){return function(){}}();(function(b){b=b.FileList||(b.FileList={});b=b.Model||(b.Model={});b=b.FileItemState||(b.FileItemState={});b[b.New=0]="New";b[b.Ready=1]="Ready";b[b.InProgress=2]="InProgress";b[b.Aborting=3]="Aborting";b[b.Error=4]="Error";b[b.Success=5]="Success"})(Uploaders||(Uploaders={}));
(function(b){(function(b){(function(b){var c=function(){function a(){this.currentState=b.FileItemState.New}a.prototype.getCurrentState=function(){return this.currentState};a.prototype.isFinalState=function(){return this.currentState===b.FileItemState.Success||this.currentState===b.FileItemState.Error};a.prototype.prepareUpload=function(){if(this.currentState===b.FileItemState.New)this.currentState=b.FileItemState.Ready;else throw Error("You can only prepare upload if it is in status 'New'");};a.prototype.startUpload=
function(){if(this.currentState===b.FileItemState.Ready)this.currentState=b.FileItemState.InProgress;else throw Error("You can only start upload if it is in status 'Ready'");};a.prototype.abortUpload=function(){if(this.currentState===b.FileItemState.InProgress)this.currentState=b.FileItemState.Aborting;else throw Error("You can only abort upload if it is in status 'InProgress'");};a.prototype.finishUpload=function(){if(this.currentState===b.FileItemState.Ready||this.currentState===b.FileItemState.InProgress||
this.currentState===b.FileItemState.Aborting)this.currentState=b.FileItemState.Success;else throw Error("You can only finish upload if it is in status 'InProgress' or 'Ready' or 'Aborting'");};a.prototype.failUpload=function(){if(this.currentState===b.FileItemState.Ready||this.currentState===b.FileItemState.InProgress||this.currentState===b.FileItemState.Aborting)this.currentState=b.FileItemState.Error;else throw Error("You can only fail upload if it is in status 'Ready' or 'InProgress' or 'Aborting'");
};return a}();b.FileItemStateMachine=c})(b.Model||(b.Model={}))})(b.FileList||(b.FileList={}))})(Uploaders||(Uploaders={}));
var GapiDocType=function(){function b(){}b.word="application/vnd.openxmlformats-officedocument.wordprocessingml.document";b.excel="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";b.powerpoint="application/vnd.openxmlformats-officedocument.presentationml.presentation";b.png="image/png";b.pdf="application/pdf";b.googleSpreadsheet="application/vnd.google-apps.spreadsheet";b.googleDocument="application/vnd.google-apps.document";b.googlePresentation="application/vnd.google-apps.presentation";
b.googleApps=[b.googleSpreadsheet,b.googleDocument,b.googlePresentation];b.getDocumentType=function(d){return d[b.word]?b.word:d[b.excel]?b.excel:d[b.powerpoint]?b.powerpoint:d[b.png]?b.png:d[b.pdf]?b.pdf:Object.keys(d)[0]};return b}();
(function(b){(function(b){(function(b){var c=function(){function a(c){var b=this;contract.require(!objectState.isNullOrUndefined(c.fileName),"This class requires 'fileName' to be passed. Please, provide it.");contract.require(!objectState.isNullOrUndefined(c.stateMachine),"This class requires 'stateMachine' to be passed. Please, provide it.");this.fileName=ko.observable(c.fileName.getName());this.fileExtension=ko.observable(c.fileName.getExtension());this.stateMachine=c.stateMachine;this.isRemoveAllowed=
ko.observable(objectState.isNullOrUndefined(c.isRemoveAllowed)?!0:c.isRemoveAllowed);this.onRemoveCallback=c.onRemoveCallback;this.errorMessage=ko.observable(objectState.isNullOrUndefined(c.errorMessage)?null:c.errorMessage);this.warningMessage=ko.observable(objectState.isNullOrUndefined(c.warningMessage)?null:c.warningMessage);this.getItemCss=ko.pureComputed(function(){return b.errorMessage()||b.warningMessage()?"ccl-fl-item-error":""});var d=c.iconCssClass?c.iconCssClass:a.defaultIconCssClass;this.isCompleted=
ko.observable(!1);this.getIconCssClasses=ko.pureComputed(function(){var a=[];a.push("ccl-fl-item-details-icon");b.isCompleted()||a.push("ccl-fl-item-details-icon-faded");a.push(d);return a.join(" ")});this.progress=ko.observable(0);this.stateMachine.prepareUpload()}a.prototype.setProgress=function(a){var c=this.progress();if(100<a)throw"Progress can't exceed 100";c>=a||(0===c&&0<a&&this.stateMachine.startUpload(),this.progress(a))};a.prototype.markAsCompleted=function(){this.isCompleted()||this.stateMachine.finishUpload();
this.progress(100);this.isCompleted(!0)};a.prototype.setFolderError=function(){this.setError(UploadControlTranslation.someFilesInThatFolderCannotBeUploaded)};a.prototype.setError=function(a){this.errorMessage(a);this.progress(100);this.stateMachine.failUpload();this.isRemoveAllowed(!0)};a.prototype.setFolderWarning=function(){this.warningMessage(UploadControlTranslation.someFilesInThatFolderCannotBeUploaded)};a.prototype.getState=function(){return this.stateMachine.getCurrentState()};a.buildItemForUpload=
function(c,d){var h=new a({fileName:new b.FileName(c),stateMachine:new b.FileItemStateMachine});h.metadata=d;return h};a.buildItemForFolder=function(c){return new a({fileName:new b.FileName(c,void 0,!0),stateMachine:new b.FileItemStateMachine,iconCssClass:"ccl-fl-item-details-folder-icon"})};a.buildItemForFileInCloud=function(c){var d=new a({fileName:new b.FileName(c.name),stateMachine:new b.FileItemStateMachine,iconCssClass:a.getCssIconForFileInCloud(c)});d.metadata=c;return d};a.getCssIconForFileInCloud=
function(c){return c.sourceType===SourceType.Google?a.getCssIconForGoogleDriveFile(c.mimeType):SourceType.isOneDrive(c.sourceType)?"ccl-fl-item-details-one-drive-file-icon":a.defaultIconCssClass};a.getCssIconForGoogleDriveFile=function(a){switch(a){case GapiDocType.googleDocument:return"ccl-fl-item-details-google-document-icon";case GapiDocType.googlePresentation:return"ccl-fl-item-details-google-presentation-icon";case GapiDocType.googleSpreadsheet:return"ccl-fl-item-details-google-spreadsheet-icon";
default:return"ccl-fl-item-details-google-drive-file-icon"}};a.defaultIconCssClass="ccl-fl-item-details-generic-file-icon";return a}();b.FileItem=c})(b.Model||(b.Model={}))})(b.FileList||(b.FileList={}))})(Uploaders||(Uploaders={}));
(function(b){(function(b){(function(b){var c=function(){return function(a,c){var b=this;this.addFile=function(a){b.files.push(a)};this.removeFile=function(a){b.files.remove(a);if(a.onRemoveCallback)a.onRemoveCallback()};this.getFiles=function(){return b.files()};this.isVisible=ko.observable(objectState.isNullOrUndefined(a)?!0:a);this.files=objectState.isNullOrUndefined(c)?ko.observableArray():ko.observableArray(c)}}();b.FileListViewModel=c})(b.Components||(b.Components={}))})(b.FileList||(b.FileList=
{}))})(Uploaders||(Uploaders={}));
(function(b){(function(b){(function(b){var c=function(){return function(a,c){this.fileList=a;this.name=c;this.viewModel={instance:this.fileList};this.template='\n<div data-bind="foreach: files, visible: isVisible">\n    <div class="ccl-fl-item-container">\n        <div data-bind="css: getItemCss()" class="ccl-fl-item">\n            <div data-bind="style: {width: progress() + \'%\'},\n                css: isCompleted() ? \'ccl-fl-item-progress\' : \'ccl-fl-item-progress-animate\',\n                visible: !errorMessage()"></div>\n            <div class="ccl-fl-item-content">\n                <div class="ccl-fl-item-details">\n                    <div data-bind="css: getIconCssClasses()"></div>\n                    <span data-bind="text: fileName,\n                        css: isCompleted() ? \'ccl-fl-item-details-text-file-name\' : \'ccl-fl-item-details-text-file-name-faded\'"></span>\n                    <span data-bind="visible: fileExtension(), text: fileExtension,\n                        css: isCompleted() ? \'ccl-fl-item-details-text-file-extension\' : \'ccl-fl-item-details-text-file-extension-faded\'"></span>\n                </div>\n                <button class="ccl-fl-item-remove-enabled" data-bind="click: function() { $parent.removeFile($data) },\n                    visible: isRemoveAllowed()"></button>\n                <div class="ccl-fl-item-remove-disabled" data-bind="visible: !isRemoveAllowed()"></div>\n            </div>\n        </div>\n        <div class="ccl-fl-error" data-bind="visible: errorMessage()">\n            <div class="ili ili-exclamation-circle" aria-hidden="true"></div>\n            <div class="ccl-fl-error-message" data-bind="text: errorMessage"></div>\n        </div>\n        <div class="ccl-fl-warning" data-bind="visible: warningMessage()">\n            <div class="ili ili-exclamation-circle ccl-fl-warning-exclamation-circle" aria-hidden="true"></div>\n            <div class="ccl-fl-warning-message" data-bind="text: warningMessage"></div>\n        </div>\n    </div>\n</div>'}}();b.FileListComponent=
c})(b.Components||(b.Components={}))})(b.FileList||(b.FileList={}))})(Uploaders||(Uploaders={}));(function(b){b=b.FeedbackType||(b.FeedbackType={});b[b.Information=0]="Information";b[b.Error=1]="Error";b[b.Warning=2]="Warning";b[b.Tip=3]="Tip";b[b.Functionality=4]="Functionality"})(CCL||(CCL={}));
var FeedbackManager=function(){return function(b){var d=this;this.feedbackControl=b;this.messages=[];this.showFeedback=function(b){d.messages.push(b);b=d.messages.join("<br />");d.feedbackControl.showMessage(CCL.FeedbackType.Information,b)}}}(),FolderMetadata=function(){return function(b){this.name=b;this.files=[];this.folders=[]}}(),MetadataArrays=function(){return function(){}}(),HiddenMetadataManager=function(){return function(b){var d=this;this.metadataField=b;this.replaceFileItems=function(b){for(var c=
[],a=[],e=[],g=0;g<b.length;g++){var h=b[g];if(h.getState()===Uploaders.FileList.Model.FileItemState.Success)if(h=h.metadata,h instanceof UploadMetadata)c.push(h);else if(h instanceof FileInCloudMetadata)a.push(h);else if(h instanceof FolderMetadata)e.push(h);else throw Error("Serialization error: Unknown type of Metadata!");}d.metadataField.val(JSON.stringify({uploadMetadataArray:c,fileInCloudMetadataArray:a,folderMetadataArray:e}))};this.getFileItems=function(){var b=d.metadataField.val();if(objectState.isNullOrWhitespace(b))return[];
var c=[],a=JSON.parse(b);if(a.uploadMetadataArray)for(var e=0,g=a.uploadMetadataArray;e<g.length;e++){var h=g[e],b=Uploaders.FileList.Model.FileItem.buildItemForUpload(h.name);b.metadata=new UploadMetadata(h.id,h.name,h.sourceType,h.signature);c.push(b)}if(a.fileInCloudMetadataArray)for(e=0,g=a.fileInCloudMetadataArray;e<g.length;e++)b=FileInCloudMetadata.clone(g[e]),b=Uploaders.FileList.Model.FileItem.buildItemForFileInCloud(b),c.push(b);if(a.folderMetadataArray)for(e=0,a=a.folderMetadataArray;e<
a.length;e++)g=a[e],b=Uploaders.FileList.Model.FileItem.buildItemForFolder(g.name),b.metadata=d.getFolderMetadataInstance(g),c.push(b);return c};this.getFolderMetadataInstance=function(b){var c=new FolderMetadata(b.name);c.files=b.files;c.folders=b.folders;return c}}}(),UploadStatus;(function(b){b[b.Awaiting=0]="Awaiting";b[b.InProgress=1]="InProgress";b[b.Succeeded=2]="Succeeded";b[b.SucceededWithErrors=3]="SucceededWithErrors";b[b.Failed=4]="Failed"})(UploadStatus||(UploadStatus={}));
var FileItemState=Uploaders.FileList.Model.FileItemState,FileItem=Uploaders.FileList.Model.FileItem,UploadStatusCalculator=function(){function b(){var b=this;this.calculate=function(f){var c=b.countFileItemsInGivenStates(f,[FileItemState.New,FileItemState.Ready,FileItemState.InProgress,FileItemState.Aborting]),a=b.countFileItemsInGivenStates(f,[FileItemState.Success]);f=b.countFileItemsInGivenStates(f,[FileItemState.Error]);return b.determineStatus(c,a,f)}}b.prototype.countFileItemsInGivenStates=
function(b,f){return b.filter(function(c){c=c.getState();return-1!==f.indexOf(c)}).length};b.prototype.determineStatus=function(b,f,c){return 0<b?UploadStatus.InProgress:0<f&&0<c?UploadStatus.SucceededWithErrors:0<f?UploadStatus.Succeeded:0<c?UploadStatus.Failed:UploadStatus.Awaiting};return b}();
(function(b){(function(b){var f=function(){return function(c,a,b,d,f,k){var l=this;this.controller=c;this.callbacks=a;this.feedbackManager=b;this.fileList=d;this.statusCalculator=f;this.metadataManager=k;this.subscribeToController=function(a){a.subscribe({onInitializationFailure:l.presentInitializationFailure,onFilesSelected:l.signalFilesSelection,onActionSuccess:l.signalSuccess,onActionError:l.signalError,onActionAborted:l.signalAbort,onFileRemoved:l.signalFileRemoval})};this.handleStateChange=function(){var a=
l.fileList.getFiles();l.metadataManager.save(a);l.callbacks.onStatusChanged&&(a=l.statusCalculator.calculate(a),l.callbacks.onStatusChanged(a))};this.presentInitializationFailure=function(a){l.feedbackManager.showFeedback(a.failureMessage)};this.signalFilesSelection=function(a){for(var c=0;c<a.length;c++)l.fileList.addFile(a[c]);l.handleStateChange();l.callbacks.onFilesSelected&&(a=a.map(function(a){return a.metadata}),l.callbacks.onFilesSelected(a))};this.signalSuccess=function(a){l.handleStateChange();
if(l.callbacks.onActionSuccess)l.callbacks.onActionSuccess(a)};this.signalError=function(a,c){l.handleStateChange();if(l.callbacks.onActionError)l.callbacks.onActionError(a,c)};this.signalAbort=function(a){l.handleStateChange();if(l.callbacks.onActionAborted)l.callbacks.onActionAborted(a)};this.signalFileRemoval=function(a){l.handleStateChange();if(l.callbacks.onFileRemoved)l.callbacks.onFileRemoved(a)};this.showFileItemsFromHiddenMetadataField=function(){for(var a=function(a){a.markAsCompleted();
l.fileList.addFile(a);a.onRemoveCallback=function(){l.signalFileRemoval(a.metadata);l.handleStateChange()}},c=0,b=l.metadataManager.get();c<b.length;c++)a(b[c]);l.handleStateChange()};contract.require(!objectState.isNullOrUndefined(this.controller),"'controller' is not defined");contract.require(!objectState.isNullOrUndefined(this.callbacks),"'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(this.feedbackManager),"'feedbackManager' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileList),
"'fileList' is not defined");contract.require(!objectState.isNullOrUndefined(this.statusCalculator),"'statusManager' is not defined");contract.require(!objectState.isNullOrUndefined(this.metadataManager),"'metadataManager' is not defined");this.subscribeToController(this.controller);this.showFileItemsFromHiddenMetadataField()}}();b.CollaborationControl=f})(b.Collaboration||(b.Collaboration={}))})(Uploaders||(Uploaders={}));
(function(b){(function(b){(function(b){var c=function(){return function(a,c,d,h){this.name=a;this.title=c;this.description=d;this.picker=h;this.viewModel={instance:new b.ButtonViewModel(this.title,this.description,this.picker)};this.template='\n<div>\n    <button class="ccl-gcc-source-container" data-bind="click: onClick">\n        <span data-bind="text: title" class="ccl-gcc-source-content-text"></span>\n    </button>\n    <span data-bind="text: description" class="ccl-gcc-source-content-description"></span>\n</div>\n'}}();
b.ButtonComponent=c})(b.Components||(b.Components={}))})(b.Collaboration||(b.Collaboration={}))})(Uploaders||(Uploaders={}));(function(b){(function(b){(function(b){var c=function(){return function(a,c,b){var d=this;this.title=a;this.description=c;this.picker=b;this.onClick=function(){d.picker.open()}}}();b.ButtonViewModel=c})(b.Components||(b.Components={}))})(b.Collaboration||(b.Collaboration={}))})(Uploaders||(Uploaders={}));
(function(b){(function(d){(function(f){var c=function(){function a(a,c,b,f,l,m,n){var p=this;this.collaborationContainerId=a;this.settings=c;this.validationSettings=b;this.callbackFinder=f;this.translations=l;this.feedbackManager=m;this.metadataField=n;this.initializePickers=function(){var a=[],c=[];if(p.settings.EnableCollaborationFromGoogle){var b=p.buildGooglePicker(),d=b[0],b=b[1];a.push(d);c.push(b)}p.settings.EnableCollaborationFromOffice&&(b=p.buildOfficePicker(),d=b[0],b=b[1],a.push(d),c.push(b));
return[a,c]};this.buildGooglePicker=function(){var a=p.getGoogleDriveSettings(),a=new GooglePickerInPopup(a,BrowserSniffer(),p.translations.GoogleBrowserNotSupported,new PickerModeSerializer,p.getLinkToCloudPickerMode()),c=new d.Components.ButtonComponent("google-collaboration",p.translations.CollaborateWithGoogleTitle,p.translations.CollaborateWithGoogleDescription,a);ko.components.register(c.name,c);return[a,c]};this.getGoogleDriveSettings=function(){return{pickerDomain:p.settings.GoogleDriveUploadSettings.PickerDomain,
pickerUrl:p.settings.GoogleDriveUploadSettings.PickerUrl,crossCommunicationProxyUrl:p.settings.GoogleDriveUploadSettings.CrossCommunicationProxyUrl}};this.getLinkToCloudPickerMode=function(){return{allowToSelectMultipleFiles:!0,purpose:PickerPurpose.LinkToCloud,allowCollaboration:!0}};this.buildOfficePicker=function(){var a=OneDrivePicker.create(p.getOneDriveSettings(),BrowserSniffer(),new PickerModeSerializer,p.getLinkToCloudPickerMode()),c=new d.Components.ButtonComponent("office-collaboration",
p.translations.CollaborateWithOfficeTitle,p.translations.CollaborateWithOfficeDescription,a);ko.components.register(c.name,c);return[a,c]};this.getOneDriveSettings=function(){return{PickerUrl:p.settings.OneDriveUploadSettings.OneDrivePickerUrl,PickerDomain:p.settings.OneDriveUploadSettings.OneDrivePickerDomain,CrossCommunicationProxyUrl:p.settings.OneDriveUploadSettings.CrossCommunicationProxyUrl}};this.initializeCollaborationComponent=function(a){a=new d.Components.CollaborationComponent(a);ko.components.register(a.name,
a)}}a.prototype.build=function(){this.initializeTranslations();var a=this.initializeFileList(),c=this.initializePickers(),f=c[0];this.initializeCollaborationComponent(c[1]);ko.applyBindings(null,window.document.getElementById(this.collaborationContainerId));var c=new PickerFileResultValidatorLiterals(this.translations),c=PickerFileResultValidatorFactory.createLocalizedValidatorForFilesInCloud(this.validationSettings.maxFileNameLength,c),f=new FilesInCloudController(f,c),c=this.callbackFinder.getCallbacks(),
k=new UploadStatusCalculator,l=new d.MetadataManager(this.metadataField);return new b.Collaboration.CollaborationControl(f,c,this.feedbackManager,a,k,l)};a.prototype.initializeTranslations=function(){d.Translations.collaborateWithGoogleTitle=this.translations.CollaborateWithGoogleTitle;d.Translations.collaborateWithGoogleDescription=this.translations.CollaborateWithGoogleDescription;d.Translations.collaborateWithOfficeTitle=this.translations.CollaborateWithOfficeTitle;d.Translations.collaborateWithOfficeDescription=
this.translations.CollaborateWithOfficeDescription;d.Translations.fileExtensionNotAllowed=this.translations.FileExtensionNotAllowed;d.Translations.unableToOpenFile=this.translations.UnableToOpenFile;d.Translations.invalidFirstPartOfFileName=this.translations.InvalidFirstPartOfFileName;d.Translations.invalidCharactersXInFileName=this.translations.InvalidCharactersXInFileName;d.Translations.fileIsEmpty=this.translations.FileIsEmpty;d.Translations.fileTooBig=this.translations.FileTooBig;d.Translations.fileTooSmall=
this.translations.FileTooSmall;d.Translations.fileNameIsTooLong=this.translations.FileNameIsTooLong;d.Translations.kb=this.translations.Kb;d.Translations.mb=this.translations.Mb;d.Translations.googleBrowserNotSupported=this.translations.GoogleBrowserNotSupported};a.prototype.initializeFileList=function(){var a=new b.FileList.Components.FileListViewModel,c=new b.FileList.Components.FileListComponent(a,"file-list-collaboration");ko.components.register(c.name,c);return a};return a}();f.CollaborationControlFactory=
c})(d.Initialization||(d.Initialization={}))})(b.Collaboration||(b.Collaboration={}))})(Uploaders||(Uploaders={}));
(function(b){(function(d){var f=function(){return function(c){var a=this;this.metadataField=c;this.save=function(c){for(var d=[],f=0;f<c.length;f++){var k=c[f];if(k.getState()===b.FileList.Model.FileItemState.Success)if(k=k.metadata,k instanceof FileInCloudMetadata)d.push(k);else throw Error("Serialization error: Unknown type of Metadata!");}a.metadataField.val(JSON.stringify(d))};this.get=function(){var c=a.metadataField.val();if(objectState.isNullOrWhitespace(c))return[];var d=[];if(c=JSON.parse(c))for(var f=
0;f<c.length;f++){var k=FileInCloudMetadata.clone(c[f]),k=b.FileList.Model.FileItem.buildItemForFileInCloud(k);d.push(k)}return d}}}();d.MetadataManager=f})(b.Collaboration||(b.Collaboration={}))})(Uploaders||(Uploaders={}));(function(b){(function(b){var f=function(){return function(){}}();b.Translations=f})(b.Collaboration||(b.Collaboration={}))})(Uploaders||(Uploaders={}));var PickerInitStatus;
(function(b){b[b.InProgress=0]="InProgress";b[b.Success=1]="Success";b[b.Error=2]="Error"})(PickerInitStatus||(PickerInitStatus={}));var FileUploadState;(function(b){b[b.New=0]="New";b[b.Ready=1]="Ready";b[b.InProgress=2]="InProgress";b[b.Aborting=3]="Aborting";b[b.Error=4]="Error";b[b.Success=5]="Success"})(FileUploadState||(FileUploadState={}));
var FileInFolder=function(){return function(b){this.result=b;this.error=null}}(),Folder=function(){return function(b,d){var f=this;this.name=b;this.path=d;this.error=null;this.getFolderMetadata=function(){for(var c=new FolderMetadata(f.name),a=0,b=f.files;a<b.length;a++){var d=b[a];null===d.error&&c.files.push(d.metadata)}a=0;for(b=f.folders;a<b.length;a++)d=b[a],null===d.error&&0!==d.getFilesWithoutValidationErrors().length&&(d=d.getFolderMetadata(),c.folders.push(d));return c};this.getFilesWithoutValidationErrors=
function(){return f.getFiles().filter(function(c){return!c.error})};this.isAnyErrorInFolder=function(){if(f.error)return!0;for(var c=0,a=f.files;c<a.length;c++)if(a[c].error)return!0;c=0;for(a=f.folders;c<a.length;c++)if(a[c].isAnyErrorInFolder())return!0;return!1};this.getFiles=function(){if(f.error)return[];var c=f.files;f.folders.forEach(function(a){a=a.getFiles();c=c.concat(a)});return c};this.folders=[];this.files=[]}}(),ActionQueue=function(){return function(b){var d=this;this.maxNumberOfConcurrentActions=
b;this.queue=[];this.numberOfActionsInProgress=0;this.register=function(b){d.maxNumberOfConcurrentActionsNotReached()?(b(),d.numberOfActionsInProgress++):d.queue.push(b)};this.remove=function(b){d.queue=d.queue.filter(function(c){return c!==b})};this.signalDone=function(){0!==d.numberOfActionsInProgress&&(d.numberOfActionsInProgress--,d.elementsWaiting()&&d.maxNumberOfConcurrentActionsNotReached()&&d.startNextAction())};this.clear=function(){d.queue=[]};this.startNextAction=function(){d.numberOfActionsInProgress++;
d.queue.shift()()};this.elementsWaiting=function(){return 0<d.queue.length};this.maxNumberOfConcurrentActionsNotReached=function(){return d.numberOfActionsInProgress<d.maxNumberOfConcurrentActions}}}(),GenericUploader;
(function(b){(function(b){(function(b){var c=function(){return function(a){var c=this;this.jq=a;this.jqueryUploadControl=null;this.startUpload=function(a,b){c.jqueryUploadControl||(c.jqueryUploadControl=c.jq('<input type="file" />'),c.jqueryUploadControl.fileupload(a));c.jqueryUploadControl.fileupload("add",b)};contract.require(!objectState.isNullOrUndefined(a),"argument 'jq' is not defined")}}();b.HtmlUploadInputHandler=c})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||
(b.Sender={}))})(GenericUploader||(GenericUploader={}));(function(b){(function(b){(function(b){var c=function(){return function(){}}();b.Callbacks=c})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){(function(c){(function(a){var c=function(){function a(c,b,d,e){var f=this;this.isIe9=c;this.validationHeader=b;this.token=d;this.callbacks=e;this.add=function(a,c){f.isIe9||(c.headers=f.getHeadersForFileRepo(),c.crossDomain=!0);f.callbacks.onFileSelected(function(){c.abort()});c.submit()};contract.require(!objectState.isNullOrUndefined(c),"argument 'isIe9' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'validationHeader' is not defined");
contract.require(!objectState.isNullOrUndefined(d),"argument 'token' is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'callbacks' is not defined")}a.prototype.getHeadersForFileRepo=function(){return{"X-Public-Upload":"1","X-Customer-Validations":this.validationHeader,"X-Authorization-FileRepoToken":"Bearer "+this.token}};return a}();a.Add=c})(c.Action||(c.Action={}))})(b.FileInput||(b.FileInput={}))})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||
(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){(function(c){(function(a){var c=function(){return function(a){var c=this;this.callbacks=a;this.progress=function(a,b){c.callbacks.onUploadProgress(b.loaded/b.total*100)};contract.require(!objectState.isNullOrUndefined(a),"argument 'callbacks' is not defined")}}();a.ProgressAll=c})(c.Action||(c.Action={}))})(b.FileInput||(b.FileInput={}))})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader=
{}));
(function(b){(function(b){(function(b){(function(c){(function(a){var c=function(){return function(a,c){var b=this;this.errorResponseTranslator=a;this.callbacks=c;this.done=function(a,c){if(b.isDoneReallyAFail(c)){var d=b.errorResponseTranslator.getErrorMessageFromErrorCode(c.result.Error);b.callbacks.onSendFailure(d)}else b.callbacks.onSendSuccess(b.file,c.result)};this.isDoneReallyAFail=function(a){return b.isIframeTransportUsed(a)&&"undefined"!==typeof a.result&&null!=a.result.Error?!0:!1};this.isIframeTransportUsed=
function(a){return a.dataType&&"iframe"===a.dataType.substr(0,6)};contract.require(!objectState.isNullOrUndefined(a),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'callbacks' is not defined")}}();a.Done=c})(c.Action||(c.Action={}))})(b.FileInput||(b.FileInput={}))})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){(function(c){(function(a){var c=function(){function a(c,b){var d=this;this.errorResponseTranslator=c;this.callbacks=b;this.fail=function(a,c){if(d.isFileUploadAborted(c.errorThrown)){if(d.callbacks.onAbortSuccess)d.callbacks.onAbortSuccess()}else{var b=d.getErrorMessageFromResponse(c);d.callbacks.onSendFailure(b)}};contract.require(!objectState.isNullOrUndefined(c),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(b),
"argument 'callbacks' is not defined")}a.prototype.isFileUploadAborted=function(a){return"abort"===a};a.prototype.getErrorMessageFromResponse=function(a){var c=this.errorResponseTranslator.getErrorMessageFromResponse(a);null==c&&a.xhr&&(c=this.getErrorMesageFromXhr(a.xhr()));return c};a.prototype.getErrorMesageFromXhr=function(a){if(a.responseText)try{var c=JSON.parse(a.responseText);if(!objectState.isNullOrWhitespace(c.errorMessage))return c.errorMessage}catch(b){}return a.statusText};return a}();
a.Fail=c})(c.Action||(c.Action={}))})(b.FileInput||(b.FileInput={}))})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){(function(c){var a=function(){return function(a,c,b,d){this.addAction=a;this.progressAction=c;this.doneAction=b;this.failAction=d;contract.require(!objectState.isNullOrUndefined(a),"argument 'addAction' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'progressAllAction' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'doneAction' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'failAction' is not defined")}}();
c.Actions=a})(b.FileInput||(b.FileInput={}))})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){(function(c){var a=function(){function a(c,b,d,e,f,n){var p=this;this.isIe9=c;this.endpoint=b;this.validationHeader=d;this.token=e;this.redirectUrl=f;this.actions=n;this.build=function(a){var c={};contract.require(!objectState.isNullOrUndefined(a),"argument 'file' is not defined");p.actions.doneAction.file=a;c.url=p.createUrl();c.dataType="json";c.add=p.actions.addAction.add;c.progressall=p.actions.progressAction.progress;c.fail=p.actions.failAction.fail;c.done=
p.actions.doneAction.done;c.dropZone=null;return c};this.createUrl=function(){return p.isIe9?p.getUrlWithValidationParamsInQueryString(p.endpoint,p.getIframeUploadQueryStringParameters()):p.endpoint};contract.require(!objectState.isNullOrUndefined(c),"argument 'isIe9' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'endpoint' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'validationHeader' is not defined");contract.require(!objectState.isNullOrUndefined(e),
"argument 'token' is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'redirectUrl' is not defined");contract.require(!objectState.isNullOrUndefined(n),"argument 'actions' is not defined")}a.prototype.getIframeUploadQueryStringParameters=function(){return{"X-Public-Upload":"1","X-Customer-Validations":this.validationHeader,"X-Authorization-FileRepoToken":"Bearer "+this.token,redirectUrl:this.redirectUrl}};a.prototype.getUrlWithValidationParamsInQueryString=function(a,c){var b=
$.param(c),d=-1===a.indexOf("?")?"?":"&";return a+d+b};return a}();c.ConfigurationBuilder=a})(b.FileInput||(b.FileInput={}))})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));(function(b){var d=function(){return function(){}}();b.SenderCallbacks=d})(GenericUploader||(GenericUploader={}));
(function(b){var d=function(){return function(b,c){this.file=b;this.uploadStateChannelId=c}}();b.RequestToSender=d})(GenericUploader||(GenericUploader={}));
var UploaderSenderOptions=function(){return function(b){var d=this;this.editableOptions=b;this.dictionary={};this.hasChanged=!1;this.addParameter=function(b,c){d.hasChanged=!0;d.url.addSearch(b,c)};this.addDictionaryParameter=function(b,c){d.dictionary[b]=c};this.getDictionaryParameter=function(b){return d.dictionary[b]};this.getProcessedOptions=function(){return{url:d.url.normalizeSearch().toString()}};contract.require(!objectState.isNullOrUndefined(b),"argument 'editableOptions' is not defined");
this.url=URI(this.editableOptions.url).normalizeSearch()}}();
(function(b){(function(b){(function(b){var c=function(){function a(a,c,b,d){var f=this;this.isIe9=a;this.inputHandler=c;this.callbacks=b;this.configurationBuilder=d;this.send=function(a,c,b,d){f.callbacks.onFileSelected=f.fileSelected;f.callbacks.onSendSuccess=b;f.callbacks.onSendFailure=d;f.callbacks.onUploadProgress=c;c=f.configurationBuilder.build(a.file);a=f.createRequestContent(a.file);f.inputHandler.startUpload(c,a);return{abort:f.abort}};this.createRequestContent=function(a){var c={};f.isIe9?
c.fileInput=a.getFileHandle():c.files=[a.getFileHandle()];return c};this.fileSelected=function(a){f.abortUpload=a};this.abort=function(a){f.callbacks.onAbortSuccess=a;f.abortUpload()};contract.require(!objectState.isNullOrUndefined(a),"argument 'isIe9' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'localFileInputHander' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(d),
"argument 'optionsBuilder' is not defined")}a.prototype.getOptions=function(){return null};return a}();b.Sender=c})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){var c=b.FileInput.Action.Add,a=b.FileInput.Action.ProgressAll,d=b.FileInput.Action.Done,g=b.FileInput.Action.Fail,h=b.FileInput.Actions,k=b.FileInput.ConfigurationBuilder,l=function(){return function(l,n,p){var s=this;this.errorResponseTranslator=n;this.fileRepoData=p;this.build=function(){var l=new b.HtmlUploadInputHandler($),m=new b.Callbacks,n=new c(s.isIe9,s.fileRepoData.ValidationHeader,s.fileRepoData.Token,m),p=new a(m),u=new d(s.errorResponseTranslator,
m),t=new g(s.errorResponseTranslator,m),n=new h(n,p,u,t),n=new k(s.isIe9,s.fileRepoData.Endpoint,s.fileRepoData.ValidationHeader,s.fileRepoData.Token,s.fileRepoData.RedirectUrl,n);return new b.Sender(s.isIe9,l,m,n)};contract.require(!objectState.isNullOrUndefined(l),"argument 'browserSniffer' is not defined");contract.require(!objectState.isNullOrUndefined(n),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(p),"argument 'fileRepoData' is not defined");
this.isIe9=l.isInternetExplorer9()}}();b.Factory=l})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(d){(function(d){var c=function(){function a(a,c){var d=this;this.actionQueue=a;this.senderFactory=c;this.abortActions=[];this.send=function(a,c,b){d.onUploadProgress=c;d.onSendCompleted=b;d.folder=a;d.filesToUpload=a.getFilesWithoutValidationErrors();d.numberOfFilesToUpload=d.filesToUpload.length;d.uploadedFiles=0;d.filesToUpload.forEach(function(a){d.actionQueue.register(function(){d.sendFile(a)})});return{abort:d.abort}};this.sendFile=function(a){var c=new b.RequestToSender(a.result),
e=d.senderFactory.build().send(c,function(){},function(c,b){d.fileSendingSuccess(a,c,b)},function(c){d.fileSendingFailure(a,c)});d.addAbortAction(a,function(){e.abort()})};this.createRequestContent=function(a){var c={};c.files=a.map(function(a){return a.getFileHandle()});return c};this.fileSendingSuccess=function(a,c,b){a.metadata=UploadMetadata.create(c,b);d.fileUploadEnded(a)};this.fileSendingFailure=function(a,c){a.error=c;d.fileUploadEnded(a)};this.fileUploadEnded=function(a){d.uploadedFiles++;
d.updateProgress();d.removeAbortAction(a);d.actionQueue.signalDone();if(d.allFilesUploaded())d.onSendCompleted(d.folder)};this.removeAbortAction=function(a){d.abortActions=d.abortActions.filter(function(c){return c.file!==a})};this.addAbortAction=function(a,c){d.abortActions.push({file:a,action:c})};this.allFilesUploaded=function(){return d.uploadedFiles===d.numberOfFilesToUpload};this.updateProgress=function(){d.onUploadProgress(d.uploadedFiles/d.numberOfFilesToUpload*100)};this.abort=function(a){d.actionQueue.clear();
d.abortActions.forEach(function(a){a.action()});a()};contract.require(!objectState.isNullOrUndefined(this.actionQueue),"argument 'actionQueue' is not defined");contract.require(!objectState.isNullOrUndefined(this.senderFactory),"argument 'senderFactory' is not defined")}a.prototype.getOptions=function(){return null};return a}();d.FolderSender=c})(d.FileRepoSenderForLocalFolders||(d.FileRepoSenderForLocalFolders={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){var c=function(){return function(a){var c=this;this.fileRepoForLocalFilesFactory=a;this.build=function(){var a=new ActionQueue(2);return new b.FolderSender(a,c.fileRepoForLocalFilesFactory)}}}();b.Factory=c})(b.FileRepoSenderForLocalFolders||(b.FileRepoSenderForLocalFolders={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));var ValidationStatus;
(function(b){b[b.Ok=0]="Ok";b[b.Inconclusive=1]="Inconclusive";b[b.FileIsUnavailable=2]="FileIsUnavailable";b[b.FileSizeIsTooSmall=3]="FileSizeIsTooSmall";b[b.FileSizeIsTooBig=4]="FileSizeIsTooBig";b[b.FileExtensionIsNotAllowed=5]="FileExtensionIsNotAllowed";b[b.FilenameContainsIllegalCharacters=6]="FilenameContainsIllegalCharacters";b[b.FileNameIsIllegal=7]="FileNameIsIllegal";b[b.FileIsEmpty=8]="FileIsEmpty";b[b.FileNameIsTooLong=9]="FileNameIsTooLong"})(ValidationStatus||(ValidationStatus={}));
var ValidationResult=function(){function b(b,f){this.status=b;this.data=f}b.prototype.isValid=function(){return this.status===ValidationStatus.Ok||this.status===ValidationStatus.Inconclusive};b.prototype.getStatus=function(){return this.status};b.prototype.getData=function(){return this.data};return b}(),FolderValidator=function(){function b(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'validators' cannot be null or undefined");this.validators=b}b.prototype.validateFolder=function(b){for(var f=
0,c=this.validators;f<c.length;f++){var a=c[f];if(!objectState.isNullOrUndefined(a)&&(a=a.validateFolder(b),!a.isValid()))return a}return new ValidationResult(ValidationStatus.Ok)};return b}(),IllegalCharactersValidator=function(){function b(b){this.illegalCharacters=b}b.prototype.validateFile=function(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'file' cannot be null or undefined");if(objectState.isNullOrUndefined(b.name))return new ValidationResult(ValidationStatus.Inconclusive);
if(objectState.isNullOrUndefined(this.illegalCharacters)||0===this.illegalCharacters.length)return new ValidationResult(ValidationStatus.Ok);b=this.getInvalidCharactersFromFilename(b.name);return 0<b.length?new ValidationResult(ValidationStatus.FilenameContainsIllegalCharacters,b):new ValidationResult(ValidationStatus.Ok)};b.prototype.getInvalidCharactersFromFilename=function(b){for(var f=[],c=0,a=this.illegalCharacters;c<a.length;c++){var e=a[c];e&&-1<b.indexOf(e)&&f.push(e)}return f.filter(function(a,
c){return f.indexOf(a)===c})};return b}(),RestrictedFileNameValidator=function(){function b(b){this.restrictedFileNames=b}b.prototype.validateFile=function(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'file' cannot be null or undefined");if(objectState.isNullOrUndefined(b.name))return new ValidationResult(ValidationStatus.Inconclusive);if(objectState.isNullOrUndefined(this.restrictedFileNames)||0===this.restrictedFileNames.length)return new ValidationResult(ValidationStatus.Ok);b=
b.name.split(".")[0];for(var f=0,c=this.restrictedFileNames;f<c.length;f++){var a=c[f];if(a&&b.toUpperCase()===a.toUpperCase())return new ValidationResult(ValidationStatus.FileNameIsIllegal,a)}return new ValidationResult(ValidationStatus.Ok)};return b}(),FolderValidatorFactory=function(){function b(){}b.prototype.createFileValidator=function(b){b=[new NameLengthValidator(b.maxFileNameLength)];return new FolderValidator(b)};b.prototype.createFileValidatorWithLocalizedMessages=function(b,f){var c=this.createFileValidator(b);
return new LocalizedFolderValidator(c,f)};return b}(),LocalizedFolderValidator=function(){function b(b,f){this.validator=b;this.literals=f}b.prototype.validateFolder=function(b){b=this.validator.validateFolder(b);return b.isValid()?new ValidationResult(b.getStatus()):this.createLocalizedValidationResult(b)};b.prototype.createLocalizedValidationResult=function(b){var f=b.getStatus();b=this.getErrorMessage(b);return new ValidationResult(f,b)};b.prototype.getErrorMessage=function(b){switch(b.getStatus()){case ValidationStatus.FileNameIsTooLong:return this.literals.fileNameIsTooLong.replace("{0}",
b.getData());default:return"-"}};return b}(),Components;
(function(b){(function(b){var f=function(){return function(c){var a=this;this.picker=c;this.name="link-to-onedrive-picker";this.viewModel=function(c){return new b.PickerViewModel(a.picker,c.onPickerOpen)};this.template=b.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-onedrive-icon" aria-hidden="true"></div> \n        <span data-bind="text: UploadControlTranslation.oneDrive" class="ccl-uc-source-content-text"></span>')}}();b.LinkToOneDrivePickerComponent=f})(b.Picker||
(b.Picker={}))})(Components||(Components={}));
(function(b){(function(b){var f=function(){function c(){}c.create=function(a,c){return'\n<div class="ccl-uc-source-container">\n    <button class="ccl-uc-source-content" id="'+a+'" data-bind="click: onClick, disable: isLoading() || isLoadingFailed()">\n        <span>\n'+c+'\n        </span>\n    </button>\n    <div class="ccl-uc-source-status">\n        <span aria-hidden="true" class="ili ili-spinner ili-pulse-linear" data-bind="visible: isLoading"></span>\n        <span aria-hidden="true" class="ili ili-exclamation-circle" data-bind="visible: isLoadingFailed"></span>\n    </div>\n</div>'};return c}();
b.Template=f})(b.Picker||(b.Picker={}))})(Components||(Components={}));
(function(b){var d=function(){function b(){}b.isMobile=function(){return window.matchMedia&&window.matchMedia("only screen and (max-width: 568px)").matches};b.toggleTopFrameAndMobileOverlay=function(c){b.sendMessageToTopFrame(window.parent,c?"collapseContentAreaFrame":"expandContentAreaFrame");b.sendMessageToTopFrame(window.parent,"setIframeDefaultHeight");$("html").toggleClass($("body").hasClass("h-ios")?"ccl-overlay-modal-has-overlay-ios":"ccl-overlay-modal-has-overlay",!c)};b.sendMessageToTopFrame=
function(c,a){c.postMessage(JSON.stringify({messageName:a}),"*")};return b}();b.UploadControlUtils=d})(Components||(Components={}));
var PickerResult=function(){function b(b,f){this.files=b;this.authToken=f}b.prototype.setOAuthContext=function(b){this.oAuthContext=b};b.prototype.getOAuthContext=function(){return this.oAuthContext};return b}(),FolderBuilder=function(){return function(b,d){var f=this;this.validator=b;this.folderValidator=d;this.buildFolder=function(c){var a=null,b=[];c.forEach(function(c){var d=f.getFolderFromRelativePath(c.relativePath,b);null===a&&(a=b[0]);!objectState.isNullOrUndefined(d)&&objectState.isNullOrUndefined(d.error)&&
f.processFile(c,d)});return a};this.getFolderFromRelativePath=function(c,a){var b=f.getPathOfParentFolder(c),d=f.getFolderForPath(b,a);d||(d=f.createNewFolder(b,a));return d};this.createNewFolder=function(c,a){var b=f.getFolderName(c),b=new Folder(b,c);f.validateFolder(b);var d=f.getParentFolder(c,a);d&&d.folders.push(b);a.push(b);return b};this.getParentFolder=function(c,a){var b=f.getPathOfParentFolder(c);if(!b)return null;var d=f.getFolderForPath(b,a);d||(d=f.createNewFolder(b,a));return d};this.processFile=
function(c,a){var b=new FileInFolder(c);f.validateFile(b);a.files.push(b)};this.getFolderForPath=function(c,a){var b=a.filter(function(a){return a.path===c});return b&&0!==b.length?b[0]:null};this.getFolderName=function(c){var a=c.lastIndexOf("/");return c.substring(a+1,c.length)};this.getPathOfParentFolder=function(c){var a=c.lastIndexOf("/");return-1===a?null:c.substring(0,a)};this.validateFile=function(c){var a=f.validator.validateFile(c.result);a.isValid()||(c.error=a.getData())};this.validateFolder=
function(c){var a=f.folderValidator.validateFolder(c);a.isValid()||(c.error=a.getData())};contract.require(!objectState.isNullOrUndefined(this.validator),"'fileResultValidator' is not defined");contract.require(!objectState.isNullOrUndefined(this.folderValidator),"'folderValidator' is not defined")}}(),FolderController=function(){return function(b,d,f,c){var a=this;this.pickers=b;this.folderSenderFactory=d;this.folderBuilder=f;this.actionQueue=c;this.subscribe=function(c){a.callbacks=c};this.initializePickers=
function(){a.pickers.forEach(function(c){a.initPickerCallback(c)})};this.initPickerCallback=function(c){var b=function(){},b=new PickerCallback(b,b,a.folderSelected,b);c.subscribe(b)};this.uploadCompleted=function(c,b){c.markAsCompleted();c.onRemoveCallback=function(){a.fileRemoved(c)};c.isRemoveAllowed(!0);a.allFilesinFolderInvalid(b)?a.signalError(c):(a.showWarningIfFolderContainsAnyError(c,b),c.metadata=b.getFolderMetadata(),a.callbacks.onActionSuccess(c.metadata))};this.fileRemoved=function(c){a.callbacks.onFileRemoved(c.metadata)};
this.allFilesinFolderInvalid=function(a){return 0===a.getFilesWithoutValidationErrors().length};this.signalError=function(c){c.setFolderError();a.callbacks.onActionError({},UploadControlTranslation.someFilesInThatFolderCannotBeUploaded)};this.showWarningIfFolderContainsAnyError=function(a,c){c.isAnyErrorInFolder()&&a.setFolderWarning()};this.uploadProgressed=function(a,c){a.setProgress(c)};this.abortSucceeded=function(c){a.callbacks.onActionAborted(c.metadata)};this.folderSelected=function(c){var b=
a.folderBuilder.buildFolder(c.files),d=Uploaders.FileList.Model.FileItem.buildItemForFolder(b.name);a.callbacks.onFilesSelected([d]);if(a.allFilesinFolderInvalid(b))a.signalError(d);else{a.showWarningIfFolderContainsAnyError(d,b);var f=function(){a.send(d,b)};d.onRemoveCallback=function(){a.actionQueue.remove(f);a.fileRemoved(d)};a.actionQueue.register(f)}};this.send=function(c,b){var d=a.folderSenderFactory.build().send(b,function(b){return a.uploadProgressed(c,b)},function(b){a.actionQueue.signalDone();
a.uploadCompleted(c,b)});c.onRemoveCallback=function(){a.actionQueue.signalDone();d.abort(function(){return a.abortSucceeded(c)})}};contract.require(!objectState.isNullOrUndefined(this.pickers),"'pickers' is not defined");contract.require(!objectState.isNullOrUndefined(this.folderSenderFactory),"'senderFactory' is not defined");contract.require(!objectState.isNullOrUndefined(this.folderBuilder),"'folderBuilder' is not defined");contract.require(!objectState.isNullOrUndefined(this.actionQueue),"'actionQueue' is not defined");
this.initializePickers()}}(),PickerFileResultValidatorLiterals=function(){function b(b){this.fileExtensionNotAllowed=b.FileExtensionNotAllowed;this.fileTooBig=b.FileTooBig;this.fileTooSmall=b.FileTooSmall;this.invalidCharactersXInFileName=b.InvalidCharactersXInFileName;this.unableToOpenFile=b.UnableToOpenFile;this.invalidFirstPartOfFileName=b.InvalidFirstPartOfFileName;this.fileNameIsTooLong=b.FileNameIsTooLong;this.mb=b.Mb;this.kb=b.Kb;this.fileIsEmpty=b.FileIsEmpty}b.prototype.getExcededSizeLimitTranslation=
function(b){return this.fileTooBig.replace("{0}",this.getFormattedFileSize(b))};b.prototype.getBelowSizeLimitTranslation=function(b){return this.fileTooSmall.replace("{0}",this.getFormattedFileSize(b))};b.prototype.getFormattedFileSize=function(b){return"number"!==typeof b?"":1048576<=b?(b/1048576).toFixed(2)+" "+this.mb:(b/1024).toFixed(2)+" "+this.kb};return b}(),LocalFilePicker=function(){function b(b,f,c,a){var e=this;this.browserSniffer=f;this.fileNameExtractor=c;this.jq=a;this.subscriberCallbacks=
[];this.open=function(){var a=e.jq(e.getInputMarkup());a.on("change",function(){e.handleFileSelectedInInput(a,a[0])});a.click()};this.subscribe=function(a){if(a.onPickerInitSuccess)a.onPickerInitSuccess();e.subscriberCallbacks.push(a)};this.enableMultipleFilesSelecting=function(){e.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){e.allowToSelectMultipleFiles=!1};this.handleFileSelectedInInput=function(a,c){var b;b=e.browserSniffer.isInternetExplorer9()?e.createResultWithInputElement(a,
c):e.createResultWithFileList(a,c);for(var d=0,f=e.subscriberCallbacks;d<f.length;d++){var n=f[d];if(n.onFileSelected)n.onFileSelected(new PickerResult(b))}};contract.require(!objectState.isNullOrUndefined(f),"This picker requires browserSniffer to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(c),"This picker requires fileNameExtractor to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(a),"This picker requires jquery to be passed. Please provide it.");
contract.require(!objectState.isNullOrUndefined(b),"This picker requires settings to be passed. Please provide it.");this.allowToSelectMultipleFiles=b.allowToSelectMultipleFiles}b.prototype.getInputMarkup=function(){return this.allowToSelectMultipleFiles?'<input type="file" multiple="multiple" />':'<input type="file" />'};b.prototype.createResultWithInputElement=function(b,f){var c=this.fileNameExtractor.getFileName(f.value);return[PickerFileResult.createLocalPickerFileResultWithInput(b,c)]};b.prototype.createResultWithFileList=
function(b,f){return[].slice.call(f.files).map(function(c){return PickerFileResult.createLocalPickerFileResult(c)})};return b}(),DropzonePicker=function(){function b(b,f){var c=this;this.fileValidator=f;this.subscriberCallbacks=[];this.currentDragEnterCount=0;this.enableMultipleFilesSelecting=function(){c.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){c.allowToSelectMultipleFiles=!1};this.onFilesDropped=function(a){(c.browserSupportsFileAndDirectoryEntriesApi(a)?c.preparePickerFileResultsUsingFileAndDirectoryEntriesApiAsync(a.items):
c.preparePickerFileResultsUsingFileListAsync(a.files)).then(c.handlePickerFileResults)};this.open=function(){};this.isEnabled=function(){return!0};this.browserSupportsFileAndDirectoryEntriesApi=function(a){return a.items&&0<a.items.length&&(a.items[0].webkitGetAsEntry||a.items[0].getAsEntry)};this.preparePickerFileResultsUsingFileAndDirectoryEntriesApiAsync=function(a){if(!c.allowToSelectMultipleFiles&&1<a.length)return $.Deferred().resolve([]).promise();for(var b=[],d=0;d<a.length;d++)b.push(c.getEntry(a[d]));
if(b.some(function(a){return a.isDirectory}))return $.Deferred().resolve([]).promise();var f=[];b.forEach(function(a){return f.push(c.getFileFromEntryAsync(a))});return $.when.apply($,f).pipe(c.mapFilesToPickerFileResults)};this.getEntry=function(a){return a.webkitGetAsEntry?a.webkitGetAsEntry():a.getAsEntry()};this.getFileFromEntryAsync=function(a){var c=$.Deferred();a.file(function(a){return c.resolve(a)},function(a){return c.reject(a)});return c.promise()};this.mapFilesToPickerFileResults=function(){for(var a=
[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];return a.map(function(a){return PickerFileResult.createLocalPickerFileResult(a)})};this.preparePickerFileResultsUsingFileListAsync=function(a){if(null===a||void 0===a||!c.allowToSelectMultipleFiles&&1<a.length)return $.Deferred().resolve([]).promise();var b=[],d=[].slice.call(a);d.forEach(function(a){b.push(c.fileValidator.isFile(a))});return $.when.apply($,b).pipe(function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return a.some(function(a){return!1===
a})?[]:c.mapFilesToPickerFileResults.apply(c,d)})};this.handlePickerFileResults=function(a){if(0!==a.length)for(var b=0,d=c.subscriberCallbacks;b<d.length;b++){var f=d[b];if(f.onFileSelected)f.onFileSelected(new PickerResult(a))}};contract.require(!objectState.isNullOrUndefined(f),"This picker requires fileValidator to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(b),"This picker requires settings to be passed. Please provide them.");this.allowToSelectMultipleFiles=
b.allowToSelectMultipleFiles}b.prototype.subscribe=function(b){if(b.onPickerInitSuccess)b.onPickerInitSuccess();this.subscriberCallbacks.push(b)};return b}(),FileValidator=function(){function b(){var b=this;this.isFile=function(f){return b.attemptToReadFile(f)}}b.prototype.attemptToReadFile=function(b){var f=$.Deferred(),c=new FileReader;c.onprogress=function(){c.abort();f.resolve(!0)};c.onerror=function(){f.resolve(!1)};c.readAsArrayBuffer(b.slice(0,5));return f.promise()};return b}(),FolderPicker=
function(){function b(b){var f=this;this.jq=b;this.subscriberCallbacks=[];this.open=function(){var c=f.jq('<input type="file" webkitdirectory="" directory="" />');c.on("change",function(){f.fileSelectedInInput(c,c[0])});c.click()};this.subscribe=function(c){if(c.onPickerInitSuccess)c.onPickerInitSuccess();f.subscriberCallbacks.push(c)};this.enableMultipleFilesSelecting=function(){f.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){f.allowToSelectMultipleFiles=!1};this.fileSelectedInInput=
function(c,a){var b=f.createResultWithFileList(c,a);if(0!==b.length)for(var d=0,h=f.subscriberCallbacks;d<h.length;d++){var k=h[d];if(k.onFileSelected)k.onFileSelected(new PickerResult(b))}};contract.require(!objectState.isNullOrUndefined(b),"This picker requires jquery to be passed. Please provide it.")}b.prototype.createResultWithFileList=function(b,f){var c=this;return[].slice.call(f.files).map(function(a){return PickerFileResult.createFolderPickerFileResultWithRelativePath(a,c.getRelativePath(a,
""))})};b.prototype.getRelativePath=function(b,f){return b.webkitRelativePath||b.relativePath||f||""};return b}(),FileNameFromPathExtractor=function(){function b(){}b.prototype.getFileName=function(b){if(null===b)return null;if("undefined"!==typeof b){if("string"!==typeof b)throw"Argument filePath is of type other than string";return b.replace(/[\s\S]*[\\/]/,"")}};return b}(),DropboxPicker=function(){return function(b,d,f){var c=this;this.settings=b;this.dropbox=d;this.dropboxNotAvailableErrorTranslation=
f;this.subscriberCallbacks=[];this.subscribe=function(a){c.attemptToRaiseInitCallback(a);c.subscriberCallbacks.push(a)};this.enableMultipleFilesSelecting=function(){c.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){c.allowToSelectMultipleFiles=!1};this.open=function(){if(!c.settings.readOnlyMode&&c.isInitializationSuccessful()){var a=c.getDropboxOptions();c.dropbox.choose(a)}};this.initializeWithScript=function(){asyncDependenciesResolver.loadScriptAsync({url:"https://www.dropbox.com/static/api/2/dropins.js",
attributes:{id:"dropboxjs","data-app-key":c.settings.dropboxAppKey},timeoutInMilliseconds:3E4}).done(function(){return c.initStatus=PickerInitStatus.Success}).fail(function(){return c.initStatus=PickerInitStatus.Error}).always(c.notifySubscribersAboutInitialization)};this.notifySubscribersAboutInitialization=function(){for(var a=0,b=c.subscriberCallbacks;a<b.length;a++)c.attemptToRaiseInitCallback(b[a])};this.attemptToRaiseInitCallback=function(a){if(c.isInitializationSuccessful()&&a.onPickerInitSuccess)a.onPickerInitSuccess();
if(c.initStatus===PickerInitStatus.Error&&a.onPickerInitFailure)a.onPickerInitFailure(new PickerInitFailureEventArgs(PickerInitFailureReason.ExternalServiceNotAvailable,c.dropboxNotAvailableErrorTranslation,UploadControlTranslation.dropbox))};this.isInitializationSuccessful=function(){return c.initStatus===PickerInitStatus.Success};this.getDropboxOptions=function(){return{success:c.onDropboxFileSelected,cancel:c.onDropboxFileSelectionCanceled,linkType:"direct",multiselect:c.allowToSelectMultipleFiles}};
this.onDropboxFileSelected=function(a){a=a.map(function(a){return PickerFileResult.createExternalSourcePickerFileResult(a.link,a.name,a.bytes,SourceType.Dropbox)});for(var b=0,d=c.subscriberCallbacks;b<d.length;b++){var f=d[b];if(f.onFileSelected)f.onFileSelected(new PickerResult(a))}};this.onDropboxFileSelectionCanceled=function(){for(var a=0,b=c.subscriberCallbacks;a<b.length;a++){var d=b[a];if(d.onFileSelectionCanceled)d.onFileSelectionCanceled()}};if(objectState.isNullOrUndefined(this.settings))throw"DropboxPicker requires settings to be passed. Please provide them.";
if(objectState.isNullOrUndefined(this.dropbox))throw"DropboxPicker requires dropbox api to be passed. Please provide a handle to it.";if(objectState.isNullOrUndefined(this.dropboxNotAvailableErrorTranslation))throw"DropboxPicker requires error translation to be passed. Please provide it.";this.allowToSelectMultipleFiles=this.settings.allowToSelectMultipleFiles;window.addEventListener("load",this.initializeWithScript)}}(),DropboxWrapper=function(){function b(){this.isAvailable=function(){try{return!objectState.isNullOrUndefined(Dropbox)}catch(b){return!1}}}
b.prototype.choose=function(b){Dropbox.choose(b)};return b}(),Url=function(){return function(b){var d=this;this.value=b;this.getParamValue=function(b){for(var c=[],a,e=d.value.slice(d.value.indexOf("?")+1).split("&"),g=0;g<e.length;g++)a=e[g].split("="),c.push(a[0]),c[a[0]]=a[1];return c[b]};this.appendOrUpdateParam=function(b,c){var a=new RegExp("([?&])"+b+"=.*?(&|$)","i"),e=-1!==d.value.indexOf("?")?"&":"?";d.value.match(a)?d.value=d.value.replace(a,"$1"+b+"="+c+"$2"):d.value=d.value+e+b+"="+c}}}();
function GuidFactory(){return{newGuid:function(){function b(b){var f=(Math.random().toString(16)+"000000000").substr(2,8);return b?"-"+f.substr(0,4)+"-"+f.substr(4,4):f}return b()+b(!0)+b(!0)+b()}}}
var guidFactory=GuidFactory(),PickerInPopup=function(){function b(){var d=this;this.popupWidth=660;this.popupHeight=552;this.pickerWindow=null;this.open=function(){d.pickerWindowIsAlreadyOpened()?d.pickerWindow.focus():d.pickerWindow=window.open(d.getPickerUrlWithTarget(),d.getInitialPopupTitle(),d.getPopupWindowSettings())};this.listenForPostMessages=function(){window.addEventListener("message",d.onPostMessageReceived)};this.pickerWindowIsAlreadyOpened=function(){return d.pickerWindow&&!d.pickerWindow.closed};
this.getPickerUrlWithTarget=function(){var f=new Url(d.getPickerUrl());if(f.getParamValue(b.target))throw"You cannot set query parameter: ["+b.target+"] in getPickerUrl function.";f.appendOrUpdateParam(b.target,encodeURI(d.pickerIdentifier));return f.value};this.getPopupWindowSettings=function(){var b=d.getPopupCoordinates();return"width="+b[0]+", height="+b[1]+", left="+b[2]+", top="+b[3]+", toolbar = no, scrollbars = no, status = no, menubars = no, resizable = yes"};this.getPopupCoordinates=function(){return[d.popupWidth,
d.popupHeight,d.getWindowLeftCoordinate(),d.getWindowTopCoordinate()]};this.getWindowLeftCoordinate=function(){return window.screenX+(window.outerWidth-d.popupWidth)/2};this.getWindowTopCoordinate=function(){return(window.screenY+window.outerHeight-d.popupHeight)/2};this.onPostMessageReceived=function(b){d.isPostMessageForUs(b)&&d.processPostMessage(b)};this.isPostMessageForUs=function(f){return f&&f.data&&f.data[b.target]===d.pickerIdentifier};this.pickerIdentifier=guidFactory.newGuid();this.listenForPostMessages()}
b.target="target";return b}(),PickerPurpose;(function(b){b[b.Upload=0]="Upload";b[b.LinkToCloud=1]="LinkToCloud"})(PickerPurpose||(PickerPurpose={}));
var PickerModeSerializer=function(){function b(){}b.prototype.serialize=function(b){return encodeURI(JSON.stringify(b))};b.prototype.deserialize=function(b){return JSON.parse(decodeURI(b))};return b}(),GooglePickerInPopup=function(b){function d(d,c,a,e,g){var h=this;b.call(this);this.settings=d;this.browserSniffer=c;this.browserNotSupportedErrorTranslation=a;this.pickerModeSerializer=e;this.mode=g;this.subscriberCallbacks=[];this.subscribe=function(a){h.raiseInitCallback(a);h.subscriberCallbacks.push(a)};
this.enableMultipleFilesSelecting=function(){h.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){h.mode.allowToSelectMultipleFiles=!1};this.isProxyIframeRequired=function(){return h.browserSniffer.isInternetExplorerAnyVersion()};this.ensureProxyIframeIsRendered=function(){if(!document.getElementById("cross_communication_proxy")){var a=h.prepareIframe("cross_communication_proxy");document.body.appendChild(a)}};this.prepareIframe=function(a){var c=document.createElement("iframe");
c.id=a;c.style.display="none";c.src=h.settings.crossCommunicationProxyUrl;return c};this.raiseInitCallback=function(a){if(h.browserSniffer.isInternetExplorer9()){var c=new PickerInitFailureEventArgs(PickerInitFailureReason.BrowserNotSupported,h.browserNotSupportedErrorTranslation,UploadControlTranslation.googleDrive);a.onPickerInitFailure(c)}else a.onPickerInitSuccess()};this.shouldProcessPostMessage=function(a){return a.origin===h.settings.pickerDomain};if(objectState.isNullOrUndefined(this.settings))throw"GooglePickerInPopup requires settings to be passed. Please provide them.";
if(objectState.isNullOrUndefined(this.browserSniffer))throw"GooglePickerInPopup requires browserSniffer to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.browserNotSupportedErrorTranslation))throw"GooglePickerInPopup requires browserNotSupportedErrorTranslation to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.pickerModeSerializer))throw"GooglePickerInPopup requires modeSerializer to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.mode))throw"GooglePickerInPopup requires mode to be passed. Please provide it.";
this.isProxyIframeRequired()&&this.ensureProxyIframeIsRendered()}__extends(d,b);d.prototype.processPostMessage=function(b){if(this.shouldProcessPostMessage(b)){var c=b.data.files.map(function(a){return PickerFileResult.createExternalSourcePickerFileResult(a.url,a.name,a.size,SourceType.Google,a.mimeType,a.id)}),c=new PickerResult(c);b=this.getOAuthContext(b);objectState.isNullOrUndefined(b)||c.setOAuthContext(b);b=0;for(var a=this.subscriberCallbacks;b<a.length;b++){var d=a[b];if(d.onFileSelected)d.onFileSelected(c)}}};
d.prototype.getOAuthContext=function(b){return objectState.isNullOrUndefined(b.data.oAuthContext)?null:b.data.oAuthContext};d.prototype.getPickerUrl=function(){var b=new Url(this.settings.pickerUrl);b.appendOrUpdateParam("mode",this.pickerModeSerializer.serialize(this.mode));return b.value};d.prototype.getInitialPopupTitle=function(){return"Google Drive"};return d}(PickerInPopup),OneDrivePicker=function(b){function d(d,c,a,e,g){var h=this;void 0===g&&(g={purpose:PickerPurpose.Upload,allowToSelectMultipleFiles:!1,
allowCollaboration:!1});b.call(this);this.settings=d;this.browserSniffer=c;this.browserNotSupportedErrorTranslation=a;this.modeSerializer=e;this.mode=g;this.subscriberCallbacks=[];this.subscribe=function(a){h.raiseInitCallback(a);h.subscriberCallbacks.push(a)};this.enableMultipleFilesSelecting=function(){h.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){h.mode.allowToSelectMultipleFiles=!1};this.isProxyIframeRequired=function(){return h.browserSniffer.isInternetExplorerAnyVersion()&&
h.settings.CrossCommunicationProxyUrl};this.ensureProxyIframeIsRendered=function(){if(!document.getElementById("onedrive_proxy")){var a=h.prepareIframe("onedrive_proxy");document.body.appendChild(a)}};this.prepareIframe=function(a){var c=document.createElement("iframe");c.id=a;c.style.display="none";c.src=h.settings.CrossCommunicationProxyUrl;return c};this.raiseInitCallback=function(a){if(h.browserSniffer.isInternetExplorer9()){var c=new PickerInitFailureEventArgs(PickerInitFailureReason.BrowserNotSupported,
h.browserNotSupportedErrorTranslation,UploadControlTranslation.oneDrive);a.onPickerInitFailure(c)}else a.onPickerInitSuccess()};if(objectState.isNullOrUndefined(this.settings))throw"OneDrivePicker requires settings to be passed. Please provide them.";if(objectState.isNullOrUndefined(this.browserSniffer))throw"OneDrivePicker requires browserSniffer to be passed. Please provide a handle to it.";if(objectState.isNullOrUndefined(this.browserNotSupportedErrorTranslation))throw"OneDrivePicker requires browserNotSupportedErrorTranslation to be passed. Please provide it.";
if(objectState.isNullOrUndefined(this.modeSerializer))throw"OneDrivePicker requires modeSerializer to be passed. Please provide it.";this.isProxyIframeRequired()&&this.ensureProxyIframeIsRendered()}__extends(d,b);d.prototype.processPostMessage=function(b){if(b.origin===this.settings.PickerDomain){var c=b.data.files.map(function(a){return PickerFileResult.createExternalSourcePickerFileResult(a.url,a.name,a.size,a.sourceType,a.mimeType,a.id)}),c=new PickerResult(c);c.setOAuthContext(b.data.oAuthContext);
b=0;for(var a=this.subscriberCallbacks;b<a.length;b++){var d=a[b];if(d.onFileSelected)d.onFileSelected(c)}}};d.prototype.getPickerUrl=function(){var b=new Url(this.settings.PickerUrl);b.appendOrUpdateParam("mode",this.modeSerializer.serialize(this.mode));return b.value};d.prototype.getInitialPopupTitle=function(){return"OneDrive"};d.create=function(b,c,a,e){return new d(b,c,"",a,e)};return d}(PickerInPopup);
(function(b){(function(b){var f=function(){return function(c,a){var b=this;this.picker=c;this.onPickerOpen=a;this.onClick=function(){b.onPickerOpen();b.picker.open()};this.handlePickerInitialization=function(){b.isLoading=ko.observable(!0);b.isLoadingFailed=ko.observable(!1);b.picker.subscribe(new PickerCallback(b.onPickerInitSuccess,b.onPickerInitFailure,function(){},function(){}))};this.onPickerInitSuccess=function(){b.isLoading(!1)};this.onPickerInitFailure=function(){b.isLoading(!1);b.isLoadingFailed(!0)};
contract.require(!objectState.isNullOrUndefined(c),"This ViewModel requires picker to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(a),"This ViewModel requires onPickerOpen to be passed. Please provide it.");this.handlePickerInitialization()}}();b.PickerViewModel=f})(b.Picker||(b.Picker={}))})(Components||(Components={}));
(function(b){(function(b){var f=function(){return function(c){var a=this;this.picker=c;this.name="local-picker";this.viewModel=function(c){return new b.PickerViewModel(a.picker,c.onPickerOpen)};this.template=b.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ili ili-laptop" aria-hidden="true"></div>\n        <span data-bind="text: UploadControlTranslation.computerOrDevice" class="ccl-uc-source-content-text"></span>')}}();b.LocalPickerComponent=f})(b.Picker||(b.Picker={}))})(Components||
(Components={}));
(function(b){(function(b){(function(b){var c=function(){function a(a){var c=this;this.picker=a;this.css=ko.observable("");this.title=UploadControlTranslation.addFiles;this.caption=UploadControlTranslation.orSimplyDropThemHere;this.currentDragEnterCount=0;this.showCaption=function(){return BrowserSniffer().isAnyMobile()?!1:!0};this.dropzoneDragOver=function(a,b){var d=b.originalEvent;if(!c.isDraggingFiles(d))return!1;d.stopPropagation();d.preventDefault();c.picker.isEnabled()?d.dataTransfer.dropEffect="copy":
d.dataTransfer.dropEffect="none";return!0};this.dropzoneDrop=function(a,b){var d=b.originalEvent;if(!c.isDraggingFiles(d)||!c.picker.isEnabled())return!1;c.picker.onFilesDropped(d.dataTransfer);return!0};this.documentDragEnter=function(a){c.isDraggingFiles(a)&&(a.preventDefault(),c.currentDragEnterCount++,c.css("highlight"))};this.documentDragOver=function(a){c.isDraggingFiles(a)&&(a.preventDefault(),a.dataTransfer.dropEffect="none")};this.documentDrop=function(a){c.isDraggingFiles(a)&&(a.preventDefault(),
c.currentDragEnterCount=0,c.css(""))};this.documentDragLeave=function(a){c.isDraggingFiles(a)&&(c.currentDragEnterCount--,0===c.currentDragEnterCount&&c.css(""))};this.isDraggingFiles=function(a){if(a.dataTransfer.types)for(var c=0;c<a.dataTransfer.types.length;c++)if("Files"===a.dataTransfer.types[c])return!0;return!1};contract.require(!objectState.isNullOrUndefined(a),"This ViewModel requires picker to be passed. Please provide them.");this.eventHandlers={drop:this.dropzoneDrop,dragover:this.dropzoneDragOver};
this.subscribeToDocumentDragDropEvents()}a.prototype.subscribeToDocumentDragDropEvents=function(){document.addEventListener("dragenter",this.documentDragEnter,!1);document.addEventListener("dragover",this.documentDragOver,!1);document.addEventListener("drop",this.documentDrop,!1);document.addEventListener("dragleave",this.documentDragLeave,!1)};return a}();b.DropzoneViewModel=c})(b.Dropzone||(b.Dropzone={}))})(b.Picker||(b.Picker={}))})(Components||(Components={}));
(function(b){(function(b){(function(b){var c=function(){return function(a){this.picker=a;this.name="dropzone-picker";this.viewModel={instance:new b.DropzoneViewModel(this.picker)};this.template='\n<button class="ccl-uc-dropzone-container" data-bind="event: eventHandlers">\n    <div class="ccl-uc-dropzone" data-bind="css: css">\n        <div id="ccl-uc-dropzone-text-container">\n            <div aria-hidden="true" class="ili ili-file"></div>\n            <span id="ccl-uc-dropzone-text" data-bind="text: title"></span>\n        </div>\n        <span id="ccl-uc-dropzone-caption" data-bind="text: caption, visible: showCaption()"></span>\n    </div>\n</button>'}}();
b.DropzonePickerComponent=c})(b.Dropzone||(b.Dropzone={}))})(b.Picker||(b.Picker={}))})(Components||(Components={}));
(function(b){(function(b){var f=function(){return function(c){var a=this;this.picker=c;this.name="dropbox-picker";this.viewModel=function(c){return new b.PickerViewModel(a.picker,c.onPickerOpen)};this.template=b.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-dropbox-icon" aria-hidden="true"></div>\n        <span data-bind="text: UploadControlTranslation.dropbox" class="ccl-uc-source-content-text"></span>')}}();b.DropboxPickerComponent=f})(b.Picker||(b.Picker={}))})(Components||
(Components={}));
(function(b){(function(b){var f=function(){return function(c){var a=this;this.picker=c;this.name="google-picker";this.viewModel=function(c){return new b.PickerViewModel(a.picker,c.onPickerOpen)};this.template=b.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-google-icon" aria-hidden="true"></div>\n        <span data-bind="text: UploadControlTranslation.googleDrive" class="ccl-uc-source-content-text"></span>')}}();b.GooglePickerComponent=f})(b.Picker||(b.Picker=
{}))})(Components||(Components={}));
(function(b){(function(b){var f=function(){return function(c){var a=this;this.picker=c;this.name="onedrive-picker";this.viewModel=function(c){return new b.PickerViewModel(a.picker,c.onPickerOpen)};this.template=b.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-onedrive-icon" aria-hidden="true"></div> \n        <span data-bind="text: UploadControlTranslation.oneDrive" class="ccl-uc-source-content-text"></span>')}}();b.OneDrivePickerComponent=f})(b.Picker||(b.Picker=
{}))})(Components||(Components={}));
(function(b){(function(b){var f=function(){return function(c){var a=this;this.picker=c;this.name="link-to-google-drive-picker";this.viewModel=function(c){return new b.PickerViewModel(a.picker,c.onPickerOpen)};this.template=b.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-google-icon" aria-hidden="true"></div>\n        <span data-bind="text: UploadControlTranslation.googleDrive" class="ccl-uc-source-content-text"></span>')}}();b.LinkToGoogleDrivePickerComponent=
f})(b.Picker||(b.Picker={}))})(Components||(Components={}));
(function(b){(function(b){var f=function(){return function(c){var a=this;this.picker=c;this.name="folder-picker";this.viewModel=function(c){return new b.PickerViewModel(a.picker,c.onPickerOpen)};this.template=b.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-fl-item-details-folder-icon" aria-hidden="true"></div> \n        <span data-bind="text: UploadControlTranslation.folder" class="ccl-uc-source-content-text"></span>')}}();b.FolderPickerComponent=f})(b.Picker||(b.Picker=
{}))})(Components||(Components={}));
var PickerObjectsFactory=function(){function b(b,f){var c=this;this.settings=b;this.translations=f;this.getGoogleDriveSettings=function(){return{pickerDomain:c.settings.GoogleDriveUploadSettings.PickerDomain,pickerUrl:c.settings.GoogleDriveUploadSettings.PickerUrl,crossCommunicationProxyUrl:c.settings.GoogleDriveUploadSettings.CrossCommunicationProxyUrl}};this.getUploadPickerMode=function(){return{allowToSelectMultipleFiles:c.settings.AllowToSelectMultipleFiles,purpose:PickerPurpose.Upload}};this.getLinkToCloudPickerMode=
function(){return{allowToSelectMultipleFiles:c.settings.AllowToSelectMultipleFiles,purpose:PickerPurpose.LinkToCloud}}}b.prototype.build=function(){var b=[],f=[],c=[],a=[];if(this.settings.EnableLocalUpload){var e=this.getPickerSettings(),e=new LocalFilePicker(e,BrowserSniffer(),new FileNameFromPathExtractor,$);b.push(e);e=new Components.Picker.LocalPickerComponent(e);ko.components.register(e.name,e);a.push(this.getUploadPickerComponentInfo(e.name));this.settings.LocalUploadSettings.AllowDragAndDrop&&
(e=this.getPickerSettings(),e=new DropzonePicker(e,new FileValidator),b.push(e),e=new Components.Picker.Dropzone.DropzonePickerComponent(e),ko.components.register(e.name,e));this.settings.AllowToUploadFolders&&browserSniffer.isDirectoryUploadSupported()&&!browserSniffer.isAnyMobile()&&(e=new FolderPicker($),c.push(e),e=new Components.Picker.FolderPickerComponent(e),ko.components.register(e.name,e),a.push(this.getUploadPickerComponentInfo(e.name)))}this.settings.EnableUploadFromDropbox&&(e=this.getDropboxPickerSettings(),
e=new DropboxPicker(e,new DropboxWrapper,this.translations.DropboxApiNotAvailable),b.push(e),e=new Components.Picker.DropboxPickerComponent(e),ko.components.register(e.name,e),a.push(this.getUploadPickerComponentInfo(e.name)));this.settings.EnableUploadFromGoogleDrive&&(e=this.getGoogleDriveSettings(),e=new GooglePickerInPopup(e,BrowserSniffer(),this.translations.GoogleBrowserNotSupported,new PickerModeSerializer,this.getUploadPickerMode()),b.push(e),e=new Components.Picker.GooglePickerComponent(e),
ko.components.register(e.name,e),a.push(this.getUploadPickerComponentInfo(e.name)));this.settings.EnableUploadFromOneDrive&&(e=new OneDrivePicker(this.getOneDrivePickerSettings(),BrowserSniffer(),this.translations.OneDriveBrowserNotSupported,new PickerModeSerializer,this.getUploadPickerMode()),b.push(e),e=new Components.Picker.OneDrivePickerComponent(e),ko.components.register(e.name,e),a.push(this.getUploadPickerComponentInfo(e.name)));this.settings.EnableLinkingToGoogleDrive&&(e=this.getGoogleDriveSettings(),
e=new GooglePickerInPopup(e,BrowserSniffer(),this.translations.GoogleBrowserNotSupported,new PickerModeSerializer,this.getLinkToCloudPickerMode()),f.push(e),e=new Components.Picker.LinkToGoogleDrivePickerComponent(e),ko.components.register(e.name,e),a.push(this.getLinkPickerComponentInfo(e.name)));this.settings.EnableLinkingFromOneDrive&&(e=this.getOneDrivePickerSettings(),e=new OneDrivePicker(e,BrowserSniffer(),this.translations.OneDriveBrowserNotSupported,new PickerModeSerializer,this.getLinkToCloudPickerMode()),
f.push(e),e=new Components.Picker.LinkToOneDrivePickerComponent(e),ko.components.register(e.name,e),a.push(this.getLinkPickerComponentInfo(e.name)));return[b,f,c,a]};b.prototype.getUploadPickerComponentInfo=function(b){return{componentName:b,purpose:PickerPurpose.Upload}};b.prototype.getLinkPickerComponentInfo=function(b){return{componentName:b,purpose:PickerPurpose.LinkToCloud}};b.prototype.getDropboxPickerSettings=function(){return{dropboxAppKey:this.settings.DropboxUploadSettings.DropboxAppKey,
allowToSelectMultipleFiles:this.settings.AllowToSelectMultipleFiles,readOnlyMode:!1}};b.prototype.getOneDrivePickerSettings=function(){return{PickerDomain:this.settings.OneDriveUploadSettings.OneDrivePickerDomain,PickerUrl:this.settings.OneDriveUploadSettings.OneDrivePickerUrl,CrossCommunicationProxyUrl:this.settings.OneDriveUploadSettings.CrossCommunicationProxyUrl}};b.prototype.getPickerSettings=function(){return{allowToSelectMultipleFiles:this.settings.AllowToSelectMultipleFiles}};return b}(),
LegacyGenericUploaderLiterals=function(){function b(b){this.maxFileSizeForUpload=b.MaxFileSizeForUpload;this.files=b.Files;this.fileExtensionNotAllowed=b.FileExtensionNotAllowed;this.fileTooBig=b.FileTooBig;this.fileTooSmall=b.FileTooSmall;this.invalidCharactersXInFileName=b.InvalidCharactersXInFileName;this.unableToOpenFile=b.UnableToOpenFile;this.invalidFirstPartOfFileName=b.InvalidFirstPartOfFileName;this.mb=b.Mb;this.kb=b.Kb;this.fileIsEmpty=b.FileIsEmpty;this.fileNameIsTooLong=b.FileNameIsTooLong}
b.prototype.getExcededSizeLimitTranslation=function(b){return this.fileTooBig.replace("{0}",this.getFormattedFileSize(b))};b.prototype.getBelowSizeLimitTranslation=function(b){return this.fileTooSmall.replace("{0}",this.getFormattedFileSize(b))};b.prototype.getFormattedFileSize=function(b){return"number"!==typeof b?"":1048576<=b?(b/1048576).toFixed(2)+" "+this.mb:(b/1024).toFixed(2)+" "+this.kb};return b}(),uploaderFileStatus;
(function(b){b[b.added=1]="added";b[b.inProgress=2]="inProgress";b[b.success=3]="success";b[b.error=4]="error"})(uploaderFileStatus||(uploaderFileStatus={}));function AjaxUploaderCommon(){return{getRelativePath:function(b,d){return browserSniffer.isFirefox()?b.relativePath||d||"":b.webkitRelativePath||b.relativePath||d||""}}}
var auCommon=AjaxUploaderCommon(),UploaderFileItem=function(){function b(b,f){var c=this;this.fileData=b;this.literals=f;this.getProgressSafe=function(a){return a||0};this.hasAction=ko.observable(!1);this.preview=ko.observable(null);this.progress=ko.observable(null);this.progressText=ko.pureComputed(function(){var a=String(100*c.getProgressSafe(c.progress()));return parseInt(a,10)+"%"});this.status=ko.observable(uploaderFileStatus.added);this.isActionEnabled=ko.observable(!0);this.isActionVisible=
ko.observable(!0);this.errorMessage=ko.observable(null);this.messageColumnCss=ko.pureComputed(function(){switch(c.status()){case uploaderFileStatus.error:return"error";case uploaderFileStatus.inProgress:return"progress";default:return"empty-col"}});this.buttonColumnCss=ko.pureComputed(function(){var a="";switch(c.status()){case uploaderFileStatus.success:a+="delete";break;default:a+="cancel"}c.isActionEnabled()||(a+=" transparent");return a});this.isError=ko.pureComputed(function(){return c.status()===
uploaderFileStatus.error});this.isInProgress=ko.pureComputed(function(){return c.status()===uploaderFileStatus.inProgress});this.isProgressSet=ko.pureComputed(function(){return objectState.isNumber(c.progress())});this.useDefaultPreview=ko.pureComputed(function(){return null===c.preview()});this.name=this.fileData.name;this.size=this.fileData.size;this.fileId=this.fileData.fileId;this.sizeText=this.literals.getFormattedFileSize(b.size);this.action=null}b.prototype.emptyAction=function(){return!1};
return b}(),UploaderFileList=function(){return function(b,d,f){var c=this;this.fileListElement=b;this.fileItemFactory=d;this.literals=f;this.findFileById=function(a){return ko.utils.arrayFirst(c.files(),function(c){return c.fileId===a})};this.setFileStatus=function(a,b,d){a=c.findFileById(a);objectState.isNullOrUndefined(a)||(a.status(b),c.prepareActionCallback(a,d))};this.prepareActionCallback=function(a,c){c?(a.action=function(){c(a.fileId)},a.hasAction(!0)):null===c&&(a.action=null,a.hasAction(!1))};
this.setErrorMessage=function(a,b){var d=c.findFileById(a);objectState.isNullOrUndefined(d)||(objectState.isNullOrWhitespace(b)&&(b=c.literals.unknown),d.errorMessage(b))};this.addFile=function(a,b){c.removeFiles();var d=c.fileItemFactory.create(a,c.literals);c.prepareActionCallback(d,b);c.files.push(d)};this.removeFile=function(a){c.files.remove(function(c){return c.fileId===a})};this.removeFiles=function(){c.files.removeAll()};this.setDefaultFileProgress=function(a){c.updateFileProgress(a,null)};
this.updateFileProgress=function(a,b){var d=c.findFileById(a);objectState.isNullOrUndefined(d)||d.progress(b)};this.setFileStatusToInProgress=function(a){c.setFileStatus(a,uploaderFileStatus.inProgress)};this.setFileStatusToSuccess=function(a,b){c.setFileStatus(a,uploaderFileStatus.success,b)};this.setFileStatusToError=function(a,b,d){c.setFileStatus(a,uploaderFileStatus.error,d);c.setErrorMessage(a,b)};this.updateFilePreview=function(a,b){var d=c.findFileById(a);objectState.isNullOrUndefined(d)||
d.preview(b)};this.setActionCallback=function(a,b){var d=c.findFileById(a);objectState.isNullOrUndefined(d)||c.prepareActionCallback(d,b)};this.disableAction=function(a){a=c.findFileById(a);objectState.isNullOrUndefined(a)||a.isActionEnabled(!1)};this.enableAction=function(a){a=c.findFileById(a);objectState.isNullOrUndefined(a)||a.isActionEnabled(!0)};this.hideAction=function(a){a=c.findFileById(a);objectState.isNullOrUndefined(a)||a.isActionVisible(!1)};contract.require(!objectState.isNullOrUndefined(b),
"argument 'fileListElement' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'fileItemFactory' is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'literals' is not defined");this.files=ko.observableArray([]);ko.applyBindings(this,this.fileListElement[0])}}();
function UploadStateServiceClient(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'options' is not defined");contract.require(!objectState.isNullOrUndefined(b.client),"'options.client' is not defined");contract.require(!objectState.isNullOrUndefined(b.hub),"'options.hub' is not defined");var d={usePreExistingChannel:null,openChannel:function(c){d.usePreExistingChannel=!1;null!==b.hub&&"undefined"!==typeof b.hub.id&&(d.usePreExistingChannel=!0);b.client.UpdateUploadProgress=function(a){d.onProgress(a)};
b.client.UploadCompleted=function(a){d.onSuccess(JSON.parse(a));d.usePreExistingChannel||b.hub.stop()};b.client.UploadError=function(a){d.onFail(a);d.usePreExistingChannel||b.hub.stop()};b.client.uploadAborted=function(){d.onAbort();d.usePreExistingChannel||b.hub.stop()};d.usePreExistingChannel?(c.channelId=b.hub.id,d.onChannelOpened(c)):d.openNewChannel(c)},openNewChannel:function(c){var a=!1;b.hub.start({transport:"longPolling"}).done(function(){a||(a=!0,c.channelId=b.hub.id,d.onChannelOpened(c))}).fail(function(){a||
(a=!0,console.log("Could not connect to UploadProgressNotificationHub!"),d.onChannelOpenFailure())});b.openTimeoutPeriodInMs&&setTimeout(function(){a||(a=!0,console.log("Connecting to UploadProgressNotificationHub timed out!"),d.onChannelOpenFailure())},b.openTimeoutPeriodInMs)},onProgress:function(c){if(b.onProgress)b.onProgress(c)},onSuccess:function(c){if(b.onSuccess)b.onSuccess(c)},onFail:function(c){if(b.onFail)b.onFail(c)},onAbort:function(){if(b.onAbort)b.onAbort()},onChannelOpened:function(c){if(b.onChannelOpened)b.onChannelOpened(c)},
onChannelOpenFailure:function(){if(b.onChannelOpenFailure)b.onChannelOpenFailure()},initialize:function(c){d.openChannel(c)}},f={channelId:null,abort:function(){}};d.initialize(f);return f}
var UploadStateService=function(){return function(){var b=this;this.uploadStateServiceClient=this.server=this.hub=this.client=null;this.specifyServiceUrl=function(b){objectState.isNullOrUndefined(b.endpoint)||($.connection.hub.url=b.endpoint)};this.openChannelWithoutSignalRLoaded=function(b){if(b&&b.onChannelOpenFailure)b.onChannelOpenFailure()};this.openChannelWithSignalRLoaded=function(d){d=d||{};b.uploadStateServiceClient=UploadStateServiceClient({client:b.client,hub:b.hub,onProgress:d.onProgress,
onSuccess:d.onSuccess,onFail:d.onFail,onChannelOpened:d.onChannelOpened,onAbort:d.onAbort,onChannelOpenFailure:d.onChannelOpenFailure,openTimeoutPeriodInMs:3E3})};this.abortUploadWithoutSignalRLoaded=function(b){safeConsoleLogger.log("Request to abort failed. Script with signalr hub definition has not come yet.");b&&b()};this.abortUploadWithSignalRLoaded=function(d){b.server.abortUpload().fail(function(b){safeConsoleLogger.log("Request to abort failed, probably because SignalR is unavailable. "+b);
d&&d()})};this.signalrHubScriptLoaded=function(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'options' is not defined");contract.require(!objectState.isNullOrUndefined(d.signalR),"'options.signalR' is not defined");contract.require(!objectState.isNullOrUndefined(d.signalR.uploadProgressNotificationHub),"could not find progress notification hub");b.specifyServiceUrl(d);b.client=d.signalR.uploadProgressNotificationHub.client;b.server=d.signalR.uploadProgressNotificationHub.server;
b.hub=d.signalR.hub;b.openChannel=b.openChannelWithSignalRLoaded;b.abortUpload=b.abortUploadWithSignalRLoaded};this.openChannel=this.openChannelWithoutSignalRLoaded;this.abortUpload=this.abortUploadWithoutSignalRLoaded}}();
(function(b){var d=function(){function b(){this.resetState()}b.prototype.getCurrentState=function(){return this.currentState};b.prototype.getFileId=function(){return this.fileId};b.prototype.isFinalState=function(){return this.currentState===FileUploadState.Success||this.currentState===FileUploadState.Error};b.prototype.prepareUpload=function(c){contract.require(!objectState.isNullOrUndefined(c),"'fileId' is not defined");if(this.currentState===FileUploadState.New)this.fileId=c,this.currentState=
FileUploadState.Ready;else throw Error("You can only prepare upload if it is in status 'New'");};b.prototype.startUpload=function(){if(this.currentState===FileUploadState.Ready)this.currentState=FileUploadState.InProgress;else throw Error("You can only start upload if it is in status 'Ready'");};b.prototype.abortUpload=function(){if(this.currentState===FileUploadState.InProgress)this.currentState=FileUploadState.Aborting;else throw Error("You can only abort upload if it is in status 'InProgress'");
};b.prototype.finishUpload=function(){if(this.currentState===FileUploadState.Ready||this.currentState===FileUploadState.InProgress||this.currentState===FileUploadState.Aborting)this.currentState=FileUploadState.Success;else throw Error("You can only finish upload if it is in status 'InProgress' or 'Ready' or 'Aborting'");};b.prototype.failUpload=function(){if(this.currentState===FileUploadState.Ready||this.currentState===FileUploadState.InProgress||this.currentState===FileUploadState.Aborting)this.currentState=
FileUploadState.Error;else throw Error("You can only fail upload if it is in status 'Ready' or 'InProgress' or 'Aborting'");};b.prototype.resetState=function(){this.currentState=FileUploadState.New;this.fileId=null};return b}();b.FileUploadStateHandler=d})(GenericUploader||(GenericUploader={}));var LegacyGenericUploaderControlFailureReason;(function(b){b[b.AllPickersFailed=0]="AllPickersFailed"})(LegacyGenericUploaderControlFailureReason||(LegacyGenericUploaderControlFailureReason={}));
var LegacyGenericUploaderControlFailureEventArgs=function(){return function(b){this.failureReason=b}}(),LegacyGenericUploaderCallbacks=function(){return function(b,d){b&&d&&(this.controlInitialized=d.getFunctionByName(b?b.OnControlInitialization:void 0),this.fileSelected=d.getFunctionByName(b?b.OnFileSelected:void 0),this.fileSelectionCanceled=d.getFunctionByName(b?b.OnFileSelectionCanceled:void 0),this.fileUploadSuccess=d.getFunctionByName(b?b.OnFileUploadSuccess:void 0),this.fileUploadError=d.getFunctionByName(b?
b.OnFileUploadError:void 0),this.controlInitializationError=d.getFunctionByName(b?b.OnControlInitializationError:void 0),this.pickerInitFailure=d.getFunctionByName(b?b.OnPickerInitFailure:void 0),this.fileUploadAborted=d.getFunctionByName(b?b.OnFileUploadAborted:void 0),this.fileRemoved=d.getFunctionByName(b?b.fileRemoved:void 0))}}(),LegacyGenericUploaderControl=function(){function b(b,f,c,a,e,g,h,k,l){var m=this;this.settings=b;this.literals=f;this.pickers=c;this.sender=a;this.fileList=e;this.fileMetadataFactory=
g;this.uploaderCallbacks=h;this.uploadStateHandler=k;this.fileResultValidator=l;this.shouldAllowToCancelUpload=!1;this.initPickerInitializationDfds=function(a){m.pickerInitializationDfds=a.map(function(){return $.Deferred()})};this.initialize=function(){m.pickers.forEach(function(a,c){m.initPickerCallback(a,c)});m.controlInitializedDfd.done(m.uploaderCallbacks.controlInitialized);m.controlInitializedDfd.fail(m.uploaderCallbacks.controlInitializationError)};this.initPickerCallback=function(a,c){var b=
new PickerCallback(function(){return m.onPickerInitialized(c)},function(a){return m.onPickerInitializationError(c,a)},m.onFileSelected,function(){});a.subscribe(b);m.pickerInitializationDfds[c].fail(m.uploaderCallbacks.pickerInitFailure)};this.onPickerInitialized=function(a){m.pickerInitializationDfds[a].resolve();m.checkPickersInitStateAndRaiseControlInit()};this.onPickerInitializationError=function(a,c){m.pickerInitializationDfds[a].reject(m,c);m.checkPickersInitStateAndRaiseControlInit()};this.checkPickersInitStateAndRaiseControlInit=
function(){m.pickerInitializationDfds.every(function(a){return"rejected"===a.state()})?m.controlInitializedDfd.reject(m,new LegacyGenericUploaderControlFailureEventArgs(LegacyGenericUploaderControlFailureReason.AllPickersFailed)):m.pickerInitializationDfds.every(function(a){return"pending"!==a.state()})&&m.controlInitializedDfd.resolve(m)};this.onUploadError=function(a){m.fileList.setFileStatusToError(m.uploadStateHandler.getFileId(),a,m.removeFromList);m.uploadStateHandler.failUpload();m.fileList.enableAction(m.uploadStateHandler.getFileId());
m.enablePickerButton();m.uploaderCallbacks.fileUploadError&&m.uploaderCallbacks.fileUploadError(a)};this.onUploadSuccess=function(a,c){m.fileList.setFileStatusToSuccess(m.uploadStateHandler.getFileId(),m.removeFromList);m.uploadStateHandler.finishUpload();m.settings.disableDeletePostBackAfterUpload?m.doNotAllowToCancelUpload():m.fileList.enableAction(m.uploadStateHandler.getFileId());m.uploaderCallbacks.fileUploadSuccess&&m.uploaderCallbacks.fileUploadSuccess(a,c||{})};this.removeFromList=function(a){m.fileList.removeFile(a);
m.enablePickerButton();m.uploaderCallbacks.fileRemoved&&m.uploaderCallbacks.fileRemoved()};this.disablePickerButton=function(){m.pickers.forEach(function(a){return a.disable()})};this.enablePickerButton=function(){m.pickers.forEach(function(a){return a.enable()})};this.addFilesToFileList=function(a){a=m.fileMetadataFactory.create(a);m.fileList.addFile(a);m.uploadStateHandler.prepareUpload(a.fileId);m.fileList.setFileStatusToInProgress(m.uploadStateHandler.getFileId())};this.onUploadProgress=function(a){a/=
100;m.shouldAllowToCancelUpload&&(m.fileList.enableAction(m.uploadStateHandler.getFileId()),m.shouldAllowToCancelUpload=!1);m.fileList.updateFileProgress(m.uploadStateHandler.getFileId(),a);m.settings.disableDeletePostBackAfterUpload&&a>=m.disableDeletePostbackThreshold&&m.doNotAllowToCancelUpload()};this.onAbortSuccess=function(){m.uploadStateHandler.abortUpload();m.removeFromList(m.uploadStateHandler.getFileId());m.uploaderCallbacks.fileUploadAborted&&m.uploaderCallbacks.fileUploadAborted()};this.onAbortFailure=
function(){m.uploadStateHandler.isFinalState()?safeConsoleLogger.log("Abort request failed, but upload has already ended."):(m.doNotAllowToCancelUpload(),m.fileList.updateFileProgress(m.uploadStateHandler.getFileId(),"-"),m.fileList.setFileStatusToInProgress(m.uploadStateHandler.getFileId()))};this.onFileSelected=function(a){m.uploadStateHandler.resetState();m.disablePickerButton();var c=m.sender.getOptions();m.uploaderCallbacks.fileSelected&&m.uploaderCallbacks.fileSelected(a.files[0],c);m.addFilesToFileList(a.files);
if(m.validate(a)){m.shouldAllowToCancelUpload=!0;m.fileList.disableAction(m.uploadStateHandler.getFileId());a=new GenericUploader.RequestToSender(a.files[0]);var b=m.sender.send(a,m.onUploadProgress,m.onUploadSuccess,m.onUploadError,c);m.fileList.setActionCallback(m.uploadStateHandler.getFileId(),function(){b.abort(m.onAbortSuccess,m.onAbortFailure)});m.uploadStateHandler.startUpload()}};this.validate=function(a){if(1<a.files.length)return!0;a=m.fileResultValidator.validateFile(a.files[0]);return a.isValid()?
!0:(m.onUploadError(a.getData()),!1)};this.doNotAllowToCancelUpload=function(){m.shouldAllowToCancelUpload=!1;m.fileList.disableAction(m.uploadStateHandler.getFileId())};this.hidePicker=function(){m.pickers.forEach(function(a){return a.hide()})};this.showPicker=function(){m.pickers.forEach(function(a){return a.show()})};this.enableMultipleFilesMode=function(){m.pickers.forEach(function(a){return a.enableMultipleFilesSelecting()})};this.disableMultipleFilesMode=function(){m.pickers.forEach(function(a){return a.disableMultipleFilesSelecting()})};
this.subscribe=function(a){m.uploaderCallbacks=a;m.controlInitializedDfd.done(m.uploaderCallbacks.controlInitialized);m.controlInitializedDfd.fail(m.uploaderCallbacks.controlInitializationError);m.pickerInitializationDfds.forEach(function(a){return a.fail(m.uploaderCallbacks.pickerInitFailure)})};contract.require(!objectState.isNullOrUndefined(this.settings),"'settings' is not defined");contract.require(!objectState.isNullOrUndefined(this.literals),"'literals' is not defined");contract.require(!objectState.isNullOrUndefined(this.pickers),
"'pickers' is not defined");contract.require(!objectState.isNullOrUndefined(this.sender),"'sender' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileList),"'fileList' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileMetadataFactory),"'fileMetadataFactory' is not defined");contract.require(!objectState.isNullOrUndefined(this.uploaderCallbacks),"'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(this.uploadStateHandler),"'uploadStateHandler' is not defined");
contract.require(!objectState.isNullOrUndefined(this.fileResultValidator),"'fileResultValidator' is not defined");this.controlInitializedDfd=$.Deferred();this.initPickerInitializationDfds(c);this.disableDeletePostbackThreshold=.99;this.initialize()}b.prototype.setCurrentFileStatusToError=function(b){var f=this.uploadStateHandler.getFileId();this.fileList.setFileStatusToError(f,b,this.removeFromList);this.fileList.enableAction(f)};b.prototype.setFileRemovedCallback=function(b){var f=this;this.fileList.setActionCallback(this.uploadStateHandler.getFileId(),
function(c){f.removeFromList(c);"function"===typeof b&&b()})};b.prototype.displayFileInFileList=function(b,f,c){var a=this.fileMetadataFactory.generateFileId();this.uploadStateHandler.prepareUpload(a);this.uploadStateHandler.finishUpload();b={name:b,size:f,fileId:this.uploadStateHandler.getFileId()};this.fileList.addFile(b);c?(this.fileList.setFileStatusToSuccess(this.uploadStateHandler.getFileId(),this.removeFromList),this.disablePickerButton()):this.fileList.setFileStatusToSuccess(this.uploadStateHandler.getFileId());
this.settings.readOnlyMode?this.fileList.hideAction(this.uploadStateHandler.getFileId()):this.settings.disableDeletePostBackAfterUpload?this.doNotAllowToCancelUpload():this.fileList.enableAction(this.uploadStateHandler.getFileId())};return b}(),LegacyGenericUploaderSettings=function(){function b(b){this.redirectUrl=b.RedirectUrl;this.pickerUrl=b.PickerUrl;this.uploadUrl=b.UploadUrl;this.disableDeletePostBackAfterUpload=this.getBoolean(b.DisableDeletePostBackAfterUpload);this.readOnlyMode=this.getBoolean(b.ReadOnlyMode);
this.uploadStateServiceEndpoint=b.UploadStateServiceEndpoint;this.minFileSize=parseInt(b.MinFileSize);this.maxFileSize=parseInt(b.MaxFileSize);this.allowedFileExtensionsRegex=this.getRegExp(b.ForbiddenFileExtensions);this.illegalCharacters=this.getArray(b.IllegalCharacters);this.restrictedFileNames=this.getArray(b.IllegalFileNames);this.maxFileNameLength=parseInt(b.MaxFileNameLength)}b.prototype.getBoolean=function(b){return/^true$/i.test(b)};b.prototype.getRegExp=function(b){if(b instanceof RegExp)return b;
if(b){b=b.split("/");var f=b.pop();b.shift();return new RegExp(b.join("/"),f)}};b.prototype.getArray=function(b){return"undefined"===typeof b||null==b?null:JSON.parse(b)};return b}();function UploaderSenderOptionsFactory(){return{create:function(b){return new UploaderSenderOptions(b)}}}
function ExternalUploadersFileMetadataFactory(b,d){contract.require(!objectState.isNullOrUndefined(b),"");contract.require(!objectState.isNullOrUndefined(d),"");return{create:function(f){if(void 0==f)throw Error("Files are undefined");if(!(f instanceof Array))throw Error("Files are not an array");var c={fileId:null,size:null,name:null};c.fileId=b.newGuid();c.size=f.reduce(function(a,c){return a+c.size},0);c.name=1===f.length?f[0].name:d;return c},generateFileId:function(){return b.newGuid()}}}
var PickerFileResultValidator=function(){function b(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'validators' cannot be null or undefined");this.validators=b}b.prototype.validateFile=function(b){for(var f=0,c=this.validators;f<c.length;f++){var a=c[f];if(!objectState.isNullOrUndefined(a)&&(a=a.validateFile(b),!a.isValid()))return a}return new ValidationResult(ValidationStatus.Ok)};return b}(),FileExtensionValidator=function(){function b(b){this.allowedFileExtensionRegex=b}b.prototype.validateFile=
function(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'file' cannot be null or undefined");return objectState.isNullOrUndefined(b.name)?new ValidationResult(ValidationStatus.Inconclusive):this.allowedFileExtensionRegex&&!this.allowedFileExtensionRegex.test(b.name)?new ValidationResult(ValidationStatus.FileExtensionIsNotAllowed):new ValidationResult(ValidationStatus.Ok)};return b}(),FileReaderErrorValidator=function(){function b(){}b.prototype.validateFile=function(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'file' cannot be null or undefined");
b=b.getFileHandle();return objectState.isFileError(b)||objectState.isDomError(b)?new ValidationResult(ValidationStatus.FileIsUnavailable,b):new ValidationResult(ValidationStatus.Ok)};return b}(),FileSizeValidator=function(){function b(b,f){if(0>b)throw Error("Minimal file size cannot be negative");if(0>f)throw Error("Maximal file size cannot be negative");if(b>f)throw Error("Maximal file size must be greater than minimal file size");this.minFileSize=b;this.maxFileSize=f}b.prototype.validateFile=function(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'file' cannot be null or undefined");
return objectState.isNullOrUndefined(b.size)?new ValidationResult(ValidationStatus.Inconclusive):0===b.size?new ValidationResult(ValidationStatus.FileIsEmpty):b.size<this.minFileSize?new ValidationResult(ValidationStatus.FileSizeIsTooSmall,this.minFileSize):b.size>this.maxFileSize?new ValidationResult(ValidationStatus.FileSizeIsTooBig,this.maxFileSize):new ValidationResult(ValidationStatus.Ok)};return b}(),LocalizedPickerFileResultValidator=function(){function b(b,f){this.validator=b;this.literals=
f}b.prototype.validateFile=function(b){b=this.validator.validateFile(b);return b.isValid()?new ValidationResult(b.getStatus()):this.createLocalizedValidationResult(b)};b.prototype.createLocalizedValidationResult=function(b){var f=b.getStatus();b=this.getErrorMessage(b);return new ValidationResult(f,b)};b.prototype.getErrorMessage=function(b){switch(b.getStatus()){case ValidationStatus.FileExtensionIsNotAllowed:return this.literals.fileExtensionNotAllowed;case ValidationStatus.FileIsUnavailable:return this.literals.unableToOpenFile;
case ValidationStatus.FileNameIsIllegal:return this.literals.invalidFirstPartOfFileName.replace("{0}",b.getData());case ValidationStatus.FileSizeIsTooBig:return this.literals.getExcededSizeLimitTranslation(b.getData());case ValidationStatus.FileSizeIsTooSmall:return this.literals.getBelowSizeLimitTranslation(b.getData());case ValidationStatus.FileIsEmpty:return this.literals.fileIsEmpty;case ValidationStatus.FilenameContainsIllegalCharacters:return this.literals.invalidCharactersXInFileName.replace("{0}",
b.getData().join(" "));case ValidationStatus.FileNameIsTooLong:return this.literals.fileNameIsTooLong.replace("{0}",b.getData());default:return"-"}};return b}(),PickerFileResultValidatorFactory=function(){function b(){}b.prototype.createFileValidator=function(b){b=[new FileExtensionValidator(b.allowedFileExtensionsRegex),new FileReaderErrorValidator,new FileSizeValidator(b.minFileSize,b.maxFileSize),new IllegalCharactersValidator(b.illegalCharacters),new RestrictedFileNameValidator(b.restrictedFileNames),
new NameLengthValidator(b.maxFileNameLength)];return new PickerFileResultValidator(b)};b.prototype.createFileValidatorWithLocalizedMessages=function(b,f){var c=this.createFileValidator(b);return new LocalizedPickerFileResultValidator(c,f)};b.createLocalizedValidatorForFilesInCloud=function(b,f){var c=new NameLengthValidator(b);return new LocalizedPickerFileResultValidator(c,f)};return b}(),LegacyGenericUploaderControlFactory=function(){return function(b,d,f,c,a,e){var g=this;this.settings=b;this.literals=
d;this.callbacks=f;this.pickers=c;this.fileList=a;this.sender=e;this.create=function(){return new LegacyGenericUploaderControl(g.settings,g.literals,g.pickers,g.sender,g.fileList,g.fileMetadataFactory,g.callbacks,g.uploadStateHandler,g.fileResultValidator)};contract.require(!objectState.isNullOrUndefined(this.settings),"'settings' is not defined");contract.require(!objectState.isNullOrUndefined(this.literals),"'literals' is not defined");contract.require(!objectState.isNullOrUndefined(this.callbacks),
"'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(this.pickers),"'pickers' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileList),"'fileList' is not defined");contract.require(!objectState.isNullOrUndefined(this.sender),"'sender' is not defined");this.fileMetadataFactory=ExternalUploadersFileMetadataFactory(window.guidFactory,this.literals.files);this.uploadStateHandler=new GenericUploader.FileUploadStateHandler;this.fileResultValidator=(new PickerFileResultValidatorFactory).createFileValidatorWithLocalizedMessages(b,
this.literals)}}(),FileInGoogleDriveHandle=function(){function b(b){this.metadata=b}b.prototype.get=function(){return this.metadata};return b}(),NameLengthValidator=function(){function b(b){this.maxAllowedFileNameLength=b;contract.require(!objectState.isNullOrUndefined(b),"'MaxAllowedFileNameLength' is not provided");if(!objectState.isNumber(b)||0>=b)throw Error("'maxAllowedFileNameLength' cannot be 0 or negative");}b.prototype.validateFile=function(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'file' cannot be null or undefined");
return this.validate(b.name)};b.prototype.validateFolder=function(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'file' cannot be null or undefined");return this.validate(b.name)};b.prototype.validate=function(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'file.name' cannot be null or undefined");return b.length>this.maxAllowedFileNameLength?new ValidationResult(ValidationStatus.FileNameIsTooLong,this.maxAllowedFileNameLength):new ValidationResult(ValidationStatus.Ok)};
return b}(),CloudPickerWithButton=function(){function b(b,f){this.picker=b;this.button=f;if(objectState.isNullOrUndefined(this.picker))throw"This picker requires picker to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.button))throw"This picker requires button to be passed. Please provide it.";}b.prototype.show=function(){this.button.show()};b.prototype.hide=function(){this.button.hide()};b.prototype.enable=function(){this.button.removeAttr("disabled")};b.prototype.disable=function(){this.button.attr("disabled",
"disabled")};b.prototype.subscribe=function(b){var f=this,c=new PickerCallback(function(){f.button.unbind("click",f.picker.open);f.button.click(f.picker.open);b.onPickerInitSuccess()},function(a){f.disable();b.onPickerInitFailure(a)},b.onFileSelected,b.onFileSelectionCanceled);this.picker.subscribe(c)};b.prototype.enableMultipleFilesSelecting=function(){this.picker.enableMultipleFilesSelecting()};b.prototype.disableMultipleFilesSelecting=function(){this.picker.disableMultipleFilesSelecting()};b.prototype.open=
function(){"disabled"!==this.button.attr("disabled")&&this.picker.open()};return b}(),LocalFilePickerWrapper=function(){function b(b,f){this.localFilePicker=b;this.button=f;if(objectState.isNullOrUndefined(this.localFilePicker))throw"This picker requires localFilePicker to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.button))throw"This picker requires button to be passed. Please provide it.";this.button.subscribeToFileSelectedEvent(this.localFilePicker.handleFileSelectedInInput)}
b.prototype.show=function(){this.button.show()};b.prototype.hide=function(){this.button.hide()};b.prototype.enable=function(){this.button.enable()};b.prototype.disable=function(){this.button.disable()};b.prototype.subscribe=function(b){this.localFilePicker.subscribe(b)};b.prototype.enableMultipleFilesSelecting=function(){this.localFilePicker.enableMultipleFilesSelecting();this.button.enableMultipleFilesSelecting()};b.prototype.disableMultipleFilesSelecting=function(){this.localFilePicker.disableMultipleFilesSelecting();
this.button.disableMultipleFilesSelecting()};b.prototype.open=function(){this.button.open()};return b}();(function(b){(function(b){(function(b){var c=function(){return function(){}}();b.Callbacks=c})(b.FileRepoSenderForExternalFiles||(b.FileRepoSenderForExternalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));var FileRepoError;(function(b){b[b.AbortedByUser=0]="AbortedByUser"})(FileRepoError||(FileRepoError={}));
(function(b){b.toString=function(d){return b[d]}})(FileRepoError||(FileRepoError={}));
(function(b){(function(b){(function(b){(function(c){(function(a){var c=function(){function a(c,b){var d=this;this.errorResponseTranslator=c;this.callbacks=b;this.success=function(a,c,b){if(d.isSuccessReallyAFail(a))if(d.isErrorCodeAborted(a.error))d.callbacks.onAbortSuccess();else a=d.errorResponseTranslator.getErrorMessageFromErrorCode(a.error),d.callbacks.onSendFailure(a);else d.callbacks.onSendSuccess(d.file,a)};this.isSuccessReallyAFail=function(a){return!a||null!=a.error};contract.require(!objectState.isNullOrUndefined(c),
"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'callbacks' is not defined")}a.prototype.isErrorCodeAborted=function(a){return a===FileRepoError.toString(FileRepoError.AbortedByUser)};return a}();a.Success=c})(c.Action||(c.Action={}))})(b.Ajax||(b.Ajax={}))})(b.FileRepoSenderForExternalFiles||(b.FileRepoSenderForExternalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){(function(c){(function(a){var c=function(){function a(c,b){var d=this;this.errorResponseTranslator=c;this.callbacks=b;this.error=function(a,c,b){if(d.wasUploadAborted(a))d.callbacks.onAbortSuccess();else a=d.getErrorMesage(a,b),d.callbacks.onSendFailure(a)};contract.require(!objectState.isNullOrUndefined(c),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'callbacks' is not defined")}a.prototype.getErrorMesage=
function(a,c){var b=this.errorResponseTranslator.getErrorMessageFromXhr(a);null==b&&(b=this.attemptToGetErrorMessageFromXhr(a));null==b&&(b=c);return b};a.prototype.attemptToGetErrorMessageFromXhr=function(a){if(a.responseText)try{var c=JSON.parse(a.responseText);if(!objectState.isNullOrWhitespace(c.errorMessage))return c.errorMessage}catch(b){}return null};a.prototype.wasUploadAborted=function(a){if(!a||!a.responseText)return!1;var c;try{c=JSON.parse(a.responseText)}catch(b){return!1}return c&&c.error?
c.error===FileRepoError.toString(FileRepoError.AbortedByUser):!1};return a}();a.Error=c})(c.Action||(c.Action={}))})(b.Ajax||(b.Ajax={}))})(b.FileRepoSenderForExternalFiles||(b.FileRepoSenderForExternalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){(function(c){var a=function(){function a(c,b,d,e){var f=this;this.isIe9=c;this.fileRepoData=b;this.errorAction=d;this.successAction=e;this.build=function(a){contract.require(!objectState.isNullOrUndefined(a),"argument 'request' is not defined");var c={};f.successAction.file=a.file;f.isIe9?c.url=f.getUrlWithValidationParamsInQueryString(f.fileRepoData.Endpoint,f.getHeadersForFileRepo()):(c.url=f.fileRepoData.Endpoint,c.headers=f.getHeadersForFileRepo());c.type=
"POST";c.dataType="json";c.success=f.successAction.success;c.error=f.errorAction.error;c.data=JSON.stringify({Url:f.getUrlForFile(a.file),Name:a.file.name,Size:a.file.size,UploadStateChannelId:a.uploadStateChannelId,SourceType:a.file.sourceType});return c};contract.require(!objectState.isNullOrUndefined(c),"argument 'isIe9' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'fileRepoData' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'errorAction' is not defined");
contract.require(!objectState.isNullOrUndefined(e),"argument 'successAction' is not defined")}a.prototype.getUrlWithValidationParamsInQueryString=function(a,c){var b=$.param(c),d=-1===a.indexOf("?")?"?":"&";return a+d+b};a.prototype.getHeadersForFileRepo=function(){return{"X-Public-Upload-From-External-Source":"1","X-Customer-Validations":this.fileRepoData.ValidationHeader,"X-Authorization-FileRepoToken":"Bearer "+this.fileRepoData.Token}};a.prototype.getUrlForFile=function(a){return(a=a.getFileHandle())&&
a.url?a.url:a};return a}();c.AjaxSettingsBuilder=a})(b.Ajax||(b.Ajax={}))})(b.FileRepoSenderForExternalFiles||(b.FileRepoSenderForExternalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
var UploadController=function(){function b(d,f,c,a){var e=this;this.pickers=d;this.sender=f;this.validator=c;this.actionQueue=a;this.subscribe=function(a){e.callbacks=a;e.pickerInitializationDfds.forEach(function(a){return a.fail(e.callbacks.onInitializationFailure)})};this.initializePickers=function(){e.pickerInitializationDfds=e.pickers.map(function(){return $.Deferred()});e.pickers.forEach(function(a,c){e.initPickerCallback(a,c)})};this.initPickerCallback=function(a,c){var b=new PickerCallback(function(){return e.resolvePickerInitialization(c)},
function(a){return e.rejectPickerInitialization(c,a)},e.filesSelected,function(){});a.subscribe(b)};this.resolvePickerInitialization=function(a){e.pickerInitializationDfds[a].resolve()};this.rejectPickerInitialization=function(a,c){e.pickerInitializationDfds[a].reject(e,c)};this.uploadFailed=function(a,c){a.setError(c);a.onRemoveCallback=function(){e.fileRemoved(a)};a.isRemoveAllowed(!0);e.callbacks.onActionError(a.metadata,a.errorMessage())};this.uploadSucceeded=function(a,c,b){a.markAsCompleted();
a.onRemoveCallback=function(){e.fileRemoved(a)};a.isRemoveAllowed(!0);a.metadata=UploadMetadata.create(c,b);e.callbacks.onActionSuccess(a.metadata)};this.fileRemoved=function(a){e.callbacks.onFileRemoved(a.metadata)};this.uploadProgressed=function(a,c){a.isCompleted()||(a.isRemoveAllowed(c<b.progressThresholdAfterWhichRemoveActionIsDisallowed),a.setProgress(c))};this.abortSucceeded=function(a){e.callbacks.onActionAborted(a.metadata)};this.abortFailed=function(a){a.isCompleted()?safeConsoleLogger.warn("Abort request failed because upload already finished"):
a.isRemoveAllowed(!1)};this.filesSelected=function(a){a=e.prepareFileItemsWithResult(a);e.callbacks.onFilesSelected(a.map(function(a){return a.fileItem}));a.forEach(function(a){return e.prepareFileForSending(a.fileItem,a.result)})};this.prepareFileItemsWithResult=function(a){return a.files.map(function(a){return{result:a,fileItem:e.prepareFileItem(a)}})};this.prepareFileItem=function(a){return Uploaders.FileList.Model.FileItem.buildItemForUpload(a.name,UploadMetadata.create(a))};this.prepareFileForSending=
function(a,c){if(e.handleValidation(a,c)){var b=new GenericUploader.RequestToSender(c),d=function(){e.send(a,b)};a.onRemoveCallback=function(){e.actionQueue.remove(d);e.fileRemoved(a)};e.actionQueue.register(d)}};this.handleValidation=function(a,c){var b=e.validator.validateFile(c);if(b.isValid())return!0;e.uploadFailed(a,b.getData());return!1};this.send=function(a,c){var b=e.sender.send(c,function(c){return e.uploadProgressed(a,c)},function(c,b){e.actionQueue.signalDone();e.uploadSucceeded(a,c,b)},
function(c){e.actionQueue.signalDone();e.uploadFailed(a,c)});a.onRemoveCallback=function(){e.actionQueue.signalDone();b.abort(function(){return e.abortSucceeded(a)},function(){return e.abortFailed(a)})}};contract.require(!objectState.isNullOrUndefined(this.pickers),"'pickers' is not defined");contract.require(!objectState.isNullOrUndefined(this.sender),"'sender' is not defined");contract.require(!objectState.isNullOrUndefined(this.validator),"'fileResultValidator' is not defined");contract.require(!objectState.isNullOrUndefined(this.actionQueue),
"'actionQueue' is not defined");this.initializePickers()}b.progressThresholdAfterWhichRemoveActionIsDisallowed=99;return b}();
(function(b){(function(b){(function(b){var c=function(){function a(a,c,b,d){var f=this;this.uploadStateService=a;this.jQuery=c;this.callbacks=b;this.ajaxSettingsBuilder=d;this.send=function(a,c,b,d){f.callbacks.onSendSuccess=b;f.callbacks.onSendFailure=d;a=f.prepareDelayedObj(a);a.data.onProgress=c;a.data.onAbort=function(){return f.callbacks.onAbortSuccess()};a.wait(f.openSignalRCommunicationChannel);a.wait(f.callFileRepo);return{abort:f.abort}};this.callFileRepo=function(a){a=f.ajaxSettingsBuilder.build(a.data.request);
f.jQuery.ajax(a)};this.prepareDelayedObj=function(a){a=DelayRequest({request:a});a.signal();return a};this.openSignalRCommunicationChannel=function(a){f.uploadStateService.openChannel({onChannelOpened:function(c){a.data.request.uploadStateChannelId=c.channelId;a.signal()},onSuccess:null,onFail:null,onProgress:a.data.onProgress,onAbort:null,onChannelOpenFailure:function(){safeConsoleLogger.log("Opening channel failed, probably because SignalR is unavailable. Upload progress will not be tracked.");
a.data.onProgress(UploadController.progressThresholdAfterWhichRemoveActionIsDisallowed);a.signal()}})};this.abort=function(a,c){f.callbacks.onAbortSuccess=a;f.uploadStateService.abortUpload(c)};contract.require(!objectState.isNullOrUndefined(a),"argument 'uploadStateService' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'jQuery' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(d),
"argument 'ajaxSettingsBuilder' is not defined")}a.prototype.getOptions=function(){return null};return a}();b.Sender=c})(b.FileRepoSenderForExternalFiles||(b.FileRepoSenderForExternalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){var c=b.Ajax.Action.Error,a=b.Ajax.Action.Success,d=b.Ajax.AjaxSettingsBuilder,g=function(){return function(g,k,l){var m=this;this.errorResponseTranslator=k;this.settings=l;this.fileRepoData={};this.build=function(){var g=new b.Callbacks,k=new c(m.errorResponseTranslator,g),h=new a(m.errorResponseTranslator,g),k=new d(m.isIe9,m.fileRepoData,k,h),l=new UploadStateService;window.asyncDependenciesResolver.subscribeToDependencyLoadEvent(window.asyncDependencies.signalRHubScript,
function(){l.signalrHubScriptLoaded({signalR:$.signalR,endpoint:m.uploadStateServiceEndpoint})});return new b.Sender(l,$,g,k)};contract.require(!objectState.isNullOrUndefined(g),"argument 'browserSniffer' is not defined");contract.require(!objectState.isNullOrUndefined(k),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(l),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(l.uploadStateServiceEndpoint),"argument 'settings.uploadStateServiceEndpoint' is not defined");
contract.require(!objectState.isNullOrUndefined(l.fileRepoData),"argument 'settings.fileRepoData' is not defined");this.uploadStateServiceEndpoint=l.uploadStateServiceEndpoint;this.fileRepoData=l.fileRepoData;this.isIe9=g.isInternetExplorer9()}}();b.Factory=g})(b.FileRepoSenderForExternalFiles||(b.FileRepoSenderForExternalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){var f=function(){function c(a,c){this.localSenderFactory=a;this.cloudSenderFactory=c;contract.require(!objectState.isNullOrUndefined(a),"FileRepoSender requires localSenderFactory to be provided.");contract.require(!objectState.isNullOrUndefined(c),"FileRepoSender requires cloudSenderFactory to be provided.")}c.prototype.send=function(a,c,b,d,f){return this.buildSenderForSourceType(a.file.sourceType).send(a,c,b,d,f)};c.prototype.getOptions=function(){return null};c.prototype.buildSenderForSourceType=
function(a){if(a===SourceType.Local)return this.localSenderFactory.build();if(this.isSourceTypeCloud(a))return this.cloudSenderFactory.build();throw"Unsupported SourceType";};c.prototype.isSourceTypeCloud=function(a){return a===SourceType.Dropbox||a===SourceType.Google||SourceType.isOneDrive(a)};return c}();b.FileRepoSender=f})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
var GoogleTranslations=function(){return function(b,d){this.browserNotSupported=b;this.googleApiNotAvailable=d}}(),SelfResettingFileInput=function(){function b(b){this.input=b}b.prototype.show=function(){this.input.show()};b.prototype.hide=function(){this.input.hide()};b.prototype.enable=function(){this.input.removeAttr("disabled")};b.prototype.disable=function(){this.input.attr("disabled","disabled")};b.prototype.open=function(){this.input.click()};b.prototype.enableMultipleFilesSelecting=function(){this.input.attr("multiple",
"multiple")};b.prototype.disableMultipleFilesSelecting=function(){this.input.removeAttr("multiple")};b.prototype.subscribeToFileSelectedEvent=function(b){var f=this;this.input.on("change",function(){var c=f.input;f.input=f.cloneInputAndReplaceInDom(c);f.prepareInputForCallback(c);b(c,c[0])})};b.prototype.getFileInputJQueryElement=function(){return this.input};b.prototype.getFileInputHtmlElement=function(){return this.input[0]};b.prototype.cloneInputAndReplaceInDom=function(b){var f=this.cloneElementPreservingEventHandlers(b);
this.resetElementUsingForm(f);this.addElementToDomAfterOtherElement(f,b);this.removeElementFromDomKeepingInformationAboutFile(b);this.removeEventHandlersFromElement(b);return f};b.prototype.cloneElementPreservingEventHandlers=function(b){return b.clone(!0)};b.prototype.resetElementUsingForm=function(b){$("<form></form>").append(b)[0].reset()};b.prototype.removeEventHandlersFromElement=function(b){b.off()};b.prototype.addElementToDomAfterOtherElement=function(b,f){f.after(b)};b.prototype.removeElementFromDomKeepingInformationAboutFile=
function(b){b.detach()};b.prototype.prepareInputForCallback=function(b){b.removeAttr("disabled")};return b}(),GapiCallback=function(){return function(b,d,f,c){this.onFileSelected=b;this.onFileSelectionCanceled=d;this.onFileSelectionFailed=f;this.onFileProcessing=c}}();
(function(b){(function(d){var f=function(){return function(c,a,d,f){var h=this;this.pickerComponents=c;this.pickers=a;this.onCloseClick=d;this.onPickerOpen=f;this.linkToTabName="linkToTab";this.uploadFileTabName="uploadFileTab";this.cloudServiceUnavailableTranslation=ko.observable("");this.isNarrowScreen=ko.observable(b.UploadControlUtils.isMobile());this.namesOfPickersFailedToInit="";this.handlePickersInitialization=function(){h.isWarningVisible=ko.observable(!1);for(var a=0,c=h.pickers;a<c.length;a++)c[a].subscribe(new PickerCallback(function(){},
h.handlePickerInitFailure,function(){},function(){}))};this.handlePickerInitFailure=function(a){h.concatFailedPickerNames(a.pickerName);h.cloudServiceUnavailableTranslation(UploadControlTranslation.cloudServiceUnavailable.replace("{0}",h.namesOfPickersFailedToInit));h.isWarningVisible(!0)};this.isUploadColumnVisible=function(){return 0<h.uploadPickerComponents.length};this.dialogHasMoreThenOneColumn=function(){return h.isUploadColumnVisible()&&h.isLinkColumnVisible()};this.isSeparatorVisible=function(){return h.dialogHasMoreThenOneColumn()};
this.isLinkColumnVisible=function(){return 0<h.linkToCloudPickerComponents.length};this.changeTabForMobile=function(){h.isNarrowScreen.peek()&&h.selectedTabName($(event.currentTarget).find("a").prop("hash").substr(1));event.preventDefault()};this.subscribeToBlurEventCapturePhase=function(){document.getElementById("ccl-uc-file-dialog-container").addEventListener("blur",h.hideDialogContainer,!0)};this.hideDialogContainer=function(){setTimeout(function(){if(h.isNotPartOfDialogContainer($(document.activeElement)))h.onCloseClick()},
0)};this.isNotPartOfDialogContainer=function(a){return 0===a.closest("#ccl-uc-file-dialog-container").length};this.concatFailedPickerNames=function(a){h.namesOfPickersFailedToInit=1>h.namesOfPickersFailedToInit.length?h.namesOfPickersFailedToInit+a:h.namesOfPickersFailedToInit+(", "+a)};this.handlePickersInitialization();this.subscribeToBlurEventCapturePhase();this.uploadPickerComponents=c.filter(function(a){return a.purpose===PickerPurpose.Upload});this.linkToCloudPickerComponents=c.filter(function(a){return a.purpose===
PickerPurpose.LinkToCloud});this.selectedTabName=ko.observable(this.isUploadColumnVisible()?this.uploadFileTabName:this.isLinkColumnVisible()?this.linkToTabName:"");this.isUploadColumnSelected=ko.pureComputed(function(){return!h.isNarrowScreen()||h.selectedTabName()===h.uploadFileTabName});this.isLinkColumnSelected=ko.pureComputed(function(){return!h.isNarrowScreen()||h.selectedTabName()===h.linkToTabName});$(window).on("resize",function(){var a=b.UploadControlUtils.isMobile();h.isNarrowScreen(a);
$("#ccl-uc-file-dialog-container").is(":visible")&&b.UploadControlUtils.toggleTopFrameAndMobileOverlay(!a)})}}();d.DialogViewModel=f})(b.Dialog||(b.Dialog={}))})(Components||(Components={}));
(function(b){(function(b){var f=function(){return function(c,a){var e=this;this.pickerComponents=c;this.pickers=a;this.name="uc-dialog";this.viewModel=function(a){return new b.DialogViewModel(e.pickerComponents,e.pickers,a.onCloseClick,a.onPickerOpen)};this.template='\n<div id="ccl-uc-file-dialog-container" tabindex="1">\n    <div id="ccl-uc-triangle-row" data-bind="visible: !isNarrowScreen()">\n        <div id="ccl-uc-triangle-container">\n            <div id="ccl-uc-triangle"></div>\n        </div>\n    </div>\n        \n    <div id="ccl-uc-file-dialog">\n        <button data-bind="click: onCloseClick, visible: !isNarrowScreen()" id="ccl-uc-close-button" class="ccl-uc-close-icon"></button>\n        <div class="ccl-uc-source-title-container" data-bind="visible: isNarrowScreen">\n            <div role="tab" class="ccl-uc-source-column-title" data-bind="visible: isUploadColumnVisible(), click: changeTabForMobile">\n                <a href="#uploadFileTab" data-bind="text: UploadControlTranslation.uploadFileFromMobile, css: { \'ccl-uc-tab-link-active\': (selectedTabName() === uploadFileTabName && dialogHasMoreThenOneColumn() ) }"></a>\n            </div>\n            <div role="tab" class="ccl-uc-source-column-title" data-bind="visible: isLinkColumnVisible(), click: changeTabForMobile">\n                <a href="#linkToTab" data-bind="text: UploadControlTranslation.linkToMobile, css: { \'ccl-uc-tab-link-active\': (selectedTabName() === linkToTabName && dialogHasMoreThenOneColumn() ) }"></a>\n            </div>\n        </div>\n        <div id="ccl-uc-source">\n            <div class="ccl-uc-source-utmost-column" data-bind="visible: (isUploadColumnVisible() && isUploadColumnSelected)" role="tabpanel">\n                <div class="ccl-uc-source-column-title" data-bind="visible: !isNarrowScreen(), text: UploadControlTranslation.uploadFileFrom"></div>\n                <div data-bind="foreach: uploadPickerComponents">\n                    <div class="ccl-uc-source-column-line" data-bind="component: {name: componentName, params: {onPickerOpen: $parent.onPickerOpen}}"></div>\n                </div>\n            </div>\n        \n            <div id="ccl-uc-source-middle-column" data-bind="visible: (isSeparatorVisible() && !isNarrowScreen())">\n                <div id="ccl-uc-source-middle-column-line"></div>\n                <div id="ccl-uc-source-middle-column-title" data-bind="text: UploadControlTranslation.or"></div>\n            </div>\n        \n            <div class="ccl-uc-source-utmost-column" data-bind="visible: (isLinkColumnVisible() && isLinkColumnSelected)" role="tabpanel">\n                <div class="ccl-uc-source-column-title" data-bind="visible: !isNarrowScreen(), text: UploadControlTranslation.linkTo"></div>\n                <div data-bind="foreach: linkToCloudPickerComponents">\n                    <div class="ccl-uc-source-column-line" data-bind="component: {name: componentName, params: {onPickerOpen: $parent.onPickerOpen}}"></div>\n                </div>\n            </div>\n        </div>\n        <div class="ccl-uc-warning-container" data-bind="visible: isWarningVisible">\n            <div class="ccl-uc-warning">\n                <div class="ccl-uc-warning-icon">\n                    <span aria-hidden="true" class="ili ili-exclamation-circle"></span>\n                </div>\n                <div class="ccl-uc-warning-text">\n                    <span class="ccl-uc-warning-text-header" data-bind="text: cloudServiceUnavailableTranslation"></span>\n                    <span data-bind="text: UploadControlTranslation.tryAgainOrContactAdministrator"></span>\n                </div>\n            </div>\n        </div>\n        <div data-bind="visible: isNarrowScreen" class="ccl-uc-close-button-mobile-container">\n            <button data-bind="text: UploadControlTranslation.cancel, click: onCloseClick" class="ccl-button ccl-button-color-grey"></button>\n        </div>\n    </div>\n</div>\n'}}();b.DialogComponent=
f})(b.Dialog||(b.Dialog={}))})(Components||(Components={}));
(function(b){var d=function(){return function(d){var c=this;this.uploadAreaState=d;this.name="upload-area";this.viewModel=function(){return new b.UploadAreaViewModel(c.uploadAreaState)};this.template='\n<div data-bind="visible: isUploadAreaVisible" style="position: relative">\n    <dropzone-picker data-bind="click: showDialog"></dropzone-picker>\n    <uc-dialog data-bind="visible: isDialogVisible" params="onCloseClick: hideDialog, onPickerOpen: hideDialog"></uc-dialog>\n</div>\n<file-list></file-list>\n'}}();b.UploadAreaComponent=
d})(Components||(Components={}));
var GapiInitializerSettings=function(){return function(b,d){this.clientId=b;this.scope=d}}(),GapiFileResult=function(){function b(b,f,c,a,e,g,h,k,l){var m=this;void 0===l&&(l=PickerPurpose.Upload);this.url=b;this.name=f;this.size=c;this.isGoogleSpreadsheet=a;this.id=e;this.jq=g;this.authorizationHandler=h;this.googleDriveProxy=k;this.purpose=l;this.updateFileResultUsingGetCallToMetadataService=function(){m.fileMetadataObtainedDfd=$.Deferred();var a={url:m.getMetadataServiceUrl(),type:"GET",data:"",
headers:m.authorizationHandler.getAuthorizationHeader(),success:m.onMetadataGetCallSuccess,error:m.onMetadataGetCallError};m.jq.ajax(a);return m.fileMetadataObtainedDfd.promise()};this.onMetadataGetCallError=function(){m.fileMetadataObtainedDfd.reject()};this.onMetadataGetCallSuccess=function(a){var c=-1<GapiDocType.googleApps.indexOf(a.mimeType);m.permissions=a.permissions;m.url=m.purpose===PickerPurpose.LinkToCloud?m.getFileViewUrl(c,a):m.getFileDownloadUrl(a);m.mimeType=a.mimeType;m.purpose===
PickerPurpose.Upload&&c?m.updateFileSizeUsingHeadCallToMetadataService():m.fileMetadataObtainedDfd.resolve()};this.updateFileSizeUsingHeadCallToMetadataService=function(){var a={url:m.getMetadataServiceUrl(),type:"HEAD",data:"",dataType:"text",success:m.onMetadataHeadCallSuccess,error:m.onMetadataHeadCallError};m.jq.ajax(a)};this.onMetadataHeadCallSuccess=function(a,c,b){m.size=parseInt(b.getResponseHeader("Content-Length"));m.fileMetadataObtainedDfd.resolve()};this.onMetadataHeadCallError=function(a,
c,b){500===a.status&&(m.size=0);m.fileMetadataObtainedDfd.resolve()};this.getMetadataServiceUrl=function(){return m.isGoogleSpreadsheet?m.googleDriveProxy+encodeURIComponent(m.url):m.url};contract.require(!objectState.isNullOrWhitespace(k),"'googleDriveProxy' is null or whitespace")}b.prototype.getFileViewUrl=function(b,f){return b?f.alternateLink:f.embedLink};b.prototype.getFileDownloadUrl=function(b){if(b.downloadUrl)return this.authorizationHandler.appendOAuthTokenToUrl(b.downloadUrl).value;if(b.exportLinks&&
b.exportLinks[Object.keys(b.exportLinks)[0]]){var f=GapiDocType.getDocumentType(b.exportLinks);b=this.authorizationHandler.appendOAuthTokenToUrl(b.exportLinks[f]);this.updateExtensionBasedOnExportFormatParam(b);return b.value}};b.prototype.updateExtensionBasedOnExportFormatParam=function(b){if(b=b.getParamValue("exportFormat"))this.name+="."+b};return b}(),GapiDownloadUrl=function(){function b(){this.url="https://www.googleapis.com/drive/v2/files/{fileId}?fields=mimeType,downloadUrl,exportLinks,alternateLink,embedLink,permissions"}
b.prototype.getDownloadUrl=function(b){contract.require(!objectState.isNullOrWhitespace(b),"'fileId' is null or whitespace");return this.url.replace("{fileId}",b)};return b}(),GapiActions=function(){function b(d,f,c,a,e,g){var h=this;void 0===g&&(g=PickerPurpose.Upload);this.pickerApi=d;this.authorizationHandler=f;this.proxy=c;this.getCurrentCallbacks=a;this.downloadUrl=e;this.purpose=g;this.onPickerAction=function(a){h.callbacks=h.getCurrentCallbacks();switch(a.action){case h.pickerApi.Action.PICKED:h.handleFilePickedAction(a);
break;case h.pickerApi.Action.CANCEL:if(h.callbacks.onFileSelectionCanceled)h.callbacks.onFileSelectionCanceled()}};this.handleFilePickedAction=function(a){if(h.callbacks.onFileProcessing)h.callbacks.onFileProcessing();a=a[h.pickerApi.Response.DOCUMENTS].map(function(a){return new GapiFileResult(h.downloadUrl.getDownloadUrl(a[h.pickerApi.Document.ID]),a[h.pickerApi.Document.NAME],a.sizeBytes,a.mimeType===GapiDocType.googleSpreadsheet,a[h.pickerApi.Document.ID],$,h.authorizationHandler,h.proxy,h.purpose)});
a.length>b.maximumNumberOfConcurrentRequestsToGoogleApi?h.processFilesSequentially(a):h.processFilesInParallel(a)};this.processFilesSequentially=function(a){a.reduce(function(a,c){return a.pipe(c.updateFileResultUsingGetCallToMetadataService)},$.Deferred().resolve().promise()).done(function(){h.raiseFileSelectedCallbackWithPickerResult(a)}).fail(h.raiseFailureCallback)};this.raiseFailureCallback=function(){if(h.callbacks.onFileSelectionFailed)h.callbacks.onFileSelectionFailed()};this.processFilesInParallel=
function(a){var c=[];a.forEach(function(a){a=a.updateFileResultUsingGetCallToMetadataService();c.push(a)});$.when.apply($,c).done(function(){h.raiseFileSelectedCallbackWithPickerResult(a)}).fail(h.raiseFailureCallback)};this.raiseFileSelectedCallbackWithPickerResult=function(a){a=a.map(h.mapGapiFileToPickerFile);a=new PickerResult(a);h.callbacks.onFileSelected(a)};this.mapGapiFileToPickerFile=function(a){var c=new FileInGoogleDriveHandle({url:a.url,id:a.id,permissions:a.permissions});return new PickerFileResult(c,
a.name,a.size,SourceType.Google,null,a.mimeType)}}b.maximumNumberOfConcurrentRequestsToGoogleApi=7;return b}(),GapiAuthorizationHandler=function(){return function(b){var d=this;this.authApi=b;this.getOAuthToken=function(){if(!d.authApi.currentUser.get().isSignedIn())throw Error("You need to Sign In before getting Google Drive's oAuth Token");return d.authApi.currentUser.get().getAuthResponse().access_token};this.getAuthorizationHeader=function(){return{Authorization:"Bearer "+d.getOAuthToken()}};
this.appendOAuthTokenToUrl=function(b){b=new Url(b);b.appendOrUpdateParam("access_token",d.getOAuthToken());return b};this.authorize=function(b,c){d.authApi.currentUser.get().isSignedIn()?b():d.authApi.signIn().then(function(){b()},function(){c()})}}}(),GapiInitializer=function(){return function(b){var d=this;this.settings=b;this.isAuthApiLoaded=this.isPickerApiLoaded=!1;this.gapi=window.gapi;this.init=function(b,c){contract.require(!objectState.isNullOrUndefined(b),"'onInitSuccess' is not defined");
contract.require(!objectState.isNullOrUndefined(c),"'onInitFailure' is not defined");d.onInitSuccess=b;d.onInitFailure=c;if(objectState.isNullOrUndefined(d.gapi)){if(safeConsoleLogger.error("Loading of Gapi failed. Most probably https://apis.google.com/js/api.js was blocked by firewall, proxy or adblock."),d.onInitFailure)d.onInitFailure()}else d.loadAuthApi(),d.loadPickerApi()};this.loadAuthApi=function(){try{d.gapi.load("auth2",{callback:d.initAuthApi})}catch(b){if(safeConsoleLogger.error("Loading of Gapi Auth failed."),
d.onInitFailure)d.onInitFailure()}};this.initAuthApi=function(){d.gapi.auth2.init({client_id:d.settings.clientId,scope:d.settings.scope}).then(function(){d.onAuthApiLoaded()},function(b){safeConsoleLogger.error(b);d.onInitFailure()})};this.loadPickerApi=function(){try{d.gapi.load("picker",{callback:d.onPickerApiLoaded})}catch(b){if(safeConsoleLogger.error("Loading of Gapi Picker failed."),d.onInitFailure)d.onInitFailure()}};this.onAuthApiLoaded=function(){d.isAuthApiLoaded=!0;d.attempToRaiseSuccess()};
this.onPickerApiLoaded=function(){d.isPickerApiLoaded=!0;d.attempToRaiseSuccess()};this.attempToRaiseSuccess=function(){if(d.isPickerApiLoaded&&d.isAuthApiLoaded)d.onInitSuccess(d.gapi.auth2.getAuthInstance(),google.picker)}}}(),GoogleSettings=function(){return function(b,d,f,c,a,e,g){this.clientId=b;this.scope=d;this.developerKey=f;this.allowMultipleFiles=c;this.originUrl=a;this.proxy=e;this.language=g}}(),GapiPickerUiFactory=function(){return function(b,d,f,c,a){var e=this;this.onPickerAction=b;
this.authHandler=d;this.developerKey=f;this.originUrl=c;this.language=a;this.build=function(){e.builder=new google.picker.PickerBuilder;e.triggerBuild().setVisible(!0)};this.triggerBuild=function(){var a=e.createViewGroup();e.builder.addViewGroup(a).setOAuthToken(e.authHandler.getOAuthToken()).setDeveloperKey(e.developerKey).setCallback(e.onPickerAction).setLocale(e.language);e.setOriginUrlIfProvided();e.setApplicationIdIfProvided();e.handleMultipleFilesMode();return e.builder.build()};this.createViewGroup=
function(){return e.displayOnlyGoogleApps?e.createGoogleAppsViewGroup():e.createFullViewGroup()};this.createGoogleAppsViewGroup=function(){var a=e.prepareViewWithGoogleAppsOnly(google.picker.ViewId.DOCS);return(new google.picker.ViewGroup(a)).addView(e.prepareViewWithGoogleAppsOnly(google.picker.ViewId.DOCUMENTS)).addView(e.prepareViewWithGoogleAppsOnly(google.picker.ViewId.SPREADSHEETS)).addView(e.prepareViewWithGoogleAppsOnly(google.picker.ViewId.PRESENTATIONS))};this.createFullViewGroup=function(){return(new google.picker.ViewGroup(e.prepareView(google.picker.ViewId.DOCS))).addView(e.prepareView(google.picker.ViewId.DOCS_IMAGES)).addView(e.prepareView(google.picker.ViewId.DOCS_VIDEOS)).addView(e.prepareView(google.picker.ViewId.DOCUMENTS)).addView(e.prepareView(google.picker.ViewId.DRAWINGS)).addView(e.prepareView(google.picker.ViewId.FOLDERS)).addView(e.prepareView(google.picker.ViewId.PDFS)).addView(e.prepareView(google.picker.ViewId.PHOTOS)).addView(e.prepareView(google.picker.ViewId.PRESENTATIONS)).addView(e.prepareView(google.picker.ViewId.SPREADSHEETS))};
this.prepareView=function(a){a=new google.picker.DocsView(a);a.setIncludeFolders(!0);a.setParent("root");return a};this.prepareViewWithGoogleAppsOnly=function(a){a=e.prepareView(a);a.setMimeTypes(""+GapiDocType.googleApps.join(","));return a};this.handleMultipleFilesMode=function(){e.isMultipleFilesModeEnabled?e.builder.enableFeature(google.picker.Feature.MULTISELECT_ENABLED):e.builder.disableFeature(google.picker.Feature.MULTISELECT_ENABLED)};this.setOriginUrlIfProvided=function(){objectState.isNullOrUndefined(e.originUrl)||
e.builder.setOrigin(e.originUrl)};this.setApplicationIdIfProvided=function(){objectState.isNullOrUndefined(e.applicationId)||e.builder.setAppId(e.applicationId)}}}(),GooglePicker=function(){function b(b,f,c,a){var e=this;this.settings=b;this.gapiInitializer=f;this.browserSniffer=c;this.translations=a;this.pickerReadyDfd=$.Deferred();this.subscribe=function(a){e.pickerReadyDfd.done(a.onPickerInitSuccess);e.pickerReadyDfd.fail(a.onPickerInitFailure);e.callbacks=a};this.open=function(){e.authHandler.authorize(e.displayWindowWithFiles,
e.terminateAuthorization)};this.enableMultipleFilesSelecting=function(){e.settings.allowMultipleFiles&&(e.uiFactory.isMultipleFilesModeEnabled=!0)};this.disableMultipleFilesSelecting=function(){e.uiFactory.isMultipleFilesModeEnabled=!1};this.getCurrentCallbacks=function(){return new GapiCallback(e.onFileSelected,e.callbacks.onFileSelectionCanceled)};this.onFileSelected=function(a){a=a.files.map(function(a){return PickerFileResult.createExternalSourcePickerFileResult(a.getFileHandle().url,a.name,a.size,
a.sourceType)});a=new PickerResult(a);e.callbacks.onFileSelected(a)};this.onGapiInitSuccess=function(a,c){e.enabled=!0;e.authHandler=new GapiAuthorizationHandler(a);var b=new GapiDownloadUrl,b=new GapiActions(c,e.authHandler,e.settings.proxy,e.getCurrentCallbacks,b);e.uiFactory=new GapiPickerUiFactory(b.onPickerAction,e.authHandler,e.settings.developerKey,e.settings.originUrl,e.settings.language);e.pickerReadyDfd.resolve()};this.onGapiInitFailure=function(){e.enabled=!1;e.pickerReadyDfd.reject(new PickerInitFailureEventArgs(PickerInitFailureReason.ExternalServiceNotAvailable,
e.translations.googleApiNotAvailable,UploadControlTranslation.googleDrive))};this.displayWindowWithFiles=function(){e.uiFactory.build()};this.terminateAuthorization=function(){throw Error("Authorization failed");};contract.require(!objectState.isNullOrUndefined(b),"'settings' are not defined");contract.require(!objectState.isNullOrUndefined(f),"'gapiInitializer' is not defined");contract.require(!objectState.isNullOrUndefined(c),"'browserSniffer' is not defined");contract.require(!objectState.isNullOrUndefined(a),
"'translations' are not defined");this.visible=!0;this.enabled=!1;this.multipleFilesSelectingEnabled=b.allowMultipleFiles;c.isInternetExplorer9()?this.pickerReadyDfd.reject(new PickerInitFailureEventArgs(PickerInitFailureReason.BrowserNotSupported,a.browserNotSupported,UploadControlTranslation.googleDrive)):this.initialize()}b.prototype.initialize=function(){this.gapiInitializer.init(this.onGapiInitSuccess,this.onGapiInitFailure)};return b}();
function AjaxUploaderCallbacks(b){var d=FunctionFinder();return{controlInitialized:d.getFunctionByName(b?b.OnControlInitialization:void 0),fileSelected:d.getFunctionByName(b?b.OnFileSelected:void 0),beforeFileUpload:d.getFunctionByName(b?b.OnBeforeFileUpload:void 0),fileUploadSuccess:d.getFunctionByName(b?b.OnFileUploadSuccess:void 0),fileUploadError:d.getFunctionByName(b?b.OnFileUploadError:void 0),beforeFileRemoved:d.getFunctionByName(b?b.OnBeforeFileRemoved:void 0),fileRemoveSuccess:d.getFunctionByName(b?
b.OnFileRemoveSuccess:void 0),fileRemoveError:d.getFunctionByName(b?b.OnFileRemoveError:void 0),fileRemoved:d.getFunctionByName(b?b.OnFileRemoved:void 0),beforeFileUploadAborted:d.getFunctionByName(b?b.OnBeforeFileUploadAborted:void 0),fileUploadAborted:d.getFunctionByName(b?b.OnFileUploadAborted:void 0),fileUploadProgress:d.getFunctionByName(b?b.OnFileUploadProgress:void 0)}}
function AjaxUploaderControl(b,d,f,c,a,e,g,h){contract.require(!objectState.isNullOrUndefined(b),"argument 'controls' is not defined");contract.require(!objectState.isNullOrUndefined(b.fileInput),"controls.fileInput is not defined");contract.require(!objectState.isNullOrUndefined(b.fileList),"controls.fileList is not defined");contract.require(!objectState.isNullOrUndefined(b.dropZone),"controls.dropZone is not defined");contract.require(!objectState.isNullOrUndefined(b.folderInput),"controls.folderInput is not defined");
contract.require(!objectState.isNullOrUndefined(b.folderInputLink),"controls.folderInputLink is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'validationService' is not defined");contract.require(objectState.isFunction(f.validateFile),"'validationService' has invalid interface");contract.require(!objectState.isNullOrUndefined(c),"argument 'fileList' is not defined");contract.require(!objectState.isNullOrUndefined(a),
"argument 'fileUploadService' is not defined");contract.require(objectState.isFunction(a.subscribe),"'fileUploadService' has invalid interface");contract.require(!objectState.isNullOrUndefined(e),"argument 'folderManifestFactory' is not defined");contract.require(!objectState.isNullOrUndefined(g),"argument 'literals' is not defined");if(void 0===h||null===h)h={};var k={currentFileId:null,disableDeletePostbackThreshold:.99,fileUploader:null,initialize:function(a){k.initializeElementsToSupportSingleOrMultipleFiles();
k.initializeDropZone();void 0!==h.controlInitialized&&h.controlInitialized(a);k.initializeFileUploader()},initializeElementsToSupportSingleOrMultipleFiles:function(){k.changeFileInputToAcceptSingleFile();k.changeDropZoneToAcceptSingleFile();d.allowMultipleFiles&&k.initializeFolderInput()},initializeDropZone:function(){d.allowDragAndDrop?k.enableDropZone():k.disableDropZone()},initializeFolderInput:function(){d.allowFoldersUpload?(k.initializeFolderUploadElements(),k.enableFolderInput()):k.disableFolderInput()},
enableFolderInput:function(){browserSniffer.isDirectoryUploadSupported()&&(b.folderInputLink.removeClass("h-hidden"),b.folderInput.show(),b.folderInputLink.show())},disableFolderInput:function(){b.folderInput.hide();b.folderInputLink.hide()},changeFileInputToAcceptSingleFile:function(){b.fileInput.removeAttr("multiple")},changeFileInputToAcceptMultipleFiles:function(){b.fileInput.attr("multiple",!0)},enableDropZone:function(){browserSniffer.isDragAndDropSupported()&&(b.dropZone.removeClass("h-hidden"),
b.dropZone.show())},disableDropZone:function(){b.dropZone.hide()},changeDropZoneToAcceptMultipleFiles:function(){$(b.fileInput.selector).unbind("fileuploaddrop",k.takeOnlyFirstFileFunction)},changeDropZoneToAcceptSingleFile:function(){$(b.fileInput.selector).bind("fileuploaddrop",k.takeOnlyFirstFileFunction)},isMultipleFileSelect:function(a){return a.originalFiles&&1<a.originalFiles.length},isSingleFileInFolder:function(a){return a.originalFiles&&1===a.originalFiles.length&&""!==auCommon.getRelativePath(a.originalFiles[0],
"")?!0:!1},getArrayFromEventFileList:function(a){var c=[],b;for(b=0;b<a.length;b+=1)c.push(a[b]);return c},handleFolderSelect:function(a){var c=k.getArrayFromEventFileList(a.target.files);k.fileUploader.upload(c);a.target.value=null},initializeFolderUploadElements:function(){b.folderInputLink.click(function(){b.folderInput.click()});b.folderInput.on("change",k.handleFolderSelect)},initializeFileUploader:function(){k.fileUploader=a.subscribe({fileInput:b.fileInput,dropZone:b.dropZone},{onDone:k.onDone,
onFail:k.onFail,onProcessAlways:k.onProcessAlways,onProgress:k.onProgress,onAdd:k.onAdd,onSend:k.onSend,onFileUploadAborted:k.onUploadAborted})},getFolderName:function(a){var c,b,d,e=null;for(c=0;c<a.length;c+=1){b=auCommon.getRelativePath(a[c],"");d=b.indexOf("/");if(-1===d)return null;b=b.substring(0,d);if(null===e)e=b;else if(e!==b)return null}return e},getFileNameForMultipleFiles:function(a){a=k.getFolderName(a);return null!==a?a:g.files},getTotalSize:function(a){var c=0;$.each(a,function(a,b){c+=
b.size||0});return c},getFileInfo:function(a,c){var b;b=c?{name:k.getFileNameForMultipleFiles(a),size:k.getTotalSize(a)}:a[0];b.fileId=guidFactory.newGuid();return b},handleForbiddenFolderUpload:function(a,c){f.validateIsFile(a.files[0],k.handleIsAFileValidationResult.bind(k,a.files,0,c.fileId,{total:a.files.length,checked:0,stop:!1}))},handleIsAFileValidationResult:function(a,b,d,e,g){e.checked+=1;a[b].checkedForBeingAFolder=!0;g.isValid?e.stop||(e.checked===e.total?k.fileUploader.upload(a):(b+=
1,f.validateIsFile(a[b],k.handleIsAFileValidationResult.bind(k,a,b,d,e)))):(e.stop=!0,c.setFileStatusToError(d,g.errorMessage,k.removeFromList),c.enableAction(d))},hasToBeCheckedForBeingAFolder:function(a){return f.mightBeAFolder(a)&&!a.checkedForBeingAFolder},hasToHandlePossibleForbiddenFolderUpload:function(a){var c,b;if(browserSniffer.isDirectoryUploadSupported())return!1;if(a.files&&a.files.length)for(c=0;c<a.files.length;c+=1)if(b=a.files[c],k.hasToBeCheckedForBeingAFolder(b))return!0;return!1},
getProgressFromCallback:function(a,b){h.fileUploadProgress(a,{disableFileAction:function(){c.disableAction(b)},setProgressTo:function(c){a=c}});return a},onDone:function(a,b){k.enableUploadButtonsAndDropzone();var d=b.fileId;c.updateFileProgress(d,1);c.setFileStatusToSuccess(d,k.requestFileDelete);void 0!==h.fileUploadSuccess&&h.fileUploadSuccess(a,b)},onFail:function(a,b){k.enableUploadButtonsAndDropzone();var d=b.fileId;c.setFileStatusToError(d,a,k.removeFromList);c.enableAction(d);void 0!==h.fileUploadError&&
h.fileUploadError(a)},onProcessAlways:function(a,b){if(!k.isMultipleFileSelect(b)){var d=b.files[b.index];d.preview&&c.updateFilePreview(b.fileId,d.preview)}},onProgress:function(a,b){var e=b.fileId,f=b.loaded/b.total,g;g=objectState.isFunction(h.fileUploadProgress)?k.getProgressFromCallback(f,e):f;c.updateFileProgress(e,g);d.disableDeletePostBackAfterUpload&&f>=k.disableDeletePostbackThreshold&&c.disableAction(e)},onAdd:function(a,b,g){var l=k.isMultipleFileSelect(b)||k.isSingleFileInFolder(b),r=
null!=k.currentFileId;if(void 0!==h.fileSelected&&(r=h.fileSelected(a,b,r),null!=r&&!0===r.cancel))return r;r=k.getFileInfo(b.files,l);k.currentFileId=r.fileId;c.addFile(r,function(){k.onBeforeAbortUpload();b.abort()});if(k.hasToHandlePossibleForbiddenFolderUpload(b))return k.handleForbiddenFolderUpload(b,r),{cancel:!0};var q=f.validateFile(r);if(!q.isValid)return k.onFail(q.errorMessage,r),{cancel:!0};b.formData=l&&d.includeFolderManifest?{manifest:e.createJSON(b.files)}:{};b.fileId=r.fileId;k.disableUploadButtonsAndDropzone();
c.setFileStatusToInProgress(r.fileId);void 0!==h.beforeFileUpload&&h.beforeFileUpload(a,b,g);window.focus();return{success:!0}},onSend:function(a,b,e){e||(a=b.fileId,c.setDefaultFileProgress(a),d.disableDeletePostBackAfterUpload&&!b.allowAbortInUploadWithoutProgress&&c.disableAction(a))},onBeforeFileRemoved:function(a,c){void 0!==h.beforeFileRemoved&&h.beforeFileRemoved(a,c)},onFileRemoveError:function(a,c,b){void 0!==h.fileRemoveError&&h.fileRemoveError(a,c,b)},onFileRemoveSuccess:function(a,b,d){void 0!==
h.fileRemoveSuccess&&h.fileRemoveSuccess(a,b,d);c.removeFiles();void 0!==h.fileRemoved&&h.fileRemoved()},removeFromList:function(a){k.currentFileId=null;c.removeFile(a);h.fileRemoved&&h.fileRemoved()},requestFileDelete:function(c){a.requestFileDelete(c,{beforeRemoved:k.onBeforeFileRemoved,removeError:k.onFileRemoveError,removeSuccess:k.onFileRemoveSuccess})},onBeforeAbortUpload:function(){void 0!==h.beforeFileUploadAborted&&h.beforeFileUploadAborted()},onUploadAborted:function(a,b){void 0!==h.fileUploadAborted&&
h.fileUploadAborted(a,b);c.removeFiles();k.currentFileId=null;k.enableUploadButtonsAndDropzone()},returnFalseFunction:function(){return!1},takeOnlyFirstFileFunction:function(a,c){c.files=c.files.splice(0,1)},disableUploadButtonsAndDropzone:function(){b.folderInput.prop("disabled",!0);$(b.fileInput.selector).prop("disabled",!0);$(b.fileInput.selector).bind("fileuploaddrop",k.returnFalseFunction)},enableUploadButtonsAndDropzone:function(){b.folderInput.prop("disabled",!1);$(b.fileInput.selector).prop("disabled",
!1);$(b.fileInput.selector).unbind("fileuploaddrop",k.returnFalseFunction)}},l={subscribe:function(a){h=a},setCurrentFileStatusToError:function(a){var b=k.currentFileId;c.setFileStatusToError(b,a,k.removeFromList);c.enableAction(b)},enableMultipleFilesMode:function(){d.allowFoldersUpload&&k.enableFolderInput();d.allowMultipleFiles&&(k.changeFileInputToAcceptMultipleFiles(),k.changeDropZoneToAcceptMultipleFiles())},enableSingleFileMode:function(){k.disableFolderInput();k.changeFileInputToAcceptSingleFile();
k.changeDropZoneToAcceptSingleFile()},disableUploadsUntilFileIsRemoved:function(a){k.disableUploadButtonsAndDropzone();c.setActionCallback(k.currentFileId,function(c){k.removeFromList(c);k.enableUploadButtonsAndDropzone();a()})},setFileRemovedCallback:function(a){c.setActionCallback(k.currentFileId,function(c){k.removeFromList(c);"function"===typeof a&&a()})},displayFileInFileList:function(a,b){k.currentFileId=guidFactory.newGuid();c.addFile({name:a,size:b,fileId:k.currentFileId});c.setFileStatusToSuccess(k.currentFileId);
d.readOnlyMode&&c.hideAction(k.currentFileId)}};k.initialize(l);return l}var UploaderFileItemFactory=function(){return function(b){var d=this;this.literals=b;this.create=function(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'fileData' is not defined");return new UploaderFileItem(b,d.literals)};contract.require(!objectState.isNullOrUndefined(b),"argument 'literals' is not defined")}}();
function AjaxUploaderFolderManifestFactory(){var b={escapeRegExpSpecialCharacters:function(b){return b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},makeForwardAndBackSlashesTreatedAsEqual:function(b){return b.replace(/\\\\|\//g,"[\\/]")},markStringAsEndingInput:function(b){return b+"$"},getFileNameRemovalRegExpString:function(d){d=b.escapeRegExpSpecialCharacters(d);d=b.makeForwardAndBackSlashesTreatedAsEqual(d);return b.markStringAsEndingInput(d)},getFileNameRemovalRegExp:function(d){d=b.getFileNameRemovalRegExpString(d);
return new RegExp(d,"i")},removeFileNameFromPath:function(d,c){var a=b.getFileNameRemovalRegExp(c);return d.replace(a,"")},trimFolderPath:function(b){b=b.replace(/[\\/]$/,"");return b=b.replace(/^[\\/]/,"")},getFolderForFile:function(d){var c=auCommon.getRelativePath(d,"");d=c.length<d.name.length?c:b.removeFileNameFromPath(c,d.name);return b.trimFolderPath(d)},convertSingleFileToArrayIfNeeded:function(b){Array.isArray(b)||(b=[b]);return b},getArrayOfFolders:function(d){var c=[],a=d.length,e;for(e=
0;e<a;e+=1)objectState.isFileError(d[e])||c.push(b.getFolderForFile(d[e]));return c}},d={create:function(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'files' is not defined");d=b.convertSingleFileToArrayIfNeeded(d);return{folders:b.getArrayOfFolders(d)}},createJSON:function(b){b=d.create(b);return JSON.stringify(b)}};return d}
function AjaxUploaderValidationService(b,d){contract.require(!objectState.isNullOrUndefined(b),"argument 'settings' is not defined");contract.require(0<=b.maxFileSize,"MaxFileSize cannot be less than zero");contract.require(0<=b.minFileSize,"MinFileSize cannot be less than zero");contract.require(!objectState.isNullOrUndefined(d),"argument 'translations' is not defined");var f={getSuccessResult:function(){return{isValid:!0}},getErrorResult:function(a){return{isValid:!1,errorMessage:a}},tryReadFile:function(a,
c){var b=new FileReader,h=!1;b.onprogress=function(a){h||(h=!0,b.abort(),c(f.getSuccessResult()))};b.onerror=function(a){h||(h=!0,c(f.getErrorResult(d.cantHandleFolderDragAndDrop)))};b.readAsArrayBuffer(a)},validateFileSize:function(a){return a<b.minFileSize?f.getErrorResult(d.fileTooSmall):a>b.maxFileSize?f.getErrorResult(d.fileTooBig):f.getSuccessResult()},validateFileExtension:function(a){return b.forbiddenFileExtensions.test(a)?f.getSuccessResult():f.getErrorResult(d.fileExtensionNotAllowed)},
validateFileNameAgainstIllegalCharacters:function(a){var c=[];if(f.areIllegalCharactersDefined())for(var g=b.illegalCharacters.length,h=0;h<g;h++)b.illegalCharacters[h]&&-1<a.indexOf(b.illegalCharacters[h])&&c.push(b.illegalCharacters[h]);return 0<c.length?(a=c.filter(function(a,b){return c.indexOf(a)==b}),f.getErrorResult(d.invalidCharactersXInFileName.replace("{0}",a.join(" ")))):f.getSuccessResult()},areIllegalCharactersDefined:function(){return null!=b.illegalCharacters&&0<b.illegalCharacters.length},
validateFileNameAgainstIllegalFileNames:function(a){var c=[];if(f.areIllegalFileNamesDefined()){a=a.split(".")[0];for(var g=b.illegalFileNames.length,h=0;h<g;h++)b.illegalFileNames[h]&&a.toUpperCase()===b.illegalFileNames[h].toUpperCase()&&c.push(b.illegalFileNames[h])}return 0<c.length?(a=c.filter(function(a,b){return c.indexOf(a)==b}),f.getErrorResult(d.invalidFirstPartOfFileName.replace("{0}",a.join(" ")))):f.getSuccessResult()},areIllegalFileNamesDefined:function(){return null!=b.illegalFileNames&&
0<b.illegalFileNames.length},checkIsFileError:function(a){return objectState.isFileError(a)?f.getErrorResult(d.unableToOpenFile):f.getSuccessResult()}},c={maxFileSize:b.maxFileSize,minFileSize:b.minFileSize,validateFile:function(a){contract.require(!objectState.isNullOrUndefined(a),"argument 'file' is not defined");var c;c=f.checkIsFileError(a);if(!1===c.isValid)return c;c=f.validateFileNameAgainstIllegalCharacters(a.name);if(!1===c.isValid)return c;c=f.validateFileNameAgainstIllegalFileNames(a.name);
if(!1===c.isValid)return c;c=f.validateFileExtension(a.name);if(!1===c.isValid)return c;c=f.validateFileSize(a.size);return!1===c.isValid?c:f.getSuccessResult()},mightBeAFolder:function(a){return""===a.type},validateIsFile:function(a,b){c.mightBeAFolder(a)&&FileReader?f.tryReadFile(a,b):b(f.getSuccessResult())}};return c}
function AjaxUploaderFileUploader(b){var d={fileInputSelector:b.selector,getFileInput:function(){return $(d.fileInputSelector)},uploadFiles:function(b){d.getFileInput().fileupload("add",{files:b})}};return{upload:function(b){b=Array.isArray(b)?b:[b];d.uploadFiles(b)}}}
function AjaxUploaderFileService(b,d,f){contract.require(!objectState.isNullOrUndefined(b),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(b.uploadUrl),"parameter 'uploadUrl' of argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(b.uploadType),"parameter 'uploadType' of argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'optionsFactory' is not defined");var c={uploadUrl:b.uploadUrl,
uploadType:b.uploadType,dataType:"json",previewMaxWidth:50,previewMaxHeight:50,loadImageMaxFileSize:25E6,errorMessageTranslator:f,isFileUploadAborted:function(a){return"abort"===a.errorThrown},isIframeTransportUsed:function(a){return a.dataType&&"iframe"===a.dataType.substr(0,6)},isUploadProgressSupported:function(a){return!c.isIframeTransportUsed(a)},isDoneReallyAFail:function(a){return!c.isIframeTransportUsed(a)||"undefined"!==typeof a.result&&null==a.result.Error?!1:!0},disableFileUpload:function(a){a.isEnabled=
!1},enableFileUpload:function(a){a.isEnabled=!0},hasDataToSend:function(a){return 0<a.files.length},getErrorMesageFromXhr:function(a){if(a.responseText)try{var c=JSON.parse(a.responseText);if(!objectState.isNullOrWhitespace(c.errorMessage))return c.errorMessage}catch(b){}return a.statusText},checkSubscribeFunctionPreconditions:function(a,c){contract.require(!objectState.isNullOrUndefined(a),"argument 'uploaderControls' is not defined");contract.require(!objectState.isNullOrUndefined(a.fileInput),
"parameter 'fileInput' of argument 'uploaderControls' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(c.onFail),"parameter 'onFail' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(c.onDone),"parameter 'onDone' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(c.onFileUploadAborted),"parameter 'onFileUploadAborted' of argument 'uploaderCallbacks' is not defined");
contract.require(!objectState.isNullOrUndefined(c.onProcessAlways),"parameter 'onProcessAlways' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(c.onProgress),"parameter 'onProgress' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(c.onSend),"parameter 'onSend' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(c.onAdd),"parameter 'onAdd' of argument 'uploaderCallbacks' is not defined")},
getErrorMessageFromResponse:function(a){var b=null;c.errorMessageTranslator&&(b=c.errorMessageTranslator.getErrorMessageFromResponse(a));null==b&&a.xhr&&(b=c.getErrorMesageFromXhr(a.xhr()));return b},getErrorMessageFromIframeUploadResponse:function(a){var b=null;a.result&&c.errorMessageTranslator&&(b=c.errorMessageTranslator.getErrorMessageFromErrorCode(a.result.Error));null==b&&(b=void 0);return b}};return{subscribe:function(a,b){c.checkSubscribeFunctionPreconditions(a,b);var f={url:c.uploadUrl},
h={isEnabled:!0};a.fileInput.fileupload({url:f.url,type:c.uploadType,dataType:c.dataType,dropZone:a.dropZone||void 0,previewMaxWidth:c.previewMaxWidth,previewMaxHeight:c.previewMaxHeight,loadImageMaxFileSize:c.loadImageMaxFileSize,singleFileUploads:!1,done:function(a,d){if(c.isDoneReallyAFail(d)){d.textStatus="error";var f=c.getErrorMessageFromIframeUploadResponse(d);b.onFail(f,d)}else b.onDone(a,d);c.enableFileUpload(h)},fail:function(a,d){if(c.isFileUploadAborted(d))b.onFileUploadAborted(a,d);else{var f=
c.getErrorMessageFromResponse(d);b.onFail(f,d)}c.enableFileUpload(h)},processalways:b.onProcessAlways,progress:b.onProgress,send:function(a,d){b.onSend(a,d,c.isUploadProgressSupported(d))}});a.fileInput.bind("fileuploadadd",function(a,l){if(!h.isEnabled)return!1;var m=$(this);if(!c.hasDataToSend(l))return!1;c.disableFileUpload(h);var n=d.create(f);if(!0===b.onAdd(a,l,n).cancel)return c.enableFileUpload(h),!1;m.fileupload("option",n.getProcessedOptions())});return AjaxUploaderFileUploader(a.fileInput)},
requestFileDelete:function(a,b){var d={url:URI(c.uploadUrl).addSearch("fileId",a).normalizeSearch().toString(),dataType:"json",type:"DELETE",beforeSend:b.beforeRemoved,error:b.removeError,success:b.removeSuccess};$.ajax(d)}}}
function AjaxUploaderControlInitialization(b,d,f,c,a){var e=UploaderSenderOptionsFactory(),g=AjaxUploaderFolderManifestFactory(),h=new UploaderFileItemFactory(d),k=AjaxUploaderValidationService(b,d),h=new UploaderFileList(f.fileList,h,d);a=AjaxUploaderFileService(b,e,a);return AjaxUploaderControl(f,b,k,h,a,g,d,c)}
function AjaxUploaderControls(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'controls' is not defined");var d={getJQuerySafeId:function(b){return"#"+b.replace(/(:|\.|\[|\])/g,"\\$1")},jQElementExists:function(b){return 0<b.length},getJQElement:function(b,c){var a=d.getJQuerySafeId(b),a=$(a);if(d.jQElementExists(a))return a;if(void 0!==c)throw c;},initializeBrowseButtonFocusStyles:function(b){b.focusin(function(){b.toggleClass("ccl-button-color-green-highlight")}).focusout(function(){b.toggleClass("ccl-button-color-green-highlight")})},
initialize:function(b){b=b.fileInput.parent();d.initializeBrowseButtonFocusStyles(b)}};b={fileInput:d.getJQElement(b.FileInput,"FileInput not found"),fileList:d.getJQElement(b.FileList,"FileList not found"),dropZone:d.getJQElement(b.DropZone,"DropZone not found"),folderInput:d.getJQElement(b.FolderInput,"FolderInput not found"),folderInputLink:d.getJQElement(b.FolderInputLink,"FolderInputLink not found")};d.initialize(b);return b}
function AjaxUploaderLiterals(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'translations' is not defined");var d={fileExtensionNotAllowed:b.FileExtensionNotAllowed,fileTooBig:b.FileTooBig,fileTooSmall:b.FileTooSmall,kb:b.Kb,mb:b.Mb,error:b.Error,maxFileSizeForUpload:b.MaxFileSizeForUpload,dropYourFilesHere:b.DropYourFilesHere,browse:b.Browse,remove:b.Remove,unknown:b.Unknown,cantHandleFolderDragAndDrop:b.CantHandleFolderUpload,invalidCharactersXInFileName:b.InvalidCharactersXInFileName,
unableToOpenFile:b.UnableToOpenFile,files:b.Files,invalidFirstPartOfFileName:b.InvalidFirstPartOfFileName,getFormattedFileSize:function(b){return"number"!==typeof b?"":1048576<=b?(b/1048576).toFixed(2)+" "+d.mb:(b/1024).toFixed(2)+" "+d.kb}};return d}
function AjaxUploaderSettings(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'settings' is not defined");var d={getRegExp:function(b){if(b instanceof RegExp)return b;b=b.split("/");var c=b.pop();b.shift();return new RegExp(b.join("/"),c)},getBoolean:function(b){return/^true$/i.test(b)},getArray:function(b){return"undefined"===typeof b||null==b?null:JSON.parse(b)}};return{uploadUrl:b.UploadUrl,uploadType:b.UploadType,maxFileSize:parseInt(b.MaxFileSize),minFileSize:parseInt(b.MinFileSize||
0),forbiddenFileExtensions:d.getRegExp(b.ForbiddenFileExtensions),allowFoldersUpload:d.getBoolean(b.AllowFoldersUpload),allowMultipleFiles:d.getBoolean(b.AllowMultipleFiles),allowDragAndDrop:d.getBoolean(b.AllowDragAndDrop),includeFolderManifest:d.getBoolean(b.IncludeFolderManifest),disableDeletePostBackAfterUpload:d.getBoolean(b.DisableDeletePostBackAfterUpload),illegalFileNames:d.getArray(b.IllegalFileNames),illegalCharacters:d.getArray(b.IllegalCharacters),readOnlyMode:d.getBoolean(b.ReadOnlyMode)}}
var FileListLiterals=function(){function b(b){this.kb=b.KbTranslation;this.mb=b.MbTranslation;this.error=b.ErrorTranslation;this.remove=b.RemoveTranslation;this.unknown=b.UnknownTranslation}b.prototype.getFormattedFileSize=function(b){return"number"!==typeof b?"":1048576<=b?(b/1048576).toFixed(2)+" "+this.mb:(b/1024).toFixed(2)+" "+this.kb};return b}(),FilesInCloudController=function(){return function(b,d){var f=this;this.pickers=b;this.fileValidator=d;this.subscribe=function(c){f.callbacks=c};this.subscribeToPickers=
function(){f.pickers.forEach(function(c){f.initPickerCallback(c)})};this.initPickerCallback=function(c){var a=function(){},a=new PickerCallback(a,a,function(a){return f.fileSelected(a)},a);c.subscribe(a)};this.fileSelected=function(c){c=f.getFilesWithFileItems(c);var a=c.map(function(a){return a.fileItem});f.callbacks.onFilesSelected(a);for(a=0;a<c.length;a++){var b=c[a];f.processFile(b.result,b.fileItem)}};this.getFilesWithFileItems=function(c){return c.files.map(function(a){return{result:a,fileItem:f.prepareFileItem(a,
c.getOAuthContext())}})};this.prepareFileItem=function(c,a){var b=Uploaders.FileList.Model.FileItem.buildItemForFileInCloud(FileInCloudMetadata.create(c,a));b.onRemoveCallback=function(){f.callbacks.onFileRemoved(b.metadata)};return b};this.processFile=function(c,a){var b=f.fileValidator.validateFile(c);b.isValid()?(a.markAsCompleted(),f.callbacks.onActionSuccess(a.metadata)):(b=b.getData(),a.setError(b),f.callbacks.onActionError(a.metadata,b))};this.subscribeToPickers()}}(),UploadAreaState=function(){return function(){var b=
this;this.isVisible=ko.observable(!1);this.show=function(){b.isVisible(!0)};this.hide=function(){b.isVisible(!1)}}}(),UploadControl=function(){return function(b,d,f,c,a,e,g){var h=this;this.controllers=b;this.callbacks=d;this.uploadArea=f;this.fileList=c;this.statusCalculator=a;this.metadataManager=e;this.allowToSelectMultipleFiles=g;this.subscribeToControllers=function(){h.controllers.forEach(h.subscribeToController)};this.subscribeToController=function(a){a.subscribe({onInitializationFailure:function(){},
onFilesSelected:h.signalFilesSelection,onActionSuccess:h.signalSuccess,onActionError:h.signalError,onActionAborted:h.signalAbort,onFileRemoved:h.signalFileRemoval})};this.handleStateChange=function(){var a=h.fileList.getFiles();h.metadataManager.replaceFileItems(a);h.handleUploadAreaVisibility();h.callbacks.onStatusChanged&&(a=h.statusCalculator.calculate(a),h.callbacks.onStatusChanged(a))};this.handleUploadAreaVisibility=function(){h.allowToSelectMultipleFiles||0===h.fileList.getFiles().length?h.uploadArea.show():
h.uploadArea.hide()};this.signalFilesSelection=function(a){for(var c=0;c<a.length;c++)h.fileList.addFile(a[c]);h.handleStateChange();h.callbacks.onFilesSelected&&(a=a.map(function(a){return a.metadata}),h.callbacks.onFilesSelected(a))};this.signalSuccess=function(a){h.handleStateChange();if(h.callbacks.onActionSuccess)h.callbacks.onActionSuccess(a)};this.signalError=function(a,c){h.handleStateChange();if(h.callbacks.onActionError)h.callbacks.onActionError(a,c)};this.signalAbort=function(a){h.handleStateChange();
if(h.callbacks.onActionAborted)h.callbacks.onActionAborted(a)};this.signalFileRemoval=function(a){h.handleStateChange();if(h.callbacks.onFileRemoved)h.callbacks.onFileRemoved(a)};this.showFileItemsFromHiddenMetadataField=function(){for(var a=function(a){a.markAsCompleted();h.fileList.addFile(a);a.onRemoveCallback=function(){h.signalFileRemoval(a.metadata);h.handleStateChange()}},c=0,b=h.metadataManager.getFileItems();c<b.length;c++)a(b[c]);h.handleStateChange()};contract.require(!objectState.isNullOrUndefined(this.controllers),
"'controllers' is not defined");contract.require(!objectState.isNullOrUndefined(this.callbacks),"'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(this.uploadArea),"'uploadArea' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileList),"'fileList' is not defined");contract.require(!objectState.isNullOrUndefined(this.statusCalculator),"'statusManager' is not defined");contract.require(!objectState.isNullOrUndefined(this.metadataManager),"'metadataManager' is not defined");
this.subscribeToControllers();this.showFileItemsFromHiddenMetadataField();this.handleUploadAreaVisibility()}}(),UploadControlCallbacksFinder=function(){function b(b,f){this.callbackNames=b;this.functionFinder=f;contract.require(!objectState.isNullOrUndefined(this.functionFinder),"'functionFinder' is not defined")}b.prototype.getCallbacks=function(){return{onFilesSelected:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onFilesSelected:void 0),onActionSuccess:this.functionFinder.getFunctionByName(this.callbackNames?
this.callbackNames.onActionSuccess:void 0),onActionError:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onActionError:void 0),onActionAborted:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onActionAborted:void 0),onFileRemoved:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onFileRemoved:void 0),onStatusChanged:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onStatusChanged:void 0)}};
return b}(),UploadControlPickerAdapter=function(){function b(b){this.picker=b}b.prototype.show=function(){};b.prototype.hide=function(){};b.prototype.enable=function(){};b.prototype.disable=function(){};b.prototype.open=function(){this.picker.open()};b.prototype.subscribe=function(b){this.picker.subscribe(b)};b.prototype.enableMultipleFilesSelecting=function(){this.picker.enableMultipleFilesSelecting()};b.prototype.disableMultipleFilesSelecting=function(){this.picker.disableMultipleFilesSelecting()};
return b}();
function GoogleDriveUploaderApiInitializer(b,d,f){contract.require(!objectState.isNullOrUndefined(d),"argument 'onReadyCallback' is not defined");var c={pickerApiLoaded:!1,authApiLoaded:!1,oAuthToken:null,retried:!1,onInitializationError:function(a){f&&f(a)},loadAuthApi:function(){b.load("auth",{callback:c.onAuthApiLoaded})},loadPickerApi:function(){b.load("picker",{callback:c.onPickerApiLoaded})},onAuthApiLoaded:function(){c.authApiLoaded=!0;c.ifReadyCallOnReady()},onPickerApiLoaded:function(){c.pickerApiLoaded=!0;
c.ifReadyCallOnReady()},ifReadyCallOnReady:function(){c.pickerApiLoaded&&c.authApiLoaded&&d&&d(b.auth)},initialize:function(){objectState.isNullOrUndefined(b)?(safeConsoleLogger.error("Loading of Google Picker API failed. Most probably https://apis.google.com/js/api.js was block by firewall, proxy or adds blocking software."),c.onInitializationError("gapi is not available")):(c.loadAuthApi(),c.loadPickerApi())}};c.initialize();return{}}
function GoogleDriveUploaderCallbacks(b){var d=FunctionFinder();return{controlInitialized:d.getFunctionByName(b?b.OnControlInitialization:void 0),pickerOpened:d.getFunctionByName(b?b.OnPickerOpened:void 0),fileSelected:d.getFunctionByName(b?b.OnFileSelected:void 0),fileSelectionCanceled:d.getFunctionByName(b?b.OnFileSelectionCanceled:void 0),fileUploadSuccess:d.getFunctionByName(b?b.OnFileUploadSuccess:void 0),fileUploadError:d.getFunctionByName(b?b.OnFileUploadError:void 0),controlInitializationError:d.getFunctionByName(b?
b.OnControlInitializationError:void 0),fileUploadAborted:d.getFunctionByName(b?b.OnFileUploadAborted:void 0)}}function DelayRequest(b){var d={callbacks:[],current:0,signalled:0,running:!1,runCallbacks:function(c){if(!d.running){for(d.running=!0;d.current<d.signalled&&d.current<d.callbacks.length;)d.callbacks[d.current](c),d.current+=1;d.running=!1}}},f={data:b,wait:function(c){d.callbacks.push(c);d.runCallbacks(this);return f},signal:function(){d.signalled+=1;d.runCallbacks(this)}};return f}
function GoogleDriveUploaderControl(b,d,f,c,a,e){contract.require(!objectState.isNullOrUndefined(b),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'controls' is not defined");contract.require(!objectState.isNullOrUndefined(d.googleDriveLink),"controls.googleDriveLink is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'literals' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'pickerNamespace' is not defined");
contract.require(!objectState.isNullOrUndefined(a),"argument 'authApi' is not defined");e=e||{};var g={baseDownloadUrl:"https://www.googleapis.com/drive/v2/files/{fileId}?key={developerKey}",pickerBase:null,currentFileId:null,retryAuthorization:!1,oAuthToken:null,disablePickerButton:!1,disableDeletePostbackThreshold:.99,googleDriveSourceType:2,hasCurrentFileUploadEnded:!1,getAuthHeader:function(){return{Authorization:"Bearer "+g.oAuthToken}},initializeBaseDownloadUrl:function(){g.baseDownloadUrl=
g.baseDownloadUrl.replace("{developerKey}",b.developerKey)},setOriginUrlIfNeeded:function(a){objectState.isNullOrUndefined(b.originUrl)||a.setOrigin(b.originUrl)},prepareView:function(a){a=new c.DocsView(a);a.setIncludeFolders(!0);a.setParent("root");return a},preparePickerBase:function(){var a=new c.PickerBuilder;a.addViewGroup((new c.ViewGroup(g.prepareView(c.ViewId.DOCS))).addView(g.prepareView(c.ViewId.DOCS_IMAGES)).addView(g.prepareView(c.ViewId.DOCS_VIDEOS)).addView(g.prepareView(c.ViewId.DOCUMENTS)).addView(g.prepareView(c.ViewId.DRAWINGS)).addView(g.prepareView(c.ViewId.FOLDERS)).addView(g.prepareView(c.ViewId.PDFS)).addView(g.prepareView(c.ViewId.PHOTOS)).addView(g.prepareView(c.ViewId.PRESENTATIONS)).addView(g.prepareView(c.ViewId.SPREADSHEETS))).setOAuthToken(g.oAuthToken).setDeveloperKey(b.developerKey).setLocale(b.language).setCallback(g.googleDrivePickerCallback);
g.setOriginUrlIfNeeded(a);return a},createPicker:function(a){b.allowMultipleFiles&&h.isMultipleFilesModeEnabled?a.enableFeature(c.Feature.MULTISELECT_ENABLED):a.disableFeature(c.Feature.MULTISELECT_ENABLED);return a.build()},tryAuthorize:function(c,d){a.authorize({client_id:b.clientId,scope:b.scope,immediate:c},function(a){g.onAuthResult(a,d)})},onAuthResult:function(a,c){var b=!1;if(a&&!a.error)g.oAuthToken=a.access_token,b=!0;else{var d=a&&a.error||"some auth error",e=a.error_subtype||"";g.retryAuthorization||
"origin_mismatch"===e?(safeConsoleLogger.error("Authorization of Google Picker API failed. Most probably Platform's subdomain wasn't registered at https://console.developers.google.com."),g.onControlInitializationError(d)):(safeConsoleLogger.warn("Authorization of Google Picker API failed. This might apparently happen when browser uses pop-up blocker. Authorization will be retried on upload button click."),b=g.retryAuthorization=!0)}b&&c&&c()},handleButtonClick:function(){g.disablePickerButton||(g.retryAuthorization?
g.tryAuthorize(!1,g.showPicker):g.showPicker())},showPicker:function(){var a=g.preparePickerBase();g.createPicker(a).setVisible(!0);e.pickerOpened&&e.pickerOpened(h)},bindPickerToLinkClick:function(){d.googleDriveLink.click(g.handleButtonClick)},initialize:function(a){g.tryAuthorize(!0,function(){g.bindPickerToLinkClick();g.initializeBaseDownloadUrl();e.controlInitialized&&e.controlInitialized(a)})},googleDrivePickerCallback:function(a){switch(a.action){case c.Action.PICKED:g.onFileSelected(a);break;
case c.Action.CANCEL:g.onFileSelectionCanceled(a)}},getFileDownloadUrl:function(a){return g.baseDownloadUrl.replace("{fileId}",a[c.Document.ID])},getFileInfo:function(a){var c={fileId:null,size:null,name:null};c.fileId=guidFactory.newGuid();1===a.length?(c.size=a[0].size,c.name=a[0].name):(c.size=a.reduce(function(a,c){return a+c.size},0),c.name=f.files);return c},getParameterValue:function(a,c){for(var b=[],d,e=a.slice(a.indexOf("?")+1).split("&"),f=0;f<e.length;f++)d=e[f].split("="),b.push(d[0]),
b[d[0]]=d[1];return b[c]},signalIfDoneProcessing:function(a){a.processed+=1;a.processed>=a.total&&a.delayed.signal()},getMetadataUrl:function(a){return a.isSpreadSheet?b.googleDriveProxy+encodeURIComponent(a.url):a.url},getFileSize:function(a){var c=0;a=$.ajax({url:g.getMetadataUrl(a),type:"HEAD",data:"",async:!1});200==a.status&&(c=parseInt(a.getResponseHeader("Content-Length")));return c},checkFileSize:function(a){0==a.size&&(a.size=this.getFileSize(a))},getDownloadUrl:function(a,c){$.ajax({url:g.getMetadataUrl(a),
type:"GET",data:"",headers:g.getAuthHeader(),async:!1,success:function(b){if(b.downloadUrl)a.url=b.downloadUrl+"&access_token="+g.oAuthToken;else if(b.exportLinks&&b.exportLinks[Object.keys(b.exportLinks)[0]]){var d;d=b.exportLinks["application/vnd.openxmlformats-officedocument.wordprocessingml.document"]?"application/vnd.openxmlformats-officedocument.wordprocessingml.document":b.exportLinks["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":
b.exportLinks["image/png"]?"image/png":b.exportLinks["application/vnd.openxmlformats-officedocument.presentationml.presentation"]?"application/vnd.openxmlformats-officedocument.presentationml.presentation":b.exportLinks["application/pdf"]?"application/pdf":Object.keys(b.exportLinks)[0];a.url=b.exportLinks[d]+"&access_token="+g.oAuthToken;if(d=g.getParameterValue(a.url,"exportFormat"))a.name+="."+d}a.thumbnailUrl=b.thumbnailLink;g.checkFileSize(a);g.signalIfDoneProcessing(c)},error:function(){g.signalIfDoneProcessing(c)}})},
onFileSelected:function(a){g.disablePickerButton||(g.disablePickerButton=!0,g.getFileMetadataFromGoogleDriveResponse(a).wait(g.getDownloadUrlForFiles).wait(g.executeFileSelectedCallback))},getFileMetadataFromGoogleDriveResponse:function(a){a=DelayRequest({request:g.prepareFileMetadata(a)});a.signal();return a},prepareFileMetadata:function(a){var b={sourceType:g.googleDriveSourceType,files:null};b.files=a[c.Response.DOCUMENTS].map(function(a){return{url:g.getFileDownloadUrl(a),name:a[c.Document.NAME],
size:a.sizeBytes,isSpreadSheet:"application/vnd.google-apps.spreadsheet"===a.mimeType,fileId:a[c.Document.ID],type:a[c.Document.MIME_TYPE],icon:a[c.Document.ICON_URL]}});g.hasCurrentFileUploadEnded=!1;return b},executeFileSelectedCallback:function(a){a=a.data.request.files;void 0!==e.fileSelected&&e.fileSelected(a)},getDownloadUrlForFiles:function(a){var c=a.data.request.files,b={total:c.length,processed:0,delayed:a};c.forEach(function(a){g.getDownloadUrl(a,b)})},onControlInitializationError:function(a){e.controlInitializationError&&
e.controlInitializationError(a)},onFileSelectionCanceled:function(a){e.fileSelectionCanceled&&e.fileSelectionCanceled()},setUploaderButtonDisplay:function(a){a?d.googleDriveLink.show():d.googleDriveLink.hide()}},h={isMultipleFilesModeEnabled:!0,hideUploaderButton:function(){g.setUploaderButtonDisplay(!1)},showUploaderButton:function(){g.setUploaderButtonDisplay(!0)},enableMultipleFilesMode:function(){h.isMultipleFilesModeEnabled=!0},disableMultipleFilesMode:function(){h.isMultipleFilesModeEnabled=
!1},enablePickerButton:function(){g.disablePickerButton=!1}};g.initialize(h);return h}
function GoogleDriveUploaderSettings(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'settings' is not defined");var d={getRegExp:function(b){if(b instanceof RegExp)return b;b=b.split("/");var c=b.pop();b.shift();return new RegExp(b.join("/"),c)},getBoolean:function(b){return/^true$/i.test(b)}};return{maxFileSize:parseInt(b.MaxFileSize),minFileSize:parseInt(b.MinFileSize||0),developerKey:b.DeveloperKey,clientId:b.ClientId,scope:b.Scope,immediate:d.getBoolean(b.Immediate),allowMultipleFiles:d.getBoolean(b.AllowMultipleFiles),
uploadUrl:b.UploadUrl,googleDriveProxy:b.GoogleDriveProxy,disableDeletePostBackAfterUpload:d.getBoolean(b.DisableDeletePostBackAfterUpload),readOnlyMode:d.getBoolean(b.ReadOnlyMode),uploadStateServiceEndpoint:b.UploadStateServiceEndpoint,originUrl:b.OriginUrl,pickerProxyMode:d.getBoolean(b.PickerProxyMode),language:b.Language}}
function GoogleDriveUploaderControlInitialization(b,d,f,c){var a={onReadyCallback:function(a){GoogleDriveUploaderControl(b,f,d,google.picker,a,c)},initialize:function(){GoogleDriveUploaderApiInitializer(window.gapi,a.onReadyCallback,c.controlInitializationError)}};a.initialize()}
function GoogleDriveUploaderControls(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'controls' is not defined");var d={getJQuerySafeId:function(b){return"#"+b.replace(/(:|\.|\[|\])/g,"\\$1")},jQElementExists:function(b){return 0<b.length},getJQElement:function(b,c){var a=d.getJQuerySafeId(b),a=$(a);if(d.jQElementExists(a))return a;if(void 0!==c)throw c;}};return{googleDriveLink:d.getJQElement(b.GoogleDriveLink,"GoogleDriveLink not found"),fileList:d.getJQElement(b.FileList,"FileList not found")}}
function GoogleDriveUploaderLiterals(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'translations' is not defined");var d={chooseFromGoogleDrive:b.ChooseFromGoogleDrive,kb:b.Kb,mb:b.Mb,unknown:b.Unknown,files:b.Files,getFormattedFileSize:function(b){return objectState.isNumber(b)?1048576<=b?(b/1048576).toFixed(2)+" "+d.mb:(b/1024).toFixed(2)+" "+d.kb:""}};return d}
var ValidationSettings=function(){function b(b){this.minFileSize=parseInt(b.MinFileSize);this.maxFileSize=parseInt(b.MaxFileSize);this.allowedFileExtensionsRegex=this.getRegExp(b.ForbiddenFileExtensions);this.illegalCharacters=this.getArray(b.IllegalCharacters);this.restrictedFileNames=this.getArray(b.IllegalFileNames);this.maxFileNameLength=parseInt(b.MaxFileNameLength)}b.prototype.getRegExp=function(b){if(b instanceof RegExp)return b;if(b){b=b.split("/");var f=b.pop();b.shift();return new RegExp(b.join("/"),
f)}};b.prototype.getArray=function(b){return"undefined"===typeof b||null==b?null:JSON.parse(b)};return b}();
(function(b){var d=function(){return function(d){var c=this;this.showDialog=function(){b.UploadControlUtils.isMobile()&&(c.lastScroll=$(window).scrollTop(),b.UploadControlUtils.toggleTopFrameAndMobileOverlay(!1));c.isDialogVisible(!0);b.UploadControlUtils.isMobile()||c.focusFirstPicker()};this.hideDialog=function(){b.UploadControlUtils.toggleTopFrameAndMobileOverlay(!0);c.isDialogVisible(!1);b.UploadControlUtils.isMobile()&&($(window).scrollTop(c.lastScroll),$(".ccl-uc-dropzone-container").focus())};
this.focusFirstPicker=function(){$("#ccl-uc-file-dialog-container button")[1].focus()};contract.require(!objectState.isNullOrUndefined(d),"This ViewModel requires uploadAreaState to be passed. Please provide it.");this.isDialogVisible=ko.observable(!1);this.isUploadAreaVisible=ko.pureComputed(function(){return d.isVisible()})}}();b.UploadAreaViewModel=d})(Components||(Components={}));var uploaderSenderOptionsConstants={fileRepoData:"fileRepoData"};
function FileRepoErrorResponseTranslator(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'errorTranslations' is not defined");var d={getErrorMessageFromResponse:function(b){var c;try{c=b.xhr()}catch(a){return null}return d.getErrorMessageFromXhr(c)},getErrorMessageFromXhr:function(b){var c;try{c=JSON.parse(b.responseText).error}catch(a){return null}return d.getErrorMessageFromErrorCode(c)},getErrorMessageFromErrorCode:function(d){return null==d?null:b[d]}};return d}
var UploadControlFactory=function(){function b(b,f,c,a,e,g){this.uploadAreaContainerId=b;this.settings=f;this.validationSettings=c;this.callbackFinder=a;this.translations=e;this.metadataField=g}b.prototype.build=function(){this.setStaticTranslations();var b=(new PickerObjectsFactory(this.settings,this.translations)).build(),f=b[0],c=b[1],a=b[2],b=b[3],e=f.concat(c,a);this.initializeDialogComponent(b,e);b=new UploadAreaState;this.initializeUploadAreaComponent(b);e=new Uploaders.FileList.Components.FileListViewModel;
this.initializeFileListComponent(e);ko.applyBindings(null,window.document.getElementById(this.uploadAreaContainerId));var g=this.getGenericUploaderSettings(),h=new PickerFileResultValidatorLiterals(this.translations),k=new UploadStatusCalculator,l=new HiddenMetadataManager(this.metadataField),m=this.callbackFinder.getCallbacks(),n=new ActionQueue(this.settings.MaximumNumberOfConcurrentUploads),g=(new PickerFileResultValidatorFactory).createFileValidatorWithLocalizedMessages(g,h),p=this.getSender(),
f=new UploadController(f.map(function(a){return new UploadControlPickerAdapter(a)}),p,g,n),a=this.getFolderController(a,g,n),h=PickerFileResultValidatorFactory.createLocalizedValidatorForFilesInCloud(this.validationSettings.maxFileNameLength,h),c=new FilesInCloudController(c,h);return new UploadControl([f,a,c],m,b,e,k,l,this.settings.AllowToSelectMultipleFiles)};b.prototype.setStaticTranslations=function(){UploadControlTranslation.computerOrDevice=this.translations.ComputerOrDevice;UploadControlTranslation.folder=
this.translations.Folder;UploadControlTranslation.googleDrive=this.translations.GoogleDrive;UploadControlTranslation.dropbox=this.translations.Dropbox;UploadControlTranslation.oneDrive=this.translations.OneDrive;UploadControlTranslation.someFilesInThatFolderCannotBeUploaded=this.translations.SomeFilesInThatFolderCannotBeUploaded;UploadControlTranslation.addFiles=this.translations.AddFiles;UploadControlTranslation.orSimplyDropThemHere=this.translations.OrSimplyDropThemHere;UploadControlTranslation.uploadFileFrom=
this.translations.ColumnFileFrom;UploadControlTranslation.uploadFileFromMobile=this.translations.ColumnFileFromMobile;UploadControlTranslation.or=this.translations.Or;UploadControlTranslation.cancel=this.translations.Cancel;UploadControlTranslation.linkTo=this.translations.ColumnLinkTo;UploadControlTranslation.linkToMobile=this.translations.ColumnLinkToMobile;UploadControlTranslation.cloudServiceUnavailable=this.translations.CloudServiceUnavailable;UploadControlTranslation.tryAgainOrContactAdministrator=
this.translations.TryAgainOrContactAdministrator};b.prototype.initializeDialogComponent=function(b,f){var c=new Components.Dialog.DialogComponent(b,f);ko.components.register(c.name,c)};b.prototype.initializeUploadAreaComponent=function(b){b=new Components.UploadAreaComponent(b);ko.components.register(b.name,b)};b.prototype.initializeFileListComponent=function(b){b=new Uploaders.FileList.Components.FileListComponent(b,"file-list");ko.components.register(b.name,b)};b.prototype.getGenericUploaderSettings=
function(){return{disableDeletePostBackAfterUpload:this.settings.DisableDeletePostBackAfterUpload,minFileSize:this.validationSettings.minFileSize,maxFileSize:this.validationSettings.maxFileSize,allowedFileExtensionsRegex:this.validationSettings.allowedFileExtensionsRegex,illegalCharacters:this.validationSettings.illegalCharacters,restrictedFileNames:this.validationSettings.restrictedFileNames,maxFileNameLength:this.validationSettings.maxFileNameLength}};b.prototype.getSender=function(){var b=new GenericUploader.Sender.FileRepoSenderForLocalFiles.Factory(browserSniffer,
FileRepoErrorResponseTranslator({}),this.settings.FileRepoData),f=new GenericUploader.Sender.FileRepoSenderForExternalFiles.Factory(browserSniffer,FileRepoErrorResponseTranslator({}),{uploadStateServiceEndpoint:this.settings.UploadStateServiceEndpoint,fileRepoData:this.settings.FileRepoData});return new GenericUploader.Sender.FileRepoSender(b,f)};b.prototype.getFolderController=function(b,f,c){var a=this.getFolderSenderFactory(),e={maxFileNameLength:this.validationSettings.maxFileNameLength},g={fileNameIsTooLong:this.translations.FileNameIsTooLong},
e=(new FolderValidatorFactory).createFileValidatorWithLocalizedMessages(e,g);f=new FolderBuilder(f,e);return new FolderController(b.map(function(a){return new UploadControlPickerAdapter(a)}),a,f,c)};b.prototype.getFolderSenderFactory=function(){var b=new GenericUploader.Sender.FileRepoSenderForLocalFiles.Factory(browserSniffer,FileRepoErrorResponseTranslator({}),this.settings.FileRepoData);return new GenericUploader.Sender.FileRepoSenderForLocalFolders.Factory(b)};return b}();
